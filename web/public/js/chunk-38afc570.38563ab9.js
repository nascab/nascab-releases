(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38afc570"],{"32cd":function(t,e,o){o("f15b")},9453:function(t,e,o){o("14d9"),o("a434"),o("a9e3"),o("d3b7"),o("3ca3"),o("ddb0");var n=o("be3b"),i={name:"photo-bottom-select",props:{ignoreLivephoto:{default:0,type:Number},isInFolderView:{default:!1,type:Boolean},serverType:{default:"photo",type:String},showAddToAlbum:{default:!0,type:Boolean},showRemoveFromAlbum:{default:!1,type:Boolean},editMode:{default:!1,type:Boolean},ordinaryAlbumId:{default:"",type:String},faceId:{default:"",type:String},pathSep:{default:"\\",type:String},photoList:{type:Array,default:function(){return[]}},trashMode:!1},components:{ordinaryAlbumContent:function(){return Promise.all([o.e("chunk-0fb43524"),o.e("chunk-2d0e48df")]).then(o.bind(null,"a95d"))}},data:function(){return{showSelectAlbum:!1,selectedItemList:[],selectedList:[]}},mounted:function(){var e=this;this.$bus.$on("onTrashMsg",function(t){e.inOutTrashApi(1,!1,[t],function(){e.$bus.$emit("removeIndexById",t)})}),this.$bus.$on("onTrashAllMsg",function(){e.trashPhotos(1)}),this.$bus.$on("onDownloadSelectedListMsg",function(){e.downloadSelectedList()}),this.$bus.$on("onAddToAlbumMsg",function(){e.onAddToAlbum()}),this.$bus.$on("onRemoveFromAlbumMsg",function(){e.removeFromAlbum()}),this.$bus.$on("onDeleteFromDiskMsg",function(){e.deleteFromDisk()})},beforeDestroy:function(){this.$bus.$off("onTrashMsg"),this.$bus.$off("onTrashAllMsg"),this.$bus.$off("onDownloadSelectedListMsg"),this.$bus.$off("onAddToAlbumMsg"),this.$bus.$off("onRemoveFromAlbumMsg"),this.$bus.$off("onDeleteFromDiskMsg")},methods:{onClickDelete:function(){this.isInFolderView?this.deleteFromDisk():this.trashPhotos(1)},onAddToAlbum:function(){this.showSelectAlbum=!0},onSwitchToOtherPeople:function(){this.selectedList.length<1||this.$bus.$emit("onSwitchToOtherPeople",this.selectedList)},downloadSelectedList:function(){if(!(this.selectedItemList.length<1)){var t,e=[];for(t in this.selectedItemList,this.selectedItemList){var o=this.selectedItemList[t];this.selectedItemList[t].rawUrl?1==o.is_livephoto&&o.livephotoIndex&&o.livephotoIndex.videoIndex&&o.livephotoIndex.photoIndex?(e.push(o.livephotoIndex.videoIndex.rawUrl),e.push(o.livephotoIndex.photoIndex.rawUrl)):e.push(o.rawUrl):0==this.selectedItemList[t].is_file&&(o=n.a.getRawFileZipUrl(this.selectedItemList[t].path+this.pathSep+this.selectedItemList[t].filename,this.selectedItemList[t].filename),e.push(o))}var i=this;1<this.selectedItemList.length?this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("file.multiDownloadAlert"),function(){s()}):s()}function s(){i.downloadFile(e),i.$emit("onUnSelect")}},removeFromAlbum:function(){var e=this;this.selectedList.length<1||(this.albumId,this.faceId?this.$bus.$emit("onRemoveFromFace",this.selectedList):this.ordinaryAlbumId&&this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("photo.removeFromAlbum")+"?",function(){e.api.post("/api/ordinaryAlbumApi/deleteFromAlbum",{indexIdArr:e.selectedList,albumId:e.ordinaryAlbumId}).then(function(t){t.code||(e.showVsNotification(e.$t("photo.removeFromAlbumSuc")),e.$emit("onRemoveFromAlbum"),e.$emit("onUnSelect"))}).catch(function(t){})}))},onAddToAlbumSelect:function(){var t,e=this;!this.$refs.ordinaryAlbum||!(t=this.$refs.ordinaryAlbum.getSelectedAlbumId())||this.selectedList.length<1||this.api.post("/api/ordinaryAlbumApi/addToAlbum",{indexIdArr:this.selectedList,albumId:t}).then(function(t){t.code||(e.$emit("onUnSelect"),e.showSelectAlbum=!1,e.showVsNotification(e.$t("photo.addAlbumSuc")))}).catch(function(t){})},onUnSelect:function(){this.$emit("onUnSelect")},inOutApi:function(t,e){var o=this;this.inOutTrashApi(t,e,this.selectedList,function(){o.selectedList=[],o.selectedItemList=[],1==t?(o.$emit("onTrashInSuc"),o.showVsNotification(o.$t("file.putInTrashSuc")),o.$emit("onUnSelect")):(o.$emit("onTrashOutSuc"),o.showVsNotification(o.$t("file.putOutTrashSuc"))),e&&o.$emit("onNeedRefresh")})},inOutTrashApi:function(t,e,o,i){this.api.post("/api/fileApi/inOutTrash",{ids:o,trash:t}).then(function(t){t.code||i&&i()}).catch(function(t){})},restoreAll:function(t){var e=this;this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("file.doAllRestore"),function(){e.api.post("/api/photoApi/restoreTrashBinFiles",{}).then(function(t){t.code||e.showVsAlertDialog(e.$t("common.alert"),e.$t("common.operationSuccess")+":"+e.$t("common.checkAfter"),function(){e.$emit("onNeedRefresh")})}).catch(function(t){})})},deleteAll:function(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("file.doAllDelete"),function(t){var e=this;this.api.post("/api/photoApi/clearTrashBin",{putInSystemTrash:t}).then(function(t){t.code||e.showVsAlertDialog(e.$t("common.alert"),e.$t("common.operationSuccess")+":"+e.$t("common.checkAfter"),function(){e.$emit("onNeedRefresh")})}).catch(function(t){})},null,null,null,null,null,"linux"==localStorage.platform?null:{checkBoxContent:this.$t("putInSystemTrash"),isCheck:!0})},trashPhotos:function(t){this.selectedList.length<1&&this.trashMode?this.$emit("restoreAll"):this.inOutApi(t)},deleteApi:function(e,t){var o=this;this.ignoreLivephoto,this.api.post("/api/fileApi/deleteFromDisk",{serverType:this.serverType,ids:this.selectedList,putInSystemTrash:t?1:0,ignoreLivephoto:this.ignoreLivephoto}).then(function(t){t.code||(t=t.deletedIds,o.selectedList=[],o.selectedItemList=[],o.showVsNotification(t.length+o.$t("file.fileDeleteSuc")),o.$emit("onDeleteSuc",t),e&&o.showVsAlertDialog(o.$t("common.alert"),o.$t("common.operationSuccess")+":"+o.$t("common.checkAfter"),function(){o.$emit("onNeedRefresh")}))}).catch(function(t){})},deleteFromDisk:function(){var e=this;this.selectedList.length<1&&this.trashMode?this.$emit("deleteAll"):this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("common.deleteSure"),function(t){e.deleteApi(!0,t)},null,null,null,null,null,"linux"==localStorage.platform?null:{checkBoxContent:this.$t("putInSystemTrash"),isCheck:!0})},addSelected:function(t){this.selectedList.push(t.id),this.selectedItemList.push(t)},removeSelected:function(t){for(var e=this.selectedList.length;0<=e;e--)if(this.selectedList[e]==t){this.selectedList.splice(e,1),this.selectedItemList.splice(e,1);break}},clearSelected:function(){this.selectedList=[],this.selectedItemList=[]}}},s=(o("32cd"),o("2877")),s=Object(s.a)(i,function(){var e=this,t=e._self._c;return t("div",{staticClass:"bottom-select-root"},[e.trashMode?e._e():t("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticClass:"select-text"},[e._v(e._s(e.$t("common.selected"))+"ï¼š"+e._s(e.selectedList.length)+e._s(e.$t("photo.fileCount")))])]),t("div",{staticClass:"bottom-root"},[t("Tooltip",{attrs:{content:e.$t("common.delete"),disabled:e.isMobile}},[t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"red",iIcon:"md-trash"},on:{click:function(t){return e.onClickDelete()}}})],1),t("Tooltip",{attrs:{content:e.$t("photo.addToAlbum"),disabled:e.isMobile}},[e.showAddToAlbum?t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{iIcon:"md-add"},on:{click:e.onAddToAlbum}}):e._e()],1),t("Tooltip",{attrs:{content:e.$t("photo.changePeople"),disabled:e.isMobile}},[e.faceId?t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{iIcon:"md-swap"},on:{click:e.onSwitchToOtherPeople}}):e._e()],1),t("Tooltip",{attrs:{content:e.$t("photo.removeFromAlbum"),disabled:e.isMobile}},[e.showRemoveFromAlbum?t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{iIcon:"md-remove"},on:{click:e.removeFromAlbum}}):e._e()],1),t("Tooltip",{attrs:{content:e.$t("common.download"),disabled:e.isMobile}},[t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"whtie",iIcon:"md-download"},on:{click:function(t){return e.downloadSelectedList()}}})],1),t("Tooltip",{attrs:{content:e.$t("common.cancel"),disabled:e.isMobile}},[t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"white",iIcon:"md-close"},on:{click:e.onUnSelect}})],1)],1)]),e.trashMode?t("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between",width:"100%"}},[t("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center"}},[t("div",{staticClass:"left-root",on:{click:function(t){return e.trashPhotos(0)}}},[t("Tooltip",{attrs:{disabled:e.isMobile,content:e.selectedList.length<1?e.$t("file.restoreAll"):e.$t("file.restore")+":"+e.selectedList.length}},[t("my-btn-icon",{attrs:{type:"primary",iIcon:"md-refresh"}})],1)],1),t("div",{staticClass:"right-root",on:{click:function(t){return e.deleteFromDisk()}}},[t("Tooltip",{attrs:{disabled:e.isMobile,content:e.selectedList.length<1?e.$t("file.deleteAll"):e.$t("file.delete")+":"+e.selectedList.length}},[t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"red",iIcon:"md-trash"}})],1)],1)]),t("Tooltip",{attrs:{disabled:e.isMobile,content:e.$t("common.cancel")}},[0<e.selectedList.length?t("my-btn-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"white",iIcon:"md-close"},on:{click:e.onUnSelect}}):e._e()],1)],1):e._e(),t("vs-dialog",{attrs:{scroll:""},scopedSlots:e._u([{key:"header",fn:function(){return[t("h4",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.$t("photo.whichAlbumWanToAdd"))+" ")])]},proxy:!0},{key:"footer",fn:function(){return[t("vs-button",{attrs:{block:""},on:{click:e.onAddToAlbumSelect}},[e._v(" "+e._s(e.$t("common.select"))+" ")])]},proxy:!0}]),model:{value:e.showSelectAlbum,callback:function(t){e.showSelectAlbum=t},expression:"showSelectAlbum"}},[t("ordinary-album-content",{ref:"ordinaryAlbum",attrs:{selectMode:!0}})],1)],1)},[],!1,null,"0ded6d86",null);e.a=s.exports},f15b:function(t,e,o){}}]);