(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3e7b85e8"],{"02d0":function(t,a,s){s("f00c2")},"0c1e":function(t,a,s){s("aeef")},"1a8f":function(t,a,s){s.r(a);var e=s("7cfd"),i=(s("acd8"),s("e25e"),s("a434"),s("b64b"),s("5530")),o=(s("c975"),s("baa5"),s("14d9"),s("a9e3"),s("8a79"),s("ccdb")),n=s("e86f"),o={props:{type:{type:String,default:"create"},taskId:{type:Number,default:null}},components:{fileSelect:o.default,fileSelectBar:n.a},data:function(){return{showTargetPathList:[],taskType:"1",excludeValue:"",showAddExclude:!1,selectPathType:"source",showChooseFolder:!1,taskList:[],taskData:{excludeList:[],sourceList:[],targetPath:"",taskName:"",taskType:"1",taskDay:"",taskTime:"00:00:00"}}},mounted:function(){"update"==this.type&&this.getTaskById(),this.taskType},methods:{addExclude:function(){this.taskData.excludeList.push(this.excludeValue),this.showAddExclude=!1},deleteSource:function(t){this.taskData.sourceList.splice(t,1),this.setShowTargetPathList(),this.taskData.sourceList.length<1&&(this.taskData.targetPath="")},onChooseDate:function(t){this.taskData.taskDay=t},onChooseRate:function(t){(this.taskData.taskDay="1")==t&&(this.taskData.taskDay=""),this.taskType=t},add0:function(t){return t<10?"0"+t:t},getTaskById:function(){var a=this;this.api.post("/api/backupApi/getTaskById",{id:this.taskId}).then(function(t){a.taskData.sourceList=JSON.parse(t.data.source_list),t.data.exclude_list&&(a.taskData.excludeList=JSON.parse(t.data.exclude_list)),a.taskData.targetPath=t.data.target_path,a.taskData.taskName=t.data.task_name,1==parseInt(t.data.task_type)?a.taskData.taskDay=new Date(t.data.task_day):a.taskData.taskDay=t.data.task_day,a.taskData.taskType=t.data.task_type,a.taskType=t.data.task_type,a.taskData.taskTime=t.data.task_time,a.taskData,a.setShowTargetPathList()}).catch(function(t){})},onCreateTask:function(){var a=this;if(!this.taskData.taskName)return this.showVsNotification(this.$t("backup.pleaseInputTaskName"));if(!this.taskData.taskDay&&"2"!=this.taskType)return this.showVsNotification(this.$t("backup.pleaseChooseBackupDate"));if(!this.taskData.taskTime)return this.showVsNotification(this.$t("backup.pleaseChooseBackupTime"));if(this.taskData.sourceList.length<1)return this.showVsNotification(this.$t("backup.choosePathWantBakcup"));if(!this.taskData.targetPath)return this.showVsNotification(this.$t("backup.chooseTargetPath"));for(var t,s=0;s<this.taskData.sourceList.length;s++){if(this.taskData.sourceList[s]==this.taskData.targetPath)return this.showVsNotification(this.$t("backup.sourceAndTargetPathCantEqual"));if(-1!=this.taskData.targetPath.indexOf(this.taskData.sourceList[s]+"/"))return this.showVsNotification(this.$t("backup.sourceAndTargetPathCantEqual"));if(-1!=this.taskData.targetPath.indexOf(this.taskData.sourceList[s]+"\\"))return this.showVsNotification(this.$t("backup.sourceAndTargetPathCantEqual"))}1==parseInt(this.taskData.taskType)&&(t=new Date(this.taskData.taskDay),this.taskData.taskDay=t.getFullYear()+"-"+this.add0(t.getMonth()+1)+"-"+this.add0(t.getDate()));var e=Object(i.a)({type:this.type},this.taskData);"update"==this.type&&(e.id=this.taskId),this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("backup.youFileWillBeHere"),function(){a.api.post("/api/backupApi/createTask",e).then(function(t){t.code||(a.showVsNotification(a.$t("common.operationSuccess")),a.$emit("onClose"))}).catch(function(t){})},null,this.$t("common.iKnow"))},choosePath:function(t){this.selectPathType=t,this.showChooseFolder=!0},setShowTargetPathList:function(){if(this.showTargetPathList=[],this.taskData.targetPath)for(var t in this.taskData.sourceList){t=this.taskData.sourceList[t];-1!=t.indexOf("/")?this.showTargetPathList.push(this.taskData.targetPath+t.substring(t.lastIndexOf("/"))):-1!=t.indexOf("\\")&&this.showTargetPathList.push(this.taskData.targetPath+t.substring(t.lastIndexOf("\\")))}},onSelectPath:function(t){if((3==t.length||4==t.length)&&t.endsWith("\\"))return this.showVsNotification(this.$t("backup.cannotUseRoot"));if("source"==this.selectPathType){for(var a in this.taskData.sourceList)if(t==this.taskData.sourceList[a])return void(this.showChooseFolder=!1);this.taskData.sourceList.push(t),this.setShowTargetPathList()}else"target"==this.selectPathType&&(this.taskData.targetPath=t,this.setShowTargetPathList());this.showChooseFolder=!1}}},n=s("2877"),o=Object(n.a)(o,function(){var s=this,e=s._self._c;return e("div",[e("Form",{ref:"taskData",attrs:{prop:"taskName",model:s.taskData}},[e("FormItem",{attrs:{label:s.$t("backup.taskName")}},[e("Input",{attrs:{autocapitalize:"off",autocorrect:"off"},model:{value:s.taskData.taskName,callback:function(t){s.$set(s.taskData,"taskName",t)},expression:"taskData.taskName"}})],1),e("FormItem",{attrs:{label:s.$t("backup.backupRate")+":"}},[e("RadioGroup",{on:{"on-change":s.onChooseRate},model:{value:s.taskData.taskType,callback:function(t){s.$set(s.taskData,"taskType",t)},expression:"taskData.taskType"}},[e("Radio",{attrs:{label:"1"}},[s._v(s._s(s.$t("backup.oneTime")))]),e("Radio",{attrs:{label:"2"}},[s._v(s._s(s.$t("backup.everyDay")))]),e("Radio",{attrs:{label:"3"}},[s._v(s._s(s.$t("backup.everyWeek")))]),e("Radio",{attrs:{label:"4"}},[s._v(s._s(s.$t("backup.everyMonth")))])],1)],1),"1"==s.taskType?e("FormItem",{attrs:{label:s.$t("backup.backupDate")+":"}},[e("DatePicker",{attrs:{type:"date"},on:{"on-change":s.onChooseDate},model:{value:s.taskData.taskDay,callback:function(t){s.$set(s.taskData,"taskDay",t)},expression:"taskData.taskDay"}})],1):s._e(),"3"==s.taskType?e("FormItem",{attrs:{label:s.$t("backup.chooseWeek")+":"}},[e("RadioGroup",{model:{value:s.taskData.taskDay,callback:function(t){s.$set(s.taskData,"taskDay",t)},expression:"taskData.taskDay"}},[e("Radio",{attrs:{label:"1"}},[s._v(s._s(s.$t("common.monday")))]),e("Radio",{attrs:{label:"2"}},[s._v(s._s(s.$t("common.tuesday")))]),e("Radio",{attrs:{label:"3"}},[s._v(s._s(s.$t("common.wednesday")))]),e("Radio",{attrs:{label:"4"}},[s._v(s._s(s.$t("common.thursday")))]),e("Radio",{attrs:{label:"5"}},[s._v(s._s(s.$t("common.friday")))]),e("Radio",{attrs:{label:"6"}},[s._v(s._s(s.$t("common.saturday")))]),e("Radio",{attrs:{label:"7"}},[s._v(s._s(s.$t("common.sunday")))])],1)],1):s._e(),"4"==s.taskType?e("FormItem",{attrs:{label:s.$t("backup.whichDayInMonth")+"?"}},[e("Select",{model:{value:s.taskData.taskDay,callback:function(t){s.$set(s.taskData,"taskDay",t)},expression:"taskData.taskDay"}},[e("Option",{attrs:{value:"1"}},[s._v("1")]),e("Option",{attrs:{value:"2"}},[s._v("2")]),e("Option",{attrs:{value:"3"}},[s._v("3")]),e("Option",{attrs:{value:"4"}},[s._v("4")]),e("Option",{attrs:{value:"5"}},[s._v("5")]),e("Option",{attrs:{value:"6"}},[s._v("6")]),e("Option",{attrs:{value:"7"}},[s._v("7")]),e("Option",{attrs:{value:"8"}},[s._v("8")]),e("Option",{attrs:{value:"9"}},[s._v("9")]),e("Option",{attrs:{value:"10"}},[s._v("10")]),e("Option",{attrs:{value:"11"}},[s._v("11")]),e("Option",{attrs:{value:"12"}},[s._v("12")]),e("Option",{attrs:{value:"13"}},[s._v("13")]),e("Option",{attrs:{value:"14"}},[s._v("14")]),e("Option",{attrs:{value:"15"}},[s._v("15")]),e("Option",{attrs:{value:"16"}},[s._v("16")]),e("Option",{attrs:{value:"17"}},[s._v("17")]),e("Option",{attrs:{value:"18"}},[s._v("18")]),e("Option",{attrs:{value:"19"}},[s._v("19")]),e("Option",{attrs:{value:"20"}},[s._v("20")]),e("Option",{attrs:{value:"21"}},[s._v("21")]),e("Option",{attrs:{value:"22"}},[s._v("22")]),e("Option",{attrs:{value:"23"}},[s._v("23")]),e("Option",{attrs:{value:"24"}},[s._v("24")]),e("Option",{attrs:{value:"25"}},[s._v("25")]),e("Option",{attrs:{value:"26"}},[s._v("26")]),e("Option",{attrs:{value:"27"}},[s._v("27")]),e("Option",{attrs:{value:"28"}},[s._v("28")]),e("Option",{attrs:{value:"29"}},[s._v("29")]),e("Option",{attrs:{value:"30"}},[s._v("30")]),e("Option",{attrs:{value:"31"}},[s._v("31")])],1)],1):s._e(),e("FormItem",{attrs:{label:s.$t("backup.backupTime")+":"}},[e("TimePicker",{attrs:{type:"time"},model:{value:s.taskData.taskTime,callback:function(t){s.$set(s.taskData,"taskTime",t)},expression:"taskData.taskTime"}})],1),e("Divider",{staticStyle:{margin:"10px 0px"}}),e("a",{staticStyle:{"margin-bottom":"10px"},on:{click:function(t){return s.choosePath("source")}}},[s._v(s._s(s.$t("backup.choosePathWantBakcup")))]),0<s.taskData.sourceList.length?e("h4",{staticStyle:{"font-size":"12px"}},[s._v(s._s(s.$t("backup.backupPath"))+"：")]):s._e(),s._l(s.taskData.sourceList,function(t,a){return e("div",[e("Tag",{staticStyle:{"margin-top":"5px"},attrs:{closable:""},on:{"on-close":function(t){return s.deleteSource(a)}}},[s._v(" "+s._s(t)+" ")])],1)}),e("Divider",{staticStyle:{margin:"10px 0px"}}),e("a",{staticStyle:{"margin-bottom":"10px"},on:{click:function(t){return s.choosePath("target")}}},[s._v(s._s(s.$t("backup.chooseTargetPath")))]),e("h4",{staticStyle:{color:"red","font-size":"12px"}},[s._v(s._s(s.$t("backup.youFileWillBeHere")))]),s.taskData.targetPath?e("h4",{staticStyle:{"margin-top":"5px","font-size":"12px"}},[s._v(s._s(s.$t("backup.youFileWillBeHereB")))]):s._e(),s.taskData.targetPath&&s.showTargetPathList.length<1?e("Tag",{staticStyle:{"margin-top":"5px"}},[s._v(" "+s._s(s.taskData.targetPath))]):s._l(s.showTargetPathList,function(t,a){return e("div",[s.taskData.targetPath?e("Tag",{staticStyle:{"margin-top":"5px"}},[s._v(s._s(t))]):s._e()],1)}),e("Divider",{staticStyle:{margin:"10px 0px"}}),e("a",{staticStyle:{"margin-bottom":"10px"},on:{click:function(t){s.showAddExclude=!0}}},[s._v(s._s(s.$t("backup.addExclude")))]),0<s.taskData.excludeList.length?e("h4",[s._v(s._s(s.$t("backup.excludeList"))+"：")]):s._e(),s._l(s.taskData.excludeList,function(t,a){return e("Tag",{staticStyle:{"margin-top":"5px"},attrs:{closable:""},on:{"on-close":function(t){return s.taskData.excludeList.splice(a,1)}}},[s._v(" "+s._s(t)+" ")])}),e("Divider",{staticStyle:{margin:"10px 0px"}})],2),e("vs-dialog",{attrs:{"prevent-close":"",scroll:"","full-screen":s.isMobile},scopedSlots:s._u([{key:"header",fn:function(){return[e("h4",[s._v(" "+s._s(s.$t("file.chooseFolder")+"["+s.$t("file.doubleClickFolderEnter")+"]")+" ")])]},proxy:!0},{key:"footer",fn:function(){return[e("file-select-bar",{on:{back:function(t){return s.$refs.fileSelector.goBack()},select:function(t){return s.$refs.fileSelector.onSelect()},create:function(t){return s.$refs.fileSelector.createNewFolder(t)}}})]},proxy:!0}]),model:{value:s.showChooseFolder,callback:function(t){s.showChooseFolder=t},expression:"showChooseFolder"}},[s.showChooseFolder?e("file-select",{ref:"fileSelector",attrs:{parent:"root",type:2},on:{onSelect:s.onSelectPath,onCancel:function(t){s.showChooseFolder=!1}}}):s._e()],1),e("vs-dialog",{scopedSlots:s._u([{key:"header",fn:function(){return[e("h4",[s._v(" "+s._s(s.$t("backup.addExclude"))+" ")])]},proxy:!0}]),model:{value:s.showAddExclude,callback:function(t){s.showAddExclude=t},expression:"showAddExclude"}},[e("div",{staticStyle:{"max-width":"500px"}},[s._v(s._s(s.$t("backup.excludeExample")))]),s.showAddExclude?e("Input",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{autocapitalize:"off",autocorrect:"off"},model:{value:s.excludeValue,callback:function(t){s.excludeValue=t},expression:"excludeValue"}}):s._e(),e("Button",{staticStyle:{"border-radius":"20px"},attrs:{type:"primary"},on:{click:s.addExclude}},[s._v(" "+s._s(s.$t("common.ok"))+" ")])],1)],1)},[],!1,null,null,null).exports,c=s("25e9"),o={props:{taskType:{default:"",type:String}},computed:{},components:{myHeader:e.a,addTask:o,backupRecords:c.a},data:function(){return{intervalGetRunningTask:null,loading:!1,selectedTask:null,showRecords:!1,getListInterval:null,selectId:null,operationType:"create",showAdd:!1,taskList:[]}},created:function(){var t=this;this.intervalGetRunningTask=setInterval(function(){t.getRunningTaskList()},5e3)},beforeDestroy:function(){this.intervalGetRunningTask&&clearInterval(this.intervalGetRunningTask)},mounted:function(){this.taskType,this.getAllTask()},unmounted:function(){},methods:{showRecordsModal:function(t){this.selectedTask=t,this.showRecords=!0},exeTask:function(t,a){var s=this,e=this.$t("backup.ifRunTask");"stop"==a&&(e=this.$t("backup.ifStopTask")),this.showVsConfirmDialog(this.$t("common.confirm"),e,function(){s.api.post("/api/backupApi/operationTask",{type:a,taskId:t}).then(function(t){s.showVsNotification(s.$t("backup.orderSent")),s.getAllTask()}).catch(function(t){s.showVsNotification(s.$t("common.operationFail"))})})},onAddFinish:function(){this.showAdd=!1,this.getAllTask()},editTask:function(t){this.operationType="update",this.selectId=t.id,this.showAdd=!0},createTask:function(){this.operationType="create",this.showAdd=!0},onCreateTask:function(){this.$refs.addTask.onCreateTask("create")},dealTaskList:function(){for(var t=0;t<this.taskList.length;t++)this.taskList[t].source_list=JSON.parse(this.taskList[t].source_list),this.taskList[t].exclude_list=JSON.parse(this.taskList[t].exclude_list),1==parseInt(this.taskList[t].task_type)?this.taskList[t].task_type_str=this.$t("backup.oneTime"):2==parseInt(this.taskList[t].task_type)?this.taskList[t].task_type_str=this.$t("backup.everyDay"):3==parseInt(this.taskList[t].task_type)?(this.taskList[t].task_type_str=this.$t("backup.everyWeek"),"1"==this.taskList[t].task_day?this.taskList[t].task_day_str=this.$t("common.monday"):"2"==this.taskList[t].task_day?this.taskList[t].task_day_str=this.$t("common.tuesday"):"3"==this.taskList[t].task_day?this.taskList[t].task_day_str=this.$t("common.wednesday"):"4"==this.taskList[t].task_day?this.taskList[t].task_day_str=this.$t("common.thursday"):"5"==this.taskList[t].task_day?this.taskList[t].task_day_str=this.$t("common.friday"):"6"==this.taskList[t].task_day?this.taskList[t].task_day_str=this.$t("common.saturday"):"7"==this.taskList[t].task_day&&(this.taskList[t].task_day_str=this.$t("common.sunday"))):4==parseInt(this.taskList[t].task_type)&&(this.taskList[t].task_type_str=this.$t("backup.everyMonth"))},getRunningTaskList:function(){var o=this;this.api.post("/api/backupApi/getRunningTaskList",{hideLoading:!0}).then(function(t){var a=t.data;if(o.taskList){for(var s in o.taskList)for(var e in a)a[e].task_id==o.taskList[s].id&&(o.taskList[s].lastRecord=a[e]);if(a.length<1)for(var i in o.taskList)if("running"==o.taskList[i].lastRecord.status||"waiting"==o.taskList[i].lastRecord.status)return void o.getAllTask()}}).catch(function(t){})},getAllTask:function(){var a=this;this.loading=!0,this.api.post("/api/backupApi/getAllTask",{taskType:this.taskType}).then(function(t){a.taskList=t.data,a.dealTaskList(),a.loading=!1}).catch(function(t){a.loading=!1})},deleteTask:function(s){var e=this;this.showVsConfirmDialog(this.$t("common.confirm"),"["+s.task_name+"]"+this.$t("common.deleteSure"),function(){e.api.post("/api/backupApi/deleteTask",{id:s.id}).then(function(t){e.showVsNotification(e.$t("common.operationSuccess"));for(var a=0;a<e.taskList.length;a++)e.taskList[a].id==s.id&&e.taskList.splice(a,1)}).catch(function(t){e.showVsNotification(e.$t("common.operationFail"))})})}}};s("9289");c=Object(n.a)(o,function(){var s=this,e=s._self._c;return e("div",{staticClass:"root-wraper"},[!s.loading&&s.taskList.length<1?e("my-nodata",{staticStyle:{position:"absolute",width:"100%","margin-top":"150px"},attrs:{title:s.$t("backup.backupDesc"),btnTitle:s.$t("backup.createTask")},on:{onBtnClick:s.createTask}}):s._e(),0<s.taskList.length?e("div",{staticClass:"top-root"},[e("my-btn",{staticStyle:{"margin-right":"10px"},attrs:{title:s.$t("backup.createTask")},on:{click:function(t){return s.createTask()}}}),e("my-btn",{attrs:{type:"white",title:s.$t("backup.refreshStatus")},on:{click:function(t){return s.getAllTask()}}})],1):s._e(),e("div",{staticStyle:{width:"100%",height:"100%",display:"flex","flex-direction":"row",overflow:"hidden","padding-top":"60px"}},[e("div",{ref:"listWrapper",staticClass:"task-list"},s._l(s.taskList,function(a){return e("Card",{staticClass:"card-root",attrs:{shadow:"",border:!1}},[e("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center","justify-content":"space-between"}},[e("div",{staticClass:"card-item"},[e("h4",[s._v(s._s(s.$t("backup.taskName"))+":")]),e("h4",{staticStyle:{"margin-left":"10px"}},[s._v(s._s(a.task_name))])]),e("div",{staticStyle:{"flex-shrink":"0"}},[e("a",{staticStyle:{"margin-right":"10px"},on:{click:function(t){return s.showRecordsModal(a)}}},[s._v(s._s(s.$t("backup.records")))]),e("a",{staticStyle:{"margin-right":"10px"},on:{click:function(t){return s.editTask(a)}}},[s._v(s._s(s.$t("common.edit")))]),e("a",{on:{click:function(t){return s.deleteTask(a)}}},[s._v(s._s(s.$t("common.delete")))])])]),e("div",{staticStyle:{width:"100%",height:"100%",display:"flex","flex-direction":"column","align-items":"flex-start"}},[e("div",{staticClass:"card-item"},[e("h4",[s._v(s._s(s.$t("backup.currentStat"))+" ")]),a.lastRecord&&"running"==a.lastRecord.status?e("p",{staticClass:"item-content"},[s._v(": "+s._s(s.$t("backup.running"))+" ")]):s._e(),a.lastRecord&&"running"==a.lastRecord.status&&a.lastRecord.copy_size?e("div",[a.lastRecord.copy_size/1024<=1024?e("span",{staticClass:"item-content"},[s._v(s._s(parseInt(a.lastRecord.copy_size/1024))+"KB")]):a.lastRecord.copy_size/1024/1024<=1024?e("span",{staticClass:"item-content"},[s._v(s._s(parseInt(a.lastRecord.copy_size/1024/1024))+"MB")]):1024<a.lastRecord.copy_size/1024/1024?e("span",{staticClass:"item-content"},[s._v(" "+s._s(parseFloat(parseInt(a.lastRecord.copy_size/1024/1024/1024*100)/100))+"GB ")]):s._e(),s._v(" "+s._s(s.$t("backup.copied"))+" ")]):s._e(),a.lastRecord&&"stop"==a.lastRecord.status?e("p",{staticClass:"item-content"},[s._v(": "+s._s(s.$t("backup.paused"))+" ")]):s._e(),a.lastRecord&&"waiting"==a.lastRecord.status?e("p",{staticClass:"item-content"},[s._v(": "+s._s(s.$t("backup.waiting"))+" ")]):s._e(),a.lastRecord&&"done"!=a.lastRecord.status?s._e():e("p",{staticClass:"item-content"},[s._v(": "+s._s(s.$t("backup.noRunning"))+" ")]),a.lastRecord&&"running"==a.lastRecord.status?e("Icon",{attrs:{type:"ios-pause",size:"24"},on:{click:function(t){return s.exeTask(a.id,"stop")}}}):s._e(),a.lastRecord&&"done"!=a.lastRecord.status&&"stop"!=a.lastRecord.status?s._e():e("Icon",{attrs:{type:"ios-play",size:"24"},on:{click:function(t){return s.exeTask(a.id,"start")}}})],1),e("div",{staticClass:"card-item"},[e("h4",{staticStyle:{"margin-right":"10px"}},[s._v(s._s(s.$t("backup.backupRate"))+":")]),e("span",{staticClass:"item-content"},[s._v(s._s(a.task_type_str))]),"1"==a.task_type?e("p",{staticClass:"item-content"},[s._v(": "+s._s(a.task_day)+" "+s._s(a.task_time)+" ")]):s._e(),"2"==a.task_type?e("p",{staticClass:"item-content"},[s._v(": "+s._s(a.task_time))]):s._e(),"3"==a.task_type?e("p",{staticClass:"item-content"},[s._v(" : "+s._s(a.task_day_str)+" "+s._s(a.task_time)+" ")]):s._e(),"4"==a.task_type?e("p",{staticClass:"item-content"},[s._v(" "+s._s(a.task_day)+s._s(s.$t("common.day"))+" : "+s._s(a.task_time)+" ")]):s._e()]),e("div",{staticClass:"card-item"},[e("h4",[s._v(s._s(s.$t("backup.backupPath"))+":")]),s._l(a.source_list,function(t,a){return e("div",[e("Tag",{staticClass:"item-content",staticStyle:{"margin-left":"10px","background-color":"white"}},[s._v(" "+s._s(t)+" ")])],1)})],2),e("div",{staticClass:"card-item"},[e("h4",{staticStyle:{"margin-right":"10px"}},[s._v(s._s(s.$t("backup.targetPath"))+":")]),e("Tag",{staticClass:"item-content",staticStyle:{"background-color":"white"}},[s._v(s._s(a.target_path))])],1),a.exclude_list&&0<a.exclude_list.length?e("div",{staticClass:"card-item"},[e("h4",[s._v(s._s(s.$t("backup.excludeList"))+":")]),s._l(a.exclude_list,function(t,a){return e("div",[e("Tag",{staticClass:"item-content",staticStyle:{"margin-left":"10px","background-color":"white"}},[s._v(" "+s._s(t)+" ")])],1)})],2):s._e(),a.lastRecord&&"done"==a.lastRecord.status?e("div",{staticClass:"card-item"},[e("h4",{staticStyle:{"margin-right":"10px"}},[s._v(s._s(s.$t("backup.lastBackupStat"))+":")]),0==a.lastRecord.fail_count?e("span",{staticClass:"icon-main-color",staticStyle:{"margin-right":"10px"}},[s._v(s._s(s.$t("backup.backupSuccess")))]):s._e(),e("p",{staticClass:"item-content"},[s._v(" "+s._s(s.$t("backup.failCount"))+":"+s._s(a.lastRecord.fail_count)+" ")])]):s._e(),a.lastRecord&&"done"==a.lastRecord.status?e("div",{staticClass:"card-item"},[e("h4",{staticStyle:{"margin-right":"10px"}},[s._v(s._s(s.$t("backup.lastBackupTime"))+":")]),e("p",{staticClass:"item-content"},[s._v(" "+s._s(a.lastRecord&&a.lastRecord.end_time?a.lastRecord.end_time:"/")+" ")])]):s._e()])])}),1)]),e("Modal",{attrs:{"footer-hide":""},scopedSlots:s._u([{key:"header",fn:function(){return[e("h4",{staticStyle:{"font-size":"16px"}},[s._v(" "+s._s("update"==s.operationType?s.$t("backup.updateTask"):s.$t("backup.createTask"))+" ")])]},proxy:!0}]),model:{value:s.showAdd,callback:function(t){s.showAdd=t},expression:"showAdd"}},[s.showAdd?e("add-task",{ref:"addTask",attrs:{type:s.operationType,taskId:s.selectId},on:{onClose:s.onAddFinish}}):s._e(),e("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[e("Button",{staticStyle:{"border-radius":"20px"},attrs:{type:"primary"},on:{click:s.onCreateTask}},[s._v(" "+s._s("update"==s.operationType?s.$t("backup.updateTask"):s.$t("backup.createTask"))+" ")])],1)],1),e("Modal",{attrs:{"footer-hide":""},scopedSlots:s._u([{key:"header",fn:function(){return[e("h4",{staticStyle:{"font-size":"16px"}},[s._v(" "+s._s(s.selectedTask?s.selectedTask.task_name+" "+s.$t("backup.records"):s.$t("backup.records"))+" ")])]},proxy:!0}]),model:{value:s.showRecords,callback:function(t){s.showRecords=t},expression:"showRecords"}},[s.showRecords?e("backup-records",{ref:"taskRecord",attrs:{taskObj:s.selectedTask}}):s._e()],1)],1)},[],!1,null,"68e673c2",null).exports,o={components:{myHeader:e.a,backupList0:c,backupList1:c,backupList2:c,backupList3:c,backupList4:c},data:function(){return{sideOptionList:[{id:"0",title:this.$t("common.all"),font:"nasIcons icon-backup"},{id:"1",title:this.$t("backup.oneTime"),font:"nasIcons icon-backup"},{id:"2",title:this.$t("backup.everyDay"),font:"nasIcons icon-backup"},{id:"3",title:this.$t("backup.everyWeek"),font:"nasIcons icon-backup"},{id:"4",title:this.$t("backup.everyMonth"),font:"nasIcons icon-backup"}],selectMenu:"0"}},mounted:function(){},beforeDestroy:function(){},methods:{setLeftMenuId:function(t){this.selectMenu=t.id}}},s("02d0"),e=Object(n.a)(o,function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup-root"},[a("my-bg"),t._m(0),a("div",{staticClass:"nas-mobile-none"},[a("my-header")],1),a("div",{staticClass:"main-layout nas-padding-right-zero"},[a("div",{staticClass:"sidebar-root"},[a("my-sidebar",{ref:"sidebar",attrs:{name:"backup",optionList:t.sideOptionList},on:{onItemClick:t.setLeftMenuId}})],1),a("div",{staticClass:"sidebar-mobile-root"},[a("my-sidebar-mobile",{ref:"sidebarMobile",attrs:{name:"backup",optionList:t.sideOptionList},on:{onItemClick:t.setLeftMenuId}})],1),a("div",{staticClass:"backup-list-root"},["0"==t.selectMenu?a("backup-list-0",{attrs:{taskType:"0"}}):t._e(),"1"==t.selectMenu?a("backup-list-1",{attrs:{taskType:"1"}}):t._e(),"2"==t.selectMenu?a("backup-list-2",{attrs:{taskType:"2"}}):t._e(),"3"==t.selectMenu?a("backup-list-3",{attrs:{taskType:"3"}}):t._e(),"4"==t.selectMenu?a("backup-list-4",{attrs:{taskType:"4"}}):t._e()],1)])],1)},[function(){var t=this._self._c;return t("div",{staticClass:"nas-mobile-none"},[t("p",{staticClass:"my-header-position"})])}],!1,null,"66c6b238",null);a.default=e.exports},"25e9":function(t,a,s){s("acd8"),s("e25e");var e={props:{taskObj:{default:null,type:Object}},computed:{},components:{},data:function(){return{loading:!1,showMsg:!1,recordList:[]}},mounted:function(){this.getAllTaskRecords()},methods:{getRecordMsg:function(t,a){var s=this;this.api.post("/api/backupApi/getTaskRecordMsg",{recordId:t.id}).then(function(t){s.recordList[a].errorList=t.data,s.$forceUpdate()}).catch(function(t){})},getAllTaskRecords:function(){var a=this;this.loading=!0,this.api.post("/api/backupApi/getTaskRecords",{id:this.taskObj.id}).then(function(t){a.recordList=t.data,a.loading=!1}).catch(function(t){a.loading=!1})}}},s=(s("0c1e"),s("2877")),s=Object(s.a)(e,function(){var e=this,i=e._self._c;return i("div",[e.recordList.length<1&&!e.loading?i("p",[e._v(e._s(e.$t("bakcup.noRecords")))]):e._e(),i("div",{staticClass:"root"},e._l(e.recordList,function(a,s){return i("Card",{staticClass:"card-root",attrs:{shadow:"",border:!1}},[i("div",{staticStyle:{width:"100%",height:"100%",display:"flex","flex-direction":"column","align-items":"flex-start"}},[i("div",{staticClass:"card-item"},[i("h4",[e._v(e._s(e.$t("backup.startTime"))+": "+e._s(a.start_time))])]),i("div",{staticClass:"card-item"},[i("h4",[e._v(e._s(e.$t("backup.endTime"))+": "+e._s(a.end_time))])]),i("div",{staticClass:"card-item"},[i("h4",[e._v(e._s(e.$t("backup.copySize"))+": "),a.copy_size/1024<=1024?i("span",[e._v(e._s(parseInt(a.copy_size/1024))+"KB")]):a.copy_size/1024/1024<=1024?i("span",[e._v(e._s(parseInt(a.copy_size/1024/1024))+"MB")]):1024<a.copy_size/1024/1024?i("span",[e._v(" "+e._s(parseFloat(parseInt(a.copy_size/1024/1024/1024*100)/100))+"GB ")]):e._e()])]),i("div",{staticClass:"card-item"},[i("h4",[e._v(e._s(e.$t("backup.copyCount"))+": "+e._s(a.copy_count))])]),i("div",{staticClass:"card-item"},[i("h4",[e._v(e._s(e.$t("backup.excludeCount"))+": "+e._s(a.exclude_count))])]),i("div",{staticClass:"card-item",on:{click:function(t){return e.getRecordMsg(a,s)}}},[a.fail_count?i("a",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("backup.failCount"))+": "+e._s(a.fail_count))]):i("h4",[e._v(e._s(e.$t("backup.failCount"))+": "+e._s(a.fail_count))])]),e._l(a.errorList,function(t){return a.errorList&&0<a.errorList.length?i("div",{staticClass:"card-item",staticStyle:{width:"100%"}},[i("div",{staticStyle:{width:"100%",height:"1px","background-color":"#d8d8d8"}}),i("p",{staticStyle:{color:"red","word-break":"break-all","margin-top":"5px","margin-bottom":"5px"}},[e._v(" "+e._s(t.content)+" ")])]):e._e()})],2)])}),1)])},[],!1,null,"a8bcb004",null);a.a=s.exports},"2e34":function(t,a,s){},9289:function(t,a,s){s("2e34")},aeef:function(t,a,s){},f00c2:function(t,a,s){}}]);