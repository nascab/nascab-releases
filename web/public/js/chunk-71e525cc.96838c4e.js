(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-71e525cc"],{1291:function(t,e,i){},"12be":function(t,e,i){},"3ecc":function(t,e,i){"use strict";i.r(e);i("14d9");var s=i("7cfd"),a=i("0714"),o=i("1ee4"),r=(i("d930"),{components:{},computed:{},data(){return{page:1,pageSize:10,currentType:"",recordLevel:1,hasMore:!0,searchStr:"",isLoading:!1,recordList:[],typeMenuOptionList:[{title:this.$t("common.all"),id:"all"},{title:this.$t("file.copy"),id:"copy"},{title:this.$t("file.cut"),id:"cut"},{title:this.$t("upload.rename"),id:"rename"},{title:this.$t("file.delete"),id:"delete"},{title:this.$t("file.zip"),id:"zip"},{title:this.$t("file.unzip"),id:"unzip"},{title:this.$t("upload.upload"),id:"upload"}]}},mounted(){this.clickType("")},beforeDestroy(){},methods:{clearLog(){this.showVsConfirmDialog(this.$t("common.alert"),this.$t("file.sureClearLog"),()=>{this.clearRecord()},null,this.$t("common.delete"),this.$t("common.cancel"),0,!0)},onPageScroll(t){this.dealOnPageScroll(t,()=>{this.loadNextPage()})},onSearch(t){this.searchStr=t,this.clickType(this.currentType)},loadNextPage(){this.getRecordList(this.page+1)},clickType(t){this.recordList=[];this.currentType=t,this.page=1,this.currentType="all"==t?"":t,this.recordLevel=1,this.hasMore=!0,this.isLoading=!1,this.getRecordList(this.page)},clearRecord(){this.api.post("/api/file/clearOperationRecord",{}).then(t=>{t.code||(this.showVsAlertDialog(this.$t("common.alert"),this.$t("common.operationSuccess")),this.getRecordList(1))}).catch(t=>{this.isLoading=!1})},getRecordList(e){var t;!this.isLoading&&this.hasMore&&(this.isLoading=!0,t={page:e,pageSize:this.pageSize,level:this.recordLevel},this.currentType&&(t.type=this.currentType),this.searchStr&&(t.searchStr=this.searchStr),this.api.post("/api/file/getOperationRecord",t).then(t=>{this.isLoading=!1,t.code||(this.page=e,t.data?(1==this.page?this.recordList=t.data:this.recordList=this.recordList.concat(t.data),this.hasMore=t.data.length>=this.pageSize):this.hasMore=!1)}).catch(t=>{this.isLoading=!1}))},getStateStr(t){return"1"==t?this.$t("file.stateStarted"):"2"==t?this.$t("common.operationSuccess"):"3"==t?this.$t("common.operationFail"):"4"==t?this.$t("file.stateStoped"):void 0},getTypeStr(t){return"copy"==t?this.$t("file.copy"):"cut"==t?this.$t("file.cut"):"rename"==t?this.$t("upload.rename"):"zip"==t?this.$t("file.zip"):"unzip"==t?this.$t("file.unzip"):"delete"==t?this.$t("file.delete"):"upload"==t?this.$t("upload.upload"):void 0}}}),l=(i("4e5b"),i("2877")),r=Object(l.a)(r,function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"right-root"},[s("div",{staticClass:"operation-header"},[s("my-menu-select",{staticStyle:{"flex-shrink":"0","margin-right":"20px"},attrs:{shrinkModeTh:650,optionList:i.typeMenuOptionList},on:{onItemClick:i.clickType}}),s("div",{staticClass:"flex-row"},[1==i.$store.state.currentUser.is_admin?s("Icon",{staticStyle:{"margin-right":"10px",cursor:"pointer"},attrs:{color:"#999",type:"md-trash",size:"30"},on:{click:i.clearLog}}):i._e(),s("my-search",{attrs:{shrinkModeTh:800,placeholder:i.$t("file.recordSearchPlaceholder")},on:{onSearch:i.onSearch}})],1)],1),i.recordList.length<1?s("my-nodata",{staticStyle:{position:"absolute",width:"100%","margin-top":"150px"},attrs:{title:i.$t("common.noMore")}}):s("div",{staticStyle:{width:"100%",height:"100%","padding-top":"60px",overflow:"hidden"}},[s("div",{staticStyle:{"padding-bottom":"15px",overflow:"auto",height:"100%",width:"100%"},on:{scroll:i.onPageScroll}},[i._l(i.recordList,function(t,e){return s("Card",{staticClass:"card-root"},[s("div",{staticClass:"item-row"},[s("b",{staticClass:"item-title"},[i._v(i._s(i.$t("file.operationType"))+":")]),s("p",{staticClass:"item-text"},[i._v(i._s(i.getTypeStr(t.type))+" - "+i._s(i.getStateStr(t.state)))])]),s("div",{staticClass:"item-row"},[s("b",{staticClass:"item-title"},[i._v(i._s(i.$t("file.operator"))+":")]),s("p",{staticClass:"item-text"},[i._v(i._s(t.username))])]),"3"==t.state?s("div",{staticClass:"item-row"},[s("b",{staticClass:"item-title"},[i._v(i._s(i.$t("file.failReason"))+":")]),s("p",{staticClass:"item-text"},[i._v(i._s(t.remark))])]):i._e(),"delete"!=t.type&&t.source_path?s("div",{staticClass:"item-row"},[s("b",{staticClass:"item-title"},[i._v(i._s(i.$t("file.sourcePath"))+":")]),s("p",{staticClass:"item-text"},[i._v(i._s(t.source_path))])]):i._e(),s("div",{staticClass:"item-row"},[s("b",{staticClass:"item-title"},[i._v(i._s(i.$t("file.targetPath"))+":")]),s("p",{staticClass:"item-text"},[i._v(i._s(t.target_path))])]),s("div",{staticClass:"item-row"},[s("b",{staticClass:"item-title"},[i._v(i._s(i.$t("common.startTime"))+":")]),s("p",{staticClass:"item-text"},[i._v(i._s(i.utils.formatTimeStamp(t.create_time)))])])])}),s("div",{staticStyle:{display:"flex","justify-content":"center",width:"100%","flex-direction":"column","align-items":"center"}},[i.hasMore&&0<i.recordList.length?s("Button",{staticStyle:{width:"250px","margin-top":"30px",height:"45px","border-radius":"20px"},attrs:{type:"default"},on:{click:function(t){return i.loadNextPage()}}},[i._v(i._s(i.$t("common.loadmore")))]):i._e(),i.isLoading?s("Spin",{staticStyle:{"margin-top":"30px"},attrs:{size:"large"}}):i._e(),i.isLoading||i.hasMore?i._e():s("span",{staticStyle:{"margin-top":"30px"}},[i._v(i._s(i.$t("common.noMore")))]),s("div",{staticStyle:{height:"50px"}})],1)],2)])],1)},[],!1,null,"8708922a",null).exports,n=i("e86f"),c=i("ccdb"),n={props:{hasPadding:{default:!1,type:Boolean}},mounted(){this.getPathList()},components:{fileSelectBar:n.a,fileSelect:c.default},data(){return{canAddPath:!0,showChooseFolder:!1,pathList:[],selectedItem:{},publicUserName:"nascabPublicUser"}},computed:{},methods:{onFolderBack(){this.$refs.fileSelector&&this.$refs.fileSelector.goBack()},onSelectPath(t){this.addPathReq(t),this.showChooseFolder=!1},getPathList(){this.api.post("/api/usersApi/getUserPower",{username:this.publicUserName}).then(t=>{t.code||(this.pathList=t.userPower)}).catch(t=>{this.showVsNotification(this.$t("common.getFail"))})},selectPath(){this.showChooseFolder=!0},addPathReq(t){this.api.post("/api/usersApi/setUserPower",{username:this.publicUserName,path:t,server_type:"folder",power_get:1}).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),this.getPathList())}).catch(t=>{})},deletePath(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("setting.ifDeletePath"),()=>{this.api.post("/api/usersApi/cancelUserPathPower",{username:this.publicUserName,path:t.path,server_type:"folder"}).then(t=>{t.code||this.getPathList()}).catch(t=>{})})}}};i("c95e");var c=Object(l.a)(n,function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"source-setting-root",class:{"setting-padding":i.hasPadding}},[s("div",{staticClass:"content-root"},[s("div",{staticClass:"flex-row",staticStyle:{"justify-content":"right","flex-wrap":"wrap"}},[s("p",{staticClass:"add-title"},[i._v(i._s(i.$t("file.shareFolderAlert")))])]),s("Divider"),0<i.pathList.length?s("div",{staticStyle:{width:"100%",overflow:"auto",height:"100%"}},[i._l(i.pathList,function(e,t){return s("Card",{staticStyle:{"margin-bottom":"20px",width:"100%","border-radius":"10px"}},[s("div",{staticClass:"item-title"},[s("span",{staticClass:"item-label"},[i._v(i._s(i.$t("file.sharePath"))+" : ")]),i._v(i._s(e.path)+" ")]),s("div",{staticClass:"item-title"},[s("span",{staticClass:"item-label"},[i._v(i._s(i.$t("common.state"))+" : ")]),s("span",{staticStyle:{"font-weight":"bold"},style:{color:0==e.exist?"#DE4545":"#386DF2"}},[i._v(i._s(0==e.exist?i.$t("common.unavailable"):i.$t("common.available")))]),0==e.exist?s("a",{staticStyle:{"margin-left":"30px"},on:{click:function(t){return i.onShowRelocate(e)}}},[i._v(i._s(i.$t("setting.source.directoryMoved")))]):i._e()]),s("span",{staticClass:"nasIcons icon-trash",staticStyle:{position:"absolute",right:"10px",bottom:"10px","font-size":"20px",cursor:"pointer",color:"#99AABF"},on:{click:function(t){return i.deletePath(e)}}})])}),s("Card",{staticStyle:{"margin-bottom":"20px",width:"100%","border-radius":"10px",cursor:"pointer"}},[s("div",{staticStyle:{width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center","padding-left":"30px","padding-right":"30px"},on:{click:i.selectPath}},[s("span",{staticClass:"nasIcons icon-add-album",staticStyle:{color:"#386DF2","font-size":"50px","margin-right":"20px"}}),s("p",{staticClass:"add-text"},[i._v(i._s(i.$t("file.addShareFoler")))])])])],2):i._e()],1),i.pathList.length<1?s("my-nodata",{staticStyle:{position:"absolute",width:"100%","margin-top":"150px"},attrs:{title:i.$t("file.shareFolderAlert"),btnTitle:i.$t("file.addShareFoler")},on:{onBtnClick:i.selectPath}}):i._e(),s("vs-dialog",{attrs:{"prevent-close":"",scroll:"","full-screen":i.isMobile},scopedSlots:i._u([{key:"header",fn:function(){return[s("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s(i.$t("file.chooseFolder")+"["+i.$t("file.doubleClickFolderEnter")+"]")+" ")])]},proxy:!0},{key:"footer",fn:function(){return[s("file-select-bar",{on:{back:function(t){return i.$refs.fileSelector.goBack()},select:function(t){return i.$refs.fileSelector.onSelect()},create:function(t){return i.$refs.fileSelector.createNewFolder(t)}}})]},proxy:!0}]),model:{value:i.showChooseFolder,callback:function(t){i.showChooseFolder=t},expression:"showChooseFolder"}},[i.showChooseFolder?s("file-select",{ref:"fileSelector",attrs:{parent:"root",type:2},on:{cancel:function(t){i.showChooseFolder=!1},onSelect:i.onSelectPath,onCancel:function(t){i.showChooseFolder=!1}}}):i._e()],1)],1)},[],!1,null,"674f66ce",null).exports,h=i("be3b"),n=(i("aa62"),i("7ce8")),d=i("0be9"),n={props:{hasPadding:{default:!1,type:Boolean}},mounted(){this.getShareConfig()},components:{filesQuickShareAdd:n.a,filesQuickShareShowing:d.a},data(){return{showUrl:"",shareServerUrl:"",pathList:[],publicUserName:"nascabPublicUser"}},computed:{},methods:{showAddShare(){this.$refs.shareAdd.showAdd()},getShareConfig(){this.api.post("/api/commonApi/getAllConfig",{keys:["customShareUrl"]}).then(e=>{for(let t=0;t<e.data.allConfig.length;t++){var i=e.data.allConfig[t];"customShareUrl"==i.title&&(this.shareServerUrl=i.value)}this.shareServerUrl||(this.shareServerUrl=h.a.getBaseByLocation(),this.shareServerUrl),this.getPathList()}).catch(t=>{})},showQrCodeDialog(t){this.$refs.qrCodeShowing.showQrCodeDialog(t.token)},onFolderBack(){this.$refs.fileSelector&&this.$refs.fileSelector.goBack()},getShareLink(t,e){return t+"/#/shareTemp?st="+e},getPathList(){this.api.post("/api/file/getTempShare",{username:this.publicUserName}).then(t=>{if(!t.code){for(var e in t.data)t.data[e].serverUrl=this.shareServerUrl,t.data[e].shareLink=this.getShareLink(t.data[e].serverUrl,t.data[e].token);this.pathList=t.data}}).catch(t=>{this.showVsNotification(this.$t("common.getFail"))})},onAddPathFinish(){this.getShareConfig()},deletePath(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("setting.ifDeletePath"),()=>{this.api.post("/api/file/tempShare",{deleteId:t.id,operationType:"delete"}).then(t=>{t.code||this.getShareConfig()}).catch(t=>{})})}}};i("8347");d=Object(l.a)(n,function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"source-setting-root",class:{"setting-padding":i.hasPadding}},[s("div",{staticClass:"content-root"},[s("div",{staticClass:"flex-row",staticStyle:{"justify-content":"right","flex-wrap":"wrap"}},[s("p",{staticClass:"add-title"},[i._v(i._s(i.$t("file.shareTempAlert")))])]),s("Divider"),0<i.pathList.length?s("div",{staticStyle:{width:"100%",overflow:"auto",height:"100%"}},[i._l(i.pathList,function(e,t){return s("Card",{staticStyle:{"margin-bottom":"20px",width:"100%","border-radius":"10px"}},[s("div",{staticClass:"item-title"},[s("span",{staticClass:"item-label"},[i._v(i._s(i.$t("file.sharePath"))+" : ")]),i._v(i._s(e.path)+" ")]),s("div",{staticClass:"item-title"},[s("span",{staticClass:"item-label"},[i._v(i._s(i.$t("file.endDate"))+" : ")]),i._v(i._s(i.utils.formatTimeStamp(e.end_timestamp))+" ")]),s("div",{staticClass:"item-title"},[s("span",{staticClass:"item-label"},[i._v(i._s(i.$t("file.accessPwd"))+" : ")]),i._v(i._s(e.password||i.$t("file.noNeedPwd"))+" ")]),s("div",{staticClass:"item-title enable-text-select",on:{click:function(t){return i.showQrCodeDialog(e)}}},[s("span",{staticClass:"item-label"},[i._v(i._s(i.$t("file.shareLink"))+" : ")]),i._v(i._s(e.shareLink)+" ")]),s("span",{staticClass:"nasIcons icon-trash",staticStyle:{position:"absolute",right:"10px",bottom:"10px","font-size":"20px",cursor:"pointer",color:"#99AABF"},on:{click:function(t){return i.deletePath(e)}}})])}),s("Card",{staticStyle:{"margin-bottom":"20px",width:"100%","border-radius":"10px",cursor:"pointer"}},[s("div",{staticStyle:{width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center","padding-left":"30px","padding-right":"30px"},on:{click:function(t){return i.showAddShare()}}},[s("span",{staticClass:"nasIcons icon-add-album",staticStyle:{color:"#386DF2","font-size":"50px","margin-right":"20px"}}),s("p",{staticClass:"add-text"},[i._v(i._s(i.$t("file.addShareTemp")))])])])],2):i._e()],1),i.pathList.length<1?s("my-nodata",{staticStyle:{position:"absolute",width:"100%","margin-top":"150px"},attrs:{title:i.$t("file.shareTempAlert"),btnTitle:i.$t("file.addShareFoler")},on:{onBtnClick:function(t){return i.showAddShare()}}}):i._e(),s("files-quick-share-add",{ref:"shareAdd",on:{onAddFinish:function(t){return i.onAddPathFinish()}}}),s("files-quick-share-showing",{ref:"qrCodeShowing"})],1)},[],!1,null,"375fe704",null).exports,n={props:{},mounted(){this.getExcludeConfig()},components:{},data(){return{excludePathList:[]}},computed:{},methods:{onAddExcludePath(t){if(t)if(35<t.length)this.showVsAlertDialog(this.$t("common.alert"),this.$t("common.textTooLong"));else{for(var e in this.excludePathList)if(this.excludePathList[e]==t)return;this.excludePathList.push(t),this.saveConfig()}},onDeleteExcludePath(t){if(t){for(var e in this.excludePathList)if(this.excludePathList[e]==t){this.excludePathList.splice(e,1);break}this.saveConfig()}},getExcludeConfig(){this.api.post("/api/commonApi/getAllConfig",{hideLoading:!0,keys:["excludePathFolderBrowser"]}).then(e=>{for(let t=0;t<e.data.allConfig.length;t++){var i=e.data.allConfig[t];"excludePathFolderBrowser"==i.title&&(this.excludePathList=JSON.parse(i.value))}}).catch(t=>{})},saveConfig(){var t={};t.excludePathFolderBrowser=this.excludePathList,this.api.post("/api/commonApi/saveConfig",t).then(t=>{t.code||this.showVsNotification(this.$t("common.operationSuccess")),this.getExcludeConfig()}).catch(t=>{this.getExcludeConfig()})},showHideAlert(){this.showVsAlertDialog(this.$t("common.alert"),this.$t("file.hidePathAlert"))}}};i("ee1e");n={components:{filesSettings:Object(l.a)(n,function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"root"},[s("div",{staticClass:"content-root"},[s("Divider",[i._v(i._s(i.$t("file.hidePath"))+" "),s("Icon",{staticStyle:{cursor:"pointer","margin-left":"10px"},attrs:{type:"ios-information-circle-outline"},on:{click:function(t){return i.showHideAlert()}}})],1),s("Input",{attrs:{autocapitalize:"off",autocorrect:"off",search:"","enter-button":i.$t("common.add"),placeholder:i.$t("file.hidePathPlaceHolder")},on:{"on-search":i.onAddExcludePath}}),s("div",{staticClass:"flex-row",staticStyle:{"margin-top":"5px","flex-wrap":"wrap"}},i._l(i.excludePathList,function(e){return s("Tag",{attrs:{type:"dot",closable:"",color:"primary"},on:{"on-close":function(t){return i.onDeleteExcludePath(e)}}},[i._v(i._s(e))])}),1)],1)])},[],!1,null,"7eb2d0ea",null).exports,myHeader:s.a,folderBrower:a.a,folderBrowerOperationBar:o.a,filesOperationRecord:r,filesShareForAll:c,filesQuickShare:d},data(){return{showCreateNew:!0,sideOptionList:[{id:"list",title:this.$t("file.fileList"),font:"nasIcons icon-file-list"},{id:"collect",title:this.$t("file.collect"),font:"nasIcons icon-file-collect"},{id:"recent",title:this.$t("file.recent"),font:"nasIcons icon-file-recent"},{id:"share_manage",title:this.$t("home.shareManage"),font:"nasIcons icon-white-list",onlyAdmin:!0},{id:"share_temp",title:this.$t("home.shareTemp"),font:"nasIcons icon-link"},{id:"operation_record",title:this.$t("file.logs"),font:"nasIcons icon-log"}],menuActive:"list"}},mounted(){window.addEventListener("resize",this.onWindowResize),this.$nextTick(()=>{var t=localStorage.getItem("folderImageSize");t&&40<=parseInt(t)&&(this.$refs.fileBar.sliderValue=parseInt(t),this.onSliderChange(parseInt(t)))}),this.$store.state.runInElectron&&this.sideOptionList.push({id:"setting",title:this.$t("setting"),font:"nasIcons icon-setting-system",onlyAdmin:!0})},beforeDestroy(){window.removeEventListener("resize",this.onWindowResize),this.$refs.fileBar&&localStorage.setItem("folderImageSize",this.$refs.fileBar.sliderValue)},methods:{onClear(){"recent"==this.menuActive?this.$refs.fileBrowser.clearRecent(""):"collect"==this.menuActive&&this.$refs.fileBrowser.clearCollect("")},setLeftMenuId(t){let e=t.id,i=!0;"operation_record"==this.menuActive&&(i=!1),this.menuActive=e,this.$nextTick(()=>{this.$refs.fileBrowser&&i&&this.$refs.fileBrowser.changeShowType(e)})},onWindowResize(t){this.$refs.fileBrowser&&this.$refs.fileBrowser.calImageWidth()},onSliderChange(t){this.$refs.fileBrowser&&this.$refs.fileBrowser.itemBaseWidth!=t&&(this.$refs.fileBrowser.setItemBaseWidth(t),this.$refs.fileBrowser.calImageWidth())},onParentChange(t,e){this.$nextTick(()=>{this.$refs.fileBar.setShowPath(t,e)})},createNewFolder(t){this.$refs.fileBrowser.createNewFolder(t)},onClickOrder(t,e){this.$refs.fileBrowser.onClickOrder(t,e)}}},i("a73c"),s=Object(l.a)(n,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"brower-root"},[t("my-bg"),e._m(0),t("div",{staticClass:"nas-mobile-none"},[t("my-header")],1),t("div",{staticClass:"main-layout nas-padding-right-zero"},[t("div",{staticClass:"sidebar-root"},[t("my-sidebar",{ref:"sidebar",attrs:{name:"filebrower",optionList:e.sideOptionList},on:{onItemClick:e.setLeftMenuId}})],1),t("div",{staticClass:"sidebar-mobile-root"},[t("my-sidebar-mobile",{ref:"sidebarMobile",attrs:{name:"filebrower",optionList:e.sideOptionList},on:{onItemClick:e.setLeftMenuId}})],1),"operation_record"==e.menuActive?t("files-operation-record"):"share_manage"==e.menuActive?t("files-share-for-all"):"share_temp"==e.menuActive?t("files-quick-share"):"setting"==e.menuActive?t("files-settings"):t("div",{staticClass:"brower-list-root"},[t("folder-brower-operation-bar",{ref:"fileBar",staticStyle:{position:"absolute",left:"0"},attrs:{showSlider:!e.isMobile,showSearch:"list"==e.menuActive,showClearBtn:"list"!=e.menuActive,showCreateNew:e.showCreateNew},on:{onClickOrder:e.onClickOrder,onBack:function(t){return e.$refs.fileBrowser.goBack()},createNewFolder:e.createNewFolder,onSliderChange:e.onSliderChange,onClear:e.onClear,onRefresh:function(t){return e.$refs.fileBrowser.refresh()},onCopy:function(t){return e.$refs.fileBrowser.copy()},onSearch:function(t){return e.$refs.fileBrowser.onSearch(t)}}}),t("div",{staticStyle:{width:"100%",height:"100%",overflow:"hidden","padding-top":"60px"}},[t("folder-brower",{ref:"fileBrowser",staticStyle:{width:"100%",height:"100%","z-index":"0","overflow-y":"auto"},on:{onParentChange:e.onParentChange}})],1)],1)],1)],1)},[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"nas-mobile-none"},[t("p",{staticClass:"my-header-position"})])}],!1,null,"5dfa6eba",null);e.default=s.exports},"4e5b":function(t,e,i){"use strict";i("b37f")},8347:function(t,e,i){"use strict";i("1291")},a73c:function(t,e,i){"use strict";i("12be")},b37f:function(t,e,i){},b815:function(t,e,i){},c95e:function(t,e,i){"use strict";i("b815")},ca00:function(t,e,i){},ee1e:function(t,e,i){"use strict";i("ca00")}}]);