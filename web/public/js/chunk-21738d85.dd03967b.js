(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-21738d85"],{"019d":function(t,e,i){},"0c92":function(t,e,i){"use strict";i("dc6d")},"1a83":function(t,e,i){},"1eb7":function(t,e,i){},"2b28":function(t,e,i){"use strict";i("7f11")},3805:function(t,e,i){"use strict";i("1eb7")},"3c2f":function(t,e,i){},4223:function(t,e,i){"use strict";i("6863")},"4b84":function(t,e,i){"use strict";i("1a83")},"57d4":function(t,e,i){},"5e40":function(t,e,i){"use strict";i("7b49")},6863:function(t,e,i){},"7b49":function(t,e,i){},"7f11":function(t,e,i){},"9fca":function(t,e,i){"use strict";i("019d")},c352:function(t,e,a){"use strict";a.r(e);var i=a("7cfd"),o=a("a133"),s=a("f047"),n=a("1f2e"),l=a("9fc6"),r=a("66af"),c=a("4696"),h=a("5d55"),d=a("cdf0"),m=a("c220"),d={props:{},created(){this.getMovieHomeData(),this.getSourceFolder()},mounted(){window.addEventListener("resize",this.handleResize),window.addEventListener("popstate",this.onPopstate),this.$bus.$on("eventOnRefreshMovieListContent",this.refreshList)},beforeDestroy(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("popstate",this.onPopstate),this.$bus.$off("eventOnRefreshMovieListContent",this.refreshList)},components:{myScrollBar:m.a,libraryDetail:d.a,videoDetail:h.default,MovieInfoDetail:c.default,movieListItem:r.a,movieGenresDetail:l.a,VueHorizontal:s.a},data(){return{sourceItemHeight:this.isMobile?160:190,sourceItemWidth:320,sourceItemShadowHeight:50,movieItemWidth:this.isMobile?140:160,showLibraryDetail:!1,selectedLibrary:null,showLibraryList:!1,showSourceList:!1,selectedIndex:null,initSourceType:"",initTitle:"",initSourcePath:"",showMediaListDialog:!1,showMovieInfoName:!0,sourceList:[],historyList:[],newMovies:[],newTv:[],libraryList:[]}},methods:{refreshList(){this.sourceList=[],this.historyList=[],this.newMovies=[],this.newTv=[],this.libraryList=[],this.getMovieHomeData()},onPageScroll(t){"home-wrapper"==t.target.id&&(this.$bus.$emit("eventOnCloseEasycm"),this.$refs.scrollBar)&&this.$refs.scrollBar.onScroll(t)},getSourceFolder(){this.api.post("/api/sourceFolderApi/getPathByType",{type:"movie"}).then(t=>{t.code||1==this.$store.state.currentUser.is_admin&&t.data.length<1&&this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("movie.noSourceSetAlert"),()=>{this.$emit("setViewType","sourceSet")},null,this.$t("photo.goToSet"))}).catch(t=>{})},onLibraryClick(t){this.selectedLibrary=t,this.showLibraryDetail=!0,this.pushState()},onPopstate(){this.showLibraryDetail?this.showLibraryDetail=!1:this.showMediaListDialog?this.showMediaListDialog=!1:this.$router.go(-1)},movieClick(t,e){this.$bus.$emit("eventOnShowMovieDetail",t,e)},playClick(t,e){this.$bus.$emit("eventOnPlayVideo",t,e)},handleResize(){this.refreshHorizonatal()},refreshHorizonatal(){this.$nextTick(()=>{this.$refs.horizontalMedia&&this.$refs.horizontalMedia.refresh(),this.$refs.horizontalHistory&&this.$refs.horizontalHistory.refresh(),this.$refs.horizontalNewMovie&&this.$refs.horizontalNewMovie.refresh(),this.$refs.horizontalNewTv&&this.$refs.horizontalNewTv.refresh(),this.$refs.horizontalLibrary&&this.$refs.horizontalLibrary.refresh()})},showMediaList(t,e,i){i&&(this.initTitle=i),this.initSourcePath=t,this.initSourceType=e,this.showMediaListDialog=!0,this.pushState()},getMovieHomeData(){this.showSourceList=!1;this.api.post("/api/movieApi/getMovieHomeData",{}).then(t=>{if(!t.code){this.showMovieInfoName=1==t.movieShowMatchName;for(var e of t.sourceList)e.sourceMovies&&0<e.sourceMovies.length&&(this.showSourceList=!0,n.a.dealMovieList(this.showMovieInfoName,e.sourceMovies));var i;if(this.sourceList=t.sourceList,t.history&&(n.a.dealMovieList(!1,t.history,!1),this.historyList=t.history),t.movies&&(n.a.dealMovieList(this.showMovieInfoName,t.movies),this.newMovies=t.movies),t.tv&&(n.a.dealMovieList(this.showMovieInfoName,t.tv),i=n.a.mergeTvSeasons(t.tv),this.newTv=i),t.libraryList){for(var o of t.libraryList)o.dataPreview&&0<o.dataPreview.length&&(n.a.dealMovieList(this.showMovieInfoName,o.dataPreview),this.showLibraryList=!0);this.libraryList=t.libraryList}this.refreshHorizonatal()}}).catch(t=>{})}}},s=(a("4b84"),a("2877")),d=Object(s.a)(d,function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("div",{staticClass:"list-root"},[s("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%",width:"100%"}},[s("div",{ref:"wrapper",staticClass:"home-list-root",attrs:{id:"home-wrapper"},on:{scroll:o.onPageScroll}},[o.showSourceList?s("Card",{staticClass:"card-section",attrs:{bordered:!1}},[s("p",{staticClass:"row-title"},[s("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-videocam"}}),o._v(o._s(o.$t("movie.myMedia"))+" ")],1),s("vue-horizontal",{ref:"horizontalMedia",staticClass:"horizontal"},o._l(o.sourceList,function(e){return e.sourceMovies&&0<e.sourceMovies.length?s("div",{staticStyle:{position:"relative","margin-right":"10px",cursor:"pointer","max-width":"65%"},style:{width:o.sourceItemWidth+"px","min-width":.7*o.sourceItemWidth+"px"},on:{click:function(t){return o.showMediaList(e.path,"movie"==e.mediaType?"1":"2",e.name)},contextmenu:function(t){return o.$bus.$emit("eventOnShowRightMenu","sourceItem",null,e,t,o.$root)}}},[s("vs-card",{attrs:{type:"2"},scopedSlots:o._u([{key:"img",fn:function(){return[s("div",{staticStyle:{width:"100%",display:"flex"},style:{height:o.sourceItemHeight+"px"}},[o._l(e.sourceMovies,function(t,e){return s("div",{staticStyle:{flex:"1",position:"relative",background:"#bbb","padding-right":"0.5px","padding-left":"0.5px"}},[s("img",{staticStyle:{width:"100%","object-fit":"cover",height:"100%","border-radius":"0px !important"},style:{height:o.sourceItemHeight-o.sourceItemShadowHeight+"px"},attrs:{src:t.url}}),s("img",{staticStyle:{width:"100%","object-fit":"fill",height:"100%",transform:"scaleY(-1)","border-radius":"0px !important"},style:{height:o.sourceItemShadowHeight+"px"},attrs:{src:t.url}})])}),s("div",{staticClass:"shadow-bg",style:{height:o.sourceItemShadowHeight+"px"}},[s("p",{staticClass:"max-line-one"},[o._v(" "+o._s(e.name)+"("+o._s("movie"==e.mediaType?o.$t("movie.movie"):o.$t("movie.tvdrama"))+") ")])])],2)]},proxy:!0}],null,!0)})],1):o._e()}),0)],1):o._e(),o.showLibraryList?s("Card",{staticClass:"card-section",staticStyle:{"margin-top":"10px"},attrs:{bordered:!1}},[s("div",{staticClass:"row-title",staticStyle:{cursor:"pointer"},on:{click:function(t){return o.$emit("setViewType","library")}}},[s("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-albums"}}),o._v(o._s(o.$t("movie.library"))+" "),s("Icon",{attrs:{type:"md-arrow-dropright"}})],1),s("vue-horizontal",{ref:"horizontalLibrary",staticClass:"horizontal"},o._l(o.libraryList,function(e){return e.dataPreview&&0<e.dataPreview.length?s("div",{staticStyle:{position:"relative","margin-right":"10px",cursor:"pointer","max-width":"60%"},style:{width:o.sourceItemWidth+"px","min-width":.7*o.sourceItemWidth+"px"},on:{click:function(t){return o.onLibraryClick(e)}}},[s("vs-card",{attrs:{type:"2"},scopedSlots:o._u([{key:"img",fn:function(){return[s("div",{staticStyle:{width:"100%",display:"flex"},style:{height:o.sourceItemHeight+"px"}},[o._l(e.dataPreview,function(t,e){return s("div",{staticStyle:{flex:"1",position:"relative",background:"#bbb","padding-right":"0.5px","padding-left":"0.5px"}},[s("img",{staticStyle:{width:"100%","object-fit":"cover",height:"100%","border-radius":"0px !important"},style:{height:o.sourceItemHeight-o.sourceItemShadowHeight+"px"},attrs:{src:t.url}}),s("img",{staticStyle:{width:"100%","object-fit":"fill",height:"100%",transform:"scaleY(-1)","border-radius":"0px !important"},style:{height:o.sourceItemShadowHeight+"px"},attrs:{src:t.url}})])}),s("div",{staticClass:"shadow-bg",style:{height:o.sourceItemShadowHeight+"px"}},[s("p",{staticClass:"max-line-one"},[o._v(" "+o._s(e.title))])])],2)]},proxy:!0}],null,!0)})],1):o._e()}),0)],1):o._e(),o.historyList&&0<o.historyList.length?s("Card",{staticClass:"card-section",staticStyle:{"margin-top":"10px"},attrs:{bordered:!1}},[s("div",{staticClass:"row-title",staticStyle:{cursor:"pointer","margin-bottom":"3px"},on:{click:function(t){return o.$emit("setViewType","history")}}},[s("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-time"}}),o._v(o._s(o.$t("movie.history"))+" "),s("Icon",{attrs:{type:"md-arrow-dropright"}})],1),s("vue-horizontal",{ref:"horizontalHistory",staticClass:"horizontal"},o._l(o.historyList,function(e,i){return s("movie-list-item",{attrs:{movie:e,movieIndex:i,itemWidth:o.movieItemWidth,itemMargin:5,isHistoryItem:!0},on:{movieClick:function(t){return o.movieClick(o.historyList,i)},playClick:function(t){1==e.is_tvplay?o.movieClick(o.historyList,i):o.playClick(o.historyList,i)}}})}),1)],1):o._e(),o.newMovies&&0<o.newMovies.length?s("Card",{staticClass:"card-section",staticStyle:{"margin-top":"10px"},attrs:{bordered:!1}},[s("div",{staticClass:"row-title",staticStyle:{cursor:"pointer","margin-bottom":"3px"},on:{click:function(t){o.showMediaList("","1",o.$t("movie.movie"))}}},[s("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-pricetag"}}),o._v(" "+o._s(o.$t("movie.newMovie"))+" "),s("Icon",{attrs:{type:"md-arrow-dropright"}})],1),s("vue-horizontal",{ref:"horizontalNewMovie",staticClass:"horizontal"},o._l(o.newMovies,function(t,e){return s("movie-list-item",{attrs:{movie:t,movieIndex:e,itemWidth:o.movieItemWidth,itemMargin:5},on:{movieClick:function(t){return o.movieClick(o.newMovies,e)},playClick:function(t){return o.playClick(o.newMovies,e)}}})}),1)],1):o._e(),o.newTv&&0<o.newTv.length?s("Card",{staticClass:"card-section",staticStyle:{"margin-top":"10px"},attrs:{bordered:!1}},[s("div",{staticClass:"row-title",staticStyle:{cursor:"pointer","margin-bottom":"3px"},on:{click:function(t){o.showMediaList("","2",o.$t("movie.tvdrama"))}}},[s("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-pricetag"}}),o._v(" "+o._s(o.$t("movie.newTv"))+" "),s("Icon",{attrs:{type:"md-arrow-dropright"}})],1),s("vue-horizontal",{ref:"horizontalNewTv",staticClass:"horizontal"},o._l(o.newTv,function(t,e){return s("movie-list-item",{attrs:{movie:t,movieIndex:e,itemWidth:o.movieItemWidth,itemMargin:5},on:{movieClick:function(t){return o.movieClick(o.newTv,e)},playClick:function(t){return o.playClick(o.newTv,e)}}})}),1)],1):o._e()],1)]),s("Modal",{attrs:{fullscreen:"","footer-hide":"",closable:!1,"class-name":"modal-style-nopadding"},model:{value:o.showMediaListDialog,callback:function(t){o.showMediaListDialog=t},expression:"showMediaListDialog"}},[o.showMediaListDialog?s("movie-genres-detail",{attrs:{initSourcePath:o.initSourcePath,initTitle:o.initTitle,initSourceType:o.initSourceType},on:{onClose:function(t){o.showMediaListDialog=!1}}}):o._e()],1),s("Modal",{attrs:{fullscreen:"","footer-hide":"",closable:!1,"class-name":"modal-style-nopadding"},model:{value:o.showLibraryDetail,callback:function(t){o.showLibraryDetail=t},expression:"showLibraryDetail"}},[o.showLibraryDetail?s("library-detail",{attrs:{title:o.$t("movie.library")+":"+o.selectedLibrary.title,libraryId:o.selectedLibrary.id,isPhotoLibrary:!1},on:{onClose:function(t){o.showLibraryDetail=!1}}}):o._e()],1),o.showMediaListDialog||o.showLibraryDetail?o._e():s("my-scroll-bar",{ref:"scrollBar"})],1)},[],!1,null,"1659f69b",null).exports,v=a("11a3"),u=(a("14d9"),a("e86f")),p=a("ccdb"),m={props:{hasPadding:{default:!1,type:Boolean}},mounted(){this.getAllConfig()},components:{myScrollBar:m.a,fileSelectBar:u.a,fileSelect:p.default},data(){return{resolutionOptionList:[{label:"4k 10mbps"},{label:"4k 6mbps"},{label:"4k 4mbps"},{label:"1080p 4mbps"},{label:"1080p 3mbps"},{label:"1080p 2mbps"},{label:"720p 3mbps"},{label:"720p 2mbps"},{label:"720p 1mbps"},{label:"480p 2mbps"},{label:"480p 1mbps"}],showChooseFolder:!1,coderListHevc:[],coderListH264:[],returnData:null,settingData:{defaultMoviePlay:"rawFile",movieHomeShowMyMedia:!0,movieHomeShowLibrary:!0,movieHomeShowHistory:!0,tmdbProxyEnable:!1,tmdbProxyUrl:"",defaultTranscodeResolution:"1080p 3mbps",moviePlaylongPressRate:"2",movieTmdbLanguage:"zh",movieTmdbApiUrl:"https://api.tmdb.org",movieTmdbApiKey:"",moviePreferLanguage:"chi",movieShowMatchName:!0,useFolderPictureAsPoster:!1,subtitleSize:1.5,crf:23,transCodeCoderNameHevc:"",transCodeCoderNameH264:"",transCodeReadRate:5,transcodePath:"",transcodeSpeed:"medium",subtitlePreGen:!0},tmdbLanguageList:[{value:"zh",label:"中文"},{value:"zh-TW",label:"中文[繁體]"},{value:"en",label:this.$t("language.eng")}],languageList:[{value:"chi",label:this.$t("language.chi")},{value:"eng",label:this.$t("language.eng")},{value:"ger",label:this.$t("language.ger")},{value:"spa",label:this.$t("language.spa")},{value:"fre",label:this.$t("language.fre")},{value:"jpn",label:this.$t("language.jpn")},{value:"kor",label:this.$t("language.kor")}],transcodeSpeedList:[{value:"ultrafast",label:this.$t("ultrafast")},{value:"fast",label:this.$t("fast")},{value:"medium",label:this.$t("medium")},{value:"slow",label:this.$t("slow")}]}},computed:{},methods:{saveAndTestProxy(){if(this.settingData.tmdbProxyEnable){if(!this.settingData.tmdbProxyUrl)return this.showVsNotification(this.$t("cannotBeEmpty",{content:this.$t("host")}));this.saveConfig(()=>{this.api.post("/api/movieInfoApi/testTmdbProxy",{}).then(t=>{2==t.code?this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.tmdbLinkError")+(t.msg?":"+t.msg:"")):0==t.code&&this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.tmdbLinkSuc")+(t.msg?":"+t.msg:""))}).catch(t=>{this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.tmdbLinkError")+(t.msg?":"+t.msg:""))})})}},onPageScroll(t){"setting-wrapper"==t.target.id&&this.$refs.scrollBar&&this.$refs.scrollBar.onScroll(t)},onPathSelect(t){this.settingData.transcodePath=t,this.showChooseFolder=!1},resetConfig(){this.returnData&&(this.settingData.crf=23,this.settingData.subtitleSize=14)},saveConfigApi(t,e){this.api.post("/api/commonApi/saveConfigMovie",t).then(t=>{this.showVsNotification(this.$t("setting.saveSuccessRestartValid")),e&&e()}).catch(t=>{})},saveConfig(t){var e={...this.settingData};e.movieShowMatchName=e.movieShowMatchName?"1":"0",e.useFolderPictureAsPoster=e.useFolderPictureAsPoster?"1":"0",e.subtitlePreGen=e.subtitlePreGen?"1":"0",e.tmdbProxyEnable=e.tmdbProxyEnable?"1":"0",e.movieHomeShowMyMedia=e.movieHomeShowMyMedia?"1":"0",e.movieHomeShowLibrary=e.movieHomeShowLibrary?"1":"0",e.movieHomeShowHistory=e.movieHomeShowHistory?"1":"0",this.saveConfigApi(e,t)},testTmdb(){this.api.post("/api/movieInfoApi/testTmdb",{movieTmdbLanguage:this.settingData.movieTmdbLanguage,movieTmdbApiUrl:this.settingData.movieTmdbApiUrl,movieTmdbApiKey:this.settingData.movieTmdbApiKey}).then(t=>{2==t.code?this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.tmdbLinkError")+(t.msg?":"+t.msg:"")):0==t.code&&(this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.tmdbLinkSuc")+(t.msg?":"+t.msg:"")),this.saveConfigApi({movieTmdbLanguage:this.settingData.movieTmdbLanguage,movieTmdbApiUrl:this.settingData.movieTmdbApiUrl,movieTmdbApiKey:this.settingData.movieTmdbApiKey}))}).catch(t=>{this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.tmdbLinkError")+(t.msg?":"+t.msg:""))})},getAllConfig(){this.api.post("/api/commonApi/getAllConfig",{keys:["subtitleSize","crf","transCodeParams-coderList","transCodeParams-CoderNameHevc","transCodeParams-CoderNameH264","transcodePath","movieShowMatchName","useFolderPictureAsPoster","subtitlePreGen","transcodeSpeed","transCodeParams-readrate","moviePreferLanguage","movieTmdbLanguage","movieTmdbApiUrl","movieTmdbApiKey","moviePlaylongPressRate","defaultTranscodeResolution","tmdbProxyEnable","tmdbProxyUrl","movieHomeShowMyMedia","movieHomeShowLibrary","movieHomeShowHistory","defaultMoviePlay"]}).then(e=>{for(let t=0;t<e.data.allConfig.length;t++){var i,o=e.data.allConfig[t];if("subtitleSize"==o.title)this.settingData.subtitleSize=o.value||14;else if("crf"==o.title)this.settingData.crf=o.value;else if("transCodeParams-coderList"==o.title)try{for(i of JSON.parse(o.value))"HEVC"==i.decoderType?this.coderListHevc.push(i):"H264"==i.decoderType&&this.coderListH264.push(i)}catch(t){}else"transCodeParams-CoderNameHevc"==o.title?this.settingData.transCodeCoderNameHevc=o.value:"transCodeParams-CoderNameH264"==o.title?this.settingData.transCodeCoderNameH264=o.value:"transcodePath"==o.title?this.settingData.transcodePath=o.value:"movieShowMatchName"==o.title?this.settingData.movieShowMatchName="1"==o.value:"useFolderPictureAsPoster"==o.title?this.settingData.useFolderPictureAsPoster="1"==o.value:"subtitlePreGen"==o.title?this.settingData.subtitlePreGen="1"==o.value:"transcodeSpeed"==o.title?this.settingData.transcodeSpeed=o.value:"transCodeParams-readrate"==o.title?this.settingData.transCodeReadRate=o.value:"moviePreferLanguage"==o.title?this.settingData.moviePreferLanguage=o.value:"movieTmdbLanguage"==o.title?this.settingData.movieTmdbLanguage=o.value:"movieTmdbApiUrl"==o.title?this.settingData.movieTmdbApiUrl=o.value:"movieTmdbApiKey"==o.title?this.settingData.movieTmdbApiKey=o.value:"moviePlaylongPressRate"==o.title?(this.settingData.moviePlaylongPressRate,this.settingData.moviePlaylongPressRate=o.value):"defaultTranscodeResolution"==o.title?this.settingData.defaultTranscodeResolution=o.value:"tmdbProxyEnable"==o.title?this.settingData.tmdbProxyEnable="1"==o.value:"tmdbProxyUrl"==o.title?this.settingData.tmdbProxyUrl=o.value:"movieHomeShowMyMedia"==o.title?this.settingData.movieHomeShowMyMedia="1"==o.value:"movieHomeShowLibrary"==o.title?this.settingData.movieHomeShowLibrary="1"==o.value:"movieHomeShowHistory"==o.title?this.settingData.movieHomeShowHistory="1"==o.value:"defaultMoviePlay"==o.title&&(this.settingData.defaultMoviePlay=o.value);this.settingData.transCodeCoderNameH264||0<this.coderListH264.length&&(this.settingData.transCodeCoderNameH264=this.coderListH264[0].coderName),this.settingData.transCodeCoderNameHevc||0<this.coderListHevc.length&&(this.settingData.transCodeCoderNameHevc=this.coderListHevc[0].coderName)}this.returnData=e.data}).catch(t=>{})}}};a("0c92");var m=Object(s.a)(m,function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"setting-root-wrapper",class:{"setting-padding":i.hasPadding}},[o("div",{staticClass:"common-setting-root",attrs:{id:"setting-wrapper"},on:{scroll:i.onPageScroll}},[o("div",{staticClass:"item-root-wrapper"},[o("Divider",{attrs:{plain:""}},[i._v(i._s(i.$t("movie.transcodeSetting")))]),o("Tooltip",{staticStyle:{width:"100%"},attrs:{disabled:i.isMobile,content:i.$t("setting.crfDesc"),"max-width":"100%"}},[o("Input",{attrs:{type:"number",placeholder:i.$t("setting.crfDesc")},scopedSlots:i._u([{key:"prepend",fn:function(){return[o("span",[i._v(i._s(i.$t("setting.crf")))])]},proxy:!0}]),model:{value:i.settingData.crf,callback:function(t){i.$set(i.settingData,"crf",t)},expression:"settingData.crf"}})],1),o("Tooltip",{staticStyle:{width:"100%"},attrs:{disabled:i.isMobile,content:i.$t("transcodeReadRateAlert"),"max-width":"100%"}},[o("Input",{staticClass:"item-input",attrs:{type:"number",placeholder:i.$t("transcodeReadRateAlert")},scopedSlots:i._u([{key:"prepend",fn:function(){return[o("span",[i._v(i._s(i.$t("transcodeReadRate")))])]},proxy:!0}]),model:{value:i.settingData.transCodeReadRate,callback:function(t){i.$set(i.settingData,"transCodeReadRate",t)},expression:"settingData.transCodeReadRate"}})],1),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("defaultPlay"))+":")]),o("RadioGroup",{model:{value:i.settingData.defaultMoviePlay,callback:function(t){i.$set(i.settingData,"defaultMoviePlay",t)},expression:"settingData.defaultMoviePlay"}},[o("Radio",{attrs:{label:"rawFile"}},[o("span",[i._v(i._s(i.$t("rawFile")))])]),o("Radio",{attrs:{label:"transcode"}},[o("span",[i._v(i._s(i.$t("transcode")))])])],1)],1),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("movie.defaultRaion"))+":")]),o("Select",{staticStyle:{width:"120px"},model:{value:i.settingData.defaultTranscodeResolution,callback:function(t){i.$set(i.settingData,"defaultTranscodeResolution",t)},expression:"settingData.defaultTranscodeResolution"}},i._l(i.resolutionOptionList,function(t,e){return o("Option",{key:e,attrs:{value:t.label}},[i._v(i._s(t.label)+" ")])}),1)],1),1<i.coderListHevc.length?o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("setting.videoCoder"))+":HEVC")]),o("Select",{staticStyle:{width:"120px"},model:{value:i.settingData.transCodeCoderNameHevc,callback:function(t){i.$set(i.settingData,"transCodeCoderNameHevc",t)},expression:"settingData.transCodeCoderNameHevc"}},i._l(i.coderListHevc,function(t,e){return o("Option",{key:e,attrs:{value:t.coderName}},[i._v(i._s(t.coderName)+" ")])}),1)],1):i._e(),1<i.coderListH264.length?o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("setting.videoCoder"))+":H264")]),o("Select",{staticStyle:{width:"120px"},model:{value:i.settingData.transCodeCoderNameH264,callback:function(t){i.$set(i.settingData,"transCodeCoderNameH264",t)},expression:"settingData.transCodeCoderNameH264"}},i._l(i.coderListH264,function(t,e){return o("Option",{key:e,attrs:{value:t.coderName}},[i._v(i._s(t.coderName)+" ")])}),1)],1):i._e(),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("transcodeSpeed")))]),o("Select",{staticStyle:{width:"90px"},model:{value:i.settingData.transcodeSpeed,callback:function(t){i.$set(i.settingData,"transcodeSpeed",t)},expression:"settingData.transcodeSpeed"}},i._l(i.transcodeSpeedList,function(t,e){return o("Option",{key:t.value,attrs:{value:t.value}},[i._v(i._s(t.label))])}),1)],1),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("setting.transcodeTmpPath")))]),o("a",{on:{click:function(t){i.showChooseFolder=!0}}},[i._v(i._s(i.settingData.transcodePath||i.$t("setting.userDataFolder")))]),""!=i.settingData.transcodePath?o("Button",{staticStyle:{"margin-left":"15px"},on:{click:function(t){i.settingData.transcodePath=""}}},[i._v(i._s(i.$t("Reset")))]):i._e()],1),o("div",{staticStyle:{height:"20px"}}),o("Divider",{attrs:{plain:""}},[i._v(i._s(i.$t("movie.videoInfoSetting")))]),o("div",{staticClass:"item-root-wrapper"},[o("div",{staticClass:"item-root-wrapper"},[o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("movie.showMatchName")))]),o("i-switch",{model:{value:i.settingData.movieShowMatchName,callback:function(t){i.$set(i.settingData,"movieShowMatchName",t)},expression:"settingData.movieShowMatchName"}})],1)]),o("div",{staticClass:"item-root",staticStyle:{"margin-top":"20px"}},[o("Input",{attrs:{placeholder:i.$t("movie.tmdbKeyAlert")},scopedSlots:i._u([{key:"prepend",fn:function(){return[o("span",[i._v("TMDB AccessToken "),o("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-help-circle-outline"},on:{click:function(t){i.showVsAlertDialog(i.$t("common.alert"),i.$t("movie.tmdbKeyAlert"))}}})],1)]},proxy:!0},{key:"append",fn:function(){return[o("Button",{attrs:{type:"primary",icon:"ios-link"},on:{click:function(t){return i.testTmdb()}}},[i._v(i._s(i.$t("common.save")))])]},proxy:!0}]),model:{value:i.settingData.movieTmdbApiKey,callback:function(t){i.$set(i.settingData,"movieTmdbApiKey",t)},expression:"settingData.movieTmdbApiKey"}})],1),o("div",{staticClass:"item-root",staticStyle:{"margin-top":"10px"}},[o("Input",{attrs:{placeholder:i.$t("movie.tmdbUrlAlert")},scopedSlots:i._u([{key:"prepend",fn:function(){return[o("span",[i._v("TMDB API URL "),o("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-help-circle-outline"},on:{click:function(t){i.showVsAlertDialog(i.$t("common.alert"),i.$t("movie.tmdbUrlAlert"))}}})],1)]},proxy:!0}]),model:{value:i.settingData.movieTmdbApiUrl,callback:function(t){i.$set(i.settingData,"movieTmdbApiUrl",t)},expression:"settingData.movieTmdbApiUrl"}})],1),o("div",{staticClass:"item-root",staticStyle:{"margin-top":"10px","margin-bottom":"20px"}},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v("TMDB"+i._s(i.$t("setting.language")))]),o("Select",{staticStyle:{width:"90px"},model:{value:i.settingData.movieTmdbLanguage,callback:function(t){i.$set(i.settingData,"movieTmdbLanguage",t)},expression:"settingData.movieTmdbLanguage"}},i._l(i.tmdbLanguageList,function(t,e){return o("Option",{key:t.value,attrs:{value:t.value}},[i._v(i._s(t.label))])}),1)],1),o("div",{staticClass:"item-root",staticStyle:{"margin-bottom":"20px"}},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("tmdbProxy"))),o("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-help-circle-outline"},on:{click:function(t){i.showVsAlertDialog(i.$t("common.alert"),i.$t("tmdbAlert"))}}})],1),o("i-switch",{model:{value:i.settingData.tmdbProxyEnable,callback:function(t){i.$set(i.settingData,"tmdbProxyEnable",t)},expression:"settingData.tmdbProxyEnable"}}),i.settingData.tmdbProxyEnable?o("Button",{staticStyle:{"margin-left":"10px"},attrs:{shape:"circle"},on:{click:i.saveAndTestProxy}},[i._v(i._s(i.$t("saveAndTest"))+i._s(i.$t("proxy")))]):i._e()],1),i.settingData.tmdbProxyEnable?o("div",{staticClass:"item-root",staticStyle:{"margin-bottom":"20px"}},[o("Input",{attrs:{placeholder:"http://127.0.0.1:10809"},scopedSlots:i._u([{key:"prepend",fn:function(){return[o("span",[i._v(i._s(i.$t("host")))])]},proxy:!0}],null,!1,2771194274),model:{value:i.settingData.tmdbProxyUrl,callback:function(t){i.$set(i.settingData,"tmdbProxyUrl",t)},expression:"settingData.tmdbProxyUrl"}})],1):i._e()]),o("div",{staticStyle:{height:"20px"}}),o("Divider",{attrs:{plain:""}},[i._v(i._s(i.$t("movie.subtitleSetting")))]),o("Input",{attrs:{type:"number",placeholder:i.$t("setting.videoSubtitleFontSize")},scopedSlots:i._u([{key:"prepend",fn:function(){return[o("span",[i._v(i._s(i.$t("setting.videoSubtitleFontSize")))])]},proxy:!0}]),model:{value:i.settingData.subtitleSize,callback:function(t){i.$set(i.settingData,"subtitleSize",t)},expression:"settingData.subtitleSize"}}),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("movie.primaryLanguage")))]),o("Select",{staticStyle:{width:"90px"},model:{value:i.settingData.moviePreferLanguage,callback:function(t){i.$set(i.settingData,"moviePreferLanguage",t)},expression:"settingData.moviePreferLanguage"}},i._l(i.languageList,function(t,e){return o("Option",{key:t.value,attrs:{value:t.value}},[i._v(i._s(t.label)+" ")])}),1)],1),o("div",{staticClass:"item-root-wrapper"},[o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("movie.subtitlePreGen"))+" "),o("Icon",{staticStyle:{cursor:"pointer","margin-left":"5px"},attrs:{size:"16",type:"ios-help-circle-outline"},on:{click:function(t){i.showVsAlertDialog(i.$t("common.alert"),i.$t("movie.subtitlePreGenAlert"))}}})],1),o("i-switch",{model:{value:i.settingData.subtitlePreGen,callback:function(t){i.$set(i.settingData,"subtitlePreGen",t)},expression:"settingData.subtitlePreGen"}})],1)]),o("Divider",{attrs:{plain:""}},[i._v(i._s(i.$t("movie.playSetting")))]),o("div",{staticClass:"item-root-margin-nomargin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("movie.longPressSpeed")))]),o("Select",{staticStyle:{width:"90px"},model:{value:i.settingData.moviePlaylongPressRate,callback:function(t){i.$set(i.settingData,"moviePlaylongPressRate",t)},expression:"settingData.moviePlaylongPressRate"}},[o("Option",{key:1.5,attrs:{value:"1.5"}},[i._v("1.5")]),o("Option",{key:2,attrs:{value:"2"}},[i._v("2")]),o("Option",{key:2.5,attrs:{value:"2.5"}},[i._v("2.5")]),o("Option",{key:3,attrs:{value:"3"}},[i._v("3")]),o("Option",{key:4,attrs:{value:"4"}},[i._v("4")]),o("Option",{key:5,attrs:{value:"5"}},[i._v("5")]),o("Option",{key:6,attrs:{value:"6"}},[i._v("6")])],1)],1),o("div",{staticStyle:{height:"50px",width:"100%"}}),o("Divider",{attrs:{plain:""}},[i._v(i._s(i.$t("movie.movieHome")))]),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("common.show"))+" ["+i._s(i.$t("movie.myMedia"))+"]")]),o("i-switch",{model:{value:i.settingData.movieHomeShowMyMedia,callback:function(t){i.$set(i.settingData,"movieHomeShowMyMedia",t)},expression:"settingData.movieHomeShowMyMedia"}})],1),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("common.show"))+" ["+i._s(i.$t("movie.library"))+"]")]),o("i-switch",{model:{value:i.settingData.movieHomeShowLibrary,callback:function(t){i.$set(i.settingData,"movieHomeShowLibrary",t)},expression:"settingData.movieHomeShowLibrary"}})],1),o("div",{staticClass:"item-root-margin"},[o("div",{staticStyle:{"margin-right":"20px"}},[i._v(i._s(i.$t("common.show"))+" ["+i._s(i.$t("movie.history"))+"]")]),o("i-switch",{model:{value:i.settingData.movieHomeShowHistory,callback:function(t){i.$set(i.settingData,"movieHomeShowHistory",t)},expression:"settingData.movieHomeShowHistory"}})],1),o("div",{staticStyle:{height:"100px"}})],1),o("div",{staticClass:"bottom-root"},[o("my-btn",{staticStyle:{"min-width":"260px"},attrs:{title:i.$t("common.commit")},on:{click:i.saveConfig}})],1)]),o("vs-dialog",{attrs:{"prevent-close":"",scroll:"","full-screen":i.isMobile},scopedSlots:i._u([{key:"header",fn:function(){return[o("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s(i.$t("file.chooseFolder")+"["+i.$t("file.doubleClickFolderEnter")+"]")+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("file-select-bar",{on:{back:function(t){return i.$refs.fileSelector.goBack()},select:function(t){return i.$refs.fileSelector.onSelect()},create:function(t){return i.$refs.fileSelector.createNewFolder(t)}}})]},proxy:!0}]),model:{value:i.showChooseFolder,callback:function(t){i.showChooseFolder=t},expression:"showChooseFolder"}},[i.showChooseFolder?o("file-select",{ref:"fileSelector",attrs:{parent:"root",type:2},on:{cancel:function(t){i.showChooseFolder=!1},onSelect:i.onPathSelect,onCancel:function(t){i.showChooseFolder=!1}}}):i._e()],1),i.showChooseFolder?i._e():o("my-scroll-bar",{ref:"scrollBar"})],1)},[],!1,null,"51f37899",null).exports,g=a("1ee4"),u={props:{hasPadding:{default:!1,type:Boolean},sourceType:{default:"movie",type:String}},mounted(){this.getPathList()},components:{fileSelectBar:u.a,fileSelect:p.default,folderBrowerOperationBar:g.a},data(){return{cachePath:"",showAddSourceDialog:!1,addSourceMediaType:"movie",addSourcePath:"",excludeType:"",excludePathList:[],showAddExcludeDialog:!1,showChangeSourcePosition:!1,canAddPath:!0,showChooseFolder:!1,pathList:[],selectedItem:{},intervalList:[{value:18e5,label:this.$t("everyXHour",{count:.5})},{value:36e5,label:this.$t("everyXHour",{count:1})},{value:72e5,label:this.$t("everyXHour",{count:2})},{value:108e5,label:this.$t("everyXHour",{count:3})},{value:144e5,label:this.$t("everyXHour",{count:4})},{value:18e6,label:this.$t("everyXHour",{count:5})},{value:216e5,label:this.$t("everyXHour",{count:6})},{value:324e5,label:this.$t("everyXHour",{count:9})},{value:432e5,label:this.$t("everyXHour",{count:12})},{value:864e5,label:this.$t("everyXHour",{count:24})}]}},computed:{},methods:{onIntevealChange(t,e){this.updateSource(t)},addSourceDialog(){this.addSourcePath="",this.addSourceMediaType="movie",this.showAddSourceDialog=!0},onAddBtnClick(){if(!this.addSourcePath)return this.showVsNotification(this.$t("pleaseSelectFolder"));this.addPathReq(this.addSourcePath)},clearNfoImgApi(){this.api.post("/api/movieInfoApi/clearNfoImg",{sourceFolder:this.selectedItem.path}).then(t=>{this.showVsNotification(this.$t("common.operationSuccess"))}).catch(t=>{})},clearNfoImg(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("movie.clearNfoAlert"),()=>{this.selectedItem=t,this.clearNfoImgApi()},()=>{})},showAddExclude(t){this.excludeType=t,this.excludePathList=[],this.getExcludeConfig(),this.showAddExcludeDialog=!0},onAddExcludePath(t){if(t)if(35<t.length)this.showVsAlertDialog(this.$t("common.alert"),this.$t("common.textTooLong"));else{for(var e in this.excludePathList)if(this.excludePathList[e]==t)return;this.excludePathList.push(t),this.saveConfig()}},onDeleteExcludePath(t){if(t){for(var e in this.excludePathList)if(this.excludePathList[e]==t){this.excludePathList.splice(e,1);break}this.saveConfig()}},getExcludeConfig(){this.api.post("/api/commonApi/getAllConfig",{hideLoading:!0,keys:[""+this.excludeType]}).then(e=>{for(let t=0;t<e.data.allConfig.length;t++){var i=e.data.allConfig[t];i.title==this.excludeType&&(this.excludePathList=JSON.parse(i.value))}}).catch(t=>{})},saveConfig(){var t={};t[this.excludeType]=this.excludePathList,this.api.post("/api/commonApi/saveConfig",t).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),this.getExcludeConfig())}).catch(t=>{})},onChooseMediaType(t,e){"tvplay"==t?this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("movie.setAsTvAlert"),()=>{this.setAsTvMovie(1,e)},()=>{this.getPathList()}):this.setAsTvMovie(0,e)},setAsTvMovie(t,e){this.api.post("/api/movieApi/setTvplay",{isTvPlay:t,sourceFolderId:e.id}).then(t=>{t.code||this.showVsNotification(this.$t("common.operationSuccess")),this.getPathList()}).catch(t=>{})},updateSource(e){1==e.scan_interval&&0==e.scan_interval_ms&&(e.scan_interval_ms=this.intervalList[2].value),this.api.post("/api/sourceFolderApi/updateSource",{scan_when_start:e.scan_when_start,scan_when_change:e.scan_when_change,scan_interval:e.scan_interval,scan_interval_ms:e.scan_interval_ms,sourceId:e.id}).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),t.data&&(e=t.data))}).catch(t=>{this.getPathList()})},matchInfoSwitch(t,e){this.api.post("/api/movieApi/switchMatchInfo",{sourceFolderId:t.id,ignoreMatchInfo:e}).then(t=>{t.code||this.showVsNotification(this.$t("common.operationSuccess"))}).catch(t=>{this.getPathList()})},onFolderBack(){this.$refs.fileSelector,this.$refs.fileSelector&&this.$refs.fileSelector.goBack()},onShowRelocate(t){this.selectedItem=t,this.showChangeSourcePosition=!0},onSelectPath(t){this.addSourcePath=t,this.showChooseFolder=!1},onSelectPathRelocate(t){this.relocateReq(t)},relocateReq(t){this.api.post("/api/sourceFolderApi/relocatePath",{type:this.sourceType,path:t,rawPathId:this.selectedItem.id}).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),this.getPathList(),this.showChangeSourcePosition=!1)}).catch(t=>{})},getPathList(){this.api.post("/api/sourceFolderApi/getPathByType",{type:this.sourceType}).then(t=>{t.code||(this.pathList=t.data,t.cacheParentPath&&(this.cachePath=t.cacheParentPath))}).catch(t=>{})},selectPath(){this.showChooseFolder=!0},addPathReq(t){this.api.post("/api/sourceFolderApi/addPath",{type:this.sourceType,path:t,media_type:this.addSourceMediaType}).then(t=>{t.code||(this.showAddSourceDialog=!1,this.showVsNotification(this.$t("common.operationSuccess")),this.getPathList())}).catch(t=>{})},deletePath(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("setting.ifDeletePath"),()=>{this.api.post("/api/sourceFolderApi/deletePath",{id:t.id}).then(t=>{t.code||this.showVsAlertDialog(this.$t("common.alert"),this.$t("setting.sourceFolderDeleteInBg"),()=>{this.getPathList()})}).catch(t=>{})})}}};a("2b28");var p=Object(s.a)(u,function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"source-setting-root",class:{"setting-padding":i.hasPadding}},[o("div",{staticClass:"content-root"},[o("div",{staticClass:"flex-row",staticStyle:{"justify-content":"right","flex-wrap":"wrap"}},[o("p",{staticClass:"add-title"},[i._v(i._s(i.$t("setting.movieSourceSettingAlert")))])]),o("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"5px",width:"100%","flex-wrap":"wrap"}},[o("a",{staticStyle:{height:"25px","margin-right":"15px"},attrs:{border:""},on:{click:function(t){return i.showAddExclude("excludePathMovie")}}},[i._v(i._s(i.$t("setting.excludePath")))]),o("a",{staticStyle:{"margin-right":"15px",height:"25px"},attrs:{border:""},on:{click:function(t){return i.showAddExclude("excludeFilenameMovie")}}},[i._v(i._s(i.$t("setting.excludeFilename")))]),o("a",{staticStyle:{"margin-right":"15px",height:"25px"},on:{click:function(t){i.showVsAlertDialog(i.$t("nameRule"),i.$t("movieNameRule")+" "+i.$t("tvNameRule"))}}},[i._v(i._s(i.$t("nameRule")))]),o("a",{staticStyle:{"margin-right":"15px",height:"25px"},on:{click:function(t){return i.$bus.$emit("eventOnShowScrapeLogs")}}},[i._v(i._s(i.$t("scrapeLog")))]),o("a",{staticStyle:{"margin-right":"15px",height:"25px"},on:{click:function(t){return i.scanPath("movie","ALL")}}},[i._v(i._s(i.$t("scanAll")))])]),o("Divider"),0<i.pathList.length?o("div",{staticStyle:{width:"100%",overflow:"auto",height:"100%"}},[i._l(i.pathList,function(e,t){return o("Card",{staticStyle:{"margin-bottom":"20px",width:"100%","border-radius":"10px"}},[i.cachePath&&(i.cachePath==e.path||3==i.cachePath.length&&e.path.startsWith(i.cachePath)||e.path.startsWith(i.cachePath+"\\")||e.path.startsWith(i.cachePath+"/"))?o("p",{staticStyle:{color:"red","text-align":"left"}},[i._v(i._s(i.$t("sourceIncludeCache")))]):i._e(),o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("common.path"))+" : ")]),i._v(i._s(e.path)+" "),o("Button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",type:"primary",shape:"circle"},on:{click:function(t){return i.scanPath("movie",e.path)}}},[i._v(i._s(i.$t("setting.scan")))])],1),o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("common.state"))+" : ")]),o("span",{staticStyle:{"font-weight":"bold"},style:{color:0==e.exist?"#DE4545":"#386DF2"}},[i._v(i._s(0==e.exist?i.$t("common.unavailable"):i.$t("common.available")))]),0==e.exist?o("a",{staticStyle:{"margin-left":"30px"},on:{click:function(t){return i.onShowRelocate(e)}}},[i._v(i._s(i.$t("setting.source.directoryMoved")))]):i._e()]),o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("movie.mediaType"))+" : ")]),o("RadioGroup",{on:{"on-change":function(t){return i.onChooseMediaType(t,e)}},model:{value:e.media_type,callback:function(t){i.$set(e,"media_type",t)},expression:"item.media_type"}},[o("Radio",{attrs:{label:"movie"}},[i._v(i._s(i.$t("movie.movie")))]),o("Radio",{attrs:{label:"tvplay"}},[i._v(i._s(i.$t("movie.tvdrama")))])],1)],1),o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("movie.enableInfoMatch"))+" : ")]),o("i-switch",{staticStyle:{"flex-shrink":"0"},attrs:{"true-value":0,"false-value":1},on:{"on-change":function(t){return i.matchInfoSwitch(e,t)}},model:{value:e.ignore_match_info,callback:function(t){i.$set(e,"ignore_match_info",t)},expression:"item.ignore_match_info"}})],1),o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("scanWhenStart"))+" : ")]),o("i-switch",{staticStyle:{"flex-shrink":"0"},attrs:{"true-value":1,"false-value":0},on:{"on-change":function(t){return i.updateSource(e)}},model:{value:e.scan_when_start,callback:function(t){i.$set(e,"scan_when_start",t)},expression:"item.scan_when_start"}})],1),o("div",{staticClass:"item-title",staticStyle:{"margin-bottom":"20px"}},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("scanWhenChange"))+" : "),o("Icon",{staticStyle:{"font-weight":"bold",cursor:"pointer"},attrs:{type:"ios-help-circle-outline"},on:{click:function(t){i.showVsAlertDialog(i.$t("common.alert"),i.$t("scanWhenChangeAlert"))}}})],1),o("i-switch",{staticStyle:{"flex-shrink":"0"},attrs:{"true-value":1,"false-value":0},on:{"on-change":function(t){return i.updateSource(e)}},model:{value:e.scan_when_change,callback:function(t){i.$set(e,"scan_when_change",t)},expression:"item.scan_when_change"}})],1),o("div",{staticClass:"item-title",staticStyle:{"margin-bottom":"20px"}},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("intervalScan"))+" : "),o("Icon",{staticStyle:{"font-weight":"bold",cursor:"pointer"},attrs:{type:"ios-help-circle-outline"},on:{click:function(t){i.showVsAlertDialog(i.$t("common.alert"),i.$t("intervalScanAlert"))}}})],1),o("i-switch",{staticStyle:{"flex-shrink":"0"},attrs:{"true-value":1,"false-value":0},on:{"on-change":function(t){return i.updateSource(e)}},model:{value:e.scan_interval,callback:function(t){i.$set(e,"scan_interval",t)},expression:"item.scan_interval"}}),1==e.scan_interval?o("vs-select",{staticStyle:{width:"130px","margin-left":"20px"},on:{change:function(t){return i.onIntevealChange(e,t)}},model:{value:e.scan_interval_ms,callback:function(t){i.$set(e,"scan_interval_ms",t)},expression:"item.scan_interval_ms"}},i._l(i.intervalList,function(t){return o("vs-option",{attrs:{label:t.label,value:t.value}},[i._v(" "+i._s(t.label)+" ")])}),1):i._e()],1),o("div",{staticStyle:{position:"absolute",right:"20px",bottom:"10px",display:"flex","align-items":"center"}},[o("Tooltip",{attrs:{disabled:i.isMobile,content:i.$t("movie.clearNfo"),placement:"left"}},[o("span",{staticClass:"nasIcons icon-clear",staticStyle:{"font-size":"20px",cursor:"pointer",color:"#99AABF"},on:{click:function(t){return i.clearNfoImg(e)}}})]),o("Tooltip",{attrs:{disabled:i.isMobile,content:i.$t("common.delete"),placement:"top"}},[o("span",{staticClass:"nasIcons icon-trash",staticStyle:{"font-size":"20px",cursor:"pointer",color:"#99AABF","margin-left":"20px"},on:{click:function(t){return i.deletePath(e)}}})])],1)])}),o("Card",{staticStyle:{"margin-bottom":"20px",width:"100%","border-radius":"10px",cursor:"pointer"}},[o("div",{staticStyle:{width:"100%",height:"100%",display:"flex","justify-content":"center","align-items":"center","padding-left":"30px","padding-right":"30px"},on:{click:function(t){return i.addSourceDialog()}}},[o("span",{staticClass:"nasIcons icon-add-album",staticStyle:{color:"#386DF2","font-size":"50px","margin-right":"20px"}}),o("p",{staticClass:"add-text"},[i._v(i._s(i.$t("setting.btAddSource")))])])])],2):i._e()],1),i.pathList.length<1?o("my-nodata",{staticStyle:{position:"absolute",width:"100%","margin-top":"150px"},attrs:{title:i.$t("setting.movieSourceSettingAlert"),btnTitle:i.$t("setting.btAddSource")},on:{onBtnClick:function(t){return i.addSourceDialog()}}}):i._e(),o("vs-dialog",{attrs:{"prevent-close":"",scroll:"","full-screen":i.isMobile},scopedSlots:i._u([{key:"header",fn:function(){return[o("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s(i.$t("file.chooseFolder")+"["+i.$t("file.doubleClickFolderEnter")+"]")+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("file-select-bar",{on:{back:function(t){return i.$refs.fileSelector.goBack()},select:function(t){return i.$refs.fileSelector.onSelect()},create:function(t){return i.$refs.fileSelector.createNewFolder(t)}}})]},proxy:!0}]),model:{value:i.showChooseFolder,callback:function(t){i.showChooseFolder=t},expression:"showChooseFolder"}},[i.showChooseFolder?o("file-select",{ref:"fileSelector",attrs:{parent:"root",type:2},on:{cancel:function(t){i.showChooseFolder=!1},onSelect:i.onSelectPath,onCancel:function(t){i.showChooseFolder=!1}}}):i._e()],1),o("vs-dialog",{attrs:{"prevent-close":"",scroll:"","full-screen":i.isMobile},scopedSlots:i._u([{key:"header",fn:function(){return[o("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s(i.$t("setting.source.reChoose")+i.selectedItem.path)+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("file-select-bar",{on:{back:function(t){return i.$refs.fileSelector.goBack()},select:function(t){return i.$refs.fileSelector.onSelect()},create:function(t){return i.$refs.fileSelector.createNewFolder(t)}}})]},proxy:!0}]),model:{value:i.showChangeSourcePosition,callback:function(t){i.showChangeSourcePosition=t},expression:"showChangeSourcePosition"}},[i.showChangeSourcePosition?o("file-select",{ref:"fileSelector",attrs:{parent:"root",type:2},on:{onSelect:i.onSelectPathRelocate,onCancel:function(t){i.showChangeSourcePosition=!1}}}):i._e()],1),o("vs-dialog",{attrs:{scroll:"","full-screen":i.isMobile},scopedSlots:i._u([{key:"header",fn:function(){return[i.excludeType?o("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s("excludePathMovie"==i.excludeType?i.$t("setting.excludePath"):i.$t("setting.excludeFilename"))+" ")]):i._e()]},proxy:!0}]),model:{value:i.showAddExcludeDialog,callback:function(t){i.showAddExcludeDialog=t},expression:"showAddExcludeDialog"}},[o("Input",{attrs:{autocapitalize:"off",autocorrect:"off",search:"","enter-button":i.$t("common.add"),placeholder:i.$t("setting.addExcludePathPlaceholder")},on:{"on-search":i.onAddExcludePath}}),0<i.excludePathList.length?o("p",{staticStyle:{"text-align":"left","margin-top":"15px",color:"#999999"}},[i._v(" "+i._s("excludePathMovie"==i.excludeType?i.$t("setting.excludePathAlert"):i.$t("setting.excludeFilenameAlert"))+": ")]):i._e(),o("div",{staticClass:"flex-row",staticStyle:{"margin-top":"5px","flex-wrap":"wrap"}},i._l(i.excludePathList,function(e){return o("Tag",{attrs:{type:"dot",closable:"",color:"primary"},on:{"on-close":function(t){return i.onDeleteExcludePath(e)}}},[i._v(" "+i._s(e))])}),1)],1),o("vs-dialog",{attrs:{scroll:"","full-screen":i.isMobile},scopedSlots:i._u([{key:"header",fn:function(){return[o("h4",{staticStyle:{"font-size":"16px"}},[i._v(" "+i._s(i.$t("setting.btAddSource"))+" ")])]},proxy:!0}]),model:{value:i.showAddSourceDialog,callback:function(t){i.showAddSourceDialog=t},expression:"showAddSourceDialog"}},[o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label",staticStyle:{"flex-shrink":"0"}},[i._v(i._s(i.$t("setting.movieSourceSetting"))+" : ")]),i.addSourcePath?o("span",[i._v(i._s(i.addSourcePath))]):i._e(),o("span",{staticStyle:{"flex-shrink":"0"}},[o("a",{staticStyle:{"margin-left":"5px"},on:{click:function(t){i.showChooseFolder=!0}}},[i._v(" "+i._s(i.$t("file.chooseFolder"))+" ")])])]),o("div",{staticClass:"item-title"},[o("span",{staticClass:"item-label"},[i._v(i._s(i.$t("movie.mediaType"))+" : ")]),o("RadioGroup",{model:{value:i.addSourceMediaType,callback:function(t){i.addSourceMediaType=t},expression:"addSourceMediaType"}},[o("Radio",{attrs:{label:"movie"}},[i._v(i._s(i.$t("movie.movie")))]),o("Radio",{attrs:{label:"tvplay"}},[i._v(i._s(i.$t("movie.tvdrama")))])],1)],1),o("my-btn",{staticStyle:{"margin-top":"20px",width:"80%"},attrs:{title:i.$t("setting.btAddSource")},on:{click:i.onAddBtnClick}})],1)],1)},[],!1,null,"6434bd2e",null).exports,f=a("be3b"),y=a("2cc5"),g={created(){},mounted(){var t=localStorage.getItem("movie-list-show-type"),t=(t&&(this.showType=t,this.onSelectShowType(this.showType)),this.loadFirstPage(),window.addEventListener("resize",this.onWindowResize),localStorage.getItem("MovieImageSize"));t&&100<=parseInt(t)&&(this.sliderValue=parseInt(t),this.onSizeChange()),window.addEventListener("popstate",this.onPopstate),this.$bus.$on("eventOnRefreshMovieListContent",this.loadFirstPage)},beforeDestroy(){this.$bus.$off("eventOnRefreshMovieListContent",this.loadFirstPage),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("popstate",this.onPopstate),this.sliderValue&&localStorage.setItem("MovieImageSize",this.sliderValue)},components:{movieListItem:r.a,videoDetail:h.default,MovieInfoDetail:c.default},data(){return{showMovieInfoDetail:!1,showToTopBtn:!1,showVideoDetail:!1,sliderMin:140,sliderMax:280,sliderValue:140,itemBaseWidth:140,itemWidth:140,itemMargin:6,sortField:"recent",sortField:"check_time",sortType:"desc",sortType:"desc",movieList:[],nextHasMore:!0,nextLoading:!1,searchStr:"",showType:"list",selectedIndex:null,selectedFile:null}},computed:{},methods:{onPopstate(){this.showMovieInfoDetail||this.showVideoDetail?(this.showMovieInfoDetail=!1,this.showVideoDetail=!1):this.$router.go(-1)},getMovieKeys(){this.api.post("/api/movieApi/getMovieKeys",{hideLoading:!0}).then(e=>{if(!e.code&&e.data&&0<e.data.length)for(let t=0;t<e.data.length;t++){var i=e.data[t];"movie_language"==i.key_type?this.languageList.push(i.key_value):"movie_regions"==i.key_type?this.regionList.push(i.key_value):"movie_genres"==i.key_type&&this.genresList.push(i.key_value)}}).catch(t=>{})},scrollToTop(){this.$nextTick(()=>{this.$refs.listWrapper.scrollTo({top:0,behavior:"smooth"})})},clearHistoryApi(){this.api.post("/api/movieApi/clearHistory",{}).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),setTimeout(()=>{this.loadFirstPage()},500))}).catch(t=>{})},deleteSelectedFile(){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("file.confirmDelete"),t=>{n.a.deleteApi(this,this.selectedFile,t,!1,()=>{for(var t in this.movieList)if(this.movieList[t].id==this.selectedFile.id){this.movieList.splice(t,1),this.selectedFile=null;break}})},null,null,null,300,!0,"linux"==localStorage.platform?null:{checkBoxContent:this.$t("putInSystemTrash"),isCheck:!0})},loadFirstPage(){this.nextHasMore=!0,this.nextLoading=!1,this.getMovies()},calImageWidth(){var t;this.$refs.listWrapper&&(t=this.$refs.listWrapper.getBoundingClientRect(),t=this.utils.calItemWidth(t,this.itemBaseWidth,this.itemMargin))&&(this.itemWidth=t)},onSizeChange(){this.itemBaseWidth!=this.sliderValue&&(this.itemBaseWidth=this.sliderValue,this.calImageWidth())},onSelectShowType(t){this.showType=t,this.switchShowType(this.showType),localStorage.setItem("movie-list-show-type",t)},clickOrder(t,e){this.sortField=t,this.sortType=e,this.loadFirstPage()},onSearch(t){this.searchStr=t,this.loadFirstPage()},onSearchClear(){this.searchStr="",this.loadFirstPage()},switchShowType(t){this.showType=t},mouseEnterImg(t){this.isMobile||this.$set(this.movieList[t],"hover",!0)},mouseLeaveImg(t){this.isMobile||(this.movieList[t].hover=!1)},onWindowResize(){this.calImageWidth()},movieClick(t){this.selectedIndex=t,this.showMovieInfoDetail=!0,this.pushState()},getMovies(){var t;!this.nextLoading&&this.nextHasMore&&(this.movieList=[],t={hideLoading:this.nextLoading=!0},this.selectedSourceFolder&&this.selectedSourceFolder!=this.$t("common.all")&&(t.sourceFolder=f.a.encodePath(this.selectedSourceFolder)),this.api.post("/api/movieApi/getHistory",t).then(s=>{for(let o=0;o<s.data.length;o++){var a=f.a.getImgFullPath(s.data[o].id,!0,s.data[o].filename,"movie"),n=f.a.getImgFullPath(s.data[o].id,!1,s.data[o].filename,"movie");s.data[o].url=a,s.data[o].rawUrl=n;let t=s.data[o].size,e=parseInt(t/1024*100)/100,i=e+"KB";1024<e&&(a=parseInt(e/1024*100)/100,i=a+"MB",1024<a)&&(n=parseInt(a/1024*100)/100,i=n+"GB"),s.data[o].sizeStr=i}this.movieList=s.data,this.nextHasMore=!1,this.nextLoading=!1,this.$nextTick(()=>{this.calImageWidth()})}).catch(t=>{this.nextLoading=!1}))}}};a("3805");var u=Object(s.a)(g,function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"movie-list-root"},[o("div",{staticClass:"movie-header"},[o("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between",width:"100%"}},[o("div",{staticStyle:{display:"flex","align-items":"center",flex:"1"}},[o("div",{style:{"margin-left":i.itemMargin+"px"}},["grid"==i.showType?o("span",{staticClass:"nasIcons icon-grid operation-icon ",on:{click:function(t){return i.onSelectShowType("list")}}}):o("span",{staticClass:"nasIcons icon-list operation-icon",on:{click:function(t){return i.onSelectShowType("grid")}}})]),o("div",{staticClass:"nas-mobile-none"},["grid"==i.showType?o("Slider",{staticClass:"zoom-slider",attrs:{"show-tip":"never",min:i.sliderMin,max:i.sliderMax,step:10},on:{"on-input":i.onSizeChange},model:{value:i.sliderValue,callback:function(t){i.sliderValue=t},expression:"sliderValue"}}):i._e()],1)]),o("div",{on:{click:function(t){return i.clearHistoryApi()}}},[o("my-btn",{attrs:{title:i.$t("movie.clearHistory")}})],1)])]),o("div",{staticStyle:{width:"100%",height:"100%",display:"flex","flex-direction":"row",overflow:"hidden","padding-top":"60px"}},[o("div",{ref:"listWrapper",staticClass:"movie-list"},[i._l(i.movieList,function(t,e){return"grid"==i.showType?o("movie-list-item",{attrs:{movie:t,movieIndex:e,itemWidth:i.itemWidth,itemMargin:i.itemMargin,isHistoryItem:!0},on:{movieClick:function(t){return i.movieClick(e)},playClick:function(t){return i.movieClick(e)}}}):i._e()}),i._l(i.movieList,function(t,e){return"list"==i.showType?o("movie-list-item",{staticStyle:{width:"100%"},attrs:{movie:t,movieIndex:e,itemWidth:i.itemWidth,itemMargin:i.itemMargin,showType:"list",isHistoryItem:!0},on:{movieClick:function(t){return i.movieClick(e)},playClick:function(t){return i.movieClick(e)}}}):i._e()}),o("div",{staticStyle:{display:"flex","justify-content":"center",width:"100%","flex-direction":"column","align-items":"center"}},[i.nextLoading?o("Spin",{staticStyle:{"margin-top":"30px"},attrs:{size:"large"}}):i._e(),i.nextLoading||i.nextHasMore?i._e():o("span",{staticStyle:{"margin-top":"30px"}},[i._v(i._s(i.$t("common.noMore")))]),o("div",{staticStyle:{height:"50px"}})],1)],2),i.showToTopBtn?o("my-btn-icon",{staticStyle:{position:"fixed",right:"10px",bottom:"10px"},attrs:{iIcon:"md-arrow-up"},on:{click:i.scrollToTop}}):i._e()],1),o("Modal",{attrs:{fullscreen:"","footer-hide":""},model:{value:i.showVideoDetail,callback:function(t){i.showVideoDetail=t},expression:"showVideoDetail"}},[i.showVideoDetail?o("video-detail",{ref:"videoPlayer",attrs:{propsServerType:"movie"},on:{onClose:function(t){i.showVideoDetail=!1}}}):i._e()],1),o("Modal",{attrs:{fullscreen:"","footer-hide":"","class-name":"modal-style-nopadding"},on:{onClose:function(t){i.showMovieInfoDetail=!1}},model:{value:i.showMovieInfoDetail,callback:function(t){i.showMovieInfoDetail=t},expression:"showMovieInfoDetail"}},[i.showMovieInfoDetail?o("movie-info-detail",{ref:"movieInfoDetail",attrs:{propsDetailMovieList:i.movieList,propsDetailIndex:i.selectedIndex},on:{onClose:function(t){i.showMovieInfoDetail=!1}}}):i._e()],1)],1)},[],!1,null,"3770664e",null).exports,r=a("e54c"),g=a("542c"),S={props:{editCollection:{default:null,type:Object}},data(){return{submitValueList:[],shareForSubUser:!0,showChooseCover:!1,coverPath:"",password:"",enablePwd:!1,inputCollectionName:"",conditionList:[{value:"filename",label:this.$t("movie.filename")},{value:"path",label:this.$t("common.filepath")},{value:"size",label:this.$t("file.size")},{value:"movie_regions",label:this.$t("movie.regions")},{value:"movie_language",label:this.$t("movie.language")},{value:"movie_genres",label:this.$t("movie.genres")},{value:"movie_year",label:this.$t("movie.year")},{value:"movie_director",label:this.$t("movie.director")},{value:"movie_actor",label:this.$t("movie.actors")},{value:"duration",label:this.$t("video.duration")}],filterNumber:[{value:">",label:this.$t("common.gt")},{value:"=",label:this.$t("common.eq")},{value:"<",label:this.$t("common.lt")}],fiterStr:[{value:"like",label:this.$t("common.contain")}],filterList:[]}},mounted(){if(this.editCollection){this.coverPath=this.editCollection.collection_cover_path,this.inputCollectionName=this.editCollection.title,this.shareForSubUser=1==this.editCollection.share_for_subuser,this.enablePwd=1==this.editCollection.enable_pwd;try{var t;if(this.editCollection.data)for(t of JSON.parse(this.editCollection.data).searchValue.split("AND")){var e,i,o={},s=t.trim().split(" "),a=[];for(e of s)e.trim()&&a.push(e);2<a.length&&(o.conditionName,o.conditionName=a[0].trim(),"size"==o.conditionName||"movie_year"==o.conditionName||"duration"==o.conditionName?o.filterList=this.filterNumber:o.filterList=this.fiterStr,o.filterValue=a[1].trim(),i=a.slice(2).join(" "),"like"==o.filterValue?o.conditionValue=i.replace("'%","").replace("%'","").trim():o.conditionValue=i.trim(),"size"==o.conditionName?o.conditionValue=o.conditionValue/1024/1024:"duration"==o.conditionName&&(o.conditionValue=o.conditionValue/60),this.submitValueList.push(o))}}catch(t){}}else this.addOneCondition()},methods:{addOneCondition(){this.submitValueList.push({conditionName:"",filterValue:"",conditionValue:""})},getLabelbyValue(t,e){for(var i in e)if(e[i].value==t)return e[i].label},onChooseCover(){this.coverPath?this.coverPath="":this.showChooseCover=!0},onSelectedCover(t){t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".JPG")||t.endsWith(".JPEG")||t.endsWith(".png")||t.endsWith(".PNG")?(this.showChooseCover=!1,this.coverPath=t):this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.coverFileNoSupport"))},onConditionChange(t){"size"==t.conditionName||"movie_year"==t.conditionName||"duration"==t.conditionName?t.filterList=this.filterNumber:t.filterList=this.fiterStr,t.filterValue=t.filterList[0].value},addSmartCollection(){if(!this.submitValueList||this.submitValueList.length<1)return this.showVsNotification(this.$t("photo.atleastOnefilterInfo"));if(!this.inputCollectionName)return this.showVsNotification(this.$t("movie.pleaseInputCollectionName"));let t="",e="";for(var i in this.submitValueList){var o=this.submitValueList[i];if(!o.filterValue||!o.conditionName||!o.conditionValue)return this.showVsNotification(this.$t("movie.pleaseCompleteFilterInfo"));if(t+=` ${o.conditionName} ${o.filterValue} `,"like"==o.filterValue?t+=` '%${o.conditionValue}%' `:"movie_year"==o.conditionName?t+=" "+parseInt(o.conditionValue):"size"==o.conditionName?t+=" "+1024*parseInt(o.conditionValue)*1024:"duration"==o.conditionName&&(t+=" "+60*parseInt(o.conditionValue)),"movie_year"==o.conditionName&&(Number.isNaN(parseInt(o.conditionValue))||o.conditionValue<1800||2200<o.conditionValue))return this.showVsNotification(this.$t("movie.yearLimit"));i!=this.submitValueList.length-1&&(t+=" AND ");var s=this.getLabelbyValue(o.conditionName,this.conditionList),a=this.getLabelbyValue(o.filterValue,o.filterList);e+=s+" "+a+" "+o.conditionValue,"size"==o.conditionName?e+=" MB":"duration"==o.conditionName&&(e+=this.$t("security.minutes")),i!=this.submitValueList.length-1&&(e+=" / ")}var n={type:"smart",title:this.inputCollectionName,enablePwd:this.enablePwd?"1":"0",pwd:this.password,data:{searchValue:t},coverPath:this.coverPath,shareForSubUser:this.shareForSubUser?"1":"0",dataValue:e};this.editCollection&&(n.collectionId=this.editCollection.id),this.api.post("/api/movieApi/addCollection",n).then(t=>{t.code||(this.showAddDialog=!1,this.$emit("onAdd"),this.showVsNotification(this.$t("common.operationSuccess")))}).catch(t=>{})}}};a("5e40");S={created(){},mounted(){var t="cacheMovieAiAlbumSortField",t=(localStorage.getItem(t)&&(this.orderField=localStorage.getItem(t)),"cacheMovieAiAlbumSortType");localStorage.getItem(t)&&(this.orderType=localStorage.getItem(t)),this.loadFirstPage(),window.addEventListener("resize",this.calImageWidth),window.addEventListener("popstate",this.onPopstate)},beforeDestroy(){window.removeEventListener("resize",this.calImageWidth),window.removeEventListener("popstate",this.onPopstate)},components:{smartCollectionAdd:Object(s.a)(S,function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("div",{staticClass:"root"},[s("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[o.coverPath?s("img",{staticClass:"img-cover",attrs:{src:o.axios.getRawFileUrl(o.coverPath,"cover.jpg")}}):o._e(),s("a",{staticStyle:{"margin-top":"10px"},on:{click:o.onChooseCover}},[o._v(o._s(o.coverPath?o.$t("movie.deleteCover"):o.$t("movie.addCover")))])]),s("div",{staticClass:"date-root"},[s("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[s("p",[o._v(o._s(o.$t("movie.smartCollectionExample")))])]),s("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[s("p",[o._v(o._s(o.$t("movie.smartCollectionExampleB")))])]),s("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[s("p",[o._v(o._s(o.$t("movie.smartCollectionExampleC")))])]),s("h4",{staticStyle:{"margin-top":"30px","margin-bottom":"10px","text-align":"left"}},[o._v(" "+o._s(o.$t("movie.conditionFilter"))+": ")]),o._l(o.submitValueList,function(e,i){return s("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"flex-start"}},[s("div",{staticStyle:{"margin-top":"10px"}},[s("Icon",{staticStyle:{"font-size":"20px","margin-right":"10px",cursor:"pointer"},attrs:{type:"md-trash"},on:{click:function(t){return o.submitValueList.splice(i,1)}}}),s("Select",{staticStyle:{width:"100px"},on:{"on-change":function(t){return o.onConditionChange(e)}},model:{value:e.conditionName,callback:function(t){o.$set(e,"conditionName",t)},expression:"condition.conditionName"}},o._l(o.conditionList,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[o._v(o._s(t.label)+" ")])}),1),s("Select",{staticStyle:{width:"100px","margin-left":"10px"},model:{value:e.filterValue,callback:function(t){o.$set(e,"filterValue",t)},expression:"condition.filterValue"}},o._l(e.filterList,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[o._v(o._s(t.label)+" ")])}),1),s("Input",{staticStyle:{width:"80px","margin-left":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",maxlength:"30",placeholder:o.$t("movie.filterValue")},model:{value:e.conditionValue,callback:function(t){o.$set(e,"conditionValue",t)},expression:"condition.conditionValue"}}),"size"==e.conditionName?s("span",{staticStyle:{"margin-left":"5px"}},[o._v("MB")]):o._e(),"duration"==e.conditionName?s("span",{staticStyle:{"margin-left":"5px"}},[o._v(o._s(o.$t("security.minutes")))]):o._e()],1)])}),s("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"dashed"},on:{click:function(t){return o.addOneCondition()}}},[o._v("+ "+o._s(o.$t("photo.filterInfo")))])],2),s("Divider"),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("p",{staticStyle:{"margin-right":"20px"}},[o._v(o._s(o.$t("movie.collectionIsNeedPwd")))]),s("i-switch",{model:{value:o.enablePwd,callback:function(t){o.enablePwd=t},expression:"enablePwd"}})],1),o.enablePwd?s("vs-input",{attrs:{autocapitalize:"off",autocorrect:"off",type:"password",placeholder:o.$t("movie.collectionPwdPlaceholder")},scopedSlots:o._u([{key:"icon",fn:function(){return[s("Icon",{attrs:{color:"#99AABF",type:"ios-key"}})]},proxy:!0}],null,!1,3197728351),model:{value:o.password,callback:function(t){o.password=t},expression:"password"}}):o._e(),s("Divider"),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("p",{staticStyle:{"margin-right":"20px"}},[o._v(o._s(o.$t("shareForSubUser")))]),s("i-switch",{model:{value:o.shareForSubUser,callback:function(t){o.shareForSubUser=t},expression:"shareForSubUser"}})],1),o.shareForSubUser?s("div",{staticStyle:{"margin-top":"5px"}},[s("p",{staticClass:"text-grey"},[o._v(o._s(o.$t("movie.libraryUserAlert")))])]):o._e(),s("Divider"),s("div",[s("h4",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[o._v(" "+o._s(o.$t("movie.addCollectionPlaceholder"))+": ")]),s("div",{staticStyle:{display:"flex","align-items":"center"}},[s("Input",{staticStyle:{width:"200px"},attrs:{autocapitalize:"off",autocorrect:"off",maxlength:"30",placeholder:o.$t("movie.addCollectionPlaceholder")},model:{value:o.inputCollectionName,callback:function(t){o.inputCollectionName=t},expression:"inputCollectionName"}}),s("my-btn",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",title:o.$t("movie.addCollection")},on:{click:o.addSmartCollection}})],1)]),s("vs-dialog",{attrs:{scroll:"","full-screen":o.isMobile},scopedSlots:o._u([{key:"header",fn:function(){return[s("h4",{staticStyle:{"font-size":"16px"}},[o._v(" "+o._s(o.$t("movie.addCover")+"["+o.$t("file.doubleClickFolderEnter")+"]")+" ")])]},proxy:!0},{key:"footer",fn:function(){return[s("file-select-bar",{on:{back:function(t){return o.$refs.fileSelector.goBack()},select:function(t){return o.$refs.fileSelector.onSelect()},create:function(t){return o.$refs.fileSelector.createNewFolder(t)}}})]},proxy:!0}]),model:{value:o.showChooseCover,callback:function(t){o.showChooseCover=t},expression:"showChooseCover"}},[o.showChooseCover?s("file-select",{ref:"fileSelector",attrs:{parent:"root",fileType:0},on:{onSelect:o.onSelectedCover,onCancel:function(t){o.showChooseCover=!1}}}):o._e()],1)],1)},[],!1,null,"13f00817",null).exports,collectionDetail:g.a},data(){return{nextHasMore:!0,nextLoading:!1,searchStr:"",orderField:"id",orderType:"desc",pageSize:20,editCollection:null,rightMenuList:[{text:this.$t("file.check"),type:"CHECK"},{text:this.$t("common.delete"),type:"DELETE"}],showCollectionDetail:!1,dialogTitle:"",selectedCollection:"",itemBaseWidth:200,itemWidth:200,itemMargin:10,dataList:[],showAddDialog:!1,inputCollectionName:"",collectionPwd:"",selectedIndex:!1}},computed:{},methods:{onSearch(t){this.searchStr=t,this.loadFirstPage()},loadFirstPage(){this.dataList=[],this.nextHasMore=!0,this.nextLoading=!1,this.getCollectionList()},loadNextPage(){this.getCollectionList()},onPageScroll(t){"ai-album-wrapper"==t.target.id&&this.dealOnPageScroll(t,()=>{this.loadNextPage()},t=>{})},clickOrder(){localStorage.setItem("cacheMovieAiAlbumSortField",this.orderField),localStorage.setItem("cacheMovieAiAlbumSortType",this.orderType),this.loadFirstPage()},showRightMenu(t,e,i,o){if(this.isMobile)return t.preventDefault();this.selectedIndex=o,this.selectedCollection=i,this.$easycm(t,e)},rightMenuClick(t){t=this.rightMenuList[t[0]].type;"CHECK"==t?this.onCollectionClick(this.selectedIndex):"DELETE"==t&&this.deleteCollection(this.selectedCollection)},onPopstate(){this.showCollectionDetail?this.showCollectionDetail=!1:this.$router.go(-1)},onAddFinish(){this.showAddDialog=!1,this.loadFirstPage()},checkPwd(t){this.collectionPwd=t,this.api.post("/api/movieApi/checkCollectionPwd",{pwd:t,collectionId:this.selectedCollection.id}).then(t=>{t.code||(this.$refs.inputPwdDialog.setShow(!1),this.showCollectionDetail=!0,this.pushState())}).catch(t=>{})},onCollectionClick(t){this.selectedCollection=this.dataList[t],1==this.selectedCollection.enable_pwd?this.$refs.inputPwdDialog.setShow(!0):(this.showCollectionDetail=!0,this.pushState())},showAdd(t){(this.editCollection=t)?(this.dialogTitle=this.$t("movie.editCollection"),this.inputCollectionName=t.title):(this.dialogTitle=this.$t("movie.addSmartCollection"),this.inputCollectionName=""),this.showAddDialog=!0},calImageWidth(){var t=this.$refs.photoWrapper.getBoundingClientRect(),t=this.utils.calItemWidth(t,this.itemBaseWidth,this.itemMargin);t&&(this.itemWidth=t)},deleteCollection(i){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("common.deleteSure"),()=>{this.api.post("/api/movieApi/deleteCollection",{collectionId:i.id}).then(t=>{if(!t.code)for(var e in this.showVsNotification(this.$t("common.operationSuccess")),this.dataList)if(this.dataList[e].id==i.id){this.dataList.splice(e,1);break}}).catch(t=>{this.showVsNotification(this.$t("common.operationFail"))})})},getCollectionList(){var t;!this.nextLoading&&this.nextHasMore&&(this.nextLoading=!0,t={offset:this.dataList.length,count:this.pageSize,orderType:this.orderType,orderField:this.orderField,type:"smart"},this.searchStr&&(t.search=this.searchStr),this.api.post("/api/movieApi/getCollection",t).then(e=>{if(!e.code){for(let t=0;t<e.data.length;t++)e.data[t].coverMovie&&n.a.dealMovieList(!1,[e.data[t].coverMovie]),this.dataList.push(e.data[t]);e.data.length<this.pageSize&&(this.nextHasMore=!1),this.$nextTick(()=>{this.calImageWidth()}),this.nextLoading=!1}}).catch(t=>{this.nextLoading=!1}))}}};a("e0cc");g=Object(s.a)(S,function(){var o=this,t=o.$createElement,s=o._self._c||t;return s("div",{staticClass:"list-root"},[!o.nextLoading&&o.dataList.length<1?s("my-nodata",{staticStyle:{position:"absolute",width:"100%","margin-top":"150px"},attrs:{title:o.$t("movie.addSmartCollectionAlert"),btnTitle:1==o.$store.state.currentUser.is_admin?o.$t("movie.addSmartCollection"):null},on:{onBtnClick:o.showAdd}}):o._e(),s("div",{staticStyle:{overflow:"hidden",width:"100%"},style:{height:"100%"}},[s("div",{staticClass:"top-root"},[s("div",{staticClass:"nas-padding-left",staticStyle:{flex:"1",display:"flex","justify-content":"flex-start"}},[s("span",{staticClass:"nasIcons icon-add operation-icon",on:{click:function(t){return o.showAdd()}}}),s("Poptip",{attrs:{placement:"bottom"},scopedSlots:o._u([{key:"content",fn:function(){return[s("div",{staticClass:"sort-root"},[s("div",[o._v(o._s(o.$t("common.sortField")))]),s("RadioGroup",{staticStyle:{"margin-top":"5px"},attrs:{vertical:""},on:{"on-change":o.clickOrder},model:{value:o.orderField,callback:function(t){o.orderField=t},expression:"orderField"}},[s("Radio",{attrs:{label:"title"}},[s("span",[o._v(o._s(o.$t("common.name")))])]),s("Radio",{attrs:{label:"id"}},[s("span",[o._v(o._s(o.$t("movie.createTime")))])])],1),s("div",{staticStyle:{"margin-top":"15px"}},[o._v(o._s(o.$t("common.sortType")))]),s("RadioGroup",{staticStyle:{"margin-top":"5px"},attrs:{vertical:""},on:{"on-change":o.clickOrder},model:{value:o.orderType,callback:function(t){o.orderType=t},expression:"orderType"}},[s("Radio",{attrs:{label:"asc"}},[s("span",[o._v(o._s(o.$t("common.asc")))])]),s("Radio",{attrs:{label:"desc"}},[s("span",[o._v(o._s(o.$t("common.desc")))])])],1)],1)]},proxy:!0}])},["asc"==o.orderType?s("span",{staticClass:"nasIcons icon-sort-alpha-up operation-icon"}):o._e(),"desc"==o.orderType?s("span",{staticClass:"nasIcons icon-sort-alpha-down-alt operation-icon"}):o._e()])],1),s("div",{staticClass:"list-title",staticStyle:{flex:"1"}},[s("span",{staticClass:"max-line-one"},[o._v(o._s(o.$t("movie.smartCollection")))]),s("Icon",{staticStyle:{cursor:"pointer"},attrs:{size:"16",type:"ios-help-circle-outline"},on:{click:function(t){t.stopPropagation(),o.showVsAlertDialog(o.$t("common.alert"),o.$t("movie.addSmartCollectionAlert"))}}})],1),s("div",{staticClass:"nas-padding-right",staticStyle:{flex:"1",display:"flex","justify-content":"flex-end"}},[s("my-search",{ref:"mySearch",staticStyle:{"max-width":"200px"},attrs:{placeholder:o.$t("common.pleaseInputSearchContent")},on:{onSearch:o.onSearch}})],1)]),s("div",{staticStyle:{width:"100%",height:"100%",overflow:"scroll"},attrs:{id:"ai-album-wrapper"},on:{scroll:o.onPageScroll}},[s("div",{ref:"photoWrapper",staticClass:"album-list-root"},o._l(o.dataList,function(e,i){return s("vs-card",{style:{margin:o.itemMargin+"px",width:o.itemWidth+"px"},attrs:{type:"1"},on:{click:function(t){return o.onCollectionClick(i)}},scopedSlots:o._u([{key:"title",fn:function(){return[s("h3",{staticClass:"max-line-one",staticStyle:{"text-align":"left"}},[o._v(o._s(e.title))])]},proxy:!0},{key:"img",fn:function(){return[e.collection_cover_path?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o.axios.getRawFileUrl(e.collection_cover_path,"cover.jpg"),expression:"axios.getRawFileUrl(collection.collection_cover_path, 'cover.jpg')"}],staticStyle:{"object-fit":"cover"},style:{width:o.itemWidth+"px",height:o.itemWidth+"px"}}):e.collection_cover_path||1!=e.enable_pwd?!e.collection_cover_path&&e.coverMovie&&e.coverMovie.url?s("img",{staticStyle:{"object-fit":"cover"},style:{width:o.itemWidth+"px",height:o.itemWidth+"px"},attrs:{src:e.coverMovie.url}}):s("img",{staticStyle:{"object-fit":"cover"},style:{width:o.itemWidth+"px",height:o.itemWidth+"px"},attrs:{src:a("c16b")}}):s("img",{staticStyle:{"object-fit":"cover"},style:{width:o.itemWidth+"px",height:o.itemWidth+"px"},attrs:{src:a("3bfa")}})]},proxy:!0},{key:"text",fn:function(){return[e.data_value?s("vs-tooltip",{scopedSlots:o._u([{key:"tooltip",fn:function(){return[o._v(" "+o._s(e.data_value)+" ")]},proxy:!0}],null,!0)},[s("p",{staticClass:"item-subtitle max-line-one"},[o._v(o._s(e.data_value||e.create_time))])]):o._e()]},proxy:!0},{key:"interactions",fn:function(){return[1==o.$store.state.currentUser.is_admin?s("vs-button",{staticClass:"btn-chat",attrs:{icon:"",shadow:"",primary:""},on:{click:function(t){return t.stopPropagation(),o.showAdd(e)}}},[s("Icon",{attrs:{type:"md-settings",size:"20"}})],1):o._e(),1==o.$store.state.currentUser.is_admin?s("vs-button",{staticClass:"btn-chat",attrs:{icon:"",shadow:"",primary:""},on:{click:function(t){return t.stopPropagation(),o.deleteCollection(e)}}},[s("Icon",{attrs:{type:"md-trash",size:"20"}})],1):o._e()]},proxy:!0}],null,!0)})}),1),s("div",{staticStyle:{display:"flex","justify-content":"center",width:"100%","flex-direction":"column","align-items":"center"}},[o.nextHasMore&&0<o.dataList.length?s("Button",{staticStyle:{width:"250px","margin-top":"30px",height:"45px","border-radius":"20px"},attrs:{type:"default"},on:{click:function(t){return o.loadNextPage()}}},[o._v(o._s(o.$t("common.loadmore")))]):o._e(),o.nextLoading?s("Spin",{staticStyle:{"margin-top":"30px"},attrs:{size:"large"}}):o._e(),!o.nextLoading&&!o.nextHasMore&&0<o.dataList.length?s("span",{staticStyle:{"margin-top":"30px"}},[o._v(o._s(o.$t("common.noMore")))]):o._e(),s("div",{staticStyle:{height:"50px"}})],1),s("div",{staticStyle:{height:"50px",width:"100%"}})]),s("Modal",{attrs:{"footer-hide":""},model:{value:o.showAddDialog,callback:function(t){o.showAddDialog=t},expression:"showAddDialog"}},[o.showAddDialog?s("smart-collection-add",{attrs:{editCollection:o.editCollection},on:{onAdd:o.onAddFinish}}):o._e()],1),s("Modal",{attrs:{fullscreen:"","footer-hide":"",closable:!1,"class-name":"modal-style-nopadding"},model:{value:o.showCollectionDetail,callback:function(t){o.showCollectionDetail=t},expression:"showCollectionDetail"}},[o.showCollectionDetail?s("collection-detail",{attrs:{collectionId:o.selectedCollection.id,title:o.selectedCollection.title,collectionPwd:o.collectionPwd,isAiCollection:!0},on:{onClose:function(t){o.showCollectionDetail=!1}}}):o._e()],1),s("my-dialog-input",{ref:"inputPwdDialog",attrs:{isPwd:!0,showCloseBtn:!0,closeOnClickBtn:!1,clearOnOpen:!0,title:o.$t("registerAdmin.placeholderPassword"),content:o.$t("registerAdmin.placeholderPassword")},on:{onOkClick:o.checkPwd}})],1)],1)},[],!1,null,"0ae5b9b1",null).exports,S={props:{movieIndexObj:{default:{},type:Object}},data(){return{searchType:"KEYWORD",searchMediaType:"TV",tvSeasonData:null,hasMore:!0,searchStr:"",searchResultList:[],isLoading:!1,page:1}},mounted(){this.movieIndexObj&&(this.searchStr=this.movieIndexObj.filename.replace(".mp4","").replace(".mkv","").replace(".rm","").replace(".mov","").replace(".avi","").replace(".rmvb","").replace(".wmv",""),1==this.movieIndexObj.is_tvplay&&this.movieIndexObj.tvFolderName&&(this.searchStr=this.movieIndexObj.tvFolderName),1==this.movieIndexObj.is_tvplay?this.searchMediaType="TV":this.searchMediaType="MOVIE")},methods:{selectMovieInfo(t){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("movie.confirmMovieInfo",{movieName:t.movie_name}),()=>{this.api.post("/api/movieInfoApi/setMovieInfo",{indexId:this.movieIndexObj.id,tmdbId:t.tmdb_id}).then(t=>{t.code||this.showVsAlertDialog(this.$t("common.alert"),this.$t("afterScrapeAlert"),()=>{this.$bus.$emit("eventOnMovieInfoSearchFinish",this.movieIndexObj)})}).catch(t=>{})})},searchMovieInfo(i){var t;if(i?this.page+=1:(this.hasMore=!0,this.page=1),!this.isLoading)return this.isLoading=!0,this.searchStr?(t={searchType:this.searchType,searchStr:this.searchStr,searchMediaType:this.searchMediaType,page:this.page},void this.api.post("/api/movieInfoApi/searchMovieInfo",t).then(t=>{if(this.isLoading=!1,!t.code){(t.data.length<1||"TMDBID"==this.searchType)&&(this.hasMore=!1);for(var e of t.data)e.cover_url=f.a.getTmdbImgUrlByUrl(e.cover_url,!0);this.searchResultList=i?this.searchResultList.concat(t.data):t.data}}).catch(t=>{this.isLoading=!1})):this.showVsNotification(this.$t("common.pleaseInputSearchContent"))}}};a("4223");var S=Object(s.a)(S,function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[o("div",{staticClass:"nas-flex-row-center",staticStyle:{width:"100%","margin-bottom":"10px","align-items":"center","margin-top":"10px",display:"flex"}},[o("div",{staticStyle:{"margin-right":"10px"}},[i._v(i._s(i.$t("common.search"))+":")]),o("RadioGroup",{model:{value:i.searchType,callback:function(t){i.searchType=t},expression:"searchType"}},[o("Radio",{attrs:{label:"KEYWORD"}},[o("span",[i._v(i._s(i.$t("keyword")))])]),o("Radio",{attrs:{label:"TMDBID"}},[o("span",[i._v("TMDB ID")])])],1)],1),o("div",{staticClass:"nas-flex-row-center",staticStyle:{width:"100%","margin-bottom":"10px","align-items":"center","margin-top":"10px",display:"flex"}},[o("div",{staticStyle:{"margin-right":"10px"}},[i._v(i._s(i.$t("type"))+":")]),o("RadioGroup",{model:{value:i.searchMediaType,callback:function(t){i.searchMediaType=t},expression:"searchMediaType"}},[o("Radio",{attrs:{label:"MOVIE"}},[o("span",[i._v(i._s(i.$t("movie.movie")))])]),o("Radio",{attrs:{label:"TV"}},[o("span",[i._v(i._s(i.$t("movie.tvdrama")))])])],1)],1),o("Input",{staticStyle:{"margin-bottom":"10px"},attrs:{autocapitalize:"off",autocorrect:"off",search:"","enter-button":i.$t("common.search"),placeholder:i.$t("common.pleaseInputSearchContent")},on:{"on-search":function(t){return i.searchMovieInfo(!1)}},model:{value:i.searchStr,callback:function(t){i.searchStr=t},expression:"searchStr"}}),o("div",{staticClass:"search-list-root"},i._l(i.searchResultList,function(e,t){return o("div",{staticClass:"search-item",on:{click:function(t){return i.selectMovieInfo(e)}}},[o("div",{staticClass:"poster-root"},[1==e.cover_get?o("img",{staticClass:"search-poster",attrs:{src:e.cover_url}}):o("img",{staticClass:"search-poster",attrs:{src:a("915f")}})]),o("div",{staticClass:"item-movie-name"},[i._v(i._s(e.movie_name)),o("span",[i._v("("+i._s(e.year)+")")])]),e.storyline?o("div",{staticClass:"item-movie-region max-line-three",staticStyle:{"word-break":"break-all","font-size":"12px"}},[i._v(i._s(e.storyline))]):i._e()])}),0),i.hasMore&&0<i.searchResultList.length?o("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","text-align":"center",width:"100%",padding:"10px"}},[o("my-btn",{staticStyle:{width:"200px"},attrs:{type:"white",title:i.$t("common.loadmore")},on:{click:function(t){return i.searchMovieInfo(!0)}}})],1):i._e(),i.hasMore?i._e():o("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","text-align":"center",width:"100%"}},[i._v(" "+i._s(i.$t("common.noMore"))+" ")])],1)},[],!1,null,"1b1256f1",null).exports,w=(a("d930"),{components:{},data(){return{hasMore:!0,count:10,dataList:[]}},mounted(){this.getLogs()},beforeDestroy(){},computed:{},methods:{getLogs(){this.api.post("/api/movieInfoApi/getScrapeLog",{count:this.count,offset:this.dataList.length}).then(t=>{if(!t.code){for(var e of t.data)"NFO"==e.scrape_type?e.scrapeTypeStr="NFO":"POSTER"==e.scrape_type?e.scrapeTypeStr=this.$t("poster"):"API_SEASON_DETAIL"==e.scrape_type?e.scrapeTypeStr=this.$t("scrapeSeasonDetail"):"API_DETAIL"==e.scrape_type?e.scrapeTypeStr=this.$t("scrapeDetail"):"SCRAPE_MISSING"==e.scrape_type&&(e.scrapeTypeStr=this.$t("scrapeEpisode")),this.dataList.push(e);t.data.length<this.count&&(this.hasMore=!1)}})},clearScrapeLog(){this.api.post("/api/movieInfoApi/clearScrapeLog",{}).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),this.dataList=[],this.hasMore=!0,this.getLogs())})}}});a("f3b8");var w=Object(s.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"log-root"},[i("strong",[e._v(e._s(e.$t("scrapeLog"))+": "),i("Tooltip",{attrs:{disabled:e.isMobile,content:e.$t("common.clear")}},[i("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"md-trash"},on:{click:function(t){return e.clearScrapeLog()}}})],1)],1),i("br"),i("br"),i("List",{attrs:{border:""}},e._l(e.dataList,function(t){return i("ListItem",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"flex-start","align-items":"flex-start"}},[t.create_time?i("div",{staticClass:"log-item"},[i("span",{staticClass:"log-title"},[e._v(e._s(e.utils.formatTimeStamp(t.create_time)))]),i("span",{staticClass:"log-title",staticStyle:{"margin-left":"10px"},style:{color:"SUCCESS"==t.result?"#1d953f":"red"}},[e._v(e._s("SUCCESS"==t.result?e.$t("common.succesed"):e.$t("common.faild")))])]):e._e(),t.scrapeTypeStr?i("div",{staticClass:"log-item"},[i("span",{staticClass:"log-title"},[e._v(e._s(e.$t("scrapeType"))+":")]),i("span",{staticClass:"log-content"},[e._v(e._s(t.scrapeTypeStr))])]):e._e(),t.scrape_path?i("div",{staticClass:"log-item"},[i("span",{staticClass:"log-title"},[e._v(e._s(e.$t("scrapePath"))+":")]),i("span",{staticClass:"log-content"},[e._v(e._s(t.scrape_path))])]):e._e(),t.nfo_path||t.img_path?i("div",{staticClass:"log-item"},[i("span",{staticClass:"log-title"},[e._v(e._s(e.$t("resultPath"))+":")]),i("span",{staticClass:"log-content"},[e._v(e._s(t.nfo_path||t.img_path))])]):e._e(),t.message?i("div",{staticClass:"log-item"},[i("span",{staticClass:"log-content",staticStyle:{color:"red","font-weight":"bold"}},[e._v(e._s(t.message)),i("span",[e._v(e._s(e.$t("tryRescrape")))])])]):e._e()])}),1),i("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"20px"}},[e.hasMore?i("Button",{staticStyle:{width:"50%"},on:{click:e.getLogs}},[e._v(e._s(e.$t("common.loadmore")))]):i("div",[e._v(e._s(e.$t("common.noMore")))])],1)],1)},[],!1,null,"4997161b",null).exports,b=a("a732"),w={mounted(){let t=!1;if(localStorage.movieViewType)for(var e in this.sideOptionList)if(this.sideOptionList[e].id==localStorage.movieViewType){this.viewType=localStorage.movieViewType,t=!0,this.$refs.sidebarMobile&&this.$refs.sidebarMobile.setIndex(e),this.$refs.sidebar&&this.$refs.sidebar.setIndex(e);break}t||this.setViewType("home"),this.$bus.$on("eventOnShowSearchMovieInfo",this.onShowSearchMovieInfo),this.$bus.$on("eventOnDeleteMovie",this.onDeleteMovie),this.$bus.$on("eventOnAddToCollection",this.onAddToCollection),this.$bus.$on("eventOnShowMovieDetail",this.onShowMovieDetailInfo),this.$bus.$on("eventOnFavoriteMovie",this.onFavoriteMovie),this.$bus.$on("eventOnRemoveFromCollection",this.onRemoveFromCollection),this.$bus.$on("eventOnScrapeAgain",this.onScrapeAgain),this.$bus.$on("eventOnClearMovieInfo",this.onClearMovieInfo),this.$bus.$on("eventOnShowRightMenu",this.onShowRightMenu),this.$bus.$on("eventOnPlayVideo",this.onPlayVideo),this.$bus.$on("eventOnShowGenreDetail",this.onShowGenreDetail),this.$bus.$on("eventOnShowScrapeLogs",this.onShowScrapeLogs),this.$bus.$on("eventOnCloseAllDetail",this.onCloseAllDetail),window.addEventListener("popstate",this.onPopstate)},beforeDestroy(){this.$bus.$off("eventOnShowSearchMovieInfo",this.onShowSearchMovieInfo),this.$bus.$off("eventOnDeleteMovie",this.onDeleteMovie),this.$bus.$off("eventOnAddToCollection",this.onAddToCollection),this.$bus.$off("eventOnShowMovieDetail",this.onShowMovieDetailInfo),this.$bus.$off("eventOnFavoriteMovie",this.onFavoriteMovie),this.$bus.$off("eventOnRemoveFromCollection",this.onRemoveFromCollection),this.$bus.$off("eventOnScrapeAgain",this.onScrapeAgain),this.$bus.$off("eventOnClearMovieInfo",this.onClearMovieInfo),this.$bus.$off("eventOnShowRightMenu",this.onShowRightMenu),this.$bus.$off("eventOnPlayVideo",this.onPlayVideo),this.$bus.$off("eventOnShowGenreDetail",this.onShowGenreDetail),this.$bus.$off("eventOnShowScrapeLogs",this.onShowScrapeLogs),this.$bus.$off("eventOnCloseAllDetail",this.onCloseAllDetail),window.removeEventListener("popstate",this.onPopstate)},components:{scrapeLogs:w,movieGenresDetail:l.a,videoDetail:h.default,MovieInfoDetail:c.default,movieCollectionList:()=>Promise.resolve().then(a.bind(null,"e54c")),searchMovieInfo:S,movieHome:d,movieLibrary:b.a,movieAiCollection:g,movieCollection:r.default,movieHistory:u,sourceSetMovie:p,myHeader:i.a,movieList:o.default,folder:v.a,movieSet:m},data(){return{isShowScrapeLogs:!1,isShowGenresDetail:!1,selectedGenres:"",selectedRegion:"",selectedActor:"",selectedDirector:"",selectedSourceItem:null,isShowVideoPlayer:!1,isShowMobileMenu:!1,selectedIndexObj:null,rightMenuList:[],showDetailMovieList:[],showDetailMovieIndex:[],isShowMovieInfoDetail:!1,showCollectionSelectDialog:!1,selectedMovieIndex:null,searchMovieIndexObj:null,showSearchMovieInfo:!1,viewType:"",sideOptionList:[{id:"home",title:this.$t("movie.movieHome"),font:"nasIcons icon-movies-library"},{id:"list",title:this.$t("movie.listViewView"),font:"nasIcons icon-list"},{id:"folder",title:this.$t("movie.viewFolder"),font:"nasIcons icon-folder-iew"},{id:"history",title:this.$t("movie.history"),font:"nasIcons icon-movie-history"},{id:"library",title:this.$t("movie.library"),font:"nasIcons icon-ziliaoku"},{id:"aiCollections",title:this.$t("movie.smartCollection"),font:"nasIcons icon-ai-album"},{id:"collections",title:this.$t("movie.collection"),font:"nasIcons icon-movie-collection"},{id:"movieSet",title:this.$t("movie.movieSet"),font:"nasIcons icon-setting-system",onlyAdmin:!0},{id:"sourceSet",title:this.$t("setting.movieSourceSetting"),font:"nasIcons icon-movies-source",onlyAdmin:!0}]}},computed:{},methods:{onCloseAllDetail(){this.isShowGenresDetail&&(this.isShowGenresDetail=!1),this.isShowMovieInfoDetail&&(this.isShowMovieInfoDetail=!1)},onShowScrapeLogs(){this.isShowScrapeLogs=!0},onShowGenreDetail(t,e,i,o){this.isShowGenresDetail&&(this.isShowGenresDetail=!1),this.$nextTick(()=>{this.selectedGenres=t,this.selectedRegion=e,this.selectedActor=i,this.selectedDirector=o,this.isShowGenresDetail=!0}),this.pushState()},onPlayVideo(t,e){if(1==t[e].is_tvplay)this.onShowMovieDetailInfo(t,e);else{if(this.$refs.easycm&&this.$refs.easycm.show)return this.$refs.easycm.hide();"1"==localStorage.getItem("rawPlayer")||this.isIosSupportRawPlayer()?y.a.playVideo({playIndex:e,playList:t,token:this.$store.state.token,fromFileBrower:!1,serverType:"movie"}):(this.isShowVideoPlayer=!0,this.pushState(),this.$nextTick(()=>{this.$refs.videoPlayer.playVideo(t,e)}))}},rightMenuClick(t,e){this.isShowMobileMenu=!1;e=e||this.rightMenuList[t[0]].type;"SCAN"==e?(t=1==this.selectedMovieIndex.is_tvplay?this.selectedMovieIndex.tvFolderPath:this.selectedMovieIndex.path,this.scanPath("movie",t)):"SCRAPEAGAIN"==e?this.$bus.$emit("eventOnScrapeAgain",this.selectedMovieIndex):"SCRAPESEARCH"==e?this.$bus.$emit("eventOnShowSearchMovieInfo",this.selectedMovieIndex):"SCRAPEEIPSODE"==e?this.$bus.$emit("eventOnScrapeAgain",this.selectedMovieIndex,!0):"DELETE"==e?this.$bus.$emit("eventOnDeleteMovie",this.selectedMovieIndex):"addToCollection"==e?this.$bus.$emit("eventOnAddToCollection",this.selectedMovieIndex):"removeFromCollection"==e?this.$bus.$emit("eventOnRemoveFromCollection",this.selectedMovieIndex):"FAVORITE"==e?this.$bus.$emit("eventOnFavoriteMovie",this.selectedMovieIndex):"OPEN_IN_SYSTEM"==e?this.openInSystem(this.selectedMovieIndex.path,this.selectedMovieIndex.filename,null):"SELECT_IN_SYSTEM"==e?this.openInSystem(this.selectedMovieIndex.path,this.selectedMovieIndex.filename,null,"showItemInFolder"):"REFRESH"==e?this.$bus.$emit("eventOnRefreshMovieListContent"):"SCANSOURCE"==e&&this.scanPath("movie",this.selectedSourceItem.path)},onShowRightMenu(t,e,i,o,s){"movieItem"==t?(this.selectedMovieIndex=e,this.initRightMenuMovieItem(e)):"movieItemHistory"==t?(this.selectedMovieIndex=e,this.initRightMenuMovieItem(e,!0)):"sourceItem"==t&&(this.selectedSourceItem=i,this.rightMenuList=n.a.initRightMenuSourceItem(this)),this.$easycm(o,s,"movies")},initRightMenuMovieItem(t,e){this.rightMenuList=n.a.initRightMenu(this,t,e)},onClearMovieInfo(e){this.showVsConfirmDialog(this.$t("common.confirm"),this.$t("movie.confirClearMovieInfo"),()=>{this.api.post("/api/movieInfoApi/clearMovieInfo",{indexId:e.id}).then(t=>{t.code||this.showVsAlertDialog(this.$t("common.alert"),this.$t("successAndRefresh"),()=>{this.$bus.$emit("onClearMovieInfoFinish",e)})}).catch(t=>{})})},onScrapeAgain(e,t){this.showVsConfirmDialog(this.$t("common.confirm"),t?this.$t("scrapeMissingAlert"):this.$t("movie.scrapAlert"),()=>{this.api.post("/api/movieInfoApi/scrapeAgain",{indexId:e.id,scrapeMissing:t?1:0}).then(t=>{t.code||this.showVsAlertDialog(this.$t("common.alert"),this.$t("afterScrapeAlert"),()=>{this.$bus.$emit("eventOnMovieInfoSearchFinish",e)})}).catch(t=>{2==t.code&&this.showVsAlertDialog(this.$t("common.alert"),this.$t("movie.scrapFailAlert"))})})},onRemoveFromCollection(e){this.api.post("/api/movieApi/removeIndexFromCollection",{indexIdList:[e.id]}).then(t=>{t.code||(this.showVsNotification(this.$t("common.operationSuccess")),this.$bus.$emit("eventOnMovieObjRefresh",{...e,hidden:1}))}).catch(t=>{})},onFavoriteMovie(e){n.a.favoriteMovie(this,e,t=>{this.$bus.$emit("eventOnMovieObjRefresh",{...e,favorite:t.favorite})})},onShowMovieDetailInfo(t,e){if(this.$refs.easycm&&this.$refs.easycm.show)return this.$refs.easycm.hide();this.isShowMovieInfoDetail&&(this.isShowMovieInfoDetail=!1),this.$nextTick(()=>{this.showDetailMovieList=t,this.showDetailMovieIndex=e,this.isShowMovieInfoDetail=!0,this.pushState()})},onPopstate(){this.isShowMovieInfoDetail?this.$refs.movieInfoDetail.onPopstate():this.isShowVideoPlayer?this.isShowVideoPlayer=!1:this.isShowGenresDetail?this.isShowGenresDetail=!1:this.$router.go(-1)},onAddToCollection(t){this.selectedMovieIndex=t,this.showCollectionSelectDialog=!0},onSelectCollection(){var t;this.$refs.movieCollectionList&&(t=this.$refs.movieCollectionList.getSelectedCollectionId())&&n.a.onSelectCollection(this,this.selectedMovieIndex,t,()=>{this.showCollectionSelectDialog=!1,this.showVsNotification(this.$t("common.operationSuccess")),this.$bus.$emit("eventOnMovieObjRefresh",{...this.selectedMovieIndex,hidden:1})})},deleteApi(t,e){n.a.deleteApi(this,t,e,1==t.is_tvplay,()=>{this.$bus.$emit("eventOnMovieObjRefresh",{...t,hidden:1})})},onDeleteMovie(e){let t=this.$t("common.deleteSure");1==e.is_tvplay&&(t=this.$t("movie.tvDeleteSure")+`  (${e.path})`),this.showVsConfirmDialog(this.$t("common.confirm"),t,t=>{this.deleteApi(e,t)},null,null,null,300,!0,"linux"==localStorage.platform?null:{checkBoxContent:this.$t("putInSystemTrash"),isCheck:!0})},onShowSearchMovieInfo(t){this.showSearchMovieInfo=!0,this.searchMovieIndexObj=t},setViewType(t){this.viewType=t,this.$refs.sidebar.setSelectById(t),this.$refs.sidebarMobile.setSelectById(t)},setLeftMenuId(t){t=t.id;this.viewType=t,window.localStorage.movieViewType=t}}},l=(a("9fca"),Object(s.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"movies-root"},[i("my-bg"),e._m(0),i("div",{staticClass:"nas-mobile-none"},[i("my-header")],1),i("div",{staticClass:"main-layout nas-padding-right-zero"},[i("div",{staticClass:"sidebar-root"},[i("my-sidebar",{ref:"sidebar",attrs:{name:"movies",optionList:e.sideOptionList},on:{onItemClick:e.setLeftMenuId}})],1),i("div",{staticClass:"sidebar-mobile-root"},[i("my-sidebar-mobile",{ref:"sidebarMobile",attrs:{name:"movies",optionList:e.sideOptionList},on:{onItemClick:e.setLeftMenuId}})],1),i("div",{staticStyle:{width:"100%",height:"100%",overflow:"hidden"}},["home"==e.viewType?i("movie-home",{ref:"movieHome",on:{setViewType:e.setViewType}}):e._e(),"list"==e.viewType?i("movie-list",{ref:"movieList",attrs:{restoreFilter:!0},on:{setViewType:e.setViewType}}):e._e(),"library"==e.viewType?i("movie-library"):e._e(),"folder"==e.viewType?i("folder",{attrs:{serverType:"movie"}}):e._e(),"movieSet"==e.viewType?i("movie-set",{attrs:{hasPadding:!0,serverType:"movie"}}):e._e(),"sourceSet"==e.viewType?i("source-set-movie",{attrs:{hasPadding:!0,sourceType:"movie"}}):e._e(),"history"==e.viewType?i("movie-history",{attrs:{hasPadding:!0}}):e._e(),"collections"==e.viewType?i("movie-collection",{attrs:{hasPadding:!0}}):e._e(),"aiCollections"==e.viewType?i("movie-ai-collection",{attrs:{hasPadding:!0}}):e._e()],1)]),i("Modal",{attrs:{"footer-hide":"",width:"80%"},model:{value:e.showSearchMovieInfo,callback:function(t){e.showSearchMovieInfo=t},expression:"showSearchMovieInfo"}},[i("h4",{staticStyle:{"font-size":"16px"}},[e._v(" "+e._s(e.$t("movie.matchMovieInfo"))+" ")]),e.searchMovieIndexObj&&e.showSearchMovieInfo?i("search-movie-info",{ref:"searchMovieInfo",attrs:{movieIndexObj:e.searchMovieIndexObj},on:{onClose:function(t){e.showSearchMovieInfo=!1,e.searchMovieIndexObj=null}}}):e._e()],1),i("vs-dialog",{attrs:{scroll:""},scopedSlots:e._u([{key:"footer",fn:function(){return[i("vs-button",{attrs:{block:""},on:{click:e.onSelectCollection}},[e._v(" "+e._s(e.$t("common.select"))+" ")])]},proxy:!0}]),model:{value:e.showCollectionSelectDialog,callback:function(t){e.showCollectionSelectDialog=t},expression:"showCollectionSelectDialog"}},[i("movie-collection-list",{ref:"movieCollectionList",staticStyle:{"margin-top":"10px"},attrs:{selectMode:!0}})],1),i("Modal",{attrs:{fullscreen:"","footer-hide":"",closable:!1,"class-name":"modal-style-nopadding"},on:{onClose:function(t){e.showMovieInfoDetail=!1}},model:{value:e.isShowMovieInfoDetail,callback:function(t){e.isShowMovieInfoDetail=t},expression:"isShowMovieInfoDetail"}},[e.isShowMovieInfoDetail?i("movie-info-detail",{ref:"movieInfoDetail",attrs:{propsDetailMovieList:e.showDetailMovieList,propsDetailIndex:e.showDetailMovieIndex,showTvSeriesInfo:1==e.showDetailMovieList[e.showDetailMovieIndex].isTvSeries},on:{onClose:function(t){e.isShowMovieInfoDetail=!1}}}):e._e()],1),i("vs-dialog",{model:{value:e.isShowMobileMenu,callback:function(t){e.isShowMobileMenu=t},expression:"isShowMobileMenu"}},[e.selectedMovieIndex?i("h4",{staticClass:"max-line-one",staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.selectedMovieIndex.filename))]):e._e(),i("my-selector-phone",{attrs:{optionList:e.rightMenuList},on:{onItemClick:function(t){return e.rightMenuClick(null,t.type)}}})],1),i("Modal",{attrs:{fullscreen:"","footer-hide":""},model:{value:e.isShowVideoPlayer,callback:function(t){e.isShowVideoPlayer=t},expression:"isShowVideoPlayer"}},[e.isShowVideoPlayer?i("video-detail",{ref:"videoPlayer",attrs:{propsServerType:"movie"},on:{onClose:function(t){e.isShowVideoPlayer=!1}}}):e._e()],1),i("Modal",{attrs:{fullscreen:"","footer-hide":"",closable:!1,"class-name":"modal-style-nopadding"},model:{value:e.isShowGenresDetail,callback:function(t){e.isShowGenresDetail=t},expression:"isShowGenresDetail"}},[e.isShowGenresDetail?i("movie-genres-detail",{attrs:{initGenres:e.selectedGenres,initActor:e.selectedActor,initDirector:e.selectedDirector,initRegion:e.selectedRegion},on:{onClose:function(t){e.isShowGenresDetail=!1}}}):e._e()],1),i("Modal",{attrs:{"footer-hide":""},model:{value:e.isShowScrapeLogs,callback:function(t){e.isShowScrapeLogs=t},expression:"isShowScrapeLogs"}},[e.isShowScrapeLogs?i("scrape-logs"):e._e()],1),i("easy-cm",{ref:"easycm",attrs:{list:e.rightMenuList,tag:"movies"},on:{ecmcb:e.rightMenuClick}})],1)},[function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"nas-mobile-none"},[t("p",{staticClass:"my-header-position"})])}],!1,null,"7bb5affe",null));e.default=l.exports},dc6d:function(t,e,i){},e0cc:function(t,e,i){"use strict";i("57d4")},f3b8:function(t,e,i){"use strict";i("3c2f")}}]);