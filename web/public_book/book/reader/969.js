"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[969],{350:function(t,e){function i(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e,i){s(t,e),e.set(t,i)}function s(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r(t,e,i){return t.set(h(t,e),i),i}function o(t,e){return t.get(h(t,e))}function h(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}Object.defineProperty(e,"__esModule",{value:!0}),e.Paginator=void 0;const a=t=>1-(1-t)*(1-t),l=function(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;const s=t.createRange();return s.setStart(e,i),s.setEnd(e,n),s},c=function(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.nodeValue.length;if(s-n===1)return i(l(t,e,n),l(t,e,s))<0?n:s;const r=Math.floor(n+(s-n)/2),o=i(l(t,e,n,r),l(t,e,r,s));return o<0?c(t,e,i,n,r):o>0?c(t,e,i,r,s):r},{SHOW_ELEMENT:d,SHOW_TEXT:u,SHOW_CDATA_SECTION:p,FILTER_ACCEPT:g,FILTER_REJECT:m,FILTER_SKIP:f}=NodeFilter,v=d|u|p,w=(t,e,i,n)=>{const s=s=>{var r;const o=null===(r=s.localName)||void 0===r?void 0:r.toLowerCase();if("script"===o||"style"===o)return m;if(1===s.nodeType){const{left:t,right:r}=n(s.getBoundingClientRect());if(r<e||t>i)return m;if(t>=e&&r<=i)return g}else{var h;if(null===(h=s.nodeValue)||void 0===h||!h.trim())return f;const r=t.createRange();r.selectNodeContents(s);const{left:o,right:a}=n(r.getBoundingClientRect());if(a>=e&&o<=i)return g}return f};try{const r=t.createTreeWalker(t.body,v,{acceptNode:s}),o=[];for(let t=r.nextNode();t;t=r.nextNode())o.push(t);const h=o[0]??t.body,a=o[o.length-1]??h,l=1===h.nodeType?0:c(t,h,((t,i)=>{const s=n(t.getBoundingClientRect()),r=n(i.getBoundingClientRect());return s.right<e&&r.left>e?0:r.left>e?-1:1})),d=1===a.nodeType?0:c(t,a,((t,e)=>{const s=n(t.getBoundingClientRect()),r=n(e.getBoundingClientRect());return s.right<i&&r.left>i?0:r.left>i?-1:1})),u=t.createRange();return u.setStart(h,l),u.setEnd(a,d),u}catch(t){}},x=t=>{const e=t.defaultView.getComputedStyle(t.body);return"rgba(0, 0, 0, 0)"===e.backgroundColor&&"none"===e.backgroundImage?t.defaultView.getComputedStyle(t.documentElement).background:e.background},y=(t,e)=>Array.from({length:t},(()=>{const t=document.createElement("div"),i=document.createElement("div");return t.append(i),i.setAttribute("part",e),t})),b=(t,e)=>{const{style:i}=t;for(const[t,n]of Object.entries(e))i.setProperty(t,n,"important")};var k=new WeakMap,E=new WeakMap,M=new WeakMap,C=new WeakMap,_=new WeakMap,S=new WeakMap,z=new WeakMap,W=new WeakMap,T=new WeakMap,A=new WeakMap;class P{constructor(t){let{container:e,onExpand:i}=t;n(this,k,new ResizeObserver((()=>this.expand()))),n(this,E,document.createElement("div")),n(this,M,document.createElement("iframe")),n(this,C,document.createRange()),n(this,_,void 0),n(this,S,!1),n(this,z,!1),n(this,W,!0),n(this,T,void 0),n(this,A,{}),this.container=e,this.onExpand=i,o(M,this).setAttribute("part","filter"),o(E,this).append(o(M,this)),Object.assign(o(E,this).style,{boxSizing:"content-box",position:"relative",overflow:"hidden",flex:"0 0 auto",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),Object.assign(o(M,this).style,{overflow:"hidden",border:"0",display:"none",width:"100%",height:"100%"}),o(M,this).setAttribute("sandbox","allow-same-origin allow-scripts"),o(M,this).setAttribute("scrolling","no")}get element(){return o(E,this)}get document(){return o(M,this).contentDocument}async load(t,e,i){if("string"!=typeof t)throw new Error(`${t} is not string`);return new Promise((n=>{o(M,this).addEventListener("load",(()=>{const t=this.document;null==e||e(t),o(M,this).style.display="block";const{vertical:s,rtl:h}=(t=>{const{defaultView:e}=t,{writingMode:i,direction:n}=e.getComputedStyle(t.body);return{vertical:"vertical-rl"===i||"vertical-lr"===i,rtl:"rtl"===t.body.dir||"rtl"===n||"rtl"===t.documentElement.dir}})(t),a=x(t);o(M,this).style.display="none",r(S,this,s),r(z,this,h),o(C,this).selectNodeContents(t.body);const l=null==i?void 0:i({vertical:s,rtl:h,background:a});o(M,this).style.display="block",this.render(l),o(k,this).observe(t.body),t.fonts.ready.then((()=>this.expand())),n()}),{once:!0}),o(M,this).src=t}))}render(t){t&&(r(W,this,"scrolled"!==t.flow),r(A,this,t),o(W,this)?this.columnize(t):this.scrolled(t))}scrolled(t){let{gap:e,columnWidth:i}=t;const n=o(S,this),s=this.document;b(s.documentElement,{"box-sizing":"border-box",padding:n?`${e}px 0`:`0 ${e}px`,"column-width":"auto",height:"auto",width:"auto"}),b(s.body,{[n?"max-height":"max-width"]:`${i}px`,margin:"auto"}),this.setImageSize(),this.expand()}columnize(t){let{width:e,height:i,gap:n,columnWidth:s}=t;const h=o(S,this);r(T,this,h?i:e);const a=this.document;b(a.documentElement,{"box-sizing":"border-box","column-width":`${Math.trunc(s)}px`,"column-gap":`${n}px`,"column-fill":"auto",...h?{width:`${e}px`}:{height:`${i}px`},padding:h?n/2+"px 0":`0 ${n/2}px`,overflow:"hidden","overflow-wrap":"break-word",position:"static",border:"0",margin:"0","max-height":"none","max-width":"none","min-height":"none","min-width":"none","-webkit-line-box-contain":"block glyphs replaced"}),b(a.body,{"max-height":"none","max-width":"none",margin:"0"}),this.setImageSize(),this.expand()}setImageSize(){const{width:t,height:e,margin:i}=o(A,this),n=o(S,this),s=this.document;for(const r of s.body.querySelectorAll("img, svg, video")){const{maxHeight:o,maxWidth:h}=s.defaultView.getComputedStyle(r);b(r,{"max-height":n?"none"!==o&&"0px"!==o?o:"100%":e-2*i+"px","max-width":n?t-2*i+"px":"none"!==h&&"0px"!==h?h:"100%","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"})}}expand(){const{documentElement:t}=this.document;if(o(W,this)){const e=o(S,this)?"height":"width",i=o(S,this)?"width":"height",n=o(C,this).getBoundingClientRect(),s=t.getBoundingClientRect(),r=(o(S,this)?0:o(z,this)?s.right-n.right:n.left-s.left)+n[e],h=Math.ceil(r/o(T,this))*o(T,this);o(E,this).style.padding="0",o(M,this).style[e]=`${h}px`,o(E,this).style[e]=`${h+2*o(T,this)}px`,o(M,this).style[i]="100%",o(E,this).style[i]="100%",t.style[e]=`${o(T,this)}px`,o(_,this)&&(o(_,this).element.style.margin="0",o(_,this).element.style.left=o(S,this)?"0":`${o(T,this)}px`,o(_,this).element.style.top=o(S,this)?`${o(T,this)}px`:"0",o(_,this).element.style[e]=`${h}px`,o(_,this).redraw())}else{const e=o(S,this)?"width":"height",i=o(S,this)?"height":"width",n=t.getBoundingClientRect()[e],{margin:s}=o(A,this),r=o(S,this)?`0 ${s}px`:`${s}px 0`;o(E,this).style.padding=r,o(M,this).style[e]=`${n}px`,o(E,this).style[e]=`${n}px`,o(M,this).style[i]="100%",o(E,this).style[i]="100%",o(_,this)&&(o(_,this).element.style.margin=r,o(_,this).element.style.left="0",o(_,this).element.style.top="0",o(_,this).element.style[e]=`${n}px`,o(_,this).redraw())}this.onExpand()}set overlayer(t){r(_,this,t),o(E,this).append(t.element)}get overlayer(){return o(_,this)}destroy(){try{this.document&&o(k,this).unobserve(this.document.body)}catch(t){console.log(t.message)}}}var L=new WeakMap,R=new WeakMap,$=new WeakMap,B=new WeakMap,I=new WeakMap,N=new WeakMap,O=new WeakMap,j=new WeakMap,V=new WeakMap,X=new WeakMap,F=new WeakMap,D=new WeakMap,H=new WeakMap,q=new WeakMap,Y=new WeakMap,J=new WeakMap,K=new WeakMap,G=new WeakMap,Q=new WeakMap,U=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakSet;class it extends HTMLElement{constructor(){var t;super(),s(this,t=et),t.add(this),n(this,L,this.attachShadow({mode:"closed"})),n(this,R,new ResizeObserver((()=>this.render()))),n(this,$,void 0),n(this,B,void 0),n(this,I,void 0),n(this,N,void 0),n(this,O,void 0),n(this,j,void 0),n(this,V,!1),n(this,X,!1),n(this,F,0),n(this,D,-1),n(this,H,0),n(this,q,!1),n(this,Y,!1),n(this,J,void 0),n(this,K,new WeakMap),n(this,G,matchMedia("(prefers-color-scheme: dark)")),n(this,Q,void 0),n(this,U,void 0),n(this,Z,void 0),n(this,tt,void 0),i(this,"startX",!1),i(this,"currentX",!1),i(this,"isScrollingLeft",!1),o(L,this).innerHTML='<style>\n        :host {\n            display: block;\n            container-type: size;\n        }\n        :host, #top {\n            box-sizing: border-box;\n            position: relative;\n            overflow: hidden;\n            width: 100%;\n            height: 100%;\n        }\n        #top {\n            --_gap: 7%;\n            --_margin: 48px;\n            --_max-inline-size: 720px;\n            --_max-block-size: 1440px;\n            --_max-column-count: 2;\n            --_max-column-count-portrait: 1;\n            --_max-column-count-spread: var(--_max-column-count);\n            --_half-gap: calc(var(--_gap) / 2);\n            --_max-width: calc(var(--_max-inline-size) * var(--_max-column-count-spread));\n            --_max-height: var(--_max-block-size);\n            display: grid;\n            grid-template-columns:\n                minmax(var(--_half-gap), 1fr)\n                var(--_half-gap)\n                minmax(0, calc(var(--_max-width) - var(--_gap)))\n                var(--_half-gap)\n                minmax(var(--_half-gap), 1fr);\n            grid-template-rows:\n                minmax(var(--_margin), 1fr)\n                minmax(0, var(--_max-height))\n                minmax(var(--_margin), 1fr);\n            &.vertical {\n                --_max-column-count-spread: var(--_max-column-count-portrait);\n                --_max-width: var(--_max-block-size);\n                --_max-height: calc(var(--_max-inline-size) * var(--_max-column-count-spread));\n            }\n            @container (orientation: portrait) {\n                & {\n                    --_max-column-count-spread: var(--_max-column-count-portrait);\n                }\n                &.vertical {\n                    --_max-column-count-spread: var(--_max-column-count);\n                }\n            }\n        }\n        #background {\n            grid-column: 1 / -1;\n            grid-row: 1 / -1;\n        }\n        #container {\n            grid-column: 2 / 5;\n            grid-row: 2;\n            overflow: hidden;\n        }\n        :host([flow="scrolled"]) #container {\n            grid-column: 1 / -1;\n            grid-row: 1 / -1;\n            overflow: auto;\n        }\n        #header {\n            grid-column: 3 / 4;\n            grid-row: 1;\n        }\n        #footer {\n            grid-column: 3 / 4;\n            grid-row: 3;\n            align-self: end;\n        }\n        #header, #footer {\n            display: grid;\n            height: var(--_margin);\n        }\n        :is(#header, #footer) > * {\n            display: flex;\n            align-items: center;\n            min-width: 0;\n        }\n        :is(#header, #footer) > * > * {\n            width: 100%;\n            overflow: hidden;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            text-align: center;\n            font-size: .75em;\n            opacity: .6;\n        }\n        </style>\n        <div id="top">\n            <div id="background" part="filter"></div>\n            <div id="header"></div>\n            <div id="container"></div>\n            <div id="footer"></div>\n        </div>\n        ',r($,this,o(L,this).getElementById("top")),r(B,this,o(L,this).getElementById("background")),r(I,this,o(L,this).getElementById("container")),r(N,this,o(L,this).getElementById("header")),r(O,this,o(L,this).getElementById("footer")),o(R,this).observe(o(I,this)),o(I,this).addEventListener("scroll",(t=>{let e;return function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];e&&clearTimeout(e),e=setTimeout((()=>{e=null,t(...n)}),250)}})((()=>{this.scrolled&&(o(q,this)?r(q,this,!1):h(et,this,vt).call(this,"scroll"))})));const e={passive:!1};this.addEventListener("touchstart",h(et,this,rt).bind(this),e),this.addEventListener("touchmove",h(et,this,ot).bind(this),e),this.addEventListener("touchend",h(et,this,ht).bind(this)),this.addEventListener("load",(t=>{let{detail:{doc:i}}=t;i.addEventListener("touchstart",h(et,this,rt).bind(this),e),i.addEventListener("touchmove",h(et,this,ot).bind(this),e),i.addEventListener("touchend",h(et,this,ht).bind(this))})),r(Q,this,(()=>{o(j,this)&&(o(B,this).style.background=x(o(j,this).document))}))}attributeChangedCallback(t,e,i){switch(t){case"flow":this.render();break;case"gap":case"margin":case"max-block-size":case"max-column-count":o($,this).style.setProperty("--_"+t,i);break;case"max-inline-size":o($,this).style.setProperty("--_"+t,i),this.render()}}open(t){this.bookDir=t.dir,this.sections=t.sections}replaceNewChildren(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<e.length;i++)t.appendChild(e[i])}render(){o(j,this)&&(o(j,this).render(h(et,this,st).call(this,{vertical:o(V,this),rtl:o(X,this)})),this.scrollToAnchor(o(H,this)))}get scrolled(){return"scrolled"===this.getAttribute("flow")}get scrollProp(){const{scrolled:t}=this;return o(V,this)?t?"scrollLeft":"scrollTop":t?"scrollTop":"scrollLeft"}get sideProp(){const{scrolled:t}=this;return o(V,this)?t?"width":"height":t?"height":"width"}get size(){return o(I,this).getBoundingClientRect()[this.sideProp]}get viewSize(){return o(j,this).element.getBoundingClientRect()[this.sideProp]}get start(){return Math.abs(o(I,this)[this.scrollProp])}get end(){return this.start+this.size}get page(){return Math.floor((this.start+this.end)/2/this.size)}get pages(){return Math.round(this.viewSize/this.size)}scrollBy(t,e){const i=o(V,this)?e:t,n=o(I,this),{scrollProp:s}=this,[r,h,a]=o(U,this),l=o(X,this),c=l?r-a:r-h,d=l?r+h:r+a;n[s]=Math.max(c,Math.min(d,n[s]+i))}snap(t,e){const i=o(V,this)?e:t,[n,s,r]=o(U,this),{start:a,end:l,pages:c,size:d}=this,u=Math.abs(n)-s,p=Math.abs(n)+r,g=i*(o(X,this)?-d:d),m=Math.floor(Math.max(u,Math.min(p,(a+l)/2+(isNaN(g)?0:g)))/d);h(et,this,gt).call(this,m,"snap").then((()=>{const t=m<=0?-1:m>=c-1?1:null;if(t)return h(et,this,yt).call(this,{index:h(et,this,Et).call(this,t),anchor:t<0?()=>1:()=>0})}))}async scrollToAnchor(t,e){var i,n;r(H,this,t);const s=null===(i=(t=>{if(null==t||!t.collapsed)return t;const{endOffset:e,endContainer:i}=t;if(1===i.nodeType)return i;if(e+1<i.length)t.setEnd(i,e+1);else{if(!(e>1))return i.parentNode;t.setStart(i,e-1)}return t})(t))||void 0===i||null===(n=i.getClientRects)||void 0===n?void 0:n.call(i);if(s){const t=Array.from(s).find((t=>t.width>0&&t.height>0))||s[0];if(!t)return;return await h(et,this,ut).call(this,t,"anchor"),void(e&&h(et,this,mt).call(this))}if(this.scrolled)return void await h(et,this,pt).call(this,t*this.viewSize,"anchor");const{pages:o}=this;if(!o)return;const a=o-2,l=Math.round(t*(a-1));await h(et,this,gt).call(this,l+1,"anchor")}async goTo(t){if(o(Y,this))return;const e=await t;return h(et,this,xt).call(this,e.index)?h(et,this,yt).call(this,e):void 0}get atStart(){return null==h(et,this,Et).call(this,-1)&&this.page<=1}get atEnd(){return null==h(et,this,Et).call(this,1)&&this.page>=this.pages-2}prev(t){return h(et,this,Mt).call(this,-1,t)}next(t){return h(et,this,Mt).call(this,1,t)}prevSection(){return this.goTo({index:h(et,this,Et).call(this,-1)})}nextSection(){return this.goTo({index:h(et,this,Et).call(this,1)})}firstSection(){const t=this.sections.findIndex((t=>"no"!==t.linear));return this.goTo({index:t})}lastSection(){const t=this.sections.findLastIndex((t=>"no"!==t.linear));return this.goTo({index:t})}getContents(){return o(j,this)?[{index:o(D,this),overlayer:o(j,this).overlayer,doc:o(j,this).document}]:[]}setStyles(t){var e,i,n,s,h;r(J,this,t);const a=o(K,this).get(null===(e=o(j,this))||void 0===e?void 0:e.document);if(!a)return;const[l,c]=a;if(Array.isArray(t)){const[e,i]=t;l.textContent=e,c.textContent=i}else c.textContent=t;o(B,this).style.background=x(o(j,this).document),null===(i=o(j,this))||void 0===i||null===(n=i.document)||void 0===n||null===(s=n.fonts)||void 0===s||null===(h=s.ready)||void 0===h||h.then((()=>o(j,this).expand()))}destroy(){var t,e;o(R,this).unobserve(this),o(j,this).destroy(),r(j,this,null),null===(t=this.sections[o(D,this)])||void 0===t||null===(e=t.unload)||void 0===e||e.call(t)}}function nt(){return o(j,this)&&(o(j,this).destroy(),o(I,this).removeChild(o(j,this).element)),r(j,this,new P({container:this,onExpand:()=>this.scrollToAnchor(o(H,this))})),o(I,this).append(o(j,this).element),o(j,this)}function st(t){let{vertical:e,rtl:i,background:n}=t;r(V,this,e),r(X,this,i),o($,this).classList.toggle("vertical",e),o(B,this).style.background=n;const{width:s,height:h}=o(I,this).getBoundingClientRect(),a=e?h:s,l=getComputedStyle(o($,this)),c=parseFloat(l.getPropertyValue("--_max-inline-size")),d=parseInt(l.getPropertyValue("--_max-column-count-spread")),u=parseFloat(l.getPropertyValue("--_margin"));r(F,this,u);const p=parseFloat(l.getPropertyValue("--_gap"))/100,g=-p/(p-1)*a,m=this.getAttribute("flow");if("scrolled"===m){this.setAttribute("dir",e?"rtl":"ltr"),o($,this).style.padding="0";const t=c;return this.heads=null,this.feet=null,this.replaceNewChildren(o(N,this),[]),this.replaceNewChildren(o(O,this),[]),{flow:m,margin:u,gap:g,columnWidth:t}}const f=Math.min(d,Math.ceil(a/c)),v=a/f-g;this.setAttribute("dir",i?"rtl":"ltr");const w=e?Math.min(2,Math.ceil(s/c)):f,x={gridTemplateColumns:`repeat(${w}, 1fr)`,gap:`${g}px`,direction:"rtl"===this.bookDir?"rtl":"ltr"};Object.assign(o(N,this).style,x),Object.assign(o(O,this).style,x);const b=y(w,"head"),k=y(w,"foot");return this.heads=b.map((t=>t.children[0])),this.feet=k.map((t=>t.children[0])),this.replaceNewChildren(o(N,this),[...b]),this.replaceNewChildren(o(O,this),[...k]),{height:h,width:s,margin:u,gap:g,columnWidth:v}}function rt(t){if(this.scrolled)return h(et,this,at).call(this,t);t.preventDefault(),this.startX=t.touches[0].clientX}function ot(t){if(this.scrolled)return h(et,this,lt).call(this,t);t.preventDefault(),this.currentX=t.touches[0].clientX}function ht(){if(this.scrolled)return h(et,this,ct).call(this);const t=this.currentX-this.startX;t<-50?(this.isScrollingLeft=!0,this.next()):t>50&&(this.isScrollingLeft=!1,this.prev()),this.startX=null,this.currentX=null}function at(t){const e=t.changedTouches[0];r(Z,this,{x:null==e?void 0:e.screenX,y:null==e?void 0:e.screenY,t:t.timeStamp,vx:0,xy:0})}function lt(t){const e=o(Z,this);if(e.pinched)return;if(e.pinched=globalThis.visualViewport.scale>1,this.scrolled||e.pinched)return;if(t.touches.length>1)return void(o(tt,this)&&t.preventDefault());t.preventDefault();const i=t.changedTouches[0],n=i.screenX,s=i.screenY,h=e.x-n,a=e.y-s,l=t.timeStamp-e.t;e.x=n,e.y=s,e.t=t.timeStamp,e.vx=h/l,e.vy=a/l,r(tt,this,!0),this.scrollBy(h,a)}function ct(){r(tt,this,!1),this.scrolled||requestAnimationFrame((()=>{1===globalThis.visualViewport.scale&&this.snap(o(Z,this).vx,o(Z,this).vy)}))}function dt(){if(this.scrolled){const t=this.viewSize,e=o(F,this);return o(V,this)?i=>{let{left:n,right:s}=i;return{left:t-s-e,right:t-n-e}}:t=>{let{top:i,bottom:n}=t;return{left:i+e,right:n+e}}}const t=this.pages*this.size;return o(X,this)?e=>{let{left:i,right:n}=e;return{left:t-n,right:t-i}}:o(V,this)?t=>{let{top:e,bottom:i}=t;return{left:e,right:i}}:t=>t}async function ut(t,e){if(this.scrolled){const i=h(et,this,dt).call(this)(t).left-o(F,this);return h(et,this,pt).call(this,i,e)}const i=h(et,this,dt).call(this)(t).left+o(F,this)/2;return h(et,this,gt).call(this,Math.floor(i/this.size)+(o(X,this)?-1:1),e)}async function pt(t,e,i){const n=o(I,this),{scrollProp:s,size:l}=this;return n[s]===t?(r(U,this,[t,this.atStart?0:l,this.atEnd?0:l]),void h(et,this,vt).call(this,e)):(this.scrolled&&o(V,this)&&(t=-t),("snap"===e||i)&&this.hasAttribute("animated")?(c=n[s],d=t,u=a,p=t=>n[s]=t,new Promise((t=>{let e;const i=n=>{e??(e=n);const s=Math.min(1,(n-e)/300);var r,o;p((r=c,o=d,u(s)*(o-r)+r)),s<1?requestAnimationFrame(i):t()};requestAnimationFrame(i)}))).then((()=>{r(U,this,[t,this.atStart?0:l,this.atEnd?0:l]),h(et,this,vt).call(this,e)})):(n[s]=t,r(U,this,[t,this.atStart?0:l,this.atEnd?0:l]),void h(et,this,vt).call(this,e)));var c,d,u,p}async function gt(t,e,i){const n=this.size*(o(X,this)?-t:t);return h(et,this,pt).call(this,n,e,i)}function mt(){const{defaultView:t}=o(j,this).document;if(o(H,this).startContainer){const e=t.getSelection();e.removeAllRanges(),e.addRange(o(H,this))}}function ft(){if(this.scrolled)return w(o(j,this).document,this.start+o(F,this),this.end-o(F,this),h(et,this,dt).call(this));const t=o(X,this)?-this.size:this.size;return w(o(j,this).document,this.start-t,this.end-t,h(et,this,dt).call(this))}function vt(t){const e=h(et,this,ft).call(this);"anchor"!==t?r(H,this,e):r(q,this,!0);const i={reason:t,range:e,index:o(D,this)};if(this.scrolled)i.fraction=this.start/this.viewSize;else if(this.pages>0){const{page:t,pages:e}=this;o(N,this).style.visibility=t>1?"visible":"hidden",i.fraction=(t-1)/(e-2),i.size=1/(e-2)}this.dispatchEvent(new CustomEvent("relocate",{detail:i}))}async function wt(t){const{index:e,src:i,anchor:n,onLoad:s,select:a}=await t;if(r(D,this,e),i){const t=h(et,this,nt).call(this),n=t=>{if(t.head){const e=t.createElement("style");t.head.prepend(e);const i=t.createElement("style");t.head.append(i),o(K,this).set(t,[e,i])}null==s||s({doc:t,index:e})},a=h(et,this,st).bind(this);await t.load(i,n,a),this.dispatchEvent(new CustomEvent("create-overlayer",{detail:{doc:t.document,index:e,attach:e=>t.overlayer=e}})),r(j,this,t)}await this.scrollToAnchor(("function"==typeof n?n(o(j,this).document):n)??0,a)}function xt(t){return t>=0&&t<=this.sections.length-1}async function yt(t){let{index:e,anchor:i,select:n}=t;if(e===o(D,this))await h(et,this,wt).call(this,{index:e,anchor:i,select:n});else{const t=o(D,this),s=e=>{var i,n;null===(i=this.sections[t])||void 0===i||null===(n=i.unload)||void 0===n||n.call(i),this.setStyles(o(J,this)),this.dispatchEvent(new CustomEvent("load",{detail:e}))};await h(et,this,wt).call(this,Promise.resolve(this.sections[e].load()).then((t=>({index:e,src:t,anchor:i,onLoad:s,select:n}))).catch((t=>(console.warn(t),console.warn(new Error(`Failed to load section ${e}`)),{}))))}}function bt(t){if(!o(j,this))return!0;if(this.scrolled)return!(this.start>0)||h(et,this,pt).call(this,Math.max(0,this.start-(t??this.size)),null,!0);if(this.atStart)return;const e=this.page-1;return h(et,this,gt).call(this,e,"page",!0).then((()=>e<=0))}function kt(t){if(!o(j,this))return!0;if(this.scrolled)return!(this.viewSize-this.end>2)||h(et,this,pt).call(this,Math.min(this.viewSize,t?this.start+t:this.end),null,!0);if(this.atEnd)return;const e=this.page+1,i=this.pages;return h(et,this,gt).call(this,e,"page",!0).then((()=>e>=i-1))}function Et(t){for(let i=o(D,this)+t;h(et,this,xt).call(this,i);i+=t){var e;if("no"!==(null===(e=this.sections[i])||void 0===e?void 0:e.linear))return i}}async function Mt(t,e){if(o(Y,this))return;r(Y,this,!0);const i=-1===t,n=await(i?h(et,this,bt).call(this,e):h(et,this,kt).call(this,e));n&&await h(et,this,yt).call(this,{index:h(et,this,Et).call(this,t),anchor:i?()=>1:()=>0}),!n&&this.hasAttribute("animated")||await new Promise((t=>setTimeout(t,100))),r(Y,this,!1)}e.Paginator=it,i(it,"observedAttributes",["flow","gap","margin","max-inline-size","max-block-size","max-column-count"]),customElements.define("foliate-paginator",it)}}]);