"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[601],{601:function(e,t){t.makeComicBook=void 0,t.makeComicBook=(e,t)=>{let{entries:o,loadBlob:n,getSize:a}=e;const i=new Map,l=new Map,r=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],s=o.map((e=>e.filename)).filter((e=>r.some((t=>e.toLowerCase().endsWith(t))))).sort();if(!s.length)throw new Error("No supported image files in archive");const c={getCover:()=>n(s[0])};return c.metadata={title:t.name},c.sections=s.map((e=>({id:e,load:()=>(async e=>{if(console.log("comic load"),i.has(e))return i.get(e);const t=URL.createObjectURL(await n(e)),o=URL.createObjectURL(new Blob([`<img src="${t}">`],{type:"text/html"}));return l.set(e,[t,o]),i.set(e,o),o})(e),unload:()=>(e=>{var t,o;null===(t=l.get(e))||void 0===t||null===(o=t.forEach)||void 0===o||o.call(t,(e=>URL.revokeObjectURL(e))),l.delete(e),i.delete(e)})(e),size:a(e)}))),c.toc=s.map((e=>({label:e,href:e}))),c.rendition={layout:"pre-paginated"},c.resolveHref=e=>({index:c.sections.findIndex((t=>t.id===e))}),c.splitTOCHref=e=>[e,null],c.getTOCFragment=e=>e.documentElement,c.destroy=()=>{for(const e of l.values())for(const t of e)URL.revokeObjectURL(t)},c}}}]);