function _0x4050(){const _0x35b337=['platform','deleteAll','266ZaAunN','dbOther','/getFileRecord','55DjRTFO','990664jQgSOy','3381xFPtxK','../utils/fileUtils','1380145YWcnIT','push','post','259508vRVlLD','parent','count','currentUser','9pmFqNu','app','/deleteFileRecord','join','type','create','deleteAllByType','Router','existsSync','PARAMS\x20IS\x20INVALID','json','delete','1020LcXmdU','3316452QOmQas','6255300iTaZxv','../../myConfig/config','4072rOPhbj','body','6MQibkH','name','exports'];_0x4050=function(){return _0x35b337;};return _0x4050();}const _0x47bf41=_0x6420;(function(_0x59115c,_0x1186f7){const _0x1c7596=_0x6420,_0x45667b=_0x59115c();while(!![]){try{const _0x3e75ea=-parseInt(_0x1c7596(0x1fc))/0x1*(parseInt(_0x1c7596(0x203))/0x2)+parseInt(_0x1c7596(0x1fe))/0x3*(-parseInt(_0x1c7596(0x1e8))/0x4)+parseInt(_0x1c7596(0x1e5))/0x5+-parseInt(_0x1c7596(0x1f8))/0x6*(parseInt(_0x1c7596(0x208))/0x7)+parseInt(_0x1c7596(0x207))/0x8*(parseInt(_0x1c7596(0x1ec))/0x9)+-parseInt(_0x1c7596(0x1fa))/0xa+-parseInt(_0x1c7596(0x206))/0xb*(-parseInt(_0x1c7596(0x1f9))/0xc);if(_0x3e75ea===_0x1186f7)break;else _0x45667b['push'](_0x45667b['shift']());}catch(_0x4092df){_0x45667b['push'](_0x45667b['shift']());}}}(_0x4050,0x6253b));let express=require('express'),router=express[_0x47bf41(0x1f3)](),path=require('path'),fs=require('fs'),fileUtil=require(_0x47bf41(0x209));function _0x6420(_0x3b0035,_0x235ec6){const _0x40507a=_0x4050();return _0x6420=function(_0x6420fd,_0x459e4f){_0x6420fd=_0x6420fd-0x1e5;let _0x4d55ef=_0x40507a[_0x6420fd];return _0x4d55ef;},_0x6420(_0x3b0035,_0x235ec6);}const os=require('os'),config=require(_0x47bf41(0x1fb)),dbFileRecord=require('../../db/dbFileRecord');let platform=os[_0x47bf41(0x201)]();router['post'](_0x47bf41(0x205),(_0x472be6,_0x233cd3,_0x8f4e7e)=>{const _0x2007ee=_0x47bf41;let _0x4a254f=_0x472be6[_0x2007ee(0x1fd)]['type'],_0xcb643d=_0x472be6[_0x2007ee(0x1fd)][_0x2007ee(0x1ea)],_0x1551bd=dbFileRecord['getAllByUid'](_0x472be6[_0x2007ee(0x1ed)][_0x2007ee(0x204)],_0x472be6['currentUser']['id'],_0x4a254f,_0xcb643d),_0x4632e6=[];for(const _0x32bffe of _0x1551bd){let _0x3b16bf=path[_0x2007ee(0x1ef)](_0x32bffe[_0x2007ee(0x1e9)],_0x32bffe[_0x2007ee(0x1ff)]);fs[_0x2007ee(0x1f4)](_0x3b16bf)?_0x4632e6[_0x2007ee(0x1e6)](_0x32bffe):dbFileRecord['delete'](_0x472be6['app'][_0x2007ee(0x204)],_0x32bffe['id'],_0x472be6[_0x2007ee(0x1eb)]['id']);}return _0x233cd3[_0x2007ee(0x1f6)]({'code':0x0,'data':_0x4632e6,'platform':platform});}),router[_0x47bf41(0x1e7)]('/addFileRecord',(_0x45eabf,_0x44487c,_0x20c045)=>{const _0x38d0ea=_0x47bf41;return dbFileRecord[_0x38d0ea(0x1f1)](_0x45eabf[_0x38d0ea(0x1ed)]['dbOther'],_0x45eabf['currentUser']['id'],_0x45eabf[_0x38d0ea(0x1fd)]),_0x44487c[_0x38d0ea(0x1f6)]({'code':0x0});}),router['post'](_0x47bf41(0x1ee),(_0x1d7110,_0x5a0a00,_0x461265)=>{const _0x14792b=_0x47bf41;let _0x55f4c8=_0x1d7110[_0x14792b(0x1fd)][_0x14792b(0x202)],_0x2bd02e=_0x1d7110[_0x14792b(0x1fd)]['id'],_0x46064a=_0x1d7110['body'][_0x14792b(0x1f0)];if(_0x55f4c8&&_0x46064a)dbFileRecord[_0x14792b(0x1f2)](_0x1d7110[_0x14792b(0x1ed)][_0x14792b(0x204)],_0x46064a,_0x1d7110[_0x14792b(0x1eb)]['id']);else{if(_0x2bd02e)dbFileRecord[_0x14792b(0x1f7)](_0x1d7110[_0x14792b(0x1ed)]['dbOther'],_0x2bd02e,_0x1d7110[_0x14792b(0x1eb)]['id']);else return _0x5a0a00[_0x14792b(0x1f6)]({'code':0x1,'message':_0x14792b(0x1f5)});}return _0x5a0a00[_0x14792b(0x1f6)]({'code':0x0});}),module[_0x47bf41(0x200)]=router;