const _0x537013=_0x11e4;(function(_0x330d71,_0xdea5d8){const _0x524cd7=_0x11e4,_0x3ed738=_0x330d71();while(!![]){try{const _0x95ff5f=parseInt(_0x524cd7(0x22e))/0x1*(parseInt(_0x524cd7(0x29e))/0x2)+-parseInt(_0x524cd7(0x270))/0x3*(-parseInt(_0x524cd7(0x232))/0x4)+-parseInt(_0x524cd7(0x1fd))/0x5*(parseInt(_0x524cd7(0x1fe))/0x6)+-parseInt(_0x524cd7(0x276))/0x7*(parseInt(_0x524cd7(0x237))/0x8)+-parseInt(_0x524cd7(0x259))/0x9*(-parseInt(_0x524cd7(0x267))/0xa)+parseInt(_0x524cd7(0x26f))/0xb*(parseInt(_0x524cd7(0x2af))/0xc)+-parseInt(_0x524cd7(0x286))/0xd;if(_0x95ff5f===_0xdea5d8)break;else _0x3ed738['push'](_0x3ed738['shift']());}catch(_0x245cf6){_0x3ed738['push'](_0x3ed738['shift']());}}}(_0x3b26,0xb9e08));function _0x3b26(){const _0x121fca=['sourcePath','ctimeMs','$RECYCLE.BIN','../../db/dbSourceFolderTable','../../utils/encodingUtil','access','custom','archiver','password','headersSent','Router','toUpperCase','EXIST','delete\x20from\x20path_mount\x20where\x20id=?','root','cannotCopyToSelf','getUserPower','is_admin','days','length','random','findByTitle','trash','prepare','shell','9HTRynw','TYPE_RENMAE','username','delete','samba','returnErrMsg','code','decodePath','\x20->\x20','post','/getTempShareFiles','get','/deleteByPath','DELETE\x20FROM\x20share_temp\x20WHERE\x20id\x20=\x20?\x20and\x20user_id=?','12406700TktATM','returnDealedFile','getTempShareObj','sourceFolderMovie','/getTempShare','An\x20error\x20occurred\x20while\x20reading\x20the\x20directory.','customLogoImage','stat','2399144VleqSI','15fdMjWR','Convert\x20to\x20utf8\x20','zip\x20error','operationType','floor','local','21014yJrcMw','getTransSizeStr','charAt','findByTitleParamsList','path','INSERT\x20INTO\x20bg_task(task_type,task_json)\x20VALUES(?,?)','Documents\x20and\x20Settings','../../utils/globalInfoUtil','birthtimeMs','deleteSuccess','doUserCanGet','movie','cachePathRoot','folder','book','app','17273217vkjNxe','pipe','sourceFolderMusic','power_get','LEVEL_MAIN_OPERATION','SELECT\x20*\x20FROM\x20share_temp\x20where\x20user_id=?','destroy','../../db/dbUserTable','run','Content-Disposition','env','express','music','startsWith','FILE_OPERATION','extname','/getOperationRecord','/customImageFile','readdir','no\x20permission\x20','searchStr','test','parentPath','doUserCanGetTempShare','562MhxpNM','STATE_FAIL','log','resolve','currentUser','/getPathTree','START_WORKER_FILE_OPERATION','lastInsertRowid','isDirectory','attachment;\x20filename*=UTF-8\x27\x27','webdav','add','../utils/sharpUtils','getPathByType','../../db/dbFileOperationRecord','STATE_SUC','download','60bJNkEL','error','sameNameFileAlreadExist','toLowerCase','select\x20id,type,url,name,remark\x20from\x20path_mount','/rawFile*','localPathIsFolder','includes','../../db/dbConfigTable','localPathIsReadable','noReadPermission','getWindowsDiskList','/Users','type','noWritePermission','/operationPathMount','constants','ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789','err','../../db/dbNoticeCenterTable','result','R_OK','body','sep','getByPage','TYPE_DELETE','sourceFolderPhoto','cut','stack','all','/checkFolderPower','createTime','normalize','size','targetPath','.tmp','../utils/fileUtils','parse','/clearOperationRecord','basename','getUtf8FileStream','userDataFolder','.sys','shareToken','replace','exports','USER','utf8','addFileOperationRecord','sharp','sha256','power_add','.txt','send','stringify','raw','endsWith','power_change','getExcludePathList','805dCEnVJ','40518GFcaPJ','createReadStream','/operationFileList','deleteFileRecordAll','../../utils/fileStatUtil','sendFile','then','status','fullPath','atimeMs','folderNotExist','res\x20closed,destroy\x20zip\x20stream','/operationFolder','System\x20Volume\x20Information','$Recycle.Bin','operationFail','name','sort','fileFullPath','isFile','sourcePathList','SELECT\x20*\x20FROM\x20share_temp','children','404','push','copy','power_delete','json','mtimeMs','append','zip','end','INSERT\x20INTO\x20share_temp(path,password,token,create_timestamp,end_timestamp,user_id)\x20VALUES(?,?,?,?,?,?)','dbOther','localeCompare','quality','W_OK','pathName','DELETE\x20FROM\x20share_temp\x20WHERE\x20id\x20=\x20?','rename','parent','darwin','unpipe','write','message','Unable\x20to\x20read\x20file','query','customHomeBgImage','2218vmrDTy','mkdir','join','create','819504VxbIqM','subType','returnFileError','setHeader','$WinREAgent','2136kMNyzI','unzip','Documents','url','finalize','data','Desktop','close','sourceFolderBook'];_0x3b26=function(){return _0x121fca;};return _0x3b26();}let express=require(_0x537013(0x291)),router=express[_0x537013(0x24a)](),path=require(_0x537013(0x27a)),fs=require('fs'),sha256=require(_0x537013(0x1f4)),fileUtil=require(_0x537013(0x1e6));const sharp=require(_0x537013(0x1f3)),os=require('os');let platform=os['platform']();const dbUserTable=require(_0x537013(0x28d)),dbNoticeCenterTable=require(_0x537013(0x1d5)),dbConfigTable=require(_0x537013(0x2b7)),dbSourceFolderTable=require(_0x537013(0x243)),dbFileOperationRecord=require(_0x537013(0x2ac)),fileStatUtil=require(_0x537013(0x202)),config=require('../../myConfig/config'),sharpUtil=require(_0x537013(0x2aa)),globalInfoUtil=require(_0x537013(0x27d)),archiver=require(_0x537013(0x247)),encodingUtil=require(_0x537013(0x244));let macPowerDetected=![],win32ExcludeList=[_0x537013(0x20b),_0x537013(0x20c),_0x537013(0x242),_0x537013(0x236),_0x537013(0x27c),'PerfLogs'];function _0x11e4(_0x2beeac,_0x58ebd8){const _0x3b26f9=_0x3b26();return _0x11e4=function(_0x11e4ef,_0x5dfa95){_0x11e4ef=_0x11e4ef-0x1cb;let _0x40ed5f=_0x3b26f9[_0x11e4ef];return _0x40ed5f;},_0x11e4(_0x2beeac,_0x58ebd8);}router[_0x537013(0x264)]('/zipFile/*',(_0x4ad302,_0xcd0965,_0x3e89cf)=>{const _0x2a4e61=_0x537013;if(!_0x4ad302['query']['path'])return _0xcd0965[_0x2a4e61(0x205)](0x194)[_0x2a4e61(0x21d)]();let _0x37e047=fileUtil['decodePath'](_0x4ad302[_0x2a4e61(0x22c)][_0x2a4e61(0x27a)]),_0x5a2f3e=_0x4ad302[_0x2a4e61(0x22c)]['filename'];_0x5a2f3e&&(_0x37e047=path[_0x2a4e61(0x230)](_0x37e047,_0x5a2f3e)),dbUserTable[_0x2a4e61(0x280)](_0x4ad302,_0xcd0965,'',_0x2a4e61(0x289),_0x37e047)==!![]&&fs[_0x2a4e61(0x26e)](_0x37e047,(_0x5cf10f,_0x2d0d26)=>{const _0x5acab3=_0x2a4e61;if(_0x5cf10f)return _0xcd0965[_0x5acab3(0x205)](0x194)[_0x5acab3(0x21d)]();let _0x3612cc=path['basename'](_0x37e047)+'.zip';try{const _0x3b5c7e=encodeURIComponent(_0x3612cc)['replace'](/%([0-9A-F]{2})/g,(_0x1c9395,_0x5e7b1f)=>'%'+_0x5e7b1f[_0x5acab3(0x24b)]());_0xcd0965[_0x5acab3(0x235)]('Content-Disposition',_0x5acab3(0x2a7)+_0x3b5c7e);}catch(_0x3b2fbb){console[_0x5acab3(0x2a0)](_0x3b2fbb);}const _0x329a29=archiver(_0x5acab3(0x21c),{'zlib':{'level':0x0}});_0x329a29['on'](_0x5acab3(0x2b0),function(_0x400972){const _0x4b3789=_0x5acab3;console[_0x4b3789(0x2a0)](_0x4b3789(0x272),_0x400972[_0x4b3789(0x22a)]||_0x400972[_0x4b3789(0x1de)]),_0x329a29[_0x4b3789(0x228)](),!_0xcd0965[_0x4b3789(0x249)]?(_0xcd0965['removeHeader'](_0x4b3789(0x28f)),_0xcd0965[_0x4b3789(0x205)](0x1f4)['send']('An\x20error\x20occurred\x20while\x20compressing\x20the\x20files.')):_0xcd0965[_0x4b3789(0x28c)]();}),_0x329a29['on'](_0x5acab3(0x21d),function(){const _0x1f2990=_0x5acab3;console[_0x1f2990(0x2a0)]('zip\x20finish'),_0x329a29[_0x1f2990(0x28c)]();});try{fs['readdir'](_0x37e047,(_0x4576d0,_0xca9ae7)=>{const _0x436516=_0x5acab3;for(let _0x2aad36 in _0xca9ae7){let _0x5a09c4=_0xca9ae7[_0x2aad36];const _0x580794=path[_0x436516(0x230)](_0x37e047,_0x5a09c4);let _0x11c3d3=fs['statSync'](_0x580794);_0x11c3d3[_0x436516(0x2a6)]()?_0x329a29['directory'](_0x580794,_0x5a09c4):_0x329a29[_0x436516(0x21b)](fs[_0x436516(0x1ff)](_0x580794),{'name':_0x5a09c4});}_0x329a29[_0x436516(0x23b)](),_0x329a29[_0x436516(0x287)](_0xcd0965);});}catch(_0x2b918e){!_0xcd0965[_0x5acab3(0x249)]&&_0xcd0965[_0x5acab3(0x205)](0x1f4)[_0x5acab3(0x1f7)]({'error':_0x5acab3(0x26c)}),console[_0x5acab3(0x2b0)](_0x2b918e);}_0xcd0965['on'](_0x5acab3(0x23e),()=>{const _0x3a780d=_0x5acab3;console[_0x3a780d(0x2a0)](_0x3a780d(0x209)),_0x329a29['destroy']();});});}),router[_0x537013(0x262)](_0x537013(0x2a3),(_0x22ef50,_0x287e13,_0x2c6a24)=>{const _0x43b187=_0x537013;let _0x11e2c6=_0x22ef50[_0x43b187(0x1d8)]['parent'],_0x543901=path[_0x43b187(0x1d9)],_0x536d3a=_0x22ef50[_0x43b187(0x1d8)][_0x43b187(0x1cf)],_0x5f265e=_0x22ef50['body'][_0x43b187(0x29a)],_0x124401=[],_0x1bbe6c=parseInt(_0x22ef50[_0x43b187(0x2a2)]['is_admin'])==0x1,_0x23319a=fileUtil[_0x43b187(0x1fc)](_0x22ef50[_0x43b187(0x285)][_0x43b187(0x21f)]);try{function _0x250a01(){const _0x146f7c=_0x43b187;let _0x360e27=dbUserTable[_0x146f7c(0x250)](_0x22ef50[_0x146f7c(0x285)]['dbOther'],_0x22ef50[_0x146f7c(0x2a2)][_0x146f7c(0x25b)],_0x146f7c(0x283),_0x146f7c(0x289));for(let _0x25e84e of _0x360e27){if(_0x23319a[_0x146f7c(0x2b6)](_0x25e84e[_0x146f7c(0x27a)]))continue;_0x124401[_0x146f7c(0x216)]({'type':0x2,'name':_0x25e84e[_0x146f7c(0x27a)],'fileFullPath':_0x25e84e[_0x146f7c(0x27a)]});}return _0x287e13[_0x146f7c(0x219)]({'code':0x0,'data':{'parent':'','children':_0x124401,'sep':_0x543901,'platform':platform}});}if(!_0x11e2c6){if(_0x1bbe6c){if(platform=='win32'){function _0x2c7838(_0xa1160d){const _0x11f27b=_0x43b187;let _0xc58bfe=[];for(let _0x28152b of _0xa1160d){if(_0x23319a[_0x11f27b(0x2b6)](_0x28152b[_0x11f27b(0x20e)]))continue;_0x28152b[_0x11f27b(0x1cf)]=0x2,_0xc58bfe['push'](_0x28152b);}for(let _0x9c2268 in _0xc58bfe){_0xc58bfe[_0x9c2268]['fileFullPath']=_0xc58bfe[_0x9c2268][_0x11f27b(0x20e)];}return _0x287e13[_0x11f27b(0x219)]({'code':0x0,'data':{'parent':_0x11e2c6,'children':_0xc58bfe,'sep':path[_0x11f27b(0x1d9)],'platform':platform}});}let _0x59d8e2=dbConfigTable[_0x43b187(0x255)](_0x22ef50[_0x43b187(0x285)][_0x43b187(0x21f)],_0x43b187(0x282));if(_0x59d8e2)try{_0x59d8e2=JSON[_0x43b187(0x1e7)](_0x59d8e2['value']),_0x1c6cf5(![]),_0x2c7838(_0x59d8e2);}catch(_0x149cb4){_0x1c6cf5(!![]);}else _0x1c6cf5(!![]);function _0x1c6cf5(_0xd81de5){const _0x42e0c5=_0x43b187;globalInfoUtil[_0x42e0c5(0x1cd)](_0x19ba86=>{const _0x2b8e71=_0x42e0c5;_0x19ba86=_0x19ba86[_0x2b8e71(0x20f)]((_0x24f091,_0x30767e)=>{const _0x2b931f=_0x2b8e71;if(!_0x24f091[_0x2b931f(0x20e)]||!_0x30767e['name'])return;return _0x24f091[_0x2b931f(0x20e)][_0x2b931f(0x220)](_0x30767e[_0x2b931f(0x20e)]);}),dbConfigTable[_0x2b8e71(0x231)](_0x22ef50[_0x2b8e71(0x285)][_0x2b8e71(0x21f)],{'title':_0x2b8e71(0x282),'value':JSON[_0x2b8e71(0x1f8)](_0x19ba86)}),_0xd81de5&&_0x2c7838(_0x19ba86);});}}else{if(platform==_0x43b187(0x227)){if(!macPowerDetected){macPowerDetected=!![];try{const _0x66ee59=process[_0x43b187(0x290)][_0x43b187(0x1f0)];let _0x1f9171=[path[_0x43b187(0x230)](_0x43b187(0x1ce),_0x66ee59,_0x43b187(0x239)),path[_0x43b187(0x230)](_0x43b187(0x1ce),_0x66ee59,'Downloads'),path['join'](_0x43b187(0x1ce),_0x66ee59,_0x43b187(0x23d))];for(let _0x58c24c in _0x1f9171){fs[_0x43b187(0x26e)](_0x1f9171[_0x58c24c],(_0x572996,_0x16f978)=>{});}}catch(_0x5095c9){}}let _0x219058=path[_0x43b187(0x1e7)](process['cwd']())[_0x43b187(0x24e)];_0x41eaae(_0x219058);}else _0x11e2c6=path['parse'](process['cwd']())['root'],_0x41eaae(_0x11e2c6);}}else return _0x250a01();}else _0x41eaae(_0x11e2c6);function _0x41eaae(_0x12c9c0){const _0x1018fc=_0x43b187;if(!_0x1bbe6c){if(!dbUserTable[_0x1018fc(0x280)](_0x22ef50,_0x287e13,_0x1018fc(0x283),_0x1018fc(0x289),_0x12c9c0,!![]))return _0x250a01();}if(_0x12c9c0==_0x1018fc(0x1dc)||_0x12c9c0==_0x1018fc(0x26a)||_0x12c9c0==_0x1018fc(0x288)||_0x12c9c0==_0x1018fc(0x23f)){let _0xd96ca='photo';if(_0x12c9c0==_0x1018fc(0x26a))_0xd96ca=_0x1018fc(0x281);else{if(_0x12c9c0==_0x1018fc(0x288))_0xd96ca=_0x1018fc(0x292);else _0x12c9c0=='sourceFolderBook'&&(_0xd96ca=_0x1018fc(0x284));}let _0x32dac4=dbSourceFolderTable[_0x1018fc(0x2ab)](_0x22ef50[_0x1018fc(0x285)]['dbOther'],_0xd96ca);for(let _0x536a5a in _0x32dac4){_0x124401[_0x1018fc(0x216)]({'type':0x2,'name':path['basename'](_0x32dac4[_0x536a5a]['path']),'fileFullPath':_0x32dac4[_0x536a5a][_0x1018fc(0x27a)]});}return _0x287e13[_0x1018fc(0x219)]({'code':0x0,'data':{'parent':_0x12c9c0,'children':_0x124401,'sep':_0x543901,'platform':platform}});}fs[_0x1018fc(0x298)](_0x12c9c0,{'withFileTypes':!![]},(_0x28658f,_0x450f7d)=>{const _0x22cd55=_0x1018fc;if(_0x28658f)return console[_0x22cd55(0x2a0)](_0x28658f),fileUtil[_0x22cd55(0x234)](_0x287e13,_0x28658f);for(let _0x381ec7=0x0;_0x381ec7<_0x450f7d[_0x22cd55(0x253)];_0x381ec7++){let _0x1e2873=_0x450f7d[_0x381ec7],_0x300339=_0x450f7d[_0x381ec7][_0x22cd55(0x20e)];if(_0x300339[_0x22cd55(0x253)]>0x0){if(_0x300339[0x0]=='.')continue;if(/[A-Z]:\\/i[_0x22cd55(0x29b)](_0x12c9c0)&&_0x12c9c0['length']<=0x3){if(win32ExcludeList[_0x22cd55(0x2b6)](_0x300339)||_0x300339[_0x22cd55(0x1fa)](_0x22cd55(0x1ec))||_0x300339['endsWith'](_0x22cd55(0x1e5)))continue;}}let _0x7b1321=path[_0x22cd55(0x230)](_0x12c9c0,_0x300339);if(_0x23319a[_0x22cd55(0x2b6)](_0x7b1321))continue;let _0x537709=_0x1e2873[_0x22cd55(0x211)](),_0x53e21b=_0x1e2873['isDirectory']();function _0x2941ae(){const _0x5402f8=_0x22cd55;if(_0x537709)(_0x536d3a==0x0||_0x536d3a==0x1)&&_0x124401[_0x5402f8(0x216)]({'type':0x1,'name':_0x300339,'fileFullPath':_0x7b1321});else _0x53e21b&&_0x124401['push']({'type':0x2,'name':_0x300339,'fileFullPath':_0x7b1321});}_0x5f265e?_0x300339[_0x22cd55(0x2b6)](_0x5f265e)&&_0x2941ae():_0x2941ae();try{if(_0x124401[_0x22cd55(0x253)]>0x1770)break;}catch(_0xde765c){continue;}}let _0x1d2067=_0x124401['length'],_0x3345e4=0x0;if(_0x124401['length']<0x1)return _0x287e13['json']({'code':0x0,'data':{'parent':_0x12c9c0,'children':_0x124401,'sep':_0x543901,'platform':platform}});for(let _0x35ce92 of _0x124401){fs[_0x22cd55(0x26e)](_0x35ce92[_0x22cd55(0x210)],(_0xf39028,_0x253cc6)=>{const _0x2e437a=_0x22cd55;_0x3345e4+=0x1;!_0xf39028&&(_0x35ce92['atimeMs']=_0x253cc6[_0x2e437a(0x207)],_0x35ce92[_0x2e437a(0x21a)]=_0x253cc6[_0x2e437a(0x21a)],_0x35ce92[_0x2e437a(0x27e)]=_0x253cc6[_0x2e437a(0x27e)],_0x35ce92[_0x2e437a(0x1e3)]=_0x253cc6['size']);if(_0x3345e4>=_0x1d2067)return _0x287e13[_0x2e437a(0x219)]({'code':0x0,'data':{'parent':_0x12c9c0,'children':_0x124401,'sep':_0x543901,'platform':platform}});});}});}}catch(_0x14bc83){return fileUtil[_0x43b187(0x234)](_0x287e13,_0x14bc83);}}),router[_0x537013(0x264)](_0x537013(0x297),(_0x3c7c93,_0x512ea4,_0x38a719)=>{const _0x35c3ab=_0x537013;let _0x3a41dc=fileUtil[_0x35c3ab(0x260)](_0x3c7c93[_0x35c3ab(0x22c)][_0x35c3ab(0x27a)]);if(!_0x3a41dc)return _0x512ea4[_0x35c3ab(0x205)](0x194)[_0x35c3ab(0x21d)]();_0x3a41dc=path[_0x35c3ab(0x2a1)](path[_0x35c3ab(0x1e2)](_0x3a41dc));let _0x27c192=path[_0x35c3ab(0x230)](config[_0x35c3ab(0x1eb)],_0x35c3ab(0x246),path[_0x35c3ab(0x1d9)]);return _0x3a41dc[_0x35c3ab(0x293)](_0x27c192)?_0x512ea4[_0x35c3ab(0x203)](_0x3a41dc):(console[_0x35c3ab(0x2a0)](_0x35c3ab(0x215)),_0x512ea4[_0x35c3ab(0x205)](0x194)[_0x35c3ab(0x21d)]());}),router[_0x537013(0x264)](_0x537013(0x2b4),(_0x554f97,_0x5e0029,_0x20ad8b)=>{const _0x188993=_0x537013;let _0x4e70cf=_0x554f97[_0x188993(0x22c)][_0x188993(0x27a)],_0x6e9bf=_0x554f97[_0x188993(0x22c)][_0x188993(0x2ae)]==0x1,_0x43c84d=fileUtil[_0x188993(0x260)](_0x4e70cf),_0x4c93fb=_0x554f97[_0x188993(0x22c)][_0x188993(0x1e3)],_0x1227ed=_0x554f97[_0x188993(0x22c)][_0x188993(0x221)];if(dbUserTable[_0x188993(0x280)](_0x554f97,_0x5e0029,'','power_get',_0x43c84d)==!![])try{let _0x4c4ee6=_0x554f97[_0x188993(0x22c)][_0x188993(0x1f9)];if(_0x4c4ee6&&_0x4c4ee6==0x1){if(_0x6e9bf){const _0x5c69b9=encodeURIComponent(path[_0x188993(0x1e9)](_0x43c84d))[_0x188993(0x1ee)](/%([0-9A-F]{2})/g,(_0x343cf6,_0x1fab7a)=>'%'+_0x1fab7a[_0x188993(0x24b)]());_0x5e0029['setHeader'](_0x188993(0x28f),_0x188993(0x2a7)+_0x5c69b9);}return _0x5e0029[_0x188993(0x203)](_0x43c84d);}else _0x554f97[_0x188993(0x22c)][_0x188993(0x25f)]&&_0x554f97[_0x188993(0x22c)][_0x188993(0x25f)]==_0x188993(0x1f1)&&path['extname'](_0x43c84d)&&path[_0x188993(0x295)](_0x43c84d)[_0x188993(0x2b2)]()==_0x188993(0x1f6)?(console['log'](_0x188993(0x271),_0x43c84d),encodingUtil[_0x188993(0x1ea)](_0x43c84d)[_0x188993(0x204)](_0x52b89e=>{const _0x37a1e0=_0x188993;return _0x52b89e?_0x52b89e[_0x37a1e0(0x287)](_0x5e0029):(console['log'](_0x37a1e0(0x22b),_0x43c84d),_0x5e0029[_0x37a1e0(0x203)](_0x43c84d));})):sharpUtil[_0x188993(0x268)](_0x5e0029,_0x43c84d,_0x6e9bf,_0x4c93fb,_0x1227ed);}catch(_0x4e90b9){return console[_0x188993(0x2a0)](_0x4e90b9),fileUtil['returnFileError'](_0x5e0029,_0x4e90b9);}}),router[_0x537013(0x262)](_0x537013(0x1e0),(_0x5975a3,_0x39a885,_0xff0959)=>{const _0x489dd9=_0x537013;let _0x3fbcda=fileUtil[_0x489dd9(0x260)](_0x5975a3['body']['checkPath']),_0x21c5b0=_0x5975a3[_0x489dd9(0x1d8)]['checkPower'];if(_0x21c5b0==_0x489dd9(0x229))_0x21c5b0=fs[_0x489dd9(0x1d2)]['W_OK'];else _0x21c5b0=='read'&&(_0x21c5b0=fs['constants'][_0x489dd9(0x1d7)]);try{_0x21c5b0==_0x489dd9(0x1df)?fs[_0x489dd9(0x245)](_0x3fbcda,fs[_0x489dd9(0x1d2)][_0x489dd9(0x222)],_0x16b895=>{const _0x877a7e=_0x489dd9;if(_0x16b895)return fileUtil[_0x877a7e(0x234)](_0x39a885,_0x16b895);return _0x39a885[_0x877a7e(0x219)]({'code':0x0,'access':!![]});}):fs[_0x489dd9(0x245)](_0x3fbcda,_0x21c5b0,_0x547c6c=>{const _0x503287=_0x489dd9;if(_0x547c6c)return fileUtil[_0x503287(0x234)](_0x39a885,_0x547c6c);return _0x39a885[_0x503287(0x219)]({'code':0x0,'access':!![]});});}catch(_0x29cd41){return _0x39a885[_0x489dd9(0x219)]({'code':0x0,'access':![]});}}),router[_0x537013(0x262)]('/addNewFolder',(_0x4634d3,_0x3d44f9,_0x108542)=>{const _0x3cf3d9=_0x537013;let _0x1fcd9c=fileUtil[_0x3cf3d9(0x260)](_0x4634d3[_0x3cf3d9(0x1d8)][_0x3cf3d9(0x29c)]),_0x4b826a=_0x4634d3[_0x3cf3d9(0x1d8)]['folderName'],_0x77f194=path[_0x3cf3d9(0x230)](_0x1fcd9c,_0x4b826a);if(dbUserTable[_0x3cf3d9(0x280)](_0x4634d3,_0x3d44f9,_0x3cf3d9(0x283),'power_add',_0x77f194)==!![])try{fs[_0x3cf3d9(0x26e)](_0x77f194,_0x191476=>{const _0x43adc5=_0x3cf3d9;if(!_0x191476)return _0x4634d3[_0x43adc5(0x285)][_0x43adc5(0x25e)](_0x3d44f9,_0x3d44f9['__'](_0x43adc5(0x2b1))+':'+_0x77f194);else fs[_0x43adc5(0x22f)](_0x77f194,{'recursive':!![]},_0x4390af=>{return _0x4390af?fileUtil['returnFileError'](_0x3d44f9,_0x4390af):_0x3d44f9['json']({'code':0x0});});});}catch(_0x199719){return fileUtil[_0x3cf3d9(0x234)](_0x3d44f9,_0x199719);}}),router[_0x537013(0x262)]('/zipFile',(_0x2a472e,_0x143656,_0x379855)=>{const _0x25de7a=_0x537013;let _0x11d436=_0x2a472e[_0x25de7a(0x1d8)]['sourcePath'],_0x5e43b4=_0x2a472e[_0x25de7a(0x1d8)][_0x25de7a(0x1e4)],_0x40b23d=_0x2a472e['body'][_0x25de7a(0x1cf)];if(_0x40b23d!=_0x25de7a(0x21c)&&_0x40b23d!=_0x25de7a(0x238))return _0x2a472e[_0x25de7a(0x285)][_0x25de7a(0x25e)](_0x143656,_0x143656['__']('operationFail'));if(dbUserTable[_0x25de7a(0x280)](_0x2a472e,_0x143656,_0x25de7a(0x283),_0x25de7a(0x289),_0x11d436)==!![]&&dbUserTable[_0x25de7a(0x280)](_0x2a472e,_0x143656,_0x25de7a(0x283),'power_add',_0x5e43b4)==!![]){let _0x5d708f=_0x2a472e['app'][_0x25de7a(0x21f)][_0x25de7a(0x257)](_0x25de7a(0x27b))[_0x25de7a(0x28e)](_0x25de7a(0x294),JSON[_0x25de7a(0x1f8)]({'sourcePath':_0x11d436,'targetPath':_0x5e43b4,'type':_0x40b23d,'username':_0x2a472e['currentUser'][_0x25de7a(0x25b)]}));return process[_0x25de7a(0x1f7)]({'type':_0x25de7a(0x2a4),'taskIdList':[_0x5d708f[_0x25de7a(0x2a5)]]}),_0x143656[_0x25de7a(0x219)]({'code':0x0});}}),router['post'](_0x537013(0x200),(_0xd355a2,_0x34ec04,_0x59e82f)=>{const _0x106c1c=_0x537013;let _0x26f547=_0xd355a2['body'][_0x106c1c(0x212)],_0x3b54d5=_0xd355a2[_0x106c1c(0x1d8)][_0x106c1c(0x1e4)],_0x27ae45=_0xd355a2[_0x106c1c(0x1d8)]['type'];if(_0x26f547[_0x106c1c(0x253)]<0x1)return _0xd355a2[_0x106c1c(0x285)][_0x106c1c(0x25e)](_0x34ec04,_0x34ec04['__'](_0x106c1c(0x20d)));if(dbUserTable[_0x106c1c(0x280)](_0xd355a2,_0x34ec04,_0x106c1c(0x283),_0x106c1c(0x289),_0x26f547[0x0])==!![]&&dbUserTable[_0x106c1c(0x280)](_0xd355a2,_0x34ec04,_0x106c1c(0x283),_0x106c1c(0x1f5),_0x3b54d5)==!![])try{let _0x3d199c=[];for(let _0x2ecaa9 in _0x26f547){let _0x455e05=_0x26f547[_0x2ecaa9],_0x580141=path[_0x106c1c(0x1e9)](_0x455e05),_0x515026=path['join'](_0x3b54d5,_0x580141),_0x48600d=_0xd355a2['app'][_0x106c1c(0x21f)][_0x106c1c(0x257)](_0x106c1c(0x27b))[_0x106c1c(0x28e)](_0x106c1c(0x294),JSON[_0x106c1c(0x1f8)]({'sourcePath':_0x455e05,'targetPath':_0x515026,'type':_0x27ae45,'username':_0xd355a2[_0x106c1c(0x2a2)][_0x106c1c(0x25b)]}));_0x3d199c[_0x106c1c(0x216)](_0x48600d[_0x106c1c(0x2a5)]);}return process[_0x106c1c(0x1f7)]({'type':_0x106c1c(0x2a4),'taskIdList':_0x3d199c}),_0x34ec04[_0x106c1c(0x219)]({'code':0x0});}catch(_0x14be70){return _0xd355a2[_0x106c1c(0x285)][_0x106c1c(0x25e)](_0x34ec04,_0x34ec04['__'](_0x106c1c(0x20d)));}}),router[_0x537013(0x262)](_0x537013(0x20a),(_0x29b3aa,_0x58d1e6,_0x5afc4)=>{const _0x16eb71=_0x537013;let _0x283540=fileUtil[_0x16eb71(0x260)](_0x29b3aa[_0x16eb71(0x1d8)][_0x16eb71(0x240)]),_0x2fc438=fileUtil[_0x16eb71(0x260)](_0x29b3aa[_0x16eb71(0x1d8)]['targetPath']),_0x18b1c2=path[_0x16eb71(0x1e9)](_0x283540),_0x4a94db=_0x29b3aa['body'][_0x16eb71(0x1cf)],_0x254f65=path[_0x16eb71(0x230)](_0x2fc438,_0x18b1c2);if(_0x4a94db==_0x16eb71(0x217)||_0x4a94db==_0x16eb71(0x1dd)){if(fs['existsSync'](_0x254f65))return _0x29b3aa['app']['returnErrMsg'](_0x58d1e6,_0x58d1e6['__']('sameNameFileAlreadExist')+':'+_0x254f65);}let _0x688bce=_0x29b3aa[_0x16eb71(0x1d8)]['newName'];function _0x285726(_0x5d6262,_0x1947c3){const _0x22e7e0=_0x16eb71;let _0x4177e7=_0x29b3aa[_0x22e7e0(0x285)][_0x22e7e0(0x21f)][_0x22e7e0(0x257)](_0x22e7e0(0x27b))[_0x22e7e0(0x28e)](_0x22e7e0(0x294),JSON['stringify']({'sourcePath':_0x5d6262,'targetPath':_0x1947c3,'type':_0x4a94db,'username':_0x29b3aa[_0x22e7e0(0x2a2)][_0x22e7e0(0x25b)]}));return _0x4177e7[_0x22e7e0(0x2a5)];}try{_0x283540=path[_0x16eb71(0x230)](_0x283540),_0x2fc438=path[_0x16eb71(0x230)](_0x2fc438);if(_0x2fc438==_0x283540||_0x2fc438[_0x16eb71(0x293)](_0x283540+path['sep']))return _0x29b3aa['app'][_0x16eb71(0x25e)](_0x58d1e6,_0x58d1e6['__'](_0x16eb71(0x24f)));if(dbUserTable[_0x16eb71(0x280)](_0x29b3aa,_0x58d1e6,_0x16eb71(0x283),_0x16eb71(0x289),_0x283540)==!![]){let _0x5bff65=![];fs[_0x16eb71(0x26e)](_0x283540,(_0x3f63ab,_0x3fa830)=>{const _0x2aca1b=_0x16eb71;if(_0x3f63ab)return _0x29b3aa[_0x2aca1b(0x285)][_0x2aca1b(0x25e)](_0x58d1e6,_0x58d1e6['__'](_0x2aca1b(0x1cc))+':'+_0x283540);let _0x294f99=path[_0x2aca1b(0x1e9)](_0x283540);fs[_0x2aca1b(0x245)](_0x2fc438,fs['constants'][_0x2aca1b(0x1d7)]|fs[_0x2aca1b(0x1d2)][_0x2aca1b(0x222)],_0x5d593e=>{const _0x1a6edc=_0x2aca1b;if(_0x5d593e)return _0x29b3aa[_0x1a6edc(0x285)][_0x1a6edc(0x25e)](_0x58d1e6,_0x58d1e6['__'](_0x1a6edc(0x1d0))+':'+_0x2fc438);if(_0x4a94db==_0x1a6edc(0x225))dbUserTable[_0x1a6edc(0x280)](_0x29b3aa,_0x58d1e6,'folder',_0x1a6edc(0x1fb),_0x2fc438)==!![]&&(_0x2fc438=path[_0x1a6edc(0x230)](_0x2fc438,_0x688bce),fs[_0x1a6edc(0x26e)](_0x2fc438,_0x29d8ad=>{const _0x236977=_0x1a6edc;if(!_0x29d8ad)return _0x29b3aa[_0x236977(0x285)][_0x236977(0x25e)](_0x58d1e6,_0x58d1e6['__'](_0x236977(0x2b1))+':'+_0x2fc438);else fs[_0x236977(0x225)](_0x283540,_0x2fc438,_0x4d0b64=>{const _0x85d8c3=_0x236977;if(_0x4d0b64)return dbFileOperationRecord[_0x85d8c3(0x1f2)](_0x29b3aa['app'][_0x85d8c3(0x21f)],{'username':_0x29b3aa[_0x85d8c3(0x2a2)][_0x85d8c3(0x25b)],'sourcePath':_0x283540,'targetPath':_0x2fc438,'level':dbFileOperationRecord[_0x85d8c3(0x28a)],'belongId':null,'type':dbFileOperationRecord[_0x85d8c3(0x25a)],'subType':null,'state':dbFileOperationRecord[_0x85d8c3(0x29f)],'remark':fileUtil[_0x85d8c3(0x234)](_0x58d1e6,_0x4d0b64,!![])}),dbNoticeCenterTable[_0x85d8c3(0x231)](_0x29b3aa[_0x85d8c3(0x285)][_0x85d8c3(0x21f)],{'title':_0x58d1e6['__']('operationFail'),'level':_0x85d8c3(0x2b0),'content':_0x58d1e6['__']('fileRenameFail')+':'+(_0x283540+_0x85d8c3(0x261)+_0x2fc438)});_0x5bff65=!![],dbFileOperationRecord[_0x85d8c3(0x1f2)](_0x29b3aa[_0x85d8c3(0x285)][_0x85d8c3(0x21f)],{'username':_0x29b3aa[_0x85d8c3(0x2a2)][_0x85d8c3(0x25b)],'sourcePath':_0x283540,'targetPath':_0x2fc438,'level':dbFileOperationRecord[_0x85d8c3(0x28a)],'belongId':null,'type':dbFileOperationRecord[_0x85d8c3(0x25a)],'subType':null,'state':dbFileOperationRecord[_0x85d8c3(0x2ad)]});}),setTimeout(()=>{return _0x58d1e6['json']({'code':0x0,'isOver':_0x5bff65?0x1:0x0});},0x3e8);}));else{if(_0x4a94db==_0x1a6edc(0x1dd)){if(dbUserTable['doUserCanGet'](_0x29b3aa,_0x58d1e6,_0x1a6edc(0x283),'power_delete',_0x2fc438)!==!![])return;}if(dbUserTable[_0x1a6edc(0x280)](_0x29b3aa,_0x58d1e6,_0x1a6edc(0x283),_0x1a6edc(0x1f5),_0x2fc438)==!![]){_0x2fc438=path[_0x1a6edc(0x230)](_0x2fc438,_0x294f99);let _0x5de87f=_0x285726(_0x283540,_0x2fc438);return process['send']({'type':'START_WORKER_FILE_OPERATION','taskIdList':[_0x5de87f]}),_0x58d1e6[_0x1a6edc(0x219)]({'code':0x0});}}});});}}catch(_0xbc4f75){return _0x29b3aa['app'][_0x16eb71(0x25e)](_0x58d1e6,_0x58d1e6['__']('operationFail'));}}),router[_0x537013(0x262)]('/getPathState',(_0x3cdf72,_0x563aa4,_0x1cf4f5)=>{const _0x49a5cc=_0x537013;let _0x13d39c=_0x3cdf72[_0x49a5cc(0x1d8)][_0x49a5cc(0x206)];if(!_0x13d39c)return _0x563aa4[_0x49a5cc(0x205)](0x194)[_0x49a5cc(0x21d)]();dbUserTable[_0x49a5cc(0x280)](_0x3cdf72,_0x563aa4,_0x49a5cc(0x283),_0x49a5cc(0x289),_0x13d39c)==!![]&&fs[_0x49a5cc(0x26e)](_0x13d39c,(_0x47d1f3,_0x498b27)=>{const _0x426517=_0x49a5cc;if(_0x47d1f3)return fileUtil[_0x426517(0x234)](_0x563aa4,_0x47d1f3);return _0x498b27['sizeStr']=fileUtil[_0x426517(0x277)](_0x498b27[_0x426517(0x1e3)]),_0x563aa4[_0x426517(0x219)]({'code':0x0,'data':_0x498b27});});}),router[_0x537013(0x262)]('/fileExist',(_0x4ac783,_0x382cec,_0xda05f4)=>{const _0x3242ab=_0x537013;let _0xa12975=_0x4ac783[_0x3242ab(0x1d8)]['folderPath'],_0x5de7bf=_0x4ac783[_0x3242ab(0x1d8)]['fileName'];_0x5de7bf&&(_0x5de7bf=_0x5de7bf[_0x3242ab(0x1ee)](/[<>\\\/:\*\?\"\|]/g,'_')),_0xa12975&&(_0xa12975=fileUtil[_0x3242ab(0x260)](_0xa12975)),fs['access'](_0xa12975,fs[_0x3242ab(0x1d2)][_0x3242ab(0x222)]|fs['constants'][_0x3242ab(0x1d7)],_0x2000d1=>{const _0x51dc9d=_0x3242ab;if(_0x2000d1)return _0x382cec[_0x51dc9d(0x219)]({'code':0x1,'message':_0x382cec['__'](_0x51dc9d(0x1d0))+':'+_0xa12975});else{let _0x507f25='';if(_0xa12975&&_0x5de7bf)_0x507f25=path[_0x51dc9d(0x230)](_0xa12975,_0x5de7bf);else{if(_0xa12975)_0x507f25=path[_0x51dc9d(0x230)](_0xa12975);else return _0x382cec[_0x51dc9d(0x219)]({'code':0x1,'message':_0x382cec['__'](_0x51dc9d(0x208))+':'+_0xa12975});}fs[_0x51dc9d(0x26e)](_0x507f25,_0x4872b8=>{const _0x729a3c=_0x51dc9d;return _0x4872b8?(console['log'](_0x729a3c(0x1d4),_0x507f25),_0x382cec['json']({'code':0x0})):_0x382cec['json']({'code':0x1,'remark':_0x729a3c(0x24c)});});}});}),router[_0x537013(0x262)](_0x537013(0x265),(_0x2c5e66,_0x26f818,_0x570d6e)=>{const _0xe8eb08=_0x537013;let _0x19943f=_0x2c5e66['body'][_0xe8eb08(0x206)],_0x36271e=_0x2c5e66[_0xe8eb08(0x1d8)]['putInSystemTrash'];if(!_0x19943f)return _0x26f818['status'](0x194)[_0xe8eb08(0x21d)]();_0x19943f=path[_0xe8eb08(0x230)](_0x19943f);if(dbUserTable[_0xe8eb08(0x280)](_0x2c5e66,_0x26f818,_0xe8eb08(0x283),_0xe8eb08(0x218),_0x19943f)==!![]){if(_0x36271e==0x1)return process['send']({'type':_0xe8eb08(0x258),'shellType':_0xe8eb08(0x256),'path':_0x19943f}),dbFileOperationRecord[_0xe8eb08(0x1f2)](_0x2c5e66[_0xe8eb08(0x285)][_0xe8eb08(0x21f)],{'username':_0x2c5e66[_0xe8eb08(0x2a2)][_0xe8eb08(0x25b)],'targetPath':_0x19943f,'level':dbFileOperationRecord[_0xe8eb08(0x28a)],'type':dbFileOperationRecord[_0xe8eb08(0x1db)],'state':dbFileOperationRecord['STATE_SUC']}),_0x26f818[_0xe8eb08(0x219)]({'code':0x0,'message':_0x26f818['__'](_0xe8eb08(0x27f))});else fs['rm'](_0x19943f,{'recursive':!![]},_0x44c87d=>{const _0xf81896=_0xe8eb08;if(_0x44c87d)return dbFileOperationRecord['addFileOperationRecord'](_0x2c5e66[_0xf81896(0x285)]['dbOther'],{'username':_0x2c5e66[_0xf81896(0x2a2)]['username'],'targetPath':_0x19943f,'level':dbFileOperationRecord['LEVEL_MAIN_OPERATION'],'type':dbFileOperationRecord[_0xf81896(0x1db)],'state':dbFileOperationRecord['STATE_FAIL'],'remark':fileUtil[_0xf81896(0x234)](_0x26f818,_0x44c87d,!![])}),fileUtil['returnFileError'](_0x26f818,_0x44c87d);return dbFileOperationRecord['addFileOperationRecord'](_0x2c5e66[_0xf81896(0x285)]['dbOther'],{'username':_0x2c5e66[_0xf81896(0x2a2)]['username'],'targetPath':_0x19943f,'level':dbFileOperationRecord[_0xf81896(0x28a)],'type':dbFileOperationRecord[_0xf81896(0x1db)],'state':dbFileOperationRecord[_0xf81896(0x2ad)]}),_0x26f818[_0xf81896(0x219)]({'code':0x0,'message':_0x26f818['__']('deleteSuccess')});});}}),router[_0x537013(0x262)](_0x537013(0x1e8),(_0x453381,_0x4cdf62,_0x9cfc6b)=>{const _0x3d80ad=_0x537013;if(_0x453381[_0x3d80ad(0x2a2)]['is_admin']!=0x1)return _0x4cdf62[_0x3d80ad(0x219)]({'code':0x66});return dbFileOperationRecord[_0x3d80ad(0x201)](_0x453381['app']['dbOther']),_0x4cdf62[_0x3d80ad(0x219)]({'code':0x0});}),router['post'](_0x537013(0x296),(_0x3f90cc,_0xfd2f71,_0x4de1fc)=>{const _0x4998cb=_0x537013;let _0x2ddd01=_0x3f90cc['body']['page'],_0xd4d39=_0x3f90cc[_0x4998cb(0x1d8)]['pageSize'],_0x6d6df5=_0x3f90cc[_0x4998cb(0x1d8)][_0x4998cb(0x1cf)],_0x2725ac=_0x3f90cc[_0x4998cb(0x1d8)]['level'],_0x482771=_0x3f90cc['body'][_0x4998cb(0x233)],_0x3ce356=_0x3f90cc[_0x4998cb(0x1d8)][_0x4998cb(0x1d6)],_0x2d2b32=_0x3f90cc[_0x4998cb(0x1d8)][_0x4998cb(0x29a)],_0x5211cd;return _0x3f90cc[_0x4998cb(0x2a2)][_0x4998cb(0x251)]==0x1?_0x5211cd=dbFileOperationRecord['getByPage'](_0x3f90cc[_0x4998cb(0x285)][_0x4998cb(0x21f)],_0x2ddd01,_0xd4d39,_0x2725ac,_0x6d6df5,_0x482771,_0x3ce356,_0x2d2b32):_0x5211cd=dbFileOperationRecord[_0x4998cb(0x1da)](_0x3f90cc[_0x4998cb(0x285)]['dbOther'],_0x2ddd01,_0xd4d39,_0x2725ac,_0x6d6df5,_0x482771,_0x3ce356,_0x2d2b32,_0x3f90cc[_0x4998cb(0x2a2)][_0x4998cb(0x25b)]),_0xfd2f71[_0x4998cb(0x219)]({'code':0x0,'data':_0x5211cd});}),router[_0x537013(0x262)](_0x537013(0x1d1),(_0x25a402,_0x197b49,_0x2db880)=>{const _0x329e67=_0x537013;let _0x3f9d15=_0x25a402[_0x329e67(0x1d8)][_0x329e67(0x273)];if(_0x3f9d15==_0x329e67(0x2a9)||_0x3f9d15==_0x329e67(0x25c)){if(_0x25a402[_0x329e67(0x2a2)][_0x329e67(0x251)]!=0x1)return _0x197b49[_0x329e67(0x219)]({'code':0x66});}if(_0x3f9d15==_0x329e67(0x2a9)){let _0x1837a5=_0x25a402[_0x329e67(0x1d8)][_0x329e67(0x1cf)],_0x43d6a2=_0x25a402['body']['url'],_0x719c26=_0x25a402[_0x329e67(0x1d8)]['username'],_0x4a2ddf=_0x25a402[_0x329e67(0x1d8)][_0x329e67(0x223)],_0x587db5=_0x25a402['body'][_0x329e67(0x25b)],_0x2b448d=_0x25a402[_0x329e67(0x1d8)][_0x329e67(0x248)],_0x327604=['local',_0x329e67(0x2a8),_0x329e67(0x25d)];if(!_0x1837a5||!_0x43d6a2||!_0x327604[_0x329e67(0x2b6)](_0x1837a5))return _0x25a402['app']['returnErrMsg'](_0x197b49,_0x197b49['__']('operationFail'));_0x1837a5==_0x329e67(0x275)&&fileStatUtil[_0x329e67(0x2b5)](_0x43d6a2,()=>{const _0x5bd736=_0x329e67;fileStatUtil[_0x5bd736(0x1cb)](_0x43d6a2,()=>{const _0x10cddc=_0x5bd736,_0xe9935d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20REPLACE\x20INTO\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path_mount(type,url,name,username,password,remark)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES(?,?,?,?,?,?)';return _0x25a402[_0x10cddc(0x285)]['dbOther'][_0x10cddc(0x257)](_0xe9935d)[_0x10cddc(0x28e)](_0x1837a5,_0x43d6a2,_0x719c26,_0x587db5,_0x2b448d,_0x4a2ddf),_0x197b49['json']({'code':0x0});},()=>{const _0x5795ce=_0x5bd736;return _0x25a402['app'][_0x5795ce(0x25e)](_0x197b49,_0x197b49['__'](_0x5795ce(0x1cc)));});},()=>{const _0x22a6f7=_0x329e67;return _0x25a402[_0x22a6f7(0x285)][_0x22a6f7(0x25e)](_0x197b49,_0x197b49['__']('targetPathInvalid'));});}else{if(_0x3f9d15==_0x329e67(0x25c)){let _0x586ec7=_0x25a402[_0x329e67(0x1d8)]['id'];return _0x25a402[_0x329e67(0x285)][_0x329e67(0x21f)][_0x329e67(0x257)](_0x329e67(0x24d))['run'](_0x586ec7),_0x197b49[_0x329e67(0x219)]({'code':0x0});}else{if(_0x3f9d15==_0x329e67(0x264)){let _0x531c60=[],_0x570dc7=_0x25a402[_0x329e67(0x285)]['dbOther']['prepare'](_0x329e67(0x2b3))[_0x329e67(0x1df)]();if(_0x25a402['currentUser'][_0x329e67(0x251)]==0x1)_0x531c60=_0x570dc7;else{let _0xf9fb8=dbUserTable['getUserPower'](_0x25a402[_0x329e67(0x285)][_0x329e67(0x21f)],_0x25a402[_0x329e67(0x2a2)]['username'],_0x329e67(0x283),_0x329e67(0x289));for(let _0x448e1d in _0xf9fb8){let _0x539695=_0xf9fb8[_0x448e1d][_0x329e67(0x27a)][_0x329e67(0x2b2)]();_0x539695=path[_0x329e67(0x230)](_0x539695);for(let _0x221296 in _0x570dc7){try{if(_0x570dc7[_0x221296][_0x329e67(0x23a)]&&_0x539695){let _0x244bbf=_0x570dc7[_0x221296][_0x329e67(0x23a)]['toLowerCase']();_0x244bbf[_0x329e67(0x1fa)](':')&&_0x244bbf[_0x329e67(0x253)]==0x2&&(_0x244bbf=_0x244bbf+path['sep']),_0x244bbf=path[_0x329e67(0x230)](_0x244bbf)[_0x329e67(0x2b2)](),(_0x539695==_0x244bbf||_0x244bbf[_0x329e67(0x293)](path['join'](_0x539695+path['sep'])))&&_0x531c60[_0x329e67(0x216)](_0x570dc7[_0x221296]);}}catch(_0x5234fe){continue;}}}}return _0x197b49[_0x329e67(0x219)]({'code':0x0,'data':_0x531c60});}}}});function getRandomString(_0x4491f9){const _0x2e2a0a=_0x537013;let _0x33a032='';const _0x57792e=_0x2e2a0a(0x1d3),_0x1aa3f2=_0x57792e[_0x2e2a0a(0x253)];for(let _0x27b720=0x0;_0x27b720<_0x4491f9;_0x27b720++){_0x33a032+=_0x57792e[_0x2e2a0a(0x278)](Math[_0x2e2a0a(0x274)](Math[_0x2e2a0a(0x254)]()*_0x1aa3f2));}return _0x33a032;}router[_0x537013(0x262)](_0x537013(0x26b),(_0x27428a,_0x42d2ee,_0x2d638d)=>{const _0x4bb7be=_0x537013;let _0x163521=[];return _0x27428a[_0x4bb7be(0x2a2)]['is_admin']==0x1?_0x163521=_0x27428a['app'][_0x4bb7be(0x21f)]['prepare'](_0x4bb7be(0x213))[_0x4bb7be(0x1df)]():_0x163521=_0x27428a[_0x4bb7be(0x285)][_0x4bb7be(0x21f)]['prepare'](_0x4bb7be(0x28b))[_0x4bb7be(0x1df)](_0x27428a[_0x4bb7be(0x2a2)]['id']),_0x42d2ee['json']({'code':0x0,'data':_0x163521});}),router[_0x537013(0x262)]('/tempShare',(_0x386dc6,_0x2f74ee,_0x567fb7)=>{const _0x306f7e=_0x537013;let _0x354800=_0x386dc6['body'][_0x306f7e(0x273)];if(_0x354800=='add')try{if(!_0x386dc6[_0x306f7e(0x1d8)][_0x306f7e(0x27a)])return _0x386dc6['app'][_0x306f7e(0x25e)](_0x2f74ee,_0x306f7e(0x2b0));let _0x22e49e=fileUtil[_0x306f7e(0x260)](_0x386dc6[_0x306f7e(0x1d8)]['path']);function _0x2526a3(){const _0x22f3ca=_0x306f7e;if(dbUserTable['doUserCanGet'](_0x386dc6,_0x2f74ee,'',_0x22f3ca(0x289),_0x22e49e)==!![]){let _0x5341f2=_0x386dc6[_0x22f3ca(0x1d8)][_0x22f3ca(0x248)]?_0x386dc6[_0x22f3ca(0x1d8)][_0x22f3ca(0x248)]:'',_0x258789=new Date()['getTime'](),_0x4e60b7=getRandomString(0x5),_0xfb9a50=_0x386dc6[_0x22f3ca(0x285)][_0x22f3ca(0x21f)][_0x22f3ca(0x257)]('SELECT\x20*\x20FROM\x20share_temp\x20WHERE\x20token=?')[_0x22f3ca(0x264)](_0x4e60b7);if(_0xfb9a50)return _0x2526a3();let _0x20af80=_0x386dc6['body'][_0x22f3ca(0x252)]?_0x386dc6['body']['days']:0x1e,_0x2ae6ee=0xe10*0x3e8*0x18*_0x20af80+_0x258789;return _0x386dc6[_0x22f3ca(0x285)]['dbOther'][_0x22f3ca(0x257)](_0x22f3ca(0x21e))[_0x22f3ca(0x28e)](_0x22e49e,_0x5341f2,_0x4e60b7,_0x258789,_0x2ae6ee,_0x386dc6[_0x22f3ca(0x2a2)]['id']),_0x2f74ee[_0x22f3ca(0x219)]({'code':0x0,'token':_0x4e60b7});}}return _0x2526a3();}catch(_0x20fe6c){return console[_0x306f7e(0x2a0)](_0x20fe6c),_0x386dc6[_0x306f7e(0x285)][_0x306f7e(0x25e)](_0x2f74ee,_0x306f7e(0x2b0));}else{if(_0x354800=='delete'){let _0x493c12=_0x386dc6[_0x306f7e(0x1d8)]['deleteId'];return _0x386dc6[_0x306f7e(0x2a2)][_0x306f7e(0x251)]==0x1?_0x386dc6[_0x306f7e(0x285)][_0x306f7e(0x21f)][_0x306f7e(0x257)](_0x306f7e(0x224))[_0x306f7e(0x28e)](_0x493c12):_0x386dc6[_0x306f7e(0x285)][_0x306f7e(0x21f)]['prepare'](_0x306f7e(0x266))[_0x306f7e(0x28e)](_0x493c12,_0x386dc6[_0x306f7e(0x2a2)]['id']),_0x2f74ee[_0x306f7e(0x219)]({'code':0x0});}}}),router[_0x537013(0x262)](_0x537013(0x263),(_0x2cb02c,_0x26e22b,_0xea50d1)=>{const _0x5eca75=_0x537013;let _0x12fd01=_0x2cb02c[_0x5eca75(0x1d8)][_0x5eca75(0x1ed)]||_0x2cb02c[_0x5eca75(0x1d8)]['st'],_0x1da2b9=_0x2cb02c['body'][_0x5eca75(0x226)],_0x3d48e1=_0x2cb02c[_0x5eca75(0x1d8)][_0x5eca75(0x248)],_0x4f2b17=[],_0x32e777=dbConfigTable[_0x5eca75(0x279)](_0x2cb02c[_0x5eca75(0x285)]['dbOther'],[_0x5eca75(0x26d),_0x5eca75(0x22d)]),_0x2624e6={'code':0x0,'data':{'customConfig':_0x32e777,'parent':_0x1da2b9,'children':_0x4f2b17,'sep':path[_0x5eca75(0x1d9)],'platform':platform}};if(!_0x12fd01)return _0x26e22b['json'](_0x2624e6);let _0x1ea591=dbUserTable[_0x5eca75(0x269)](_0x2cb02c[_0x5eca75(0x285)][_0x5eca75(0x21f)],_0x12fd01);if(!_0x1ea591)return _0x26e22b[_0x5eca75(0x219)](_0x2624e6);if(_0x1ea591[_0x5eca75(0x248)]){if(!_0x3d48e1)return _0x26e22b['json']({'code':0x2});if(_0x1ea591[_0x5eca75(0x248)]!=_0x3d48e1)return _0x26e22b[_0x5eca75(0x219)]({'code':0x2,'message':_0x26e22b['__']('login.pwdErr')});}function _0x308a2d(){const _0x2e4d77=_0x5eca75;fs[_0x2e4d77(0x26e)](_0x1ea591['path'],(_0x58e480,_0x742c15)=>{const _0x3da209=_0x2e4d77;if(_0x58e480)return _0x26e22b[_0x3da209(0x219)](_0x2624e6);return _0x2624e6[_0x3da209(0x23c)][_0x3da209(0x214)]['push']({'type':_0x742c15[_0x3da209(0x211)]()?0x1:0x2,'name':path[_0x3da209(0x1e9)](_0x1ea591[_0x3da209(0x27a)]),'fileFullPath':_0x1ea591[_0x3da209(0x27a)]}),_0x26e22b[_0x3da209(0x219)](_0x2624e6);});}if(!_0x1da2b9)_0x308a2d();else{let _0x2528d4=dbUserTable[_0x5eca75(0x29d)](_0x2cb02c['app']['dbOther'],_0x12fd01,_0x1da2b9,_0x3d48e1);if(!_0x2528d4)return console[_0x5eca75(0x2a0)](_0x5eca75(0x299),_0x1da2b9),_0x308a2d();fs[_0x5eca75(0x298)](_0x1da2b9,{'withFileTypes':!![]},(_0x38820b,_0x5c7863)=>{const _0x7a977=_0x5eca75;if(_0x38820b)return _0x26e22b['json'](_0x2624e6);let _0x1b52f=0x0;if(_0x5c7863[_0x7a977(0x253)]<0x1)return _0x26e22b['json'](_0x2624e6);for(let _0x28b955=0x0;_0x28b955<_0x5c7863[_0x7a977(0x253)];_0x28b955++){let _0x2dff65=_0x5c7863[_0x28b955],_0x41124d=_0x5c7863[_0x28b955][_0x7a977(0x20e)];if(_0x41124d['length']>0x0){if(_0x41124d[0x0]=='.'){_0x1b52f+=0x1;if(_0x1b52f>=_0x5c7863['length'])return _0x26e22b[_0x7a977(0x219)](_0x2624e6);continue;}if(/[A-Z]:\\/i[_0x7a977(0x29b)](_0x1da2b9)&&_0x1da2b9['length']<=0x3){if(win32ExcludeList[_0x7a977(0x2b6)](_0x41124d)||_0x41124d['endsWith'](_0x7a977(0x1ec))||_0x41124d[_0x7a977(0x1fa)]('.tmp')){_0x1b52f+=0x1;if(_0x1b52f>=_0x5c7863[_0x7a977(0x253)])return _0x26e22b[_0x7a977(0x219)](_0x2624e6);continue;}}}let _0x9fa84=path[_0x7a977(0x230)](_0x1da2b9,_0x41124d);fs[_0x7a977(0x26e)](_0x9fa84,(_0x347a7a,_0x3ead43)=>{const _0x3db0c8=_0x7a977;_0x1b52f+=0x1;let _0x28d485=_0x2dff65['isFile'](),_0x39d5f2=_0x2dff65[_0x3db0c8(0x2a6)](),_0x16df09={'name':_0x41124d,'fileFullPath':_0x9fa84};!_0x347a7a&&_0x3ead43&&(_0x16df09[_0x3db0c8(0x1e3)]=_0x3ead43[_0x3db0c8(0x1e3)],_0x16df09[_0x3db0c8(0x1e1)]=_0x3ead43[_0x3db0c8(0x27e)]||_0x3ead43[_0x3db0c8(0x241)]);_0x28d485?_0x16df09[_0x3db0c8(0x1cf)]=0x1:_0x16df09[_0x3db0c8(0x1cf)]=0x2;_0x2624e6[_0x3db0c8(0x23c)][_0x3db0c8(0x214)][_0x3db0c8(0x216)](_0x16df09);if(_0x1b52f>=_0x5c7863[_0x3db0c8(0x253)])return _0x26e22b['json'](_0x2624e6);});}});}}),module[_0x537013(0x1ef)]=router;