const _0x598740=_0x26f3;(function(_0x4b2c48,_0x4c17cb){const _0x58dda8=_0x26f3,_0x394d69=_0x4b2c48();while(!![]){try{const _0x2c12db=parseInt(_0x58dda8(0x26f))/0x1*(parseInt(_0x58dda8(0x28f))/0x2)+-parseInt(_0x58dda8(0x22b))/0x3*(parseInt(_0x58dda8(0x263))/0x4)+parseInt(_0x58dda8(0x1f8))/0x5+parseInt(_0x58dda8(0x284))/0x6*(-parseInt(_0x58dda8(0x242))/0x7)+parseInt(_0x58dda8(0x258))/0x8+-parseInt(_0x58dda8(0x22d))/0x9+parseInt(_0x58dda8(0x269))/0xa;if(_0x2c12db===_0x4c17cb)break;else _0x394d69['push'](_0x394d69['shift']());}catch(_0x38e9f1){_0x394d69['push'](_0x394d69['shift']());}}}(_0x5782,0x8199e));let express=require('express'),router=express['Router'](),path=require(_0x598740(0x1f2)),fs=require('fs'),dbBookIndexTable=require('../../db/dbBookIndexTable'),dbFileIndexTable=require(_0x598740(0x1f4)),dbBookListTable=require(_0x598740(0x25a)),dbBookFavorite=require('../../db/dbBookFavorite');const dbUserTable=require(_0x598740(0x23b)),dbSourceFolderTable=require(_0x598740(0x280));let os=require('os'),config=require(_0x598740(0x206));const bookIndexUtil=require('../../myWorkers/index/bookIndexUtil'),arrayUtil=require(_0x598740(0x275)),nfoUtil=require('../../utils/nfoUtil');function getBookSameNameCover(_0x54515f){return new Promise((_0xd05dcd,_0x50a99c)=>{const _0x1d1eb0=_0x26f3;try{let _0x2573d1=_0x54515f[_0x1d1eb0(0x1df)][_0x1d1eb0(0x226)](path[_0x1d1eb0(0x23f)](_0x54515f['filename']),''),_0x57ea1f=path[_0x1d1eb0(0x27a)](_0x54515f[_0x1d1eb0(0x1f2)],_0x2573d1+_0x1d1eb0(0x236)),_0x522329='';fs['existsSync'](_0x57ea1f)&&(_0x522329=_0x57ea1f),_0xd05dcd(_0x522329);}catch(_0x47e2fd){_0xd05dcd('');}});}function _0x26f3(_0x2f8de4,_0x263f64){const _0x578202=_0x5782();return _0x26f3=function(_0x26f309,_0x2a5f42){_0x26f309=_0x26f309-0x1cf;let _0x1e4310=_0x578202[_0x26f309];return _0x1e4310;},_0x26f3(_0x2f8de4,_0x263f64);}router[_0x598740(0x1fc)](_0x598740(0x270),(_0x28b520,_0x5c399d,_0x200add)=>{const _0x174a0f=_0x598740;let _0x59027c=_0x28b520['currentUser']['id'],_0x4644c1=_0x28b520['body'][_0x174a0f(0x21c)],_0x482663=_0x28b520[_0x174a0f(0x1e5)][_0x174a0f(0x1ea)];if(!_0x4644c1&&!_0x482663)return _0x28b520[_0x174a0f(0x224)][_0x174a0f(0x26a)](_0x5c399d,_0x174a0f(0x28a));try{JSON['parse'](_0x4644c1);}catch(_0xc18eba){return _0x28b520[_0x174a0f(0x224)][_0x174a0f(0x26a)](_0x5c399d,_0x174a0f(0x1f5));}let _0x451869=_0x28b520[_0x174a0f(0x224)]['dbOther'][_0x174a0f(0x1f7)](_0x174a0f(0x25e))['get'](_0x59027c);if(_0x451869){if(_0x4644c1)_0x28b520[_0x174a0f(0x224)][_0x174a0f(0x276)][_0x174a0f(0x1f7)](_0x174a0f(0x223))[_0x174a0f(0x212)](_0x4644c1,_0x59027c);else _0x482663&&_0x28b520[_0x174a0f(0x224)][_0x174a0f(0x276)][_0x174a0f(0x1f7)]('UPDATE\x20book_reader_config\x20SET\x20remark=?\x20WHERE\x20uid=?')[_0x174a0f(0x212)](_0x482663,_0x59027c);}else _0x28b520['app'][_0x174a0f(0x276)]['prepare'](_0x174a0f(0x24b))[_0x174a0f(0x212)](_0x59027c,_0x4644c1,_0x482663);return _0x5c399d[_0x174a0f(0x25c)]({'code':0x0});}),router[_0x598740(0x1fc)](_0x598740(0x1ee),(_0x385533,_0x47cda5,_0x278801)=>{const _0x267dbc=_0x598740;let _0x30a523=_0x385533[_0x267dbc(0x1f3)]['id'],_0x16f80d=_0x385533[_0x267dbc(0x1e5)][_0x267dbc(0x20e)];if(!_0x16f80d)return _0x385533[_0x267dbc(0x224)][_0x267dbc(0x26a)](_0x47cda5,_0x267dbc(0x271));let _0x4e4df4=dbFileIndexTable[_0x267dbc(0x208)](_0x385533[_0x267dbc(0x224)][_0x267dbc(0x201)],_0x16f80d,dbFileIndexTable['INDEX_TABLE_NAME_BOOK']);if(!_0x4e4df4)return _0x385533[_0x267dbc(0x224)]['returnErrMsg'](_0x47cda5,_0x267dbc(0x271));dbUserTable[_0x267dbc(0x218)](_0x385533,_0x47cda5,'',_0x267dbc(0x1e4),_0x4e4df4[_0x267dbc(0x1f2)])==!![]&&getBookSameNameCover(_0x4e4df4)[_0x267dbc(0x1e8)](_0x493020=>{const _0x6b9b5b=_0x267dbc;if(!_0x493020[_0x6b9b5b(0x20c)](_0x6b9b5b(0x236)))return _0x385533[_0x6b9b5b(0x224)]['returnErrMsg'](_0x47cda5,_0x6b9b5b(0x264));fs['stat'](_0x493020,(_0x44b1dc,_0x21647c)=>{const _0x174751=_0x6b9b5b;if(_0x44b1dc)return console['log'](_0x174751(0x244)),_0x47cda5['json']({'code':0x0});fs['rm'](_0x493020,_0x375ba5=>{const _0x49590d=_0x174751;if(_0x375ba5)return _0x385533['app'][_0x49590d(0x26a)](_0x47cda5,_0x47cda5['__'](_0x49590d(0x266))+_0x493020);return console[_0x49590d(0x1e7)](_0x49590d(0x1de),_0x493020),_0x47cda5[_0x49590d(0x25c)]({'code':0x0});});});});}),router[_0x598740(0x1fc)](_0x598740(0x200),(_0x5df843,_0x4ccf08,_0x4c1257)=>{const _0x4437c6=_0x598740;let _0x46def1=_0x5df843[_0x4437c6(0x1f3)]['id'],_0xebeb27=_0x5df843['body']['bookIndexId'];if(!_0xebeb27)return _0x4ccf08[_0x4437c6(0x24f)](0x194)[_0x4437c6(0x1dc)]();return dbBookIndexTable[_0x4437c6(0x1d4)](_0x5df843[_0x4437c6(0x224)][_0x4437c6(0x201)],_0xebeb27,_0x4437c6(0x222),new Date()[_0x4437c6(0x1f1)]()),_0x4ccf08[_0x4437c6(0x25c)]({'code':0x0});}),router[_0x598740(0x1fc)](_0x598740(0x220),(_0x294003,_0x1717b3,_0x433180)=>{const _0x5bf974=_0x598740;let _0x1075ce=_0x294003[_0x5bf974(0x1f3)]['id'];if(!_0x294003[_0x5bf974(0x1e5)][_0x5bf974(0x27f)]||!_0x294003[_0x5bf974(0x1e5)][_0x5bf974(0x243)]||!_0x294003[_0x5bf974(0x1e5)]['progress'])return _0x1717b3[_0x5bf974(0x25c)]({'code':0x0});let _0x13d5ca=_0x294003['body'][_0x5bf974(0x27f)];_0x13d5ca=path['basename'](_0x294003[_0x5bf974(0x1e5)][_0x5bf974(0x27f)]);let _0x4d6335=path[_0x5bf974(0x27a)](_0x294003[_0x5bf974(0x1e5)][_0x5bf974(0x243)]),_0x15819c=_0x294003[_0x5bf974(0x1e5)][_0x5bf974(0x238)],_0x215787=_0x294003[_0x5bf974(0x224)][_0x5bf974(0x201)][_0x5bf974(0x1f7)](_0x5bf974(0x1e3))[_0x5bf974(0x20b)](_0x1075ce,_0x13d5ca,_0x4d6335);return _0x215787?_0x294003[_0x5bf974(0x224)]['dbFileIndex'][_0x5bf974(0x1f7)]('UPDATE\x20book_read_record\x20SET\x20progress=?,read_time=?\x20WHERE\x20uid=?\x20AND\x20book_filename=?\x20AND\x20book_path=?')[_0x5bf974(0x212)](_0x15819c,Date['now'](),_0x1075ce,_0x13d5ca,_0x4d6335):_0x294003[_0x5bf974(0x224)][_0x5bf974(0x201)][_0x5bf974(0x1f7)](_0x5bf974(0x247))[_0x5bf974(0x212)](_0x1075ce,_0x13d5ca,_0x4d6335,_0x15819c,Date[_0x5bf974(0x294)]()),_0x1717b3[_0x5bf974(0x25c)]({'code':0x0});}),router['post']('/getReadRecord',(_0x289d05,_0x2d96e3,_0x5e642e)=>{const _0x5e217a=_0x598740;let _0x571013=_0x289d05[_0x5e217a(0x1f3)]['id'],_0x58c96b=_0x289d05[_0x5e217a(0x224)][_0x5e217a(0x276)]['prepare']('SELECT\x20*\x20FROM\x20book_reader_config\x20WHERE\x20uid\x20=\x20?')[_0x5e217a(0x20b)](_0x571013),_0x503e7a=0x0,_0x3647b3=_0x289d05[_0x5e217a(0x1e5)][_0x5e217a(0x27f)],_0x5663fc=_0x289d05[_0x5e217a(0x1e5)][_0x5e217a(0x243)];if(_0x3647b3&&_0x5663fc){_0x5663fc=path[_0x5e217a(0x27a)](_0x5663fc+'');let _0xb39843=_0x289d05[_0x5e217a(0x224)][_0x5e217a(0x201)][_0x5e217a(0x1f7)](_0x5e217a(0x1e3))[_0x5e217a(0x20b)](_0x571013,_0x3647b3,_0x5663fc);_0xb39843&&(_0x503e7a=_0xb39843[_0x5e217a(0x238)]);}return _0x2d96e3['json']({'code':0x0,'progress':_0x503e7a,'readerConfig':_0x58c96b});}),router['post'](_0x598740(0x1cf),(_0x535611,_0x2e6eb2,_0x24da3c)=>{const _0x56f9b9=_0x598740;let _0xae8749=_0x535611[_0x56f9b9(0x1e5)]['indexId'],_0x562358=_0x535611[_0x56f9b9(0x1e5)][_0x56f9b9(0x1d3)];if(!_0x562358||!_0xae8749)return _0x535611[_0x56f9b9(0x224)]['returnErrMsg'](_0x2e6eb2,_0x56f9b9(0x256));if(_0x562358!=0x1&&_0x562358!=0x2)return _0x535611[_0x56f9b9(0x224)][_0x56f9b9(0x26a)](_0x2e6eb2,'need\x20type');let _0x24bbe7=dbBookIndexTable['getBookIndex'](_0x535611[_0x56f9b9(0x224)][_0x56f9b9(0x201)],_0xae8749);if(!_0x24bbe7)return _0x535611[_0x56f9b9(0x224)][_0x56f9b9(0x26a)](_0x2e6eb2,_0x56f9b9(0x21f));if(dbUserTable[_0x56f9b9(0x218)](_0x535611,_0x2e6eb2,'book',_0x56f9b9(0x1f0),_0x24bbe7[_0x56f9b9(0x1f2)])==!![])return dbBookIndexTable[_0x56f9b9(0x1d4)](_0x535611['app'][_0x56f9b9(0x201)],_0xae8749,_0x56f9b9(0x1d3),_0x562358),_0x2e6eb2[_0x56f9b9(0x25c)]({'code':0x0});});function getListByParams(_0x290188,_0x51dbd7,_0x141ccc,_0x40e5fb,_0x2679d9,_0x1c7b2e,_0x26eef4,_0x2cb5fc,_0x2b170f,_0x48de66,_0x279aa4,_0x45c30a){return new Promise((_0x26c0e5,_0x24aa46)=>{const _0x868197=_0x26f3;let _0x5a10b2=_0x290188[_0x868197(0x224)][_0x868197(0x201)],_0x48e4a6=[];if(_0x141ccc=='list'||_0x141ccc==_0x868197(0x1f6))_0x48e4a6=dbBookIndexTable['getBookList'](_0x5a10b2,_0x51dbd7,_0x40e5fb,_0x2679d9,_0x1c7b2e,_0x26eef4,_0x2cb5fc,_0x48de66,_0x2b170f,_0x279aa4,_0x45c30a);else{if(_0x141ccc=='favorite'){let _0x5b576a='',_0x353dff=[];_0x5b576a+=_0x868197(0x27e);_0x2b170f&&(_0x2b170f=_0x2b170f[_0x868197(0x226)]('\x27','')['replace']('’',''),_0x5b576a+=_0x868197(0x22c),_0x353dff[_0x868197(0x231)]('%'+_0x2b170f+'%','%'+_0x2b170f+'%','%'+_0x2b170f+'%','%'+_0x2b170f+'%','%'+_0x2b170f+'%','%'+_0x2b170f+'%','%'+_0x2b170f+'%','%'+_0x2b170f+'%'));_0x279aa4&&(_0x5b576a+=_0x868197(0x211),_0x353dff['push'](_0x279aa4,_0x279aa4));if(_0x1c7b2e&&_0x26eef4){if(_0x1c7b2e==_0x868197(0x1f9))_0x5b576a+=_0x868197(0x215)+_0x26eef4+_0x868197(0x1eb)+_0x26eef4+'\x20';else{if(_0x1c7b2e=='title')_0x5b576a+=_0x868197(0x24d)+_0x26eef4+_0x868197(0x21d)+_0x26eef4+_0x868197(0x23a)+_0x26eef4+'\x20';else _0x1c7b2e==_0x868197(0x217)?_0x5b576a+=_0x868197(0x1d1)+_0x26eef4+'\x20':_0x5b576a+=_0x868197(0x22f)+_0x1c7b2e+'\x20'+_0x26eef4+'\x20';}}else _0x5b576a+=_0x868197(0x281);_0x5b576a+=_0x868197(0x21e),_0x353dff[_0x868197(0x231)](_0x40e5fb),_0x353dff['push'](_0x2679d9),_0x48e4a6=dbBookFavorite[_0x868197(0x27d)](_0x290188[_0x868197(0x224)][_0x868197(0x201)],_0x290188['currentUser']['id'],_0x5b576a,_0x353dff);}}setBookListProps(_0x290188,_0x48e4a6)[_0x868197(0x1e8)](_0x473b7e=>{_0x26c0e5(_0x473b7e);});});}function setBookListProps(_0x1c599d,_0x1c7f93){return new Promise(async(_0x1216a,_0x2ee185)=>{const _0x4d3c41=_0x26f3;for(let _0x58467c of _0x1c7f93){_0x58467c[_0x4d3c41(0x1e9)]=dbBookFavorite[_0x4d3c41(0x293)](_0x1c599d[_0x4d3c41(0x224)]['dbFileIndex'],_0x58467c['id'],_0x1c599d['currentUser']['id'])?'1':'0',_0x58467c[_0x4d3c41(0x243)]=path[_0x4d3c41(0x27a)](_0x58467c[_0x4d3c41(0x1f2)],_0x58467c[_0x4d3c41(0x1df)]),_0x58467c['file_cover_path']=await getBookSameNameCover(_0x58467c);}_0x1216a(_0x1c7f93);});}router[_0x598740(0x1fc)]('/getHomeData',(_0x6c6c04,_0x40c1ca,_0x3d19b0)=>{const _0x1326dc=_0x598740;let _0x16a392=_0x6c6c04[_0x1326dc(0x1e5)][_0x1326dc(0x257)]?_0x6c6c04[_0x1326dc(0x1e5)][_0x1326dc(0x257)]:0xc,_0x573187=_0x6c6c04[_0x1326dc(0x1f3)]['id'],_0x1c6a68=dbUserTable[_0x1326dc(0x27b)](_0x6c6c04,_0x1326dc(0x23e),_0x1326dc(0x267),!![]);if(_0x6c6c04[_0x1326dc(0x1f3)][_0x1326dc(0x262)]!=0x1&&!_0x1c6a68[_0x1326dc(0x213)])return _0x40c1ca[_0x1326dc(0x25c)]({'code':0x0,'data':null});let _0x1b569f=[],_0xdb344a=_0x6c6c04[_0x1326dc(0x224)]['dbFileIndex'][_0x1326dc(0x1f7)](_0x1326dc(0x28d))[_0x1326dc(0x254)](_0x573187,_0x16a392);for(let _0x1209bb of _0xdb344a){let _0x26f85d=dbBookIndexTable[_0x1326dc(0x1fa)](_0x6c6c04['app'][_0x1326dc(0x201)],_0x1209bb[_0x1326dc(0x283)],_0x1209bb[_0x1326dc(0x216)]);_0x26f85d&&dbUserTable['doUserCanGet'](_0x6c6c04,_0x40c1ca,_0x1326dc(0x23e),_0x1326dc(0x267),_0x26f85d[_0x1326dc(0x1f2)],!![])==!![]&&(_0x26f85d[_0x1326dc(0x238)]=_0x1209bb[_0x1326dc(0x238)],_0x1b569f['push'](_0x26f85d));}setBookListProps(_0x6c6c04,_0x1b569f)[_0x1326dc(0x1e8)](_0x47f78b=>{const _0xda9f6=_0x1326dc;_0x1b569f=_0x47f78b,getListByParams(_0x6c6c04,_0x1c6a68,_0xda9f6(0x28b),_0x16a392,0x0,_0xda9f6(0x222),'desc',null,null,null,null,0x1)[_0xda9f6(0x1e8)](_0x1e6c06=>{const _0x390c60=_0xda9f6;getListByParams(_0x6c6c04,_0x1c6a68,_0x390c60(0x28b),_0x16a392,0x0,_0x390c60(0x222),'desc',null,null,null,null,0x2)[_0x390c60(0x1e8)](_0x51544b=>{const _0x3481d4=_0x390c60;getListByParams(_0x6c6c04,_0x1c6a68,_0x3481d4(0x28b),_0x16a392,0x0,'id',_0x3481d4(0x207))[_0x3481d4(0x1e8)](_0x28653b=>{const _0x554042=_0x3481d4;let _0x4c760c={};return _0x1b569f&&_0x1b569f[_0x554042(0x255)]>0x0&&(_0x4c760c['recentReadList']=_0x1b569f),_0x28653b&&_0x28653b[_0x554042(0x255)]>0x0&&(_0x4c760c[_0x554042(0x274)]=_0x28653b),_0x1e6c06&&_0x1e6c06[_0x554042(0x255)]>0x0&&(_0x4c760c['bookList']=_0x1e6c06),_0x51544b&&_0x51544b[_0x554042(0x255)]>0x0&&(_0x4c760c[_0x554042(0x23d)]=_0x51544b),_0x40c1ca[_0x554042(0x25c)]({'code':0x0,'data':_0x4c760c,'platform':os[_0x554042(0x1d6)]()});});});});});}),router[_0x598740(0x1fc)](_0x598740(0x272),(_0x47f8de,_0x23cdf0,_0x2a07d3)=>{const _0x196e71=_0x598740;let _0x3985d4=_0x47f8de[_0x196e71(0x1e5)][_0x196e71(0x257)]||0x32,_0x16648e=_0x47f8de['body'][_0x196e71(0x265)]||0x0,_0x4a36f7=_0x47f8de['body'][_0x196e71(0x1f9)],_0x4e95be=_0x47f8de[_0x196e71(0x1e5)]['orderField']||_0x196e71(0x222),_0x2f70ce=_0x47f8de[_0x196e71(0x1e5)]['orderType']||'desc',_0x5138e1=[_0x196e71(0x28b),_0x196e71(0x1e9),_0x196e71(0x1f6)],_0xc0c29a=_0x47f8de[_0x196e71(0x1e5)]['listType']||'list',_0x5920c7=_0x47f8de[_0x196e71(0x1e5)][_0x196e71(0x273)],_0x18316b=_0x47f8de[_0x196e71(0x1e5)][_0x196e71(0x1fe)],_0x1ac4c2=_0x47f8de['body'][_0x196e71(0x1d7)],_0x2cf647=_0x47f8de[_0x196e71(0x1e5)][_0x196e71(0x1d3)];if(dbBookIndexTable[_0x196e71(0x235)](_0x47f8de,_0x23cdf0,_0x4e95be,_0x2f70ce)!==!![])return;if(_0xc0c29a==_0x196e71(0x1f6)){if(!_0x1ac4c2)return _0x47f8de[_0x196e71(0x224)][_0x196e71(0x26a)](_0x23cdf0,_0x196e71(0x24e));}!_0x5138e1[_0x196e71(0x24c)](_0xc0c29a)&&(_0xc0c29a=_0x196e71(0x28b));_0x3985d4>0x1f4&&(_0x3985d4=0x1f4);let _0x1251bc=dbUserTable[_0x196e71(0x27b)](_0x47f8de,'book',_0x196e71(0x267),!![]);if(_0x47f8de['currentUser'][_0x196e71(0x262)]!=0x1&&!_0x1251bc['whereStr'])return _0x23cdf0[_0x196e71(0x25c)]({'code':0x0,'data':null});getListByParams(_0x47f8de,_0x1251bc,_0xc0c29a,_0x3985d4,_0x16648e,_0x4e95be,_0x2f70ce,_0x4a36f7,_0x5920c7,_0x1ac4c2,_0x18316b,_0x2cf647)[_0x196e71(0x1e8)](_0xc794e6=>{const _0x3a01c7=_0x196e71;let _0x5ae45c={'code':0x0,'data':_0xc794e6};if(_0xc0c29a==_0x3a01c7(0x1e9))_0x5ae45c[_0x3a01c7(0x260)]=dbBookFavorite[_0x3a01c7(0x227)](_0x47f8de[_0x3a01c7(0x224)][_0x3a01c7(0x201)],_0x47f8de[_0x3a01c7(0x1f3)]['id']);else{if(_0xc0c29a=='list')_0x5ae45c[_0x3a01c7(0x260)]=dbBookIndexTable['getBookListCount'](_0x47f8de[_0x3a01c7(0x224)][_0x3a01c7(0x201)],_0x1251bc,_0x4a36f7,_0x5920c7,_0x2cf647);else _0xc0c29a==_0x3a01c7(0x1f6)&&(_0x5ae45c[_0x3a01c7(0x260)]=dbBookListTable[_0x3a01c7(0x245)](_0x47f8de[_0x3a01c7(0x224)]['dbFileIndex'],_0x1ac4c2));}return _0x23cdf0['json'](_0x5ae45c);});}),router[_0x598740(0x1fc)]('/getBookDetail',(_0x332281,_0x78da4a,_0x58ee09)=>{const _0x4142d8=_0x598740;let _0x4d3338=_0x332281['body']['id'],_0x3483ca=dbFileIndexTable['getById'](_0x332281[_0x4142d8(0x224)]['dbFileIndex'],_0x4d3338,dbFileIndexTable[_0x4142d8(0x1ff)]);if(!_0x3483ca)return _0x332281['app']['returnErrMsg'](_0x78da4a,'NO\x20book\x20INDEX');if(dbUserTable[_0x4142d8(0x218)](_0x332281,_0x78da4a,'book',_0x4142d8(0x267),_0x3483ca[_0x4142d8(0x1f2)])==!![]){let _0x3cd300=_0x332281['currentUser']['id'],_0x45ca79=dbBookFavorite[_0x4142d8(0x20d)](_0x332281[_0x4142d8(0x224)][_0x4142d8(0x201)],_0x3cd300,_0x4d3338);_0x3483ca[_0x4142d8(0x1e9)]=_0x45ca79?0x1:0x0,_0x3483ca['filePath']=path['join'](_0x3483ca[_0x4142d8(0x1f2)],_0x3483ca[_0x4142d8(0x1df)]);let _0x251b79=dbBookIndexTable[_0x4142d8(0x1d0)](_0x332281['app'][_0x4142d8(0x201)],_0x3483ca[_0x4142d8(0x1f2)]);_0x251b79[_0x4142d8(0x255)]>0x0?(_0x251b79=arrayUtil[_0x4142d8(0x1d2)](_0x251b79,_0x4142d8(0x1df)),setBookListProps(_0x332281,_0x251b79)[_0x4142d8(0x1e8)](_0x6b389=>{_0x251b79=_0x6b389,_0x3c0377();})):_0x3c0377;function _0x3c0377(){const _0x2db94f=_0x4142d8;let _0x3991d7={'code':0x0,'data':_0x3483ca,'sameFolderBookList':_0x251b79};getBookSameNameCover(_0x3483ca)[_0x2db94f(0x1e8)](_0x203f2a=>{const _0x111586=_0x2db94f;_0x3483ca[_0x111586(0x278)]=_0x203f2a;let _0x1d368e=_0x332281['app'][_0x111586(0x201)][_0x111586(0x1f7)](_0x111586(0x234))['get'](_0x3cd300,path[_0x111586(0x27a)](_0x3483ca[_0x111586(0x1f2)],_0x3483ca[_0x111586(0x1df)]),_0x3483ca[_0x111586(0x25d)]);_0x1d368e&&(_0x3991d7['progress']=_0x1d368e[_0x111586(0x238)]),_0x3991d7['fileExist']=fs[_0x111586(0x1e2)](_0x3483ca[_0x111586(0x243)],(_0x9714a4,_0x40ec7d)=>{const _0x2f57c4=_0x111586;return _0x9714a4?_0x3991d7['exist']=0x0:_0x3991d7[_0x2f57c4(0x1db)]=0x1,_0x78da4a[_0x2f57c4(0x25c)](_0x3991d7);});});}}}),router[_0x598740(0x1fc)](_0x598740(0x289),(_0x2ea147,_0x1175c8,_0x2cdc3a)=>{const _0x5c0516=_0x598740;let _0x2f41b9=_0x2ea147[_0x5c0516(0x1f3)]['id'];function _0x226777(_0xbc4575){const _0x5d3f64=_0x5c0516;let _0x174d6c=dbFileIndexTable[_0x5d3f64(0x208)](_0x2ea147[_0x5d3f64(0x224)][_0x5d3f64(0x201)],_0xbc4575,dbFileIndexTable['INDEX_TABLE_NAME_BOOK']);if(!_0x174d6c)return;let _0x4fed61=new Date()[_0x5d3f64(0x1f1)]();_0x2ea147[_0x5d3f64(0x224)][_0x5d3f64(0x201)][_0x5d3f64(0x1f7)](_0x5d3f64(0x202))['run'](_0x4fed61,_0xbc4575),dbBookFavorite[_0x5d3f64(0x287)](_0x2ea147[_0x5d3f64(0x224)]['dbFileIndex'],_0x2f41b9,_0xbc4575);}if(_0x2ea147[_0x5c0516(0x1e5)][_0x5c0516(0x290)]instanceof Array){let _0x3df4d1=_0x2ea147[_0x5c0516(0x1e5)][_0x5c0516(0x204)];if(_0x3df4d1=='add')for(let _0x4b8946 of _0x2ea147[_0x5c0516(0x1e5)][_0x5c0516(0x290)]){_0x226777(_0x4b8946);}else{if(_0x3df4d1==_0x5c0516(0x249))for(let _0x352c9c of _0x2ea147[_0x5c0516(0x1e5)][_0x5c0516(0x290)]){dbBookFavorite[_0x5c0516(0x1fd)](_0x2ea147['app']['dbFileIndex'],_0x2f41b9,_0x352c9c);}}return _0x1175c8[_0x5c0516(0x25c)]({'code':0x0});}else{let _0x90dc86=parseInt(_0x2ea147['body'][_0x5c0516(0x290)]),_0x3ac6d7=dbBookFavorite[_0x5c0516(0x20d)](_0x2ea147[_0x5c0516(0x224)][_0x5c0516(0x201)],_0x2f41b9,_0x90dc86),_0x3b0460=0x0;return _0x3ac6d7?dbBookFavorite['deleteFavorite'](_0x2ea147['app']['dbFileIndex'],_0x2f41b9,_0x90dc86):(_0x3b0460=0x1,_0x226777(_0x90dc86)),_0x1175c8[_0x5c0516(0x25c)]({'code':0x0,'favorite':_0x3b0460});}}),router[_0x598740(0x20b)](_0x598740(0x214),(_0x3c482f,_0x4d8219,_0x21f5c1)=>{const _0x46d633=_0x598740;let _0x2bca2=_0x3c482f[_0x46d633(0x24a)][_0x46d633(0x290)],_0x1ca6ad=dbBookIndexTable[_0x46d633(0x20a)](_0x3c482f[_0x46d633(0x224)]['dbFileIndex'],_0x2bca2),_0x4db18f=_0x3c482f[_0x46d633(0x24a)][_0x46d633(0x25d)];!_0x4db18f&&(_0x4db18f=0x200);if(!_0x1ca6ad||_0x1ca6ad&&!_0x1ca6ad['cover_path'])return _0x4d8219['status'](0x194)['end']();dbUserTable[_0x46d633(0x218)](_0x3c482f,_0x4d8219,_0x46d633(0x23e),_0x46d633(0x267),_0x1ca6ad[_0x46d633(0x1f2)])==!![]&&fs['stat'](_0x1ca6ad[_0x46d633(0x1dd)],(_0x592bea,_0x4c4e8d)=>{const _0x378bc9=_0x46d633;if(_0x592bea){let _0x3ae444=config[_0x378bc9(0x221)](_0x1ca6ad);bookIndexUtil[_0x378bc9(0x268)](_0x1ca6ad,_0x3ae444)['then'](_0x5cdb13=>{const _0x2f4029=_0x378bc9;if(_0x5cdb13[_0x2f4029(0x225)])bookIndexUtil['sharpWriteCover'](_0x5cdb13['coverData'],_0x3ae444)[_0x2f4029(0x1e8)](_0x1ddebc=>{const _0xd60934=_0x2f4029;return console[_0xd60934(0x1e7)]('封面写入成功',_0x1ddebc),_0x4d8219[_0xd60934(0x282)](_0x1ddebc);})[_0x2f4029(0x23c)](_0x3faf93=>{const _0x19c2c4=_0x2f4029;return _0x4d8219[_0x19c2c4(0x24f)](0x194)[_0x19c2c4(0x1dc)]();});else return _0x4d8219['status'](0x194)[_0x2f4029(0x1dc)]();})[_0x378bc9(0x23c)](_0x30b8bc=>{const _0xe85b23=_0x378bc9;return _0x4d8219[_0xe85b23(0x24f)](0x194)[_0xe85b23(0x1dc)]();});}else return _0x4d8219[_0x378bc9(0x282)](_0x1ca6ad[_0x378bc9(0x1dd)]);});}),router[_0x598740(0x1fc)](_0x598740(0x26c),(_0x55f0c2,_0x592514,_0x28e4bc)=>{const _0xf1619d=_0x598740;let _0x25b73b=_0x55f0c2[_0xf1619d(0x1e5)][_0xf1619d(0x257)]||0x32,_0x5c591f=_0x55f0c2[_0xf1619d(0x1e5)]['offset']||0x0,_0x42acfa=_0x55f0c2['body'][_0xf1619d(0x292)]||'bookList',_0x2814c4=_0x55f0c2[_0xf1619d(0x1e5)]['orderField']||_0xf1619d(0x222),_0x4d5efb=_0x55f0c2[_0xf1619d(0x1e5)][_0xf1619d(0x277)]||_0xf1619d(0x207),_0x5f3c8f=_0x55f0c2['body']['search'],_0x1f022e=_0x55f0c2[_0xf1619d(0x1e5)][_0xf1619d(0x1fe)];if(dbBookIndexTable['checkOrderParams'](_0x55f0c2,_0x592514,_0x2814c4,_0x4d5efb)!==!![])return;let _0xa416c5=[_0xf1619d(0x222),_0xf1619d(0x1e0),_0xf1619d(0x222),_0xf1619d(0x1df),_0xf1619d(0x1d5),_0xf1619d(0x1f9),_0xf1619d(0x1ef),'id',_0xf1619d(0x253)],_0x4c1795=[_0xf1619d(0x22a),'desc'];if(!_0xa416c5[_0xf1619d(0x24c)](_0x2814c4)||!_0x4c1795[_0xf1619d(0x24c)](_0x4d5efb))return _0x55f0c2[_0xf1619d(0x224)]['returnErrMsg'](_0x592514,_0xf1619d(0x261),_0x2814c4,_0x4d5efb);let _0x57f65c=dbUserTable['getUserPathWhere'](_0x55f0c2,'book',_0xf1619d(0x267),!![]);if(_0x55f0c2[_0xf1619d(0x1f3)][_0xf1619d(0x262)]!=0x1&&!_0x57f65c[_0xf1619d(0x213)]&&_0x42acfa!=_0xf1619d(0x1f6))return _0x592514[_0xf1619d(0x25c)]({'code':0x0,'data':null});let _0x169e27=[];if(_0x42acfa==_0xf1619d(0x1f9))_0x169e27=dbBookIndexTable[_0xf1619d(0x259)](_0x55f0c2[_0xf1619d(0x224)][_0xf1619d(0x201)],_0x57f65c,_0x42acfa,_0x25b73b,_0x5c591f,_0x2814c4,_0x4d5efb,_0x5f3c8f,_0x1f022e);else{if(_0x42acfa==_0xf1619d(0x1f6)){_0x169e27=dbBookListTable[_0xf1619d(0x250)](_0x55f0c2[_0xf1619d(0x224)][_0xf1619d(0x201)],_0x55f0c2['currentUser']['id'],_0x25b73b,_0x5c591f,'id',_0xf1619d(0x207),_0x5f3c8f);for(let _0x99bec6 of _0x169e27){_0x99bec6[_0xf1619d(0x248)]=dbBookIndexTable['getBooklistCover'](_0x55f0c2[_0xf1619d(0x224)][_0xf1619d(0x201)],_0x99bec6['id']);}}}return _0x592514['json']({'code':0x0,'data':_0x169e27});}),router['post'](_0x598740(0x232),(_0x44065a,_0x51788e,_0x457881)=>{const _0x567c4e=_0x598740;let _0x925fe8=_0x44065a[_0x567c4e(0x1e5)][_0x567c4e(0x25b)],_0x5db56f=_0x44065a[_0x567c4e(0x1e5)][_0x567c4e(0x204)];if(_0x5db56f=='add'){if(!_0x925fe8)return _0x44065a['app'][_0x567c4e(0x26a)](_0x51788e,'need\x20\x27name\x27');dbBookListTable[_0x567c4e(0x229)](_0x44065a['app'][_0x567c4e(0x201)],_0x44065a['currentUser']['id'],_0x925fe8);}else{if(_0x5db56f==_0x567c4e(0x1e1)||_0x5db56f==_0x567c4e(0x249)){let _0x52b06d=_0x44065a[_0x567c4e(0x1e5)][_0x567c4e(0x1d7)],_0x23f033=dbBookListTable[_0x567c4e(0x233)](_0x44065a[_0x567c4e(0x224)][_0x567c4e(0x201)],_0x52b06d),_0xb6a267=![];(_0x44065a[_0x567c4e(0x1f3)][_0x567c4e(0x262)]==0x1||_0x23f033['uid']==_0x44065a[_0x567c4e(0x1f3)]['id'])&&(_0xb6a267=!![]);if(!_0xb6a267)return _0x51788e[_0x567c4e(0x25c)]({'code':0x66});if(_0x5db56f=='delete')dbBookListTable['removeBookList'](_0x44065a[_0x567c4e(0x224)][_0x567c4e(0x201)],_0x52b06d);else{if(_0x5db56f=='edit'){if(!_0x925fe8)return _0x44065a[_0x567c4e(0x224)][_0x567c4e(0x26a)](_0x51788e,'need\x20\x27name\x27');dbBookListTable['updateBookList'](_0x44065a[_0x567c4e(0x224)][_0x567c4e(0x201)],_0x52b06d,_0x925fe8);}}}else return _0x44065a['app'][_0x567c4e(0x26a)](_0x51788e,'operation\x20error');}return _0x51788e[_0x567c4e(0x25c)]({'code':0x0});}),router['post'](_0x598740(0x230),(_0x328e38,_0x290da9,_0x359357)=>{const _0x329594=_0x598740;let _0x42a72f=_0x328e38[_0x329594(0x1e5)][_0x329594(0x20e)],_0xb96d33=_0x328e38[_0x329594(0x1e5)][_0x329594(0x1d7)];if(!_0x42a72f||!_0xb96d33)return _0x328e38['app'][_0x329594(0x26a)](_0x290da9,'need\x20bookIndexId/bookListId');let _0x5f4f84=dbBookListTable[_0x329594(0x233)](_0x328e38[_0x329594(0x224)][_0x329594(0x201)],_0xb96d33);if(!_0x5f4f84)return _0x328e38[_0x329594(0x224)]['returnErrMsg'](_0x290da9,'bookListId\x20no\x20exists');let _0x326f7f=_0x328e38[_0x329594(0x1e5)][_0x329594(0x204)];if(_0x326f7f==_0x329594(0x239)){function _0x30daf6(_0x12468e){const _0x530ef8=_0x329594;let _0x40b900=dbBookIndexTable['getBookIndex'](_0x328e38[_0x530ef8(0x224)][_0x530ef8(0x201)],_0x12468e);if(!_0x40b900)return;if(_0x40b900[_0x530ef8(0x1d9)]==0x1){dbBookListTable[_0x530ef8(0x1e6)](_0x328e38[_0x530ef8(0x224)][_0x530ef8(0x201)],_0x12468e,_0xb96d33);let _0x55a0d1=Date[_0x530ef8(0x294)]();_0x328e38['app'][_0x530ef8(0x201)][_0x530ef8(0x1f7)](_0x530ef8(0x202))[_0x530ef8(0x212)](_0x55a0d1,_0x40b900['id']);}else{let _0x32f01d=path[_0x530ef8(0x27a)](_0x40b900[_0x530ef8(0x1f2)],_0x40b900['filename']),_0x58510e=_0x328e38[_0x530ef8(0x224)]['dbFileIndex'][_0x530ef8(0x1f7)](_0x530ef8(0x285))[_0x530ef8(0x254)](_0x32f01d,_0x32f01d+path[_0x530ef8(0x28e)]+'%');for(let _0x4a2428 of _0x58510e){dbBookListTable[_0x530ef8(0x1e6)](_0x328e38['app'][_0x530ef8(0x201)],_0x4a2428['id'],_0xb96d33);}}}if(_0x42a72f instanceof Array)for(let _0x3e5a50 of _0x42a72f){_0x30daf6(_0x3e5a50);}else _0x30daf6(_0x42a72f);}else{if(_0x326f7f==_0x329594(0x249)){if(_0x42a72f instanceof Array)for(let _0x530a97 of _0x42a72f){dbBookListTable[_0x329594(0x25f)](_0x328e38[_0x329594(0x224)]['dbFileIndex'],_0x530a97,_0xb96d33);}else dbBookListTable[_0x329594(0x25f)](_0x328e38[_0x329594(0x224)]['dbFileIndex'],_0x42a72f,_0xb96d33);}else return _0x328e38[_0x329594(0x224)][_0x329594(0x26a)](_0x290da9,_0x329594(0x291));}return _0x290da9[_0x329594(0x25c)]({'code':0x0,'data':{}});}),router[_0x598740(0x1fc)](_0x598740(0x26b),(_0x299655,_0xc2151e,_0x4231e2)=>{const _0x35ac63=_0x598740;let _0x180b45=_0x299655[_0x35ac63(0x1e5)][_0x35ac63(0x28c)],_0x33ca8e=_0x299655['body'][_0x35ac63(0x241)],_0xe3288d='book';if(dbUserTable[_0x35ac63(0x218)](_0x299655,_0xc2151e,_0xe3288d,_0x35ac63(0x267))==!![]){let _0x4223a6=[];if(!_0x180b45){let _0x3787ea=[];_0x299655['currentUser'][_0x35ac63(0x262)]==0x1?_0x3787ea=dbSourceFolderTable[_0x35ac63(0x1ed)](_0x299655[_0x35ac63(0x224)][_0x35ac63(0x276)],_0xe3288d):_0x3787ea=dbUserTable['getUserPower'](_0x299655[_0x35ac63(0x224)][_0x35ac63(0x276)],_0x299655['currentUser'][_0x35ac63(0x252)],_0xe3288d);if(_0x3787ea)for(let _0x18cce8=0x0;_0x18cce8<_0x3787ea[_0x35ac63(0x255)];_0x18cce8++){_0x4223a6[_0x35ac63(0x231)]({'path':_0x3787ea[_0x18cce8][_0x35ac63(0x1f2)],'is_file':0x0,'filename':path[_0x35ac63(0x1d8)](_0x3787ea[_0x18cce8]['path']),'root':!![]});}}else{let _0x44f2c7=[];if(_0x299655[_0x35ac63(0x1f3)][_0x35ac63(0x262)]!=0x1){if(dbUserTable[_0x35ac63(0x218)](_0x299655,_0xc2151e,_0xe3288d,_0x35ac63(0x267),_0x180b45)!==!![])return;}_0x180b45=path['join'](_0x180b45);let _0x321d81=_0x35ac63(0x210);_0x44f2c7['push'](_0x180b45);if(_0x33ca8e){let _0x3ba549=_0x35ac63(0x240);_0x321d81+=_0x3ba549,_0x44f2c7[_0x35ac63(0x231)]('%'+_0x33ca8e+'%'),_0x44f2c7[_0x35ac63(0x231)]('%'+_0x33ca8e+'%');}let _0xa4e08c=_0x35ac63(0x21a);_0x4223a6=_0x299655[_0x35ac63(0x224)][_0x35ac63(0x201)][_0x35ac63(0x1f7)](_0x35ac63(0x27c)+_0xa4e08c+_0x35ac63(0x1fb)+_0x321d81)[_0x35ac63(0x254)](_0x44f2c7);}for(let _0x43ad8f of _0x4223a6){if(_0x43ad8f[_0x35ac63(0x1d9)]==0x0){let _0x5283ab=path[_0x35ac63(0x27a)](_0x43ad8f['path'],_0x43ad8f[_0x35ac63(0x1df)]),_0x4aa6c6=_0x299655['app']['dbFileIndex'][_0x35ac63(0x1f7)](_0x35ac63(0x205))[_0x35ac63(0x20b)](_0x5283ab);_0x43ad8f[_0x35ac63(0x251)]=_0x4aa6c6['count'];}}let _0x2985fd=path[_0x35ac63(0x28e)],_0x2666a1={'code':0x0,'data':_0x4223a6,'sep':_0x2985fd};return _0xc2151e[_0x35ac63(0x25c)](_0x2666a1);}}),router[_0x598740(0x1fc)](_0x598740(0x20f),(_0x62d12c,_0x2e8299,_0x4f36e5)=>{const _0x47809e=_0x598740;let _0x3e6534=_0x62d12c[_0x47809e(0x1e5)]['bookIndexId'],_0x295bef=_0x62d12c[_0x47809e(0x1e5)]['operation'];if(!_0x3e6534)return _0x62d12c[_0x47809e(0x224)][_0x47809e(0x26a)](_0x2e8299,_0x47809e(0x22e));let _0x3eb0a8=dbBookIndexTable[_0x47809e(0x20a)](_0x62d12c[_0x47809e(0x224)][_0x47809e(0x201)],_0x3e6534);if(!_0x3eb0a8)return _0x62d12c[_0x47809e(0x224)]['returnErrMsg'](_0x2e8299,_0x47809e(0x288));if(_0x295bef=='update'){let _0x488e85={'title':_0x62d12c['body'][_0x47809e(0x1d5)],'publish_date':_0x62d12c['body']['publish_date'],'year':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x228)],'isbn':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x246)],'language':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x286)],'genre':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x21b)],'tag':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x1ec)],'publisher':_0x62d12c[_0x47809e(0x1e5)]['publisher'],'artist':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x1f9)],'introduction':_0x62d12c[_0x47809e(0x1e5)][_0x47809e(0x26e)]},_0x50e25b=path[_0x47809e(0x27a)](_0x3eb0a8['path'],_0x3eb0a8[_0x47809e(0x1df)]);fs[_0x47809e(0x1e2)](_0x50e25b,(_0x3b25cc,_0x570679)=>{const _0x4db95f=_0x47809e;if(_0x3b25cc)return _0x62d12c[_0x4db95f(0x224)][_0x4db95f(0x26a)](_0x2e8299,_0x2e8299['__'](_0x4db95f(0x26d))+_0x50e25b);let _0x1c870d=_0x50e25b[_0x4db95f(0x279)](0x0,_0x50e25b[_0x4db95f(0x237)]('.'))+_0x4db95f(0x219);nfoUtil['saveBookNfo'](_0x488e85,_0x1c870d)['then'](()=>{const _0x59fe05=_0x4db95f;console[_0x59fe05(0x1e7)](_0x59fe05(0x203)),dbBookIndexTable[_0x59fe05(0x209)](_0x62d12c['app'][_0x59fe05(0x201)],_0x3e6534,_0x488e85),_0x3eb0a8=dbBookIndexTable['getBookIndex'](_0x62d12c[_0x59fe05(0x224)][_0x59fe05(0x201)],_0x3e6534),setBookListProps(_0x62d12c,[_0x3eb0a8])[_0x59fe05(0x1e8)](_0x412214=>{return _0x2e8299['json']({'code':0x0,'data':_0x412214[0x0]});});})[_0x4db95f(0x23c)](_0x2912b8=>{const _0x19d0c1=_0x4db95f;return console[_0x19d0c1(0x1e7)](_0x19d0c1(0x1da),_0x2912b8),_0x62d12c[_0x19d0c1(0x224)]['returnErrMsg'](_0x2e8299,'error');});});}else{if(_0x295bef=='delete'){let _0xb80ba4=path[_0x47809e(0x27a)](_0x3eb0a8[_0x47809e(0x1f2)],_0x3eb0a8[_0x47809e(0x1df)]),_0x3a0ff8=_0xb80ba4[_0x47809e(0x279)](0x0,_0xb80ba4['lastIndexOf']('.'))+_0x47809e(0x219);fs[_0x47809e(0x1e2)](_0x3a0ff8,(_0x1c185d,_0x5f166b)=>{const _0x590b55=_0x47809e;if(_0x1c185d)return _0x62d12c[_0x590b55(0x224)]['returnErrMsg'](_0x2e8299,_0x2e8299['__']('folderNotExist')+_0x3a0ff8);fs['rm'](_0x3a0ff8,_0x356705=>{const _0x28a5f6=_0x590b55;if(_0x356705)return _0x62d12c['app']['returnErrMsg'](_0x2e8299,_0x2e8299['__'](_0x28a5f6(0x266))+_0x3a0ff8);return dbBookIndexTable[_0x28a5f6(0x209)](_0x62d12c[_0x28a5f6(0x224)][_0x28a5f6(0x201)],indexId,{}),_0x2e8299['json']({'code':0x0});});});}else return _0x62d12c[_0x47809e(0x224)]['returnErrMsg'](_0x2e8299,_0x47809e(0x291));}}),module['exports']=router;function _0x5782(){const _0x14df6f=['offset','deleteFail','power_get','runGetBookInfoWorker','1179690mEcRlX','returnErrMsg','/getBookIndexFileTree','/getGroupList','folderNotExist','introduction','68703GHFUcv','/setReaderConfig','need\x20bookIndexId','/getBookList','search','recentAddList','../../utils/arrayUtil','dbOther','orderType','file_cover_path','substring','join','getUserPathWhere','SELECT\x20','getAllFavoriteByWhere','\x20is_file=1','fileName','../../db/dbSourceFolderTable','\x20order\x20by\x20m.update_time\x20DESC\x20','sendFile','book_path','275346ujKYaN','SELECT\x20id\x20from\x20file_index_book\x20where\x20is_file=1\x20and\x20path\x20=?\x20or\x20path\x20like\x20?','language','addFavorite','index\x20id\x20error','/bookFavorite','need\x20config\x20json','list','parent','SELECT\x20*\x20FROM\x20book_read_record\x20WHERE\x20uid=?\x20ORDER\x20BY\x20read_time\x20desc\x20LIMIT\x20?','sep','16EzIbwh','indexId','operation\x20error','groupField','bookIsFavorite','now','/setBookType','getBookListByPath','\x20order\x20by\x20m.update_time\x20','sortFileNamesByNumber','type','updateByFiled','title','platform','bookListId','basename','is_file','nfo写入失败','exist','end','cover_path','封面文件已删除','filename','play_count','edit','stat','SELECT\x20*\x20FROM\x20book_read_record\x20WHERE\x20uid=?\x20AND\x20book_filename=?\x20AND\x20book_path=?','power_delete','body','addBookToBookList','log','then','favorite','remark',',f.artist\x20','tag','getPathByType','/deleteSameNameCover','birthtime','power_change','getTime','path','currentUser','../../db/dbFileIndexTable','config\x20json\x20format\x20error','bookList','prepare','4192745JCmHHE','artist','getBookIndexByFileName','\x20FROM\x20file_index_book\x20WHERE\x20','post','deleteFavorite','letterIndex','INDEX_TABLE_NAME_BOOK','/refreshCheckTime','dbFileIndex','UPDATE\x20file_index_book\x20set\x20check_time=?\x20WHERE\x20id=?','nfo写入成功','operation','SELECT\x20count(*)\x20as\x20count\x20FROM\x20file_index_book\x20WHERE\x20path=?\x20and\x20is_file=1','../../myConfig/config','desc','getById','updateBook','getBookIndex','get','endsWith','getFavorite','bookIndexId','/updateBookNfo','\x20path=?\x20\x20','\x20AND\x20(filename_fl\x20=?\x20or\x20title_fl=?\x20)','run','whereStr','/getBookCover','\x20order\x20by\x20f.artist_fl\x20','book_filename','favorite_time','doUserCanGet','.nfo','\x20id,is_file,id,path,filename,type,size,title,artist,ext,cover_path,language,publisher,total_page,type,check_time,create_time','genre','configJson',',f.title\x20','\x20LIMIT\x20?\x20OFFSET\x20?\x20','book\x20not\x20exist','/addReadRecord','getMediaCoverCachePath','check_time','UPDATE\x20book_reader_config\x20SET\x20config_json=?\x20WHERE\x20uid=?','app','coverData','replace','getFavoriteCount','year','createBookList','asc','623391yhyXME','\x20AND\x20(filename\x20like\x20?\x20\x20OR\x20title\x20\x20like\x20?\x20OR\x20artist\x20like\x20?\x20OR\x20tag\x20like\x20?\x20OR\x20publisher\x20like\x20?\x20OR\x20isbn\x20like\x20?\x20OR\x20genre\x20like\x20?\x20OR\x20year\x20like\x20?)','4830048bfKOpL','need\x20index\x20id','\x20order\x20by\x20f.','/operationBookListIndex','push','/operationBookList','getBookListById','SELECT\x20*\x20FROM\x20book_read_record\x20WHERE\x20uid=?\x20AND\x20book_filename=?\x20AND\x20book_size=?','checkOrderParams','.jpg','lastIndexOf','progress','add',',f.filename_fl\x20','../../db/dbUserTable','catch','comicList','book','extname','\x20\x20AND\x20(filename\x20LIKE\x20?\x20OR\x20title\x20\x20LIKE\x20?)\x20','searchStr','49HQZPge','filePath','封面文件已不存在','getBookListBookCount','isbn','REPLACE\x20INTO\x20book_read_record\x20(uid,book_filename,book_path,progress,read_time)\x20VALUES(?,?,?,?,?)','cover','delete','query','REPLACE\x20INTO\x20book_reader_config\x20(uid,config_json,remark)\x20VALUES(?,?,?)','includes','\x20order\x20by\x20f.title_fl\x20','need\x20bookListId','status','getBookListList','fileCount','username','publisher','all','length','need\x20type/indexId','count','7372784VsBWog','getGroupList','../../db/dbBookListTable','name','json','size','SELECT\x20*\x20FROM\x20book_reader_config\x20WHERE\x20uid=?','removeBookFromList','book_count','orderField/orderType\x20error','is_admin','20QKHICQ','cover\x20format\x20error'];_0x5782=function(){return _0x14df6f;};return _0x5782();}