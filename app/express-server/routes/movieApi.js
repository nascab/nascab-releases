const _0xfde149=_0x2e15;(function(_0x2f6288,_0x14923f){const _0x1eaa26=_0x2e15,_0x51b8ac=_0x2f6288();while(!![]){try{const _0x521d9e=-parseInt(_0x1eaa26(0x1fb))/0x1*(-parseInt(_0x1eaa26(0x1f6))/0x2)+-parseInt(_0x1eaa26(0x2e7))/0x3+parseInt(_0x1eaa26(0x327))/0x4*(parseInt(_0x1eaa26(0x1e5))/0x5)+-parseInt(_0x1eaa26(0x1e2))/0x6+parseInt(_0x1eaa26(0x230))/0x7*(-parseInt(_0x1eaa26(0x26c))/0x8)+parseInt(_0x1eaa26(0x29e))/0x9*(parseInt(_0x1eaa26(0x228))/0xa)+-parseInt(_0x1eaa26(0x22f))/0xb;if(_0x521d9e===_0x14923f)break;else _0x51b8ac['push'](_0x51b8ac['shift']());}catch(_0x21f138){_0x51b8ac['push'](_0x51b8ac['shift']());}}}(_0x597e,0x4a6b3));var express=require(_0xfde149(0x259)),router=express[_0xfde149(0x22c)]();let path=require(_0xfde149(0x245));const dbFileIndexTable=require('../../db/dbFileIndexTable'),dbUserTable=require(_0xfde149(0x242));var fs=require('fs');let sha256=require(_0xfde149(0x294));const dbConfigTable=require('../../db/dbConfigTable'),dbSourceFolderTable=require(_0xfde149(0x329)),nfoUtil=require(_0xfde149(0x306)),dbMovieFavorite=require(_0xfde149(0x1ff)),movieUtil=require(_0xfde149(0x286));let fileUtil=require(_0xfde149(0x20c));const sqliteUtil=require('../utils/sqliteUtil'),photoApiUtils=require(_0xfde149(0x20f));let movieSeasonUtil=require(_0xfde149(0x311)),movieInfoUtil=require(_0xfde149(0x211));const dbScanTaskTable=require('../../db/dbScanTaskTable');let movieFieldStr='\x20id,collection_id,movie_douban_score,movie_info_name,movie_year,movie_info_state,path,is_tvplay,filename,ext,type,width,height,duration,size,movie_douban_id,movie_imdb_id,show_name,show_in_list';function getTvSeriesPoster(_0x5b3215){const _0x3a7ea8=_0xfde149;let _0x233b9c='',_0x30b447=path['join'](path['dirname'](_0x5b3215[_0x3a7ea8(0x245)]),'poster.jpg');return fs['existsSync'](_0x30b447)&&(_0x233b9c=_0x30b447),!_0x233b9c&&(_0x30b447=path['join'](path[_0x3a7ea8(0x2c2)](_0x5b3215[_0x3a7ea8(0x245)]),_0x3a7ea8(0x22e)),fs[_0x3a7ea8(0x292)](_0x30b447)&&(_0x233b9c=_0x30b447)),!_0x233b9c&&(_0x30b447=path[_0x3a7ea8(0x1e6)](path[_0x3a7ea8(0x2c2)](_0x5b3215[_0x3a7ea8(0x245)]),_0x3a7ea8(0x261)),fs[_0x3a7ea8(0x292)](_0x30b447)&&(_0x233b9c=_0x30b447)),!_0x233b9c&&(_0x30b447=path['join'](path[_0x3a7ea8(0x2c2)](_0x5b3215[_0x3a7ea8(0x245)]),'thumb.jpg'),fs['existsSync'](_0x30b447)&&(_0x233b9c=_0x30b447)),_0x233b9c;}router[_0xfde149(0x266)](_0xfde149(0x232),(_0x52cae1,_0x43f863,_0x4c8929)=>{const _0x3caf1b=_0xfde149;let _0x363c49=_0x52cae1[_0x3caf1b(0x244)]['id'],_0x285ad4=dbFileIndexTable[_0x3caf1b(0x2e5)](_0x52cae1[_0x3caf1b(0x2a9)][_0x3caf1b(0x315)],_0x363c49,dbFileIndexTable[_0x3caf1b(0x2b3)]);if(!_0x285ad4)return _0x52cae1[_0x3caf1b(0x2a9)]['returnErrMsg'](_0x43f863,_0x43f863['__'](_0x3caf1b(0x274)));if(dbUserTable[_0x3caf1b(0x26a)](_0x52cae1,_0x43f863,_0x3caf1b(0x2d2),_0x3caf1b(0x281),_0x285ad4[_0x3caf1b(0x245)])==!![]){nfoUtil[_0x3caf1b(0x250)](_0x285ad4)[_0x3caf1b(0x1d2)](_0x12ebde=>{const _0x289df6=_0x3caf1b;_0x285ad4=_0x12ebde,_0x52cae1[_0x289df6(0x244)][_0x289df6(0x20a)]=!![],_0x52cae1[_0x289df6(0x244)][_0x289df6(0x20e)]=0x1,_0x285ad4=addFolderCoverPath(_0x43f863,_0x52cae1,_0x285ad4),_0x6dda76();})[_0x3caf1b(0x1d0)](_0x1434ef=>{const _0x47c15e=_0x3caf1b;console[_0x47c15e(0x256)](_0x47c15e(0x2a7),_0x1434ef),_0x285ad4=addFolderCoverPath(_0x43f863,_0x52cae1,_0x285ad4),_0x285ad4[_0x47c15e(0x1dc)]=_0x285ad4['tvFolderName'],_0x6dda76();});function _0x6dda76(){const _0x2a80ad=_0x3caf1b;addTvFolderPathAndName(_0x285ad4),setLogoAndFanart(_0x52cae1,_0x285ad4,_0x285ad4['tvFolderPath']);let _0x29efea=dbMovieFavorite[_0x2a80ad(0x1cc)](_0x52cae1[_0x2a80ad(0x2a9)][_0x2a80ad(0x315)],_0x52cae1['currentUser']['id'],_0x285ad4['id']);_0x29efea?_0x285ad4[_0x2a80ad(0x2f9)]=0x1:_0x285ad4[_0x2a80ad(0x2f9)]=0x0;let _0x1bc4f6={'code':0x0,'movieIndex':_0x285ad4},_0x5c17ba='SELECT\x20'+movieFieldStr+'\x20FROM\x20'+dbFileIndexTable[_0x2a80ad(0x2b3)]+_0x2a80ad(0x310)+path[_0x2a80ad(0x260)]+'Extra\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path[_0x2a80ad(0x260)]+'extra\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path[_0x2a80ad(0x260)]+'EXTRA\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path[_0x2a80ad(0x260)]+_0x2a80ad(0x1e4)+path[_0x2a80ad(0x260)]+_0x2a80ad(0x2cf)+path['sep']+'specials\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path[_0x2a80ad(0x260)]+_0x2a80ad(0x31b)+path['sep']+_0x2a80ad(0x1df)+path[_0x2a80ad(0x260)]+_0x2a80ad(0x2be),_0x5b443f=_0x52cae1[_0x2a80ad(0x2a9)]['dbFileIndex'][_0x2a80ad(0x31e)](_0x5c17ba)['all'](path[_0x2a80ad(0x2c2)](_0x285ad4[_0x2a80ad(0x245)])+path[_0x2a80ad(0x260)]+'%');for(let _0xc7a018 of _0x5b443f){_0xc7a018[_0x2a80ad(0x2bc)]=path[_0x2a80ad(0x308)](_0xc7a018[_0x2a80ad(0x245)]),_0xc7a018['is_tvplay']=0x0;}_0x5b443f[_0x2a80ad(0x290)]>0x0&&(_0x1bc4f6['extraAndSpecialsList']=_0x5b443f),fs[_0x2a80ad(0x2c8)](_0x285ad4['tvFolderPath'],(_0xf1e1b,_0x2dc5b8)=>{const _0x2c5062=_0x2a80ad;_0x1bc4f6[_0x2c5062(0x21c)]=_0xf1e1b?0x0:0x1,_0x43f863[_0x2c5062(0x204)](_0x1bc4f6),_0x285ad4[_0x2c5062(0x2b1)]==0x1&&_0x285ad4[_0x2c5062(0x2f0)]&&(dbScanTaskTable[_0x2c5062(0x28f)](_0x52cae1[_0x2c5062(0x2a9)][_0x2c5062(0x1cd)],_0x2c5062(0x2d2),_0x285ad4[_0x2c5062(0x2f0)]),process[_0x2c5062(0x2fc)]({'type':_0x2c5062(0x2d8),'source_type':'movie','restartWatcher':![]}));});}}}),router[_0xfde149(0x266)](_0xfde149(0x264),(_0x372001,_0x410307,_0xd85b10)=>{const _0x416d=_0xfde149;let _0x2f4e62=_0x372001['body']['id'],_0x3eefd9=dbFileIndexTable[_0x416d(0x2e5)](_0x372001['app'][_0x416d(0x315)],_0x2f4e62,dbFileIndexTable[_0x416d(0x2b3)]);if(!_0x3eefd9)return _0x372001[_0x416d(0x2a9)][_0x416d(0x298)](_0x410307,_0x410307['__']('index.videoInfoReadFail'));if(dbUserTable[_0x416d(0x26a)](_0x372001,_0x410307,_0x416d(0x2d2),_0x416d(0x281),_0x3eefd9['path'])==!![]){nfoUtil[_0x416d(0x322)](_0x3eefd9,!![],![])[_0x416d(0x1d2)](_0x15e00d=>{const _0x272dd3=_0x416d;_0x3eefd9=_0x15e00d,_0x372001[_0x272dd3(0x244)][_0x272dd3(0x20a)]=!![],_0x3eefd9=addFolderCoverPath(_0x410307,_0x372001,_0x3eefd9),movieInfoUtil[_0x272dd3(0x2dd)](_0x372001[_0x272dd3(0x2a9)][_0x272dd3(0x315)],_0x3eefd9['id'],_0x15e00d),_0xf256a5();})['catch'](()=>{_0x3eefd9=addFolderCoverPath(_0x410307,_0x372001,_0x3eefd9),_0xf256a5();});function _0xf256a5(){const _0x134f34=_0x416d;let _0x329273=dbMovieFavorite[_0x134f34(0x1cc)](_0x372001[_0x134f34(0x2a9)]['dbFileIndex'],_0x372001[_0x134f34(0x2ee)]['id'],_0x3eefd9['id']);_0x329273?_0x3eefd9[_0x134f34(0x2f9)]=0x1:_0x3eefd9['favorite']=0x0;let _0x3e260d=null;if(_0x3eefd9[_0x134f34(0x2b1)]==0x1){let _0x19ed4e=_0x372001['app'][_0x134f34(0x315)][_0x134f34(0x31e)](_0x134f34(0x223)+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+_0x134f34(0x317))[_0x134f34(0x318)](_0x3eefd9[_0x134f34(0x245)]),_0x3a6b40='(';for(let _0x18982d in _0x19ed4e){_0x3a6b40+=_0x19ed4e[_0x18982d]['id'],_0x18982d!=_0x19ed4e[_0x134f34(0x290)]-0x1&&(_0x3a6b40+=',');}_0x3a6b40+=')';let _0x4bfa2a=_0x372001[_0x134f34(0x2a9)]['dbFileIndex'][_0x134f34(0x31e)](_0x134f34(0x277)+_0x3a6b40+_0x134f34(0x1e7))[_0x134f34(0x2bb)]();_0x4bfa2a&&(_0x3e260d=dbFileIndexTable[_0x134f34(0x2e5)](_0x372001[_0x134f34(0x2a9)]['dbFileIndex'],_0x4bfa2a[_0x134f34(0x2f7)],dbFileIndexTable[_0x134f34(0x2b3)]));}let _0x3cb57e={'code':0x0,'movieIndex':_0x3eefd9,'lastTvEpisodeIndex':_0x3e260d},_0x240c09=_0x134f34(0x28d)+movieFieldStr+'\x20FROM\x20'+dbFileIndexTable[_0x134f34(0x2b3)]+_0x134f34(0x2c9),_0x285f69=_0x372001[_0x134f34(0x2a9)][_0x134f34(0x315)][_0x134f34(0x31e)](_0x240c09)[_0x134f34(0x318)](_0x3eefd9[_0x134f34(0x245)]+(path['sep']+_0x134f34(0x2df)),_0x3eefd9[_0x134f34(0x245)]+(path[_0x134f34(0x260)]+'extra'),_0x3eefd9[_0x134f34(0x245)]+(path['sep']+_0x134f34(0x276)),_0x3eefd9[_0x134f34(0x245)]+(path[_0x134f34(0x260)]+_0x134f34(0x2ec)),_0x3eefd9[_0x134f34(0x245)]+(path[_0x134f34(0x260)]+_0x134f34(0x2da)),_0x3eefd9['path']+(path[_0x134f34(0x260)]+'SPECIALS'),_0x3eefd9['path']+(path[_0x134f34(0x260)]+'Sample'),_0x3eefd9[_0x134f34(0x245)]+(path['sep']+_0x134f34(0x289)),_0x3eefd9[_0x134f34(0x245)]+(path['sep']+_0x134f34(0x252)));for(let _0x48cb8f of _0x285f69){_0x48cb8f['folderName']=path[_0x134f34(0x308)](_0x48cb8f[_0x134f34(0x245)]);}_0x285f69['length']>0x0&&(_0x3cb57e[_0x134f34(0x2a2)]=_0x285f69);let _0x17a4f1=path[_0x134f34(0x308)](_0x3eefd9[_0x134f34(0x245)])[_0x134f34(0x2ac)]();(_0x17a4f1=='extra'||_0x17a4f1==_0x134f34(0x2da)||_0x17a4f1==_0x134f34(0x252))&&(_0x3eefd9['is_tvplay']=0x0);let _0x3103c0=[];try{let _0x4d94cf=_0x372001['app'][_0x134f34(0x315)][_0x134f34(0x31e)](_0x134f34(0x22d)+_0x3eefd9['path']+_0x134f34(0x220))[_0x134f34(0x318)]();for(let _0x44331d in _0x4d94cf){let _0x2a5342=path[_0x134f34(0x1e6)](_0x4d94cf[_0x44331d]['path'],_0x4d94cf[_0x44331d][_0x134f34(0x240)]);(_0x372001[_0x134f34(0x2ee)]['is_admin']==0x1||dbUserTable['doUserCanGet'](_0x372001,_0x410307,_0x134f34(0x2ab),'power_get',_0x2a5342,!![])==!![])&&_0x3103c0[_0x134f34(0x1f2)](_0x2a5342);}_0x3cb57e['sameFolderImgList']=_0x3103c0;}catch(_0xdd9b33){}let _0x1681c5=path['join'](_0x3eefd9[_0x134f34(0x245)],_0x3eefd9['filename']);fs['stat'](_0x1681c5,(_0x300e55,_0x5a811f)=>{const _0x493fcc=_0x134f34;_0x3cb57e[_0x493fcc(0x21c)]=_0x300e55?0x0:0x1,_0x3cb57e[_0x493fcc(0x321)]=_0x1681c5,_0x410307[_0x493fcc(0x204)](_0x3cb57e),_0x3eefd9[_0x493fcc(0x2b1)]==0x1&&_0x3eefd9[_0x493fcc(0x2f0)]&&_0x3eefd9['isTvSeries']!=0x1&&(dbScanTaskTable[_0x493fcc(0x28f)](_0x372001[_0x493fcc(0x2a9)][_0x493fcc(0x1cd)],_0x493fcc(0x2d2),_0x3eefd9['tvFolderPath']),process[_0x493fcc(0x2fc)]({'type':_0x493fcc(0x2d8),'source_type':_0x493fcc(0x2d2),'restartWatcher':![]}));});}}}),router['post'](_0xfde149(0x314),(_0x35acba,_0x33cbb6,_0x5ebc8d)=>{const _0x238403=_0xfde149;let _0x58bd19=_0x35acba[_0x238403(0x244)]['id'],_0x3f64de=_0x35acba[_0x238403(0x244)][_0x238403(0x22a)]||0x0,_0x3be164=_0x35acba[_0x238403(0x244)][_0x238403(0x1d8)]||0xa,_0x197d89=_0x35acba[_0x238403(0x244)][_0x238403(0x1cf)],_0x3ad4c7=_0x35acba[_0x238403(0x244)][_0x238403(0x2c0)],_0x335765=_0x35acba[_0x238403(0x244)][_0x238403(0x1cb)],_0x5a30f8=_0x35acba[_0x238403(0x244)][_0x238403(0x1fe)],_0x173e4e=dbFileIndexTable[_0x238403(0x2e5)](_0x35acba['app'][_0x238403(0x315)],_0x58bd19,dbFileIndexTable[_0x238403(0x2b3)]);if(!_0x173e4e)return _0x35acba['app'][_0x238403(0x298)](_0x33cbb6,_0x33cbb6['__'](_0x238403(0x274)));let _0x10c3fe=movieFieldStr,_0xf90aa6=[],_0x467528=0x0;if(dbUserTable[_0x238403(0x26a)](_0x35acba,_0x33cbb6,_0x238403(0x2d2),_0x238403(0x281),_0x173e4e['path'])==!![]){if(_0x335765==0x1)return _0x39a9e2();let _0x460509=_0x35acba[_0x238403(0x2a9)]['dbFileIndex'][_0x238403(0x31e)]('SELECT\x20id,filename\x20FROM\x20'+dbFileIndexTable[_0x238403(0x2b3)]+_0x238403(0x2e8))[_0x238403(0x318)](_0x173e4e['path']);for(let _0x3f51c9 in _0x460509){let _0x1312d0=_0x460509[_0x3f51c9];if(_0x1312d0[_0x238403(0x240)]){let _0x1fd3a3=movieUtil[_0x238403(0x27b)](_0x1312d0[_0x238403(0x240)]);_0x35acba[_0x238403(0x2a9)][_0x238403(0x315)][_0x238403(0x31e)]('UPDATE\x20'+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+_0x238403(0x1ee))['run'](_0x1fd3a3,_0x1312d0['id']);}}let _0x5d635b=dbUserTable[_0x238403(0x28b)](_0x35acba,_0x238403(0x2d2),_0x238403(0x281),!![]),_0x4491dd=[..._0x5d635b[_0x238403(0x1d1)]],_0x4824c0=_0x238403(0x257);_0x4824c0+=_0x5d635b[_0x238403(0x1d6)],_0x4824c0+=_0x238403(0x206),_0x4491dd[_0x238403(0x1f2)](_0x173e4e[_0x238403(0x245)]);_0x197d89&&(_0x4824c0+=_0x238403(0x2f6),_0x4491dd[_0x238403(0x1f2)]('%'+_0x197d89+'%','%'+_0x197d89+'%'));if(_0x3ad4c7){let _0x4b683f=movieUtil[_0x238403(0x27b)](_0x3ad4c7);_0x4b683f?(_0x4824c0+=_0x238403(0x30f),_0x4491dd['push'](_0x4b683f)):(_0x4824c0+=_0x238403(0x265),_0x4491dd['push'](_0x3ad4c7));}let _0x27159e=_0x4824c0+'';_0x4824c0+='\x20order\x20by\x20filename_number,filename';let _0x4d5667=_0x238403(0x28d)+_0x10c3fe+_0x238403(0x21f)+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+'\x20as\x20f\x20WHERE\x20'+_0x4824c0+_0x238403(0x30b)+_0x3be164+_0x238403(0x213)+_0x3f64de*_0x3be164;_0xf90aa6=_0x35acba[_0x238403(0x2a9)][_0x238403(0x315)]['prepare'](_0x4d5667)['all'](_0x4491dd);let _0x22c222='SELECT\x20count(*)\x20as\x20count\x20FROM\x20'+dbFileIndexTable[_0x238403(0x2b3)]+_0x238403(0x1ec)+_0x27159e+'\x20',_0x48d105=_0x35acba[_0x238403(0x2a9)][_0x238403(0x315)][_0x238403(0x31e)](_0x22c222)[_0x238403(0x2bb)](_0x4491dd);_0x467528=_0x48d105[_0x238403(0x235)];if(_0xf90aa6[_0x238403(0x290)]>0x0){let _0x2115b9=0x0;for(let _0x707b86 in _0xf90aa6){let _0x23a3ac=_0xf90aa6[_0x707b86];nfoUtil[_0x238403(0x322)](_0x23a3ac,!![],!![])['then'](_0x38f494=>{_0x2115b9+=0x1,_0xf90aa6[_0x707b86]=_0x38f494,_0xf90aa6[_0x707b86]=addFolderCoverPath(_0x33cbb6,_0x35acba,_0xf90aa6[_0x707b86],!![]),_0x2115b9>=_0xf90aa6['length']&&_0x39a9e2();})['catch'](()=>{_0x2115b9+=0x1,_0xf90aa6[_0x707b86]=addFolderCoverPath(_0x33cbb6,_0x35acba,_0xf90aa6[_0x707b86],!![]),_0x2115b9>=_0xf90aa6['length']&&_0x39a9e2();});}}else _0x39a9e2();function _0x39a9e2(){const _0xae38a1=_0x238403;let _0x471d81={'code':0x0,'tvplayList':_0xf90aa6,'count':_0x467528,'pageSize':_0x3be164};if(!_0x5a30f8){let _0x1ea574=path[_0xae38a1(0x308)](_0x173e4e['path']),_0x11ab77=movieSeasonUtil[_0xae38a1(0x29c)](_0x1ea574);if(_0x11ab77>-0x1){let _0x467dfe=_0xae38a1(0x28d)+_0x10c3fe+_0xae38a1(0x21f)+dbFileIndexTable[_0xae38a1(0x2b3)]+_0xae38a1(0x2a0),_0x275393=_0x35acba[_0xae38a1(0x2a9)]['dbFileIndex'][_0xae38a1(0x31e)](_0x467dfe)[_0xae38a1(0x318)](path[_0xae38a1(0x2c2)](_0x173e4e[_0xae38a1(0x245)])+path[_0xae38a1(0x260)]+'%'),_0x43cec4=[];for(let _0xff85d7 of _0x275393){let _0x2495fa=path[_0xae38a1(0x308)](_0xff85d7['path']),_0x84cdf9=movieSeasonUtil[_0xae38a1(0x29c)](_0x2495fa);_0x84cdf9>-0x1&&(_0xff85d7['seasonNumber']=_0x84cdf9,_0x43cec4['push'](_0xff85d7));}for(let _0x3850f2 of _0x43cec4){_0x3850f2=addFolderCoverPath(_0x33cbb6,_0x35acba,_0x3850f2);let _0x5ecec8=dbFileIndexTable[_0xae38a1(0x2fd)](_0x35acba[_0xae38a1(0x2a9)]['dbFileIndex'],_0x3850f2);_0x3850f2[_0xae38a1(0x2d4)]=_0x5ecec8[_0xae38a1(0x235)];}_0x43cec4[_0xae38a1(0x290)]>0x0&&(_0x43cec4['sort'](function(_0x2b432f,_0x35b1ac){const _0x209cec=_0xae38a1;return _0x2b432f[_0x209cec(0x2e2)]-_0x35b1ac[_0x209cec(0x2e2)];}),_0x471d81[_0xae38a1(0x25f)]=_0x43cec4);}}return _0x33cbb6[_0xae38a1(0x204)](_0x471d81);}}}),router[_0xfde149(0x266)]('/removeIndexFromCollection',(_0x471e45,_0x585c06,_0x1e06ce)=>{const _0x1ad7b2=_0xfde149;let _0x6ea42d=_0x471e45['body'][_0x1ad7b2(0x267)],_0x3fce23=[];for(let _0x5bbefb of _0x6ea42d){let _0x1189ef=dbFileIndexTable[_0x1ad7b2(0x2e5)](_0x471e45[_0x1ad7b2(0x2a9)][_0x1ad7b2(0x315)],_0x5bbefb,dbFileIndexTable[_0x1ad7b2(0x2b3)]);if(!_0x1189ef)continue;if(dbUserTable[_0x1ad7b2(0x26a)](_0x471e45,_0x585c06,'',_0x1ad7b2(0x2bd),_0x1189ef[_0x1ad7b2(0x245)])!==!![])continue;let _0x5d48e2=path[_0x1ad7b2(0x308)](_0x1189ef['path']),_0x2354de=movieSeasonUtil[_0x1ad7b2(0x29c)](_0x5d48e2);if(_0x2354de>-0x1){let _0x3ef773=path['join'](path[_0x1ad7b2(0x2c2)](_0x1189ef['path'])),_0x211ab5=_0x471e45['app'][_0x1ad7b2(0x315)][_0x1ad7b2(0x31e)](_0x1ad7b2(0x1d7))[_0x1ad7b2(0x318)](_0x3ef773+path[_0x1ad7b2(0x260)]+'%',_0x3ef773);for(let _0x5cc3b6 of _0x211ab5){_0x3fce23[_0x1ad7b2(0x1f2)](_0x5cc3b6['id']);}}}_0x3fce23[_0x1ad7b2(0x290)]>0x0&&(_0x6ea42d=[..._0x6ea42d,..._0x3fce23]);if(_0x6ea42d[_0x1ad7b2(0x290)]<0x1)return _0x585c06['json']({'code':0x0});let _0x1e5dfd='(';for(let _0x2955f8 in _0x6ea42d){_0x1e5dfd+=_0x6ea42d[_0x2955f8],_0x2955f8!=_0x6ea42d['length']-0x1&&(_0x1e5dfd+=',');}return _0x1e5dfd+=')',_0x471e45[_0x1ad7b2(0x2a9)][_0x1ad7b2(0x315)][_0x1ad7b2(0x31e)]('UPDATE\x20file_index_movie\x20SET\x20collection_id=0\x20WHERE\x20id\x20in\x20'+_0x1e5dfd)[_0x1ad7b2(0x1f4)](),_0x585c06[_0x1ad7b2(0x204)]({'code':0x0});}),router[_0xfde149(0x266)](_0xfde149(0x1fd),(_0x588b4e,_0x48cca3,_0x4e33ee)=>{const _0x10a92e=_0xfde149;let _0x4ee6db=_0x588b4e[_0x10a92e(0x244)][_0x10a92e(0x305)],_0x52e960=_0x588b4e[_0x10a92e(0x244)][_0x10a92e(0x30d)],_0x34d217=_0x588b4e[_0x10a92e(0x244)][_0x10a92e(0x2f4)];function _0x19ec31(_0x490e5a){const _0x140e17=_0x10a92e;let _0x4d111d=[];for(let _0x35c7a1 in _0x490e5a){_0x4d111d['push'](_0x490e5a[_0x35c7a1]['id']);}inSql='(';for(let _0x586464 in _0x4d111d){inSql+=_0x4d111d[_0x586464],_0x586464!=_0x4d111d[_0x140e17(0x290)]-0x1&&(inSql+=',');}return inSql+=')',inSql;}if(_0x4ee6db&&_0x52e960){let _0x2caf0b=dbFileIndexTable['getById'](_0x588b4e[_0x10a92e(0x2a9)]['dbFileIndex'],_0x52e960,dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']),_0x2c0e58='('+_0x52e960+')';if(!_0x2caf0b)return _0x588b4e['app'][_0x10a92e(0x298)](_0x48cca3,_0x48cca3['__'](_0x10a92e(0x2cc)),_0x10a92e(0x297));if(dbUserTable[_0x10a92e(0x26a)](_0x588b4e,_0x48cca3,'',_0x10a92e(0x2bd),_0x2caf0b[_0x10a92e(0x245)])!==!![])return;let _0x48118c=path['basename'](_0x2caf0b['path']),_0x29a433=movieSeasonUtil[_0x10a92e(0x29c)](_0x48118c);_0x29a433>-0x1&&(_0x2caf0b['is_file']=0x0,_0x2caf0b['path']=path['dirname'](_0x2caf0b[_0x10a92e(0x245)]),_0x2caf0b[_0x10a92e(0x240)]='');if(_0x2caf0b['is_file']!=0x1){let _0x569b09=path['join'](_0x2caf0b[_0x10a92e(0x245)],_0x2caf0b['filename']);console['log'](_0x10a92e(0x219),_0x569b09);let _0x177f53=_0x588b4e[_0x10a92e(0x2a9)][_0x10a92e(0x315)]['prepare'](_0x10a92e(0x1d7))['all'](_0x569b09+path['sep']+'%',_0x569b09);if(_0x177f53['length']<0x1)return _0x48cca3[_0x10a92e(0x204)]({'code':0x0});_0x2c0e58=_0x19ec31(_0x177f53);}return _0x588b4e['app'][_0x10a92e(0x315)][_0x10a92e(0x31e)](_0x10a92e(0x1ce)+_0x2c0e58+_0x10a92e(0x215))[_0x10a92e(0x1f4)](_0x4ee6db),_0x48cca3['json']({'code':0x0});}else{if(_0x4ee6db&&_0x34d217){let _0x1aae9b=_0x588b4e['app'][_0x10a92e(0x315)]['prepare'](_0x10a92e(0x1d7))[_0x10a92e(0x318)](_0x34d217+path[_0x10a92e(0x260)]+'%',_0x34d217),_0x447fc4=_0x19ec31(_0x1aae9b);return _0x588b4e[_0x10a92e(0x2a9)][_0x10a92e(0x315)][_0x10a92e(0x31e)](_0x10a92e(0x1ce)+_0x447fc4+_0x10a92e(0x215))[_0x10a92e(0x1f4)](_0x4ee6db),_0x48cca3[_0x10a92e(0x204)]({'code':0x0});}else return _0x588b4e[_0x10a92e(0x2a9)][_0x10a92e(0x298)](_0x48cca3,_0x48cca3['__']('operationFail'),_0x10a92e(0x297));}});function getCollectionList(_0x31f2bf,_0x301531,_0x51fd91){const _0x4a328a=_0xfde149;let _0x5ee94f=[],_0x2c0056=_0x31f2bf[_0x4a328a(0x244)]['count']||0x32,_0x707ff0=_0x31f2bf[_0x4a328a(0x244)][_0x4a328a(0x27e)]||0x0,_0x536509=_0x31f2bf[_0x4a328a(0x244)]['orderField']||'id',_0x2fa7c6=_0x31f2bf['body']['orderType']||_0x4a328a(0x2f2),_0x63befe=_0x31f2bf[_0x4a328a(0x244)][_0x4a328a(0x222)],_0x55a3ef=_0x4a328a(0x1fa),_0x315428=_0x4a328a(0x2fb)+_0x55a3ef+'\x20FROM\x20\x20movie_collection\x20WHERE\x20type=?',_0x141d73=[_0x51fd91];_0x63befe&&(_0x315428+='\x20AND\x20title\x20like\x20?\x20',_0x141d73[_0x4a328a(0x1f2)]('%'+_0x63befe+'%'));_0x31f2bf[_0x4a328a(0x2ee)][_0x4a328a(0x225)]!=0x1&&(_0x315428+=_0x4a328a(0x2b7),_0x141d73[_0x4a328a(0x1f2)](0x1));_0x315428+=_0x4a328a(0x200)+_0x536509+'\x20'+_0x2fa7c6+'\x20LIMIT\x20?\x20OFFSET\x20?',_0x141d73[_0x4a328a(0x1f2)](_0x2c0056),_0x141d73['push'](_0x707ff0),_0x5ee94f=_0x31f2bf[_0x4a328a(0x2a9)]['dbFileIndex']['prepare'](_0x315428)[_0x4a328a(0x318)](_0x141d73);for(let _0x32055c of _0x5ee94f){if(_0x32055c[_0x4a328a(0x271)]==0x1)continue;let _0x30a842=getMoviesByParams(_0x301531,_0x31f2bf,null,'id',0x1,0x0,_0x4a328a(0x2f2),null,null,null,null,null,null,_0x32055c['id']);_0x30a842['length']>0x0&&(_0x32055c['coverMovie']=_0x30a842[0x0]);}return _0x5ee94f;}router[_0xfde149(0x266)](_0xfde149(0x21d),(_0x191e44,_0x1e7691,_0x16c043)=>{const _0x171559=_0xfde149;let _0x40b382=_0x191e44['body'][_0x171559(0x2d6)]||_0x171559(0x2e4),_0x181948=getCollectionList(_0x191e44,_0x1e7691,_0x40b382);return _0x1e7691[_0x171559(0x204)]({'code':0x0,'data':_0x181948});}),router[_0xfde149(0x266)](_0xfde149(0x1f0),(_0x202b68,_0x170aec,_0x182540)=>{const _0x35c177=_0xfde149;let _0x2aed54=_0x202b68[_0x35c177(0x244)][_0x35c177(0x2b0)],_0x19b70d=_0x202b68[_0x35c177(0x244)][_0x35c177(0x305)];if(!_0x2aed54)return _0x202b68[_0x35c177(0x2a9)]['returnErrMsg'](_0x170aec,_0x170aec['__']('pwdCanNotBeNull'),_0x35c177(0x297));_0x2aed54=sha256(_0x2aed54);let _0x3d4da7=_0x202b68[_0x35c177(0x2a9)]['dbFileIndex'][_0x35c177(0x31e)](_0x35c177(0x2de))['get'](_0x19b70d,_0x2aed54);if(!_0x3d4da7)return _0x202b68[_0x35c177(0x2a9)]['returnErrMsg'](_0x170aec,_0x170aec['__'](_0x35c177(0x1d4)),_0x35c177(0x297));return _0x170aec[_0x35c177(0x204)]({'code':0x0,'data':_0x3d4da7});}),router[_0xfde149(0x266)](_0xfde149(0x2a3),(_0xeceb70,_0x4c87e8,_0x1acbfb)=>{const _0x165096=_0xfde149;let _0x21f1bc=_0xeceb70[_0x165096(0x244)]['title'],_0xee33fc=_0xeceb70[_0x165096(0x244)]['enablePwd'],_0x38b4fb=_0xeceb70[_0x165096(0x244)]['pwd'],_0x505a38=_0xeceb70[_0x165096(0x244)][_0x165096(0x305)],_0x140875=_0xeceb70[_0x165096(0x244)][_0x165096(0x2d6)]?_0xeceb70[_0x165096(0x244)]['type']:_0x165096(0x2e4),_0x18f8cc=_0xeceb70[_0x165096(0x244)][_0x165096(0x29b)]?_0xeceb70[_0x165096(0x244)]['data']:'',_0xbaa26c=_0xeceb70[_0x165096(0x244)][_0x165096(0x1db)]?_0xeceb70[_0x165096(0x244)][_0x165096(0x1db)]:'',_0x82b070=_0xeceb70[_0x165096(0x244)][_0x165096(0x2d9)];_0x82b070==null&&(_0x82b070=0x1);if(_0x140875=='smart'){if(!_0x18f8cc||!_0x18f8cc[_0x165096(0x1ea)]||sqliteUtil[_0x165096(0x26b)](_0x18f8cc[_0x165096(0x1ea)])==!![])return _0xeceb70[_0x165096(0x2a9)][_0x165096(0x298)](_0x4c87e8,_0x165096(0x20d));}let _0x34ce8a=_0xeceb70[_0x165096(0x244)][_0x165096(0x32c)]?_0xeceb70[_0x165096(0x244)][_0x165096(0x32c)]:'';if(_0xeceb70[_0x165096(0x2ee)]['is_admin']!=0x1)return _0xeceb70[_0x165096(0x2a9)]['returnErrMsg'](_0x4c87e8,_0x4c87e8['__'](_0x165096(0x1da)));if(_0xee33fc=='1'){if(!_0x38b4fb)return _0xeceb70[_0x165096(0x2a9)][_0x165096(0x298)](_0x4c87e8,_0x4c87e8['__'](_0x165096(0x1ef)),_0x165096(0x297));_0x38b4fb=sha256(_0x38b4fb);}return _0x505a38?_0xeceb70['app'][_0x165096(0x315)]['prepare'](_0x165096(0x2a6))[_0x165096(0x1f4)](_0x21f1bc,JSON[_0x165096(0x30c)](_0x18f8cc),_0xee33fc+'',_0x38b4fb,_0xbaa26c,_0x34ce8a,_0x82b070,_0x505a38):_0xeceb70['app'][_0x165096(0x315)][_0x165096(0x31e)](_0x165096(0x1e9))[_0x165096(0x1f4)](_0x21f1bc,_0xee33fc+'',_0x38b4fb,_0xeceb70['currentUser']['id']+'',_0x140875,JSON['stringify'](_0x18f8cc),_0xbaa26c,_0x34ce8a,_0x82b070),_0x4c87e8[_0x165096(0x204)]({'code':0x0});}),router[_0xfde149(0x266)](_0xfde149(0x263),(_0x41f195,_0x9180f2,_0x530eaf)=>{const _0x4e3ea4=_0xfde149;let _0x279ff9=_0x41f195[_0x4e3ea4(0x244)]['collectionId'];if(_0x41f195[_0x4e3ea4(0x2ee)][_0x4e3ea4(0x225)]!=0x1)return _0x41f195['app'][_0x4e3ea4(0x298)](_0x9180f2,_0x9180f2['__'](_0x4e3ea4(0x1da)));return _0x41f195['app'][_0x4e3ea4(0x315)][_0x4e3ea4(0x31e)](_0x4e3ea4(0x23d))[_0x4e3ea4(0x1f4)](_0x279ff9),_0x41f195[_0x4e3ea4(0x2a9)][_0x4e3ea4(0x315)]['prepare'](_0x4e3ea4(0x273))[_0x4e3ea4(0x1f4)](_0x279ff9),_0x9180f2['json']({'code':0x0});}),router[_0xfde149(0x266)](_0xfde149(0x1ed),(_0x47e998,_0x3155d1,_0x2047f9)=>{const _0x56807f=_0xfde149;return _0x47e998[_0x56807f(0x2a9)][_0x56807f(0x315)][_0x56807f(0x31e)]('DELETE\x20FROM\x20movie_history\x20where\x20user_id='+_0x47e998[_0x56807f(0x2ee)]['id'])['run'](),_0x3155d1['json']({'code':0x0});}),router[_0xfde149(0x266)](_0xfde149(0x23e),(_0x5d817d,_0x185cef,_0x310a23)=>{const _0x2933f4=_0xfde149;let _0x2bc232=_0x5d817d[_0x2933f4(0x244)][_0x2933f4(0x30d)],_0x2b9bfe=_0x5d817d[_0x2933f4(0x244)]['time'],_0x30fce7=dbFileIndexTable[_0x2933f4(0x2e5)](_0x5d817d[_0x2933f4(0x2a9)][_0x2933f4(0x315)],_0x2bc232,dbFileIndexTable[_0x2933f4(0x2b3)]);if(!_0x30fce7)return _0x185cef[_0x2933f4(0x204)]({'code':0x0});if(_0x30fce7['collection_id']){let _0x1fad6b=_0x5d817d[_0x2933f4(0x2a9)]['dbFileIndex'][_0x2933f4(0x31e)](_0x2933f4(0x2af))[_0x2933f4(0x2bb)](_0x30fce7[_0x2933f4(0x1eb)]);if(_0x1fad6b&&_0x1fad6b[_0x2933f4(0x271)]==0x1)return _0x185cef[_0x2933f4(0x204)]({'code':0x0});}let _0x5e84a9=_0x5d817d['app'][_0x2933f4(0x315)][_0x2933f4(0x31e)](_0x2933f4(0x239))[_0x2933f4(0x2bb)](_0x2bc232+'',_0x5d817d['currentUser']['id']+'');return _0x5e84a9?_0x5d817d[_0x2933f4(0x2a9)][_0x2933f4(0x315)][_0x2933f4(0x31e)](_0x2933f4(0x238))['run'](_0x2b9bfe,new Date()['getTime'](),_0x2bc232+'',_0x5d817d['currentUser']['id']+''):_0x5d817d[_0x2933f4(0x2a9)][_0x2933f4(0x315)][_0x2933f4(0x31e)](_0x2933f4(0x24c))[_0x2933f4(0x1f4)](_0x2bc232+'',_0x5d817d[_0x2933f4(0x2ee)]['id']+'',_0x2b9bfe,new Date()[_0x2933f4(0x28a)]()),_0x185cef[_0x2933f4(0x204)]({'code':0x0});}),router[_0xfde149(0x266)](_0xfde149(0x269),(_0xbf6070,_0x5bfd08,_0x51a7bc)=>{const _0x2ddba8=_0xfde149;let _0x342260=_0xbf6070[_0x2ddba8(0x244)][_0x2ddba8(0x30d)],_0x5356a0=_0x2ddba8(0x248);if(_0x342260){let _0x4525ca=_0xbf6070[_0x2ddba8(0x2a9)]['dbFileIndex'][_0x2ddba8(0x31e)](_0x2ddba8(0x2c1))[_0x2ddba8(0x2bb)](_0xbf6070['currentUser']['id']+'',_0x342260+'');return _0x5bfd08['json']({'code':0x0,'data':_0x4525ca});}else{let _0x6a044c=_0x2ddba8(0x28d)+_0x5356a0+_0x2ddba8(0x253)+_0xbf6070['currentUser']['id']+_0x2ddba8(0x26f),_0xa9f02b=_0xbf6070['app']['dbFileIndex']['prepare'](_0x6a044c)[_0x2ddba8(0x318)]();return _0x5bfd08[_0x2ddba8(0x204)]({'code':0x0,'data':_0xa9f02b});}}),router['post'](_0xfde149(0x1d3),(_0x1a74fe,_0x1ee1f6,_0x1e7dc0)=>{const _0x1d5f99=_0xfde149;let _0xaf10a4=_0x1a74fe['body']['id'],_0x406f68=dbFileIndexTable['getById'](_0x1a74fe[_0x1d5f99(0x2a9)][_0x1d5f99(0x315)],_0xaf10a4,dbFileIndexTable[_0x1d5f99(0x2b3)]);if(dbUserTable[_0x1d5f99(0x26a)](_0x1a74fe,_0x1ee1f6,_0x1d5f99(0x2d2),_0x1d5f99(0x281),_0x406f68[_0x1d5f99(0x245)])==!![]){let _0x35749b={'code':0x0,'data':_0x406f68};return _0x1ee1f6[_0x1d5f99(0x204)](_0x35749b);}}),router[_0xfde149(0x266)](_0xfde149(0x1e0),(_0x149c9c,_0x4cfa42,_0x1de6d6)=>{const _0x1120dd=_0xfde149;let _0x4a53d6=_0x149c9c[_0x1120dd(0x244)][_0x1120dd(0x243)],_0x4fa182=_0x149c9c[_0x1120dd(0x244)][_0x1120dd(0x227)];if(dbUserTable['isAdmin'](_0x149c9c,_0x4cfa42)===!![]){let _0x43b197=dbSourceFolderTable[_0x1120dd(0x2e5)](_0x149c9c['app'][_0x1120dd(0x1cd)],_0x4a53d6);if(!_0x43b197)return _0x4cfa42[_0x1120dd(0x268)](0x194)[_0x1120dd(0x2d7)]();return _0x4fa182==0x1?(_0x149c9c['app'][_0x1120dd(0x315)][_0x1120dd(0x31e)](_0x1120dd(0x302))[_0x1120dd(0x1f4)](_0x43b197[_0x1120dd(0x245)]+path[_0x1120dd(0x260)]+'%',_0x43b197[_0x1120dd(0x245)]),dbSourceFolderTable[_0x1120dd(0x288)](_0x149c9c['app'][_0x1120dd(0x1cd)],_0x1120dd(0x2b8),_0x4fa182,_0x4a53d6),process[_0x1120dd(0x2fc)]({'type':_0x1120dd(0x301)}),_0x4cfa42[_0x1120dd(0x204)]({'code':0x0})):(dbSourceFolderTable[_0x1120dd(0x288)](_0x149c9c['app'][_0x1120dd(0x1cd)],_0x1120dd(0x2b8),_0x4fa182,_0x4a53d6),_0x149c9c[_0x1120dd(0x2a9)]['dbFileIndex']['prepare'](_0x1120dd(0x22b))['run'](_0x43b197['path']+path['sep']+'%',_0x43b197['path']),process['send']({'type':'SWITCH_MOVIE_INFO'}),_0x4cfa42['json']({'code':0x0}));}}),router[_0xfde149(0x266)](_0xfde149(0x320),(_0x36058b,_0x56fbb4,_0x4c88ba)=>{const _0x86938d=_0xfde149;let _0x43d5e2=_0x36058b[_0x86938d(0x244)][_0x86938d(0x2c7)],_0x1e2ede=_0x36058b[_0x86938d(0x244)][_0x86938d(0x30d)],_0x5e734c=_0x36058b[_0x86938d(0x244)][_0x86938d(0x243)];function _0x49f73c(_0x2dfb05){const _0x5e7f1d=_0x86938d;let _0x2064a4=_0x36058b[_0x5e7f1d(0x2a9)][_0x5e7f1d(0x315)][_0x5e7f1d(0x31e)](_0x5e7f1d(0x209)+dbFileIndexTable[_0x5e7f1d(0x2b3)]+'\x20WHERE\x20path=?\x20and\x20is_file=1\x20and\x20type=2\x20order\x20by\x20filename')[_0x5e7f1d(0x2bb)](_0x2dfb05);if(!_0x2064a4)return;_0x36058b[_0x5e7f1d(0x2a9)][_0x5e7f1d(0x315)][_0x5e7f1d(0x31e)](_0x5e7f1d(0x2a8)+dbFileIndexTable[_0x5e7f1d(0x2b3)]+_0x5e7f1d(0x1f8))['run'](_0x2dfb05),_0x36058b[_0x5e7f1d(0x2a9)][_0x5e7f1d(0x315)][_0x5e7f1d(0x31e)](_0x5e7f1d(0x2a8)+dbFileIndexTable[_0x5e7f1d(0x2b3)]+_0x5e7f1d(0x23b))[_0x5e7f1d(0x1f4)](_0x2064a4['id']),movieUtil[_0x5e7f1d(0x2c6)](_0x36058b[_0x5e7f1d(0x2a9)][_0x5e7f1d(0x315)],_0x2064a4);}if(_0x1e2ede){let _0x2e724b=dbFileIndexTable[_0x86938d(0x2e5)](_0x36058b[_0x86938d(0x2a9)][_0x86938d(0x315)],_0x1e2ede,dbFileIndexTable[_0x86938d(0x2b3)]);if(dbUserTable['doUserCanGet'](_0x36058b,_0x56fbb4,'movie',_0x86938d(0x2bd),_0x2e724b[_0x86938d(0x245)])==!![])return _0x43d5e2==0x1?_0x49f73c(_0x2e724b['path']):_0x36058b[_0x86938d(0x2a9)][_0x86938d(0x315)][_0x86938d(0x31e)](_0x86938d(0x2a8)+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+_0x86938d(0x247)+_0x2e724b[_0x86938d(0x245)]+'\x27')[_0x86938d(0x1f4)](),_0x56fbb4[_0x86938d(0x204)]({'code':0x0});}else{if(_0x5e734c){let _0x19941a=dbSourceFolderTable[_0x86938d(0x2e5)](_0x36058b['app'][_0x86938d(0x1cd)],_0x5e734c);if(!_0x19941a||_0x19941a['type']!=_0x86938d(0x2d2))return _0x36058b[_0x86938d(0x2a9)]['returnErrMsg'](_0x56fbb4,_0x56fbb4['__'](_0x86938d(0x2cc)),_0x86938d(0x297));if(_0x43d5e2==0x1){dbSourceFolderTable[_0x86938d(0x288)](_0x36058b[_0x86938d(0x2a9)][_0x86938d(0x1cd)],_0x86938d(0x1f1),_0x86938d(0x1f9),_0x5e734c),_0x49f73c(_0x19941a[_0x86938d(0x245)]);let _0x34311a=_0x36058b[_0x86938d(0x2a9)][_0x86938d(0x315)][_0x86938d(0x31e)](_0x86938d(0x2f8)+dbFileIndexTable[_0x86938d(0x2b3)]+_0x86938d(0x224))['all'](_0x19941a[_0x86938d(0x245)],''+_0x19941a[_0x86938d(0x245)]+path['sep']+'%');for(let _0x130006 in _0x34311a){let _0x4debe3=path[_0x86938d(0x1e6)](_0x34311a[_0x130006][_0x86938d(0x245)],_0x34311a[_0x130006]['filename']);_0x49f73c(_0x4debe3);}}else{dbSourceFolderTable['updateByWhere'](_0x36058b[_0x86938d(0x2a9)][_0x86938d(0x1cd)],_0x86938d(0x1f1),'movie',_0x5e734c);let _0x349757=_0x36058b[_0x86938d(0x2a9)][_0x86938d(0x315)][_0x86938d(0x31e)]('UPDATE\x20'+dbFileIndexTable[_0x86938d(0x2b3)]+_0x86938d(0x1c8))[_0x86938d(0x1f4)](_0x19941a['path'],''+_0x19941a[_0x86938d(0x245)]+path[_0x86938d(0x260)]+'%');}return _0x56fbb4['json']({'code':0x0});}else return _0x36058b['app'][_0x86938d(0x298)](_0x56fbb4,_0x56fbb4['__'](_0x86938d(0x2cc)),_0x86938d(0x297));}});function _0x2e15(_0x1a0a08,_0x1f1168){const _0x597ef4=_0x597e();return _0x2e15=function(_0x2e15da,_0x1b7a89){_0x2e15da=_0x2e15da-0x1c6;let _0x3e9dee=_0x597ef4[_0x2e15da];return _0x3e9dee;},_0x2e15(_0x1a0a08,_0x1f1168);}function setLogoAndFanart(_0x3b170c,_0x109664,_0x5c7dd8,_0x11c689){const _0x516d99=_0xfde149;if(_0x3b170c[_0x516d99(0x244)][_0x516d99(0x20a)]){let _0x5244fe=_0x516d99(0x2ca),_0x38e6fc=[_0x5c7dd8];_0x11c689?(_0x5244fe+=_0x516d99(0x1d9),_0x38e6fc['push'](_0x516d99(0x203)),_0x38e6fc[_0x516d99(0x1f2)](_0x11c689+'-clearlogo.%'),_0x38e6fc[_0x516d99(0x1f2)](_0x11c689+'.clearlogo.%')):(_0x5244fe+=_0x516d99(0x307),_0x38e6fc['push'](_0x516d99(0x203)));let _0x2219bc=_0x3b170c[_0x516d99(0x2a9)][_0x516d99(0x315)][_0x516d99(0x31e)](_0x5244fe)[_0x516d99(0x2bb)](_0x38e6fc);if(_0x2219bc){let _0x20bbe8=path[_0x516d99(0x1e6)](_0x2219bc[_0x516d99(0x245)],_0x2219bc[_0x516d99(0x240)]);_0x109664[_0x516d99(0x217)]=_0x20bbe8;}let _0x4b78fd=_0x516d99(0x2ca),_0x4b0d6d=[_0x5c7dd8];_0x11c689?(_0x4b78fd+=_0x516d99(0x24a),_0x4b0d6d['push'](_0x516d99(0x216)),_0x4b0d6d[_0x516d99(0x1f2)](_0x11c689+_0x516d99(0x304)),_0x4b0d6d[_0x516d99(0x1f2)](_0x11c689+'.fanart.%')):(_0x4b78fd+=_0x516d99(0x307),_0x4b0d6d[_0x516d99(0x1f2)](_0x516d99(0x216)));let _0x241c68=_0x3b170c[_0x516d99(0x2a9)]['dbFileIndex']['prepare'](_0x4b78fd)[_0x516d99(0x2bb)](_0x4b0d6d);if(_0x241c68){let _0x150533=path[_0x516d99(0x1e6)](_0x241c68[_0x516d99(0x245)],_0x241c68['filename']);_0x109664[_0x516d99(0x2c3)]=_0x150533;}}}function addTvFolderPathAndName(_0x29e010){const _0x216516=_0xfde149;_0x29e010[_0x216516(0x231)]=path[_0x216516(0x308)](_0x29e010[_0x216516(0x245)]),_0x29e010['tvFolderPath']=_0x29e010['path'];if(_0x29e010[_0x216516(0x2b1)]==0x1){let _0x5688f3=path[_0x216516(0x308)](_0x29e010[_0x216516(0x245)]),_0x531758=path['dirname'](_0x29e010[_0x216516(0x245)]),_0x25599e=movieSeasonUtil[_0x216516(0x29c)](_0x5688f3);_0x25599e>-0x1&&(_0x29e010[_0x216516(0x231)]=path[_0x216516(0x308)](_0x531758),_0x29e010[_0x216516(0x2f0)]=_0x531758);if(!_0x29e010[_0x216516(0x2ff)])_0x29e010[_0x216516(0x2ff)]=_0x29e010[_0x216516(0x231)];}}function addFolderCoverPath(_0x4cec00,_0x8d9f38,_0x22a421,_0x7be12a=![]){const _0x4ff6a0=_0xfde149;let _0x2c1c67;addTvFolderPathAndName(_0x22a421);let _0x23776f=_0x22a421['id']+'-coverCache-'+_0x7be12a;!_0x8d9f38[_0x4ff6a0(0x32b)]&&(_0x8d9f38['movieTvCache']=new Map());try{if(_0x22a421[_0x4ff6a0(0x2b1)]==0x1&&!_0x7be12a)try{let _0x3e64ce=path[_0x4ff6a0(0x308)](_0x22a421[_0x4ff6a0(0x245)]),_0x4d4590=path[_0x4ff6a0(0x2c2)](_0x22a421[_0x4ff6a0(0x245)]),_0x1cab99=movieSeasonUtil[_0x4ff6a0(0x29c)](_0x3e64ce);if(_0x1cab99>-0x1){_0x22a421['isTvSeries']=0x1,_0x22a421[_0x4ff6a0(0x2e2)]=_0x1cab99;if(_0x8d9f38[_0x4ff6a0(0x244)][_0x4ff6a0(0x208)]){let _0x38d72d=_0x4d4590+'-seasonCount-'+_0x7be12a;_0x8d9f38[_0x4ff6a0(0x32b)][_0x4ff6a0(0x2d3)](_0x38d72d)?_0x22a421['seasonCount']=_0x8d9f38[_0x4ff6a0(0x32b)]['get'](_0x38d72d):(_0x22a421[_0x4ff6a0(0x2ed)]=_0x8d9f38[_0x4ff6a0(0x2a9)]['dbFileIndex'][_0x4ff6a0(0x31e)](_0x4ff6a0(0x2cb))[_0x4ff6a0(0x2bb)](''+_0x4d4590+path[_0x4ff6a0(0x260)]+'%')[_0x4ff6a0(0x235)],_0x8d9f38[_0x4ff6a0(0x32b)][_0x4ff6a0(0x251)](_0x38d72d,_0x22a421[_0x4ff6a0(0x2ed)]));}}setLogoAndFanart(_0x8d9f38,_0x22a421,_0x22a421[_0x4ff6a0(0x2f0)]);if(_0x8d9f38['body']['useTvSeriesInfo']==0x1&&_0x1cab99>-0x1){let _0x353737=_0x22a421[_0x4ff6a0(0x2f0)]+_0x4ff6a0(0x31c);if(_0x8d9f38[_0x4ff6a0(0x32b)][_0x4ff6a0(0x2d3)](_0x353737))return _0x22a421['folder_cover_path']=_0x8d9f38[_0x4ff6a0(0x32b)]['get'](_0x353737),_0x22a421;let _0x20ced6=getTvSeriesPoster(_0x22a421);if(_0x20ced6)return _0x8d9f38[_0x4ff6a0(0x32b)][_0x4ff6a0(0x251)](_0x353737,_0x20ced6),_0x22a421['folder_cover_path']=_0x20ced6,_0x22a421;}if(!_0x2c1c67&&_0x8d9f38['movieTvCache'][_0x4ff6a0(0x2d3)](_0x23776f))return _0x22a421[_0x4ff6a0(0x325)]=_0x8d9f38['movieTvCache'][_0x4ff6a0(0x2bb)](_0x23776f),_0x22a421;if(!_0x2c1c67&&_0x1cab99>-0x1){parseInt(_0x1cab99)<0xa&&(_0x1cab99='0'+_0x1cab99);let _0x10e582=_0x4ff6a0(0x2e6)+_0x1cab99+'%poster%',_0x1c0d5d='%s'+_0x1cab99+'%poster%',_0x48f7b5='SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=\x27'+_0x4d4590+_0x4ff6a0(0x1ca)+_0x10e582+'\x27\x20or\x20filename\x20like\x20\x27'+_0x1c0d5d+'\x27)';_0x2c1c67=_0x8d9f38[_0x4ff6a0(0x2a9)][_0x4ff6a0(0x315)][_0x4ff6a0(0x31e)](_0x48f7b5)[_0x4ff6a0(0x2bb)]();}!_0x2c1c67&&(_0x2c1c67=_0x8d9f38[_0x4ff6a0(0x2a9)][_0x4ff6a0(0x315)][_0x4ff6a0(0x31e)](_0x4ff6a0(0x293))[_0x4ff6a0(0x2bb)](_0x22a421[_0x4ff6a0(0x245)]));}catch(_0x9a200a){console[_0x4ff6a0(0x256)](_0x9a200a);}else{if(_0x8d9f38[_0x4ff6a0(0x32b)]['has'](_0x23776f))return _0x22a421[_0x4ff6a0(0x325)]=_0x8d9f38[_0x4ff6a0(0x32b)][_0x4ff6a0(0x2bb)](_0x23776f),_0x22a421;let _0xa32a88=path['parse'](_0x22a421[_0x4ff6a0(0x240)]),_0x5447fc=_0xa32a88[_0x4ff6a0(0x30e)],_0x3a50e7=path[_0x4ff6a0(0x1e6)](_0x22a421[_0x4ff6a0(0x245)],_0x5447fc+'.jpg');if(fs[_0x4ff6a0(0x292)](_0x3a50e7))return _0x22a421[_0x4ff6a0(0x325)]=_0x3a50e7,_0x22a421;!_0x2c1c67&&(_0x2c1c67=_0x8d9f38['app'][_0x4ff6a0(0x315)]['prepare'](_0x4ff6a0(0x296))[_0x4ff6a0(0x2bb)](_0x22a421['path'],'%'+_0x5447fc+'%poster%'));if(!_0x2c1c67){let _0x4d90f2=_0x5447fc;(_0x5447fc[_0x4ff6a0(0x1f3)](_0x4ff6a0(0x279))||_0x5447fc[_0x4ff6a0(0x1f3)](_0x4ff6a0(0x26d))||_0x5447fc[_0x4ff6a0(0x1f3)](_0x4ff6a0(0x2bf))||_0x5447fc[_0x4ff6a0(0x1f3)](_0x4ff6a0(0x23c)))&&(_0x5447fc[_0x4ff6a0(0x1f3)]('-HD')?_0x4d90f2=_0x4d90f2['substr'](0x0,_0x4d90f2[_0x4ff6a0(0x290)]-0x3):_0x4d90f2=_0x4d90f2[_0x4ff6a0(0x2a5)](0x0,_0x4d90f2[_0x4ff6a0(0x290)]-0x4)),_0x2c1c67=_0x8d9f38[_0x4ff6a0(0x2a9)]['dbFileIndex'][_0x4ff6a0(0x31e)]('SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20?\x20or\x20filename\x20like\x20?)\x20and\x20filename\x20not\x20like\x20?')[_0x4ff6a0(0x2bb)](_0x22a421[_0x4ff6a0(0x245)],_0x5447fc+'%',_0x4d90f2+'%',_0x4ff6a0(0x25b));}!_0x2c1c67&&(_0x2c1c67=_0x8d9f38[_0x4ff6a0(0x2a9)][_0x4ff6a0(0x315)]['prepare']('SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20\x27poster.%\x27\x20or\x20filename\x20like\x20\x27POSTER.%\x27\x20or\x20filename\x20like\x20\x27movie.%\x27\x20or\x20filename\x20like\x20\x27folder.%\x27\x20or\x20filename\x20like\x20\x27cover.%\x27\x20or\x20filename\x20like\x20\x27thumb.%\x27)')[_0x4ff6a0(0x2bb)](_0x22a421[_0x4ff6a0(0x245)]));let {name:_0x5470a7}=path['parse'](_0x22a421[_0x4ff6a0(0x240)]);setLogoAndFanart(_0x8d9f38,_0x22a421,_0x22a421[_0x4ff6a0(0x245)],_0x5470a7);}if(_0x2c1c67){let _0x548739=path['join'](_0x2c1c67[_0x4ff6a0(0x245)],_0x2c1c67[_0x4ff6a0(0x240)]);!_0x548739[_0x4ff6a0(0x1f3)](_0x4ff6a0(0x258))&&!_0x548739['endsWith'](_0x4ff6a0(0x2ea))&&fs['existsSync'](_0x548739)?(_0x22a421[_0x4ff6a0(0x325)]=_0x548739,_0x8d9f38[_0x4ff6a0(0x32b)][_0x4ff6a0(0x251)](_0x23776f,_0x22a421[_0x4ff6a0(0x325)])):_0x8d9f38['movieTvCache'][_0x4ff6a0(0x251)](_0x23776f,'');}return _0x22a421;}catch(_0x3d7799){return console['log'](_0x3d7799),_0x22a421;}}function getMoviesByParams(_0x2785c7,_0x10a68b,_0x42f69c,_0x4e1444,_0x47ea54,_0x51bc3e,_0x121d73,_0x456eea,_0x32b359,_0x52ff07,_0x9c5b38,_0x2ab7a6,_0x42c018,_0x52dad,_0x27c2a6,_0x3c34e9,_0x2c7b89,_0xf2431e){const _0x59c0f1=_0xfde149;let _0x5234ad=movieFieldStr;_0xf2431e&&(_0x5234ad=_0xf2431e);!_0x27c2a6&&(_0x27c2a6=_0x59c0f1(0x234));let _0xb8af71='',_0x52e5aa=[],_0x558a05=dbUserTable[_0x59c0f1(0x28b)](_0x10a68b,_0x59c0f1(0x2d2),_0x59c0f1(0x281),!![],_0x52ff07);if(_0x10a68b[_0x59c0f1(0x2ee)][_0x59c0f1(0x225)]!=0x1&&!_0x558a05[_0x59c0f1(0x1d6)])return[];_0xb8af71+=_0x59c0f1(0x285);_0x32b359&&(_0x32b359=_0x32b359['replace']('\x27','')[_0x59c0f1(0x270)]('’',''),_0xb8af71+=_0x59c0f1(0x249),_0x52e5aa[_0x59c0f1(0x1f2)]('%'+_0x32b359+'%'),_0x52e5aa[_0x59c0f1(0x1f2)]('%'+_0x32b359+'%'),_0x52e5aa[_0x59c0f1(0x1f2)]('%'+_0x32b359+'%'));let _0xa77d31=dbSourceFolderTable[_0x59c0f1(0x2b6)](_0x10a68b['app'][_0x59c0f1(0x1cd)],_0x59c0f1(0x245),_0x59c0f1(0x2a4));_0xa77d31&&(_0xb8af71+='\x20AND\x20'+_0xa77d31);let _0x3a16db=dbSourceFolderTable[_0x59c0f1(0x2b6)](_0x10a68b[_0x59c0f1(0x2a9)][_0x59c0f1(0x1cd)],_0x59c0f1(0x240),'excludeFilenameMovie');_0x3a16db&&(_0xb8af71+='\x20AND\x20'+_0x3a16db);function _0x128bf9(_0x3e614d,_0x5d9eea){const _0x262e43=_0x59c0f1;let _0x10b890='\x20AND\x20(';try{let _0x2c7499=JSON[_0x262e43(0x255)](_0x5d9eea),_0x51bbd8=![];for(let _0x398640=0x0;_0x398640<_0x2c7499['length'];_0x398640++){if(!_0x2c7499[_0x398640])continue;_0x51bbd8=!![],_0x10b890+='\x20'+_0x3e614d+_0x262e43(0x201),_0x52e5aa[_0x262e43(0x1f2)]('%'+_0x2c7499[_0x398640]['trim']()+'%'),_0x398640!=_0x2c7499['length']-0x1&&(_0x10b890+=_0x262e43(0x1fc));}_0x10b890+=')',_0x51bbd8&&(_0xb8af71+=_0x10b890);}catch(_0x42cd15){console[_0x262e43(0x256)](_0x42cd15);}}_0x9c5b38&&_0x128bf9(_0x59c0f1(0x21b),_0x9c5b38);_0x2ab7a6&&_0x128bf9('movie_language',_0x2ab7a6);_0x42c018&&_0x128bf9(_0x59c0f1(0x326),_0x42c018);_0x10a68b[_0x59c0f1(0x244)]['movieActors']&&_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x25c)]['length']>0x0&&_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x25c)][0x0]!=''&&_0x128bf9(_0x59c0f1(0x2db),_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x25c)]);_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x29d)]&&_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x29d)]['length']>0x0&&_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x29d)][0x0]!=''&&_0x128bf9(_0x59c0f1(0x2e9),_0x10a68b[_0x59c0f1(0x244)][_0x59c0f1(0x29d)]);if(_0x2c7b89){let _0x265e50=_0x10a68b['app'][_0x59c0f1(0x315)][_0x59c0f1(0x31e)](_0x59c0f1(0x29a))[_0x59c0f1(0x2bb)](_0x2c7b89);if(_0x265e50)try{let _0x2785b1=JSON[_0x59c0f1(0x255)](_0x265e50['path_list']),_0x34e16d=dbUserTable[_0x59c0f1(0x2d5)](!![],_0x2785b1);_0xb8af71+=_0x34e16d[_0x59c0f1(0x1d6)],_0x52e5aa['push'](..._0x34e16d[_0x59c0f1(0x1d1)]);}catch(_0x5d53c7){console['log'](_0x5d53c7);}}else{!_0x52dad&&(_0x52dad=0x0);let _0x340213;if(_0x52dad!=0x0){_0x340213=_0x10a68b[_0x59c0f1(0x2a9)][_0x59c0f1(0x315)][_0x59c0f1(0x31e)](_0x59c0f1(0x2af))[_0x59c0f1(0x2bb)](_0x52dad);if(!_0x340213)return _0x10a68b['app'][_0x59c0f1(0x298)](_0x2785c7,_0x2785c7['__']('movieCollectionNotExist'));if(_0x340213[_0x59c0f1(0x271)]==0x1){let _0x163d18=_0x10a68b[_0x59c0f1(0x244)]['collectionPwd'];if(!_0x163d18||_0x340213[_0x59c0f1(0x2b0)]!=sha256(_0x163d18))return _0x10a68b[_0x59c0f1(0x2a9)]['returnErrMsg'](_0x2785c7,_0x2785c7['__']('login.pwdErr'));}}if(_0x340213&&_0x340213[_0x59c0f1(0x2d6)]=='smart')try{_0x340213['data']=JSON[_0x59c0f1(0x255)](_0x340213['data']),_0xb8af71+='\x20AND\x20'+_0x340213['data'][_0x59c0f1(0x1ea)];}catch(_0x1640d3){console[_0x59c0f1(0x256)](_0x1640d3);}else _0xb8af71+=_0x59c0f1(0x303)+_0x52dad;}if(_0x42f69c){if(_0x42f69c==0x1)_0xb8af71+=_0x59c0f1(0x284);else _0x42f69c==0x2&&(_0xb8af71+=_0x59c0f1(0x24b));}_0x3c34e9&&(_0x3c34e9=='#'?(_0xb8af71+=_0x59c0f1(0x2ad),_0x52e5aa[_0x59c0f1(0x1f2)](_0x3c34e9),_0x52e5aa[_0x59c0f1(0x1f2)](_0x3c34e9),_0x52e5aa['push'](_0x3c34e9)):(_0xb8af71+=_0x59c0f1(0x254),_0x52e5aa[_0x59c0f1(0x1f2)](_0x3c34e9),_0x52e5aa['push'](_0x3c34e9),_0x52e5aa['push'](_0x3c34e9)));if(_0x456eea&&_0x456eea[_0x59c0f1(0x290)]>0x0){_0xb8af71+=_0x59c0f1(0x291);for(let _0x483a2c=0x0;_0x483a2c<_0x456eea['length'];_0x483a2c++){_0xb8af71+=_0x456eea[_0x483a2c],_0x483a2c!=_0x456eea[_0x59c0f1(0x290)]-0x1&&(_0xb8af71+=',');}_0xb8af71+=')';}_0xb8af71+=_0x59c0f1(0x212),_0x52e5aa[_0x59c0f1(0x1f2)]('%'+path[_0x59c0f1(0x260)]+_0x59c0f1(0x323)),_0xb8af71+=_0x558a05[_0x59c0f1(0x1d6)],_0x52e5aa[_0x59c0f1(0x1f2)](..._0x558a05['paramsList']);_0x4e1444&&_0x121d73?_0xb8af71+=_0x59c0f1(0x280)+_0x4e1444+'\x20'+_0x121d73:_0xb8af71+='\x20\x20AND\x20is_file=1\x20AND\x20show_in_list=1';!_0x47ea54&&(_0x47ea54=0x32);_0xb8af71+=_0x59c0f1(0x207),_0x52e5aa['push'](_0x47ea54),_0x52e5aa[_0x59c0f1(0x1f2)](_0x51bc3e);let _0x57bf9a=[];if(_0x27c2a6==_0x59c0f1(0x2aa))_0x57bf9a=dbMovieFavorite[_0x59c0f1(0x24d)](_0x10a68b[_0x59c0f1(0x2a9)][_0x59c0f1(0x315)],_0x10a68b[_0x59c0f1(0x2ee)]['id'],_0xb8af71,_0x5234ad,_0x52e5aa);else _0x27c2a6==_0x59c0f1(0x234)&&(_0x57bf9a=dbFileIndexTable[_0x59c0f1(0x2eb)](_0x10a68b[_0x59c0f1(0x2a9)][_0x59c0f1(0x315)],_0xb8af71,_0x5234ad,dbFileIndexTable[_0x59c0f1(0x2b3)],_0x52e5aa));if(_0x57bf9a[_0x59c0f1(0x290)]<0x1)return _0x57bf9a;let _0x5c3718=[];for(let _0x28f8e6 in _0x57bf9a){_0x5c3718[_0x59c0f1(0x1f2)](_0x57bf9a[_0x28f8e6]['id']);}let _0x53db07=dbMovieFavorite[_0x59c0f1(0x30a)](_0x10a68b['app'][_0x59c0f1(0x315)],_0x10a68b[_0x59c0f1(0x2ee)]['id'],_0x5c3718);for(let _0x560910=0x0;_0x560910<_0x57bf9a[_0x59c0f1(0x290)];_0x560910++){_0x57bf9a[_0x560910][_0x59c0f1(0x2f9)]=0x0;for(let _0x280905 in _0x53db07){if(_0x53db07[_0x280905][_0x59c0f1(0x2c5)]==_0x57bf9a[_0x560910]['id']){_0x57bf9a[_0x560910][_0x59c0f1(0x2f9)]=0x1;break;}}let _0x2d20df=_0x10a68b[_0x59c0f1(0x2a9)][_0x59c0f1(0x315)][_0x59c0f1(0x31e)](_0x59c0f1(0x2c1))['get'](_0x10a68b[_0x59c0f1(0x2ee)]['id']+'',_0x57bf9a[_0x560910]['id']+'');_0x2d20df&&(_0x57bf9a[_0x560910][_0x59c0f1(0x2d0)]=_0x2d20df);_0x57bf9a[_0x560910]=addFolderCoverPath(_0x2785c7,_0x10a68b,_0x57bf9a[_0x560910]);if(_0x57bf9a[_0x560910][_0x59c0f1(0x2b1)]==0x1&&_0x10a68b['body'][_0x59c0f1(0x309)]){let _0x4ca3da=dbFileIndexTable['getTvCount'](_0x10a68b[_0x59c0f1(0x2a9)][_0x59c0f1(0x315)],_0x57bf9a[_0x560910]);_0x57bf9a[_0x560910][_0x59c0f1(0x2d4)]=_0x4ca3da[_0x59c0f1(0x235)];}}return _0x57bf9a;}function getShowMatchName(_0x245af0){const _0xc1d396=_0xfde149;let _0x4dab16=dbConfigTable[_0xc1d396(0x2d1)](_0x245af0,'movieShowMatchName');return!_0x4dab16||_0x4dab16&&_0x4dab16[_0xc1d396(0x1d5)]!=0x0?0x1:0x0;}function _0x597e(){const _0x236317=['fromName','SELECT\x20*\x20from\x20movie_history\x20where\x20user_id=?\x20and\x20index_id=?','dirname','fanart_path','getCountByWhere','movie_index_id','dealFirstLetterSingle','isTvPlay','stat','\x20as\x20f\x20WHERE\x20\x20is_file=1\x20and\x20type=2\x20and\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20LIMIT\x20200','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20','SELECT\x20count(*)\x20as\x20count\x20FROM\x20file_index_movie\x20WHERE\x20path\x20like\x20?\x20and\x20is_file=1\x20and\x20type=2\x20and\x20show_in_list=1','operationFail','ADD','defaultTranscodeResolution','SPECIALS\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','history','findByTitle','movie','has','tvCount','getPathWhere','type','end','startScanPath','shareForSubUser','specials','movie_actor','SELECT\x20*\x20FROM\x20movie_keys\x20where\x20key_type=\x27movie_regions\x27\x20and\x20\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20100','saveMovieInfoToDb','SELECT\x20id,title,enable_pwd,create_time\x20FROM\x20movie_collection\x20where\x20id=?\x20and\x20pwd=?','Extra','replaceAll','sourceList','seasonNumber','SELECT\x20*\x20FROM\x20movie_keys\x20WHERE\x20key_type=?\x20and\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20200','ordinary','getById','%season','685566DQBUaq','\x20\x20WHERE\x20\x20type=2\x20and\x20is_file=1\x20and\x20path=?\x20and\x20is_tvplay=1\x20and\x20filename_number\x20is\x20null','movie_director','heic','getAllByWhereAndField','Specials','seasonCount','currentUser','genresType','tvFolderPath','order\x20field\x20error','desc','power_delete','filepath','/getTvHomeData2','\x20and\x20(filename\x20like\x20?\x20or\x20movie_info_name\x20like\x20?)\x20','index_id','SELECT\x20path,filename\x20from\x20','favorite','sourceFolderList','\x20SELECT\x20','send','getTvCount','\x20and\x20title\x20like\x20?','show_name','sortType','SWITCH_MOVIE_INFO','UPDATE\x20file_index_movie\x20SET\x20movie_info_state=3\x20WHERE\x20path\x20like\x20?\x20OR\x20path=?','\x20AND\x20collection_id\x20=\x20','-fanart.%','collectionId','../../utils/nfoUtil','(filename\x20like\x20?)','basename','needTvCount','getFavoriteList','\x20LIMIT\x20','stringify','indexId','name','\x20and\x20filename_number\x20>=\x20?\x20','\x20as\x20f\x20WHERE\x20path\x20like\x20?\x20and\x20is_tvplay=1\x20and\x20is_file=1\x20and\x20type=2\x20and\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(path\x20like\x20\x27%','../../utils/movieSeasonUtil','shareUidList','share_uid','/getTvList','dbFileIndex','Value\x20out\x20of\x20limit','\x20\x20WHERE\x20\x20type=2\x20and\x20is_file=1\x20and\x20path=?\x20and\x20is_tvplay=1\x20','all','UPDATE\x20file_index_movie\x20set\x20check_time=?\x20WHERE\x20id=?','endDuration','Sample\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','-seriesPoster','m.time,\x20f.id,f.is_tvplay,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id,f.movie_douban_score,f.movie_info_name,f.show_name','prepare','/getMovies','/setTvplay','fileFullPath','parseNfo','Sample','/operationLibrary','folder_cover_path','movie_genres','8glcftg','subtitleSize','../../db/dbSourceFolderTable','pathList','movieTvCache','dataValue','is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20and\x20is_tvplay==1','startsWith','\x20SET\x20show_in_list=1,is_tvplay=0,show_name\x20=\x27\x27,show_name_fl=null\x20WHERE\x20path=?\x20or\x20path\x20like\x20?','operation','\x27\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20\x27','ignoreTvList','getFavorite','dbOther','UPDATE\x20file_index_movie\x20SET\x20collection_id=?\x20WHERE\x20id\x20in\x20','searchStr','catch','paramsList','then','/getIndexDetail','login.pwdErr','value','whereStr','select\x20id\x20from\x20file_index_movie\x20where\x20(\x20path\x20like\x20?\x20OR\x20path=?)\x20and\x20is_file=1\x20and\x20type=2','pageSize','(filename\x20like\x20?\x20or\x20filename\x20like\x20?\x20\x20or\x20filename\x20like\x20?)','noPermission','coverPath','movie_info_name','create_time','/getMovieKeys','SAMPLE\x27\x20\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','/switchMatchInfo','/movieFavorite','1759392pmlPLy','is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20and\x20is_tvplay!=1','Specials\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','1164785roOgvk','join','\x20order\x20by\x20create_time\x20desc','libraryId','REPLACE\x20INTO\x20movie_collection(title,enable_pwd,pwd,user_id,type,data,collection_cover_path,data_value,share_for_subuser)\x20VALUES(\x20?,?,?,?,?,?,?,?,?)','searchValue','collection_id','\x20\x20WHERE\x20','/clearHistory','\x20SET\x20filename_number=?\x20\x20WHERE\x20\x20id=?','pwdCanNotBeNull','/checkCollectionPwd','media_type','push','endsWith','run','\x20AND\x20','802BeLaJf','\x20order\x20by\x20m.create_time\x20desc\x20limit\x2010','\x20SET\x20show_in_list\x20=0,is_tvplay=1\x20WHERE\x20path=?','tvplay','\x20id,title,data,enable_pwd,collection_cover_path,data_value,create_time,share_for_subuser\x20','931sJbkCe','\x20or\x20','/addIndexToCollection','ignoreSeasonList','../../db/dbMovieFavorite','\x20order\x20by\x20','\x20like\x20?\x20','title','clearlogo.%','json','DELETE','\x20and\x20path=?\x20and\x20is_tvplay=1\x20','\x20LIMIT\x20?\x20OFFSET\x20?','needSeasonCount','SELECT\x20*\x20from\x20','needLogoPathAndFanart','SELECT\x20*\x20FROM\x20movie_library\x20','../utils/fileUtils','error\x20data','useTvSeriesInfo','./photoApiUtils','key_value','../../utils/movieInfoUtil','\x20AND\x20path\x20not\x20like\x20?','\x20OFFSET\x20','listType','\x20and\x20show_in_list=1','fanart.%','logo_path','\x20order\x20by\x20m.create_time\x20desc\x20limit\x201','checkPath','movieHomeShowMyMedia','movie_regions','fileExist','/getCollection','trash','\x20FROM\x20','\x27\x20and\x20type=1\x20and\x20is_file=1\x20limit\x2020','videoPath','search','SELECT\x20id\x20FROM\x20','\x20WHERE\x20is_file=0\x20and\x20(path=?\x20or\x20path\x20like\x20?)\x20','is_admin','SELECT\x20*\x20FROM\x20movie_library\x20WHERE\x20share_for_subuser=1','ignoreMatchInfo','1510kuuHOy','user_list','page','UPDATE\x20file_index_movie\x20SET\x20movie_info_state=0\x20WHERE\x20(path\x20like\x20?\x20OR\x20path=?)','Router','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=\x27','poster.jpeg','2096699FxFoFX','385NRMTef','tvFolderName','/getTvSeriesDetail','excludeIds','ALL','count','/getTvHomeData','deleteFavorite','UPDATE\x20movie_history\x20SET\x20time=?,create_time=?\x20where\x20index_id=?\x20AND\x20user_id=?','SELECT\x20*\x20from\x20movie_history\x20WHERE\x20index_id=?\x20and\x20user_id=?','movieLanguage','\x20SET\x20show_in_list=1\x20WHERE\x20id=?','-UHD','UPDATE\x20file_index_movie\x20SET\x20collection_id=0\x20where\x20collection_id=?','/addHistory','m.time,\x20f.id,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id,f.movie_douban_score,f.movie_info_name,f.show_name','filename','dataPreview','../../db/dbUserTable','sourceFolderId','body','path','/deleteIndex','\x20SET\x20show_in_list\x20=1,is_tvplay=0,show_name\x20=\x27\x27,show_name_fl=null\x20WHERE\x20path=\x27','m.time,\x20f.id,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id','\x20AND\x20(path\x20like\x20?\x20OR\x20filename\x20like\x20?\x20OR\x20movie_info_name\x20like\x20?\x20)','(filename\x20like\x20?\x20or\x20filename\x20like\x20?\x20or\x20filename\x20like\x20?)','\x20AND\x20is_tvplay==1','REPLACE\x20INTO\x20movie_history(index_id,user_id,time,create_time)\x20VALUES(\x20?,?,?,?)','getAllFavoriteByWhere','duration','includes','parseNfoTvSeries','set','sample','\x20from\x20movie_history\x20as\x20m\x20inner\x20join\x20file_index_movie\x20as\x20f\x20on\x20m.index_id=f.id\x20where\x20m.user_id=','\x20AND\x20(filename_fl=?\x20OR\x20show_name_fl=?\x20OR\x20movie_info_name_fl=?)','parse','log','\x20type=2\x20and\x20is_file=1','HEIC','express','smart','%fanart%','movieActors','/getMoviesByGenres','delete','seasonList','sep','folder.jpg','exports','/deleteCollection','/getMovieDetail','\x20and\x20filename\x20>=\x20?\x20','post','indexIdList','status','/getHistory','doUserCanGet','checkSqlInjection','62456MJXPDA','-FHD','movieRegion','\x20order\x20by\x20m.create_time\x20desc\x20limit\x2050','replace','enable_pwd','readdir','DELETE\x20FROM\x20movie_collection\x20WHERE\x20id=?','index.videoInfoReadFail','/getSameNameSubtitles','EXTRA','SELECT\x20index_id\x20FROM\x20movie_history\x20where\x20index_id\x20in\x20','orderField','-HD','DELETE\x20FROM\x20movie_library\x20\x20WHERE\x20id=?','getFilenameNumber','check_time','SELECT\x20*\x20FROM\x20movie_keys\x20where\x20key_type=\x27movie_genres\x27\x20and\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20100','offset','id,username','\x20\x20AND\x20is_file=1\x20AND\x20show_in_list=1\x20ORDER\x20BY\x20','power_get','REPLACE\x20INTO\x20movie_library(title,path_list,share_for_subuser,share_uid,user_id)\x20VALUES(\x20?,?,?,?,?)','sortField','\x20AND\x20is_tvplay==0','\x20type=2','../utils/movieUtil','\x20AND\x20collection_id=0','updateByWhere','SAMPLE','getTime','getUserPathWhere','sourceType','SELECT\x20','1080p\x203mbps','addScanTask','length','\x20AND\x20id\x20NOT\x20IN\x20(','existsSync','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20\x27poster.%\x27\x20or\x20filename\x20like\x20\x27POSTER.%\x27\x20or\x20filename\x20like\x20\x27movie.%\x27\x20or\x20filename\x20like\x20\x27folder.%\x27\x20or\x20filename\x20like\x20\x27cover.%\x27\x20or\x20filename\x20like\x20\x27thumb.%\x27)','sha256','movieIndexId','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20filename\x20like\x20?','dialog','returnErrMsg','EDIT','SELECT\x20*\x20FROM\x20movie_library\x20WHERE\x20id=?','data','getSeasonNumber','movieDirectors','36198ILlvAb','\x20LIKE\x20?','\x20as\x20f\x20WHERE\x20path\x20like\x20?\x20and\x20is_tvplay=1\x20and\x20is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20limit\x20200','UPDATE\x20file_index_movie\x20set\x20open_duration=?,end_duration=?,skip_open_end=?\x20WHERE\x20id\x20in\x20','extraAndSpecialsList','/addCollection','excludePathMovie','substr','UPDATE\x20movie_collection\x20SET\x20title=?,data=?,enable_pwd=?,pwd=?,collection_cover_path=?,data_value=?,share_for_subuser=?\x20WHERE\x20id=?','未找到NFO信息','UPDATE\x20','app','FAVORITE','folder','toLowerCase','\x20AND\x20(filename_fl=?\x20AND\x20show_name_fl=?\x20AND\x20movie_info_name_fl=?)','concat','SELECT\x20*\x20from\x20movie_collection\x20where\x20id=?','pwd','is_tvplay','movieHomeShowHistory','INDEX_TABLE_NAME_MOVIE','\x20WHERE\x20title\x20like\x20?','movieShowMatchName','getExcludePathWhereStr','\x20AND\x20share_for_subuser\x20=\x20?\x20','ignore_match_info','error\x20pathList','.ass','get','folderName','power_change','sample\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20LIMIT\x20200','-QHD'];_0x597e=function(){return _0x236317;};return _0x597e();}router[_0xfde149(0x266)](_0xfde149(0x31f),(_0x199f9e,_0x41bb81,_0x249587)=>{const _0x34815a=_0xfde149;if(dbUserTable[_0x34815a(0x26a)](_0x199f9e,_0x41bb81,'movie',_0x34815a(0x281))==!![]){let _0x3ad303=_0x199f9e[_0x34815a(0x244)]['count'],_0x730574=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x27e)],_0x496753=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x283)],_0x464b4d=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x300)],_0x903f67=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x233)],_0x5ec901=_0x199f9e['body'][_0x34815a(0x1cf)],_0x1df645=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x2fa)],_0x2bb5a9=_0x199f9e['body'][_0x34815a(0x26e)],_0x2dbccf=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x23a)],_0x40fd57=_0x199f9e[_0x34815a(0x244)]['movieGenres'],_0x33d60c=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x28c)],_0x429fe2=_0x199f9e['body'][_0x34815a(0x305)],_0xb59b91=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x214)],_0x1fbe09=_0x199f9e[_0x34815a(0x244)]['firstLetter'],_0x55ba19=_0x199f9e[_0x34815a(0x244)][_0x34815a(0x1e8)];_0x199f9e[_0x34815a(0x244)]['needTvCount']=!![],_0x199f9e[_0x34815a(0x244)]['needSeasonCount']=!![];let _0x43ad82=getMoviesByParams(_0x41bb81,_0x199f9e,_0x33d60c,_0x496753,_0x3ad303,_0x730574,_0x464b4d,_0x903f67,_0x5ec901,_0x1df645,_0x2bb5a9,_0x2dbccf,_0x40fd57,_0x429fe2,_0xb59b91,_0x1fbe09,_0x55ba19);return _0x41bb81['json']({'movieShowMatchName':getShowMatchName(_0x199f9e[_0x34815a(0x2a9)]['dbOther']),'code':0x0,'data':_0x43ad82});}}),router['post'](_0xfde149(0x25d),(_0x4faddb,_0x4704d8,_0x187d51)=>{const _0x51fe09=_0xfde149;if(dbUserTable[_0x51fe09(0x26a)](_0x4faddb,_0x4704d8,'movie',_0x51fe09(0x281))==!![]){let _0x398ab9=_0x4faddb[_0x51fe09(0x244)][_0x51fe09(0x2fa)],_0x357e35=_0x4faddb['body']['pageCount'],_0x5c4434=_0x4faddb[_0x51fe09(0x244)][_0x51fe09(0x28c)];!_0x357e35&&(_0x357e35=0x9);let _0x103ef7='\x20id,movie_douban_score,movie_info_name,movie_year,movie_info_state,path,is_tvplay,filename,ext,type,width,height,duration,size,movie_douban_id,movie_imdb_id,show_name,show_in_list',_0x22fd6b='';_0x398ab9?_0x22fd6b=dbUserTable[_0x51fe09(0x28b)](_0x4faddb,'movie',_0x51fe09(0x281),!![],_0x398ab9):_0x22fd6b=dbUserTable[_0x51fe09(0x28b)](_0x4faddb,_0x51fe09(0x2d2),_0x51fe09(0x281),!![]);let _0x42b81b=_0x4faddb['body'][_0x51fe09(0x2ef)];_0x42b81b!=_0x51fe09(0x326)&&_0x42b81b!=_0x51fe09(0x21b)&&(_0x42b81b=_0x51fe09(0x326));!_0x42b81b&&(_0x42b81b=_0x51fe09(0x326));let _0x391f09=_0x4faddb[_0x51fe09(0x2a9)][_0x51fe09(0x315)][_0x51fe09(0x31e)](_0x51fe09(0x2e3))[_0x51fe09(0x318)](_0x42b81b),_0xd1d105=[];for(let _0x5545c8 of _0x391f09){let _0x21dfa3=_0x5545c8[_0x51fe09(0x210)],_0x72c9b2='\x20type=2',_0x217acc=[];_0x72c9b2+=_0x22fd6b['whereStr'],_0x217acc[_0x51fe09(0x1f2)](..._0x22fd6b['paramsList']),_0x72c9b2+=_0x51fe09(0x287);if(_0x5c4434){if(_0x5c4434==0x1)_0x72c9b2+=_0x51fe09(0x284);else _0x5c4434==0x2&&(_0x72c9b2+=_0x51fe09(0x24b));}_0x72c9b2+=_0x51fe09(0x1f5)+_0x42b81b+_0x51fe09(0x29f),_0x217acc[_0x51fe09(0x1f2)]('%'+_0x21dfa3+'%'),_0x72c9b2+='\x20AND\x20is_file=1\x20AND\x20show_in_list=1\x20ORDER\x20BY\x20check_time\x20DESC\x20LIMIT\x20?',_0x217acc['push'](parseInt(_0x357e35));let _0x3b93d0=dbFileIndexTable['getAllByWhereAndField'](_0x4faddb[_0x51fe09(0x2a9)]['dbFileIndex'],_0x72c9b2,_0x103ef7,dbFileIndexTable[_0x51fe09(0x2b3)],_0x217acc),_0x47dc10=[];for(let _0x2cf164 in _0x3b93d0){_0x47dc10[_0x51fe09(0x1f2)](_0x3b93d0[_0x2cf164]['id']);}let _0x5cee5b=dbMovieFavorite[_0x51fe09(0x30a)](_0x4faddb[_0x51fe09(0x2a9)][_0x51fe09(0x315)],_0x4faddb[_0x51fe09(0x2ee)]['id'],_0x47dc10);for(let _0x5a78e3=0x0;_0x5a78e3<_0x3b93d0[_0x51fe09(0x290)];_0x5a78e3++){_0x3b93d0[_0x5a78e3]['favorite']=0x0;for(let _0x5ca25c in _0x5cee5b){if(_0x5cee5b[_0x5ca25c][_0x51fe09(0x2c5)]==_0x3b93d0[_0x5a78e3]['id']){_0x3b93d0[_0x5a78e3]['favorite']=0x1;break;}}_0x3b93d0[_0x5a78e3]=addFolderCoverPath(_0x4704d8,_0x4faddb,_0x3b93d0[_0x5a78e3]);}_0x3b93d0['length']>0x0&&_0xd1d105['push']({'genresType':_0x42b81b,'genresValue':_0x21dfa3,'movieList':_0x3b93d0,'indexCount':_0x5545c8['index_count']});}_0x4704d8[_0x51fe09(0x204)]({'code':0x0,'data':_0xd1d105,'movieShowMatchName':getShowMatchName(_0x4faddb[_0x51fe09(0x2a9)][_0x51fe09(0x1cd)])});}}),router[_0xfde149(0x266)]('/getMovieHomeData',(_0x259ce1,_0x5b173d,_0x226f8f)=>{const _0x254560=_0xfde149;if(dbUserTable[_0x254560(0x26a)](_0x259ce1,_0x5b173d,_0x254560(0x2d2),_0x254560(0x281))==!![]){let _0x478cc0=getMoviesByParams(_0x5b173d,_0x259ce1,0x1,_0x254560(0x1dd),0xf,0x0,_0x254560(0x2f2));_0x259ce1['body'][_0x254560(0x309)]=!![],_0x259ce1[_0x254560(0x244)]['needSeasonCount']=!![],_0x259ce1[_0x254560(0x244)][_0x254560(0x20e)]=0x1;let _0x24b214=getMoviesByParams(_0x5b173d,_0x259ce1,0x2,_0x254560(0x1dd),0x32,0x0,'desc');_0x259ce1[_0x254560(0x244)][_0x254560(0x309)]=![],_0x259ce1[_0x254560(0x244)][_0x254560(0x208)]=![],_0x259ce1[_0x254560(0x244)][_0x254560(0x20e)]=0x0;let _0x22765c=dbConfigTable[_0x254560(0x2d1)](_0x259ce1['app'][_0x254560(0x1cd)],_0x254560(0x21a));_0x22765c=!_0x22765c||_0x22765c&&_0x22765c[_0x254560(0x1d5)]==0x1;let _0xa06965=dbConfigTable[_0x254560(0x2d1)](_0x259ce1[_0x254560(0x2a9)][_0x254560(0x1cd)],'movieHomeShowLibrary');_0xa06965=!_0xa06965||_0xa06965&&_0xa06965[_0x254560(0x1d5)]==0x1;let _0x37c231=dbConfigTable[_0x254560(0x2d1)](_0x259ce1[_0x254560(0x2a9)][_0x254560(0x1cd)],_0x254560(0x2b2));_0x37c231=!_0x37c231||_0x37c231&&_0x37c231[_0x254560(0x1d5)]==0x1;let _0x53198e=[];if(_0x37c231){let _0x333e51=_0x254560(0x31d),_0x35332d='SELECT\x20'+_0x333e51+_0x254560(0x253)+_0x259ce1['currentUser']['id']+_0x254560(0x1f7);_0x53198e=_0x259ce1[_0x254560(0x2a9)][_0x254560(0x315)][_0x254560(0x31e)](_0x35332d)[_0x254560(0x318)]();let _0xac0fb7=[];for(let _0x28a284 in _0x53198e){_0xac0fb7['push'](_0x53198e[_0x28a284]['id']);}let _0x486b67=dbMovieFavorite[_0x254560(0x30a)](_0x259ce1[_0x254560(0x2a9)]['dbFileIndex'],_0x259ce1[_0x254560(0x2ee)]['id'],_0xac0fb7);for(let _0x1e89b3=0x0;_0x1e89b3<_0x53198e[_0x254560(0x290)];_0x1e89b3++){_0x53198e[_0x1e89b3][_0x254560(0x2f9)]=0x0;for(let _0x4bec73 in _0x486b67){if(_0x486b67[_0x4bec73][_0x254560(0x2c5)]==_0x53198e[_0x1e89b3]['id']){_0x53198e[_0x1e89b3][_0x254560(0x2f9)]=0x1;break;}}}}let _0x2bae5d=[];_0xa06965&&(_0x2bae5d=getMovieLibrary(_0x259ce1,_0x5b173d,0x6));let _0x46ef0a={'code':0x0,'movies':_0x478cc0,'tv':_0x24b214,'history':_0x53198e,'libraryList':_0x2bae5d,'sourceList':[]};_0x46ef0a[_0x254560(0x2b5)]=getShowMatchName(_0x259ce1['app'][_0x254560(0x1cd)]);if(_0x22765c){let _0x44dfcd=_0x259ce1['app'][_0x254560(0x1cd)]['prepare']('SELECT\x20*\x20FROM\x20source_folder\x20WHERE\x20type=?\x20LIMIT\x2010')[_0x254560(0x318)](_0x254560(0x2d2));for(let _0x245717 of _0x44dfcd){let _0x2f5e09=getMoviesByParams(_0x5b173d,_0x259ce1,null,_0x254560(0x27c),0x4,0x0,'desc',null,null,JSON[_0x254560(0x30c)]([path['join'](_0x245717[_0x254560(0x245)])]));if(_0x2f5e09['length']<0x1)continue;_0x46ef0a[_0x254560(0x2e1)][_0x254560(0x1f2)]({'mediaType':_0x245717[_0x254560(0x1f1)],'path':_0x245717[_0x254560(0x245)],'name':path['basename'](_0x245717['path']),'sourceMovies':_0x2f5e09});}}return _0x5b173d['json'](_0x46ef0a);}}),router[_0xfde149(0x266)](_0xfde149(0x236),(_0x21d7e5,_0x1f293d,_0xa5925e)=>{const _0x5ba3dc=_0xfde149;if(dbUserTable[_0x5ba3dc(0x26a)](_0x21d7e5,_0x1f293d,_0x5ba3dc(0x2d2),'power_get')==!![]){let _0x21c0e0=getMoviesByParams(_0x1f293d,_0x21d7e5,0x1,_0x5ba3dc(0x27c),0xa,0x0,_0x5ba3dc(0x2f2)),_0x301e92=getMoviesByParams(_0x1f293d,_0x21d7e5,0x2,_0x5ba3dc(0x27c),0xa,0x0,_0x5ba3dc(0x2f2)),_0x441b80=_0x5ba3dc(0x23f),_0x109464=_0x5ba3dc(0x28d)+_0x441b80+_0x5ba3dc(0x253)+_0x21d7e5[_0x5ba3dc(0x2ee)]['id']+_0x5ba3dc(0x1f7),_0x16f712=_0x21d7e5['app']['dbFileIndex'][_0x5ba3dc(0x31e)](_0x109464)[_0x5ba3dc(0x318)](),_0x1346d0=getCollectionList(_0x21d7e5,_0x1f293d,_0x5ba3dc(0x2e4)),_0x5afa59=getCollectionList(_0x21d7e5,_0x1f293d,_0x5ba3dc(0x25a)),_0x207976=getMoviesByParams(_0x1f293d,_0x21d7e5,null,_0x5ba3dc(0x27c),0xa,0x0,_0x5ba3dc(0x2f2),null,null,null,null,null,null,null,_0x5ba3dc(0x2aa)),_0x21c793=getMovieLibrary(_0x21d7e5,_0x1f293d),_0x400113={'code':0x0,'movies':_0x21c0e0,'tv':_0x301e92,'history':_0x16f712,'favorites':_0x207976,'collectionList':_0x1346d0,'aiCollectionList':_0x5afa59,'libraryList':_0x21c793};return _0x1f293d[_0x5ba3dc(0x204)](_0x400113);}}),router[_0xfde149(0x266)](_0xfde149(0x2f5),(_0x10f108,_0x5e8d68,_0x5aaf07)=>{const _0x226d20=_0xfde149;if(dbUserTable['doUserCanGet'](_0x10f108,_0x5e8d68,_0x226d20(0x2d2),'power_get')==!![]){let _0x18a757=getMoviesByParams(_0x5e8d68,_0x10f108,0x1,_0x226d20(0x27c),0x1,0x0,_0x226d20(0x2f2)),_0x55e255=getMoviesByParams(_0x5e8d68,_0x10f108,0x2,'check_time',0x1,0x0,_0x226d20(0x2f2)),_0x523941='m.time,\x20f.id,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id,f.movie_douban_score,f.movie_info_name,f.show_name',_0xe18259='SELECT\x20'+_0x523941+_0x226d20(0x253)+_0x10f108['currentUser']['id']+_0x226d20(0x218),_0x321442=_0x10f108['app'][_0x226d20(0x315)]['prepare'](_0xe18259)[_0x226d20(0x318)](),_0x5c443c=getMoviesByParams(_0x5e8d68,_0x10f108,null,_0x226d20(0x27c),0x1,0x0,_0x226d20(0x2f2),null,null,null,null,null,null,null,'FAVORITE'),_0xd2c210=dbFileIndexTable[_0x226d20(0x2c4)](_0x10f108[_0x226d20(0x2a9)]['dbFileIndex'],_0x226d20(0x1e3),dbFileIndexTable[_0x226d20(0x2b3)]),_0x19bd9c=dbFileIndexTable[_0x226d20(0x2c4)](_0x10f108['app'][_0x226d20(0x315)],_0x226d20(0x1c6),dbFileIndexTable[_0x226d20(0x2b3)]);_0x10f108[_0x226d20(0x244)]['timestamp']=0x5af3107a3fff,_0x10f108[_0x226d20(0x244)]['timeType']=0x1,_0x10f108['body'][_0x226d20(0x283)]=_0x226d20(0x27c),_0x10f108[_0x226d20(0x244)][_0x226d20(0x300)]=_0x226d20(0x2f2),_0x10f108[_0x226d20(0x244)][_0x226d20(0x21e)]=0x0,_0x10f108[_0x226d20(0x244)][_0x226d20(0x235)]=0x1;let _0x55e073=photoApiUtils['getPhotoByParams'](_0x10f108,_0x5e8d68),_0x504de5=getMovieLibrary(_0x10f108,_0x5e8d68),_0x5838fc={'movieCount':_0xd2c210[_0x226d20(0x235)],'tvCount':_0x19bd9c['count'],'code':0x0,'movies':_0x18a757,'tv':_0x55e255,'history':_0x321442,'favorites':_0x5c443c,'photos':_0x55e073,'libraryList':_0x504de5};return _0x5e8d68[_0x226d20(0x204)](_0x5838fc);}});let subtitleExtList=['.srt',_0xfde149(0x2ba),'.vtt'];router[_0xfde149(0x266)](_0xfde149(0x275),(_0x350383,_0x58af56,_0x117704)=>{const _0x58aaa9=_0xfde149;let _0x3841fe=[],_0x20d88b=null;if(_0x350383[_0x58aaa9(0x244)][_0x58aaa9(0x221)])_0x20d88b=_0x350383[_0x58aaa9(0x244)]['videoPath'],_0x20d88b=fileUtil['decodePath'](_0x20d88b);else{if(_0x350383[_0x58aaa9(0x244)]['id']){let _0x202340=_0x350383['body']['id'],_0x19cd6c=dbFileIndexTable[_0x58aaa9(0x2e5)](_0x350383[_0x58aaa9(0x2a9)][_0x58aaa9(0x315)],_0x202340,dbFileIndexTable[_0x58aaa9(0x2b3)]);_0x19cd6c&&(_0x20d88b=path['join'](_0x19cd6c[_0x58aaa9(0x245)],_0x19cd6c['filename']),_0x350383[_0x58aaa9(0x2a9)][_0x58aaa9(0x315)][_0x58aaa9(0x31e)](_0x58aaa9(0x319))[_0x58aaa9(0x1f4)](Date['now'](),_0x19cd6c['id']));}}function _0x20e927(){const _0x5b3caf=_0x58aaa9;let _0x9e1e07=dbConfigTable[_0x5b3caf(0x2d1)](_0x350383[_0x5b3caf(0x2a9)][_0x5b3caf(0x1cd)],_0x5b3caf(0x328)),_0x31a7c4=dbConfigTable[_0x5b3caf(0x2d1)](_0x350383['app'][_0x5b3caf(0x1cd)],_0x5b3caf(0x2ce));return _0x58af56['json']({'code':0x0,'data':_0x3841fe,'defaultTranscodeResolution':_0x31a7c4?_0x31a7c4[_0x5b3caf(0x1d5)]:_0x5b3caf(0x28e),'userFontSize':_0x9e1e07?_0x9e1e07['value']:1.5});}_0x20d88b?fs[_0x58aaa9(0x2c8)](_0x20d88b,(_0x4f9f14,_0x498576)=>{const _0x4b797c=_0x58aaa9;if(_0x4f9f14)return _0x20e927();let _0x1fe861=path[_0x4b797c(0x2c2)](_0x20d88b);fs[_0x4b797c(0x272)](_0x1fe861,(_0x2af1be,_0x4eab51)=>{const _0x5c033b=_0x4b797c;if(_0x2af1be)return _0x20e927();let _0xb81cf8=path[_0x5c033b(0x308)](_0x20d88b)[_0x5c033b(0x270)](path['extname'](_0x20d88b),''),_0x444a48=_0xb81cf8[_0x5c033b(0x2e0)]('\x20','_');for(let _0x3927d9 in _0x4eab51){let _0x47c138=_0x4eab51[_0x3927d9],_0x10600c=path['extname'](_0x47c138);(_0x47c138[_0x5c033b(0x1c7)](_0xb81cf8)||_0x47c138[_0x5c033b(0x1c7)](_0x444a48))&&subtitleExtList[_0x5c033b(0x24f)](_0x10600c)&&_0x3841fe[_0x5c033b(0x1f2)]({'fileName':path['basename'](_0x47c138),'filePath':path[_0x5c033b(0x1e6)](_0x1fe861,_0x47c138)});}return _0x20e927();});}):_0x20e927();}),router[_0xfde149(0x266)](_0xfde149(0x1de),(_0x386704,_0x411473,_0x14b5a5)=>{const _0x3af5c7=_0xfde149;let _0x56925d=_0x386704['app']['dbFileIndex'][_0x3af5c7(0x31e)](_0x3af5c7(0x27d))[_0x3af5c7(0x318)](),_0x394f0d=_0x386704['app']['dbFileIndex'][_0x3af5c7(0x31e)]('SELECT\x20*\x20FROM\x20movie_keys\x20where\x20key_type=\x27movie_language\x27\x20and\x20\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20100')[_0x3af5c7(0x318)](),_0x538532=_0x386704['app'][_0x3af5c7(0x315)][_0x3af5c7(0x31e)](_0x3af5c7(0x2dc))[_0x3af5c7(0x318)]();_0x411473[_0x3af5c7(0x204)]({'code':0x0,'data':_0x56925d[_0x3af5c7(0x2ae)](_0x394f0d,_0x538532)});}),router[_0xfde149(0x266)](_0xfde149(0x246),(_0x45f39b,_0x1be69c,_0x1f1734)=>{const _0x472d82=_0xfde149;let _0x4d144a=_0x45f39b[_0x472d82(0x244)][_0x472d82(0x30d)],_0x2a8674=dbFileIndexTable[_0x472d82(0x2e5)](_0x45f39b[_0x472d82(0x2a9)]['dbFileIndex'],_0x4d144a,dbFileIndexTable[_0x472d82(0x2b3)]);if(!_0x2a8674)return _0x1be69c[_0x472d82(0x204)]({'code':0x0});if(dbUserTable[_0x472d82(0x26a)](_0x45f39b,_0x1be69c,_0x472d82(0x2d2),_0x472d82(0x2f3),_0x2a8674[_0x472d82(0x245)])==!![])return dbFileIndexTable[_0x472d82(0x25e)](_0x45f39b['app'][_0x472d82(0x315)],_0x4d144a,dbFileIndexTable[_0x472d82(0x2b3)]),_0x1be69c[_0x472d82(0x204)]({'code':0x0});}),router['post'](_0xfde149(0x1e1),(_0x3b104c,_0x3a95e1,_0xf6bce1)=>{const _0xb025ee=_0xfde149;let _0x4c4e0f=_0x3b104c[_0xb025ee(0x2ee)]['id'],_0x33cac5=parseInt(_0x3b104c['body'][_0xb025ee(0x295)]),_0x43c4f3=dbMovieFavorite[_0xb025ee(0x1cc)](_0x3b104c['app'][_0xb025ee(0x315)],_0x4c4e0f,_0x33cac5),_0x2853a4=0x0;if(_0x43c4f3)dbMovieFavorite[_0xb025ee(0x237)](_0x3b104c[_0xb025ee(0x2a9)][_0xb025ee(0x315)],_0x4c4e0f,_0x33cac5);else{_0x2853a4=0x1;let _0x361fb7=new Date()[_0xb025ee(0x28a)]();_0x3b104c['app'][_0xb025ee(0x315)][_0xb025ee(0x31e)](_0xb025ee(0x319))[_0xb025ee(0x1f4)](_0x361fb7,_0x33cac5),dbMovieFavorite['addFavorite'](_0x3b104c[_0xb025ee(0x2a9)]['dbFileIndex'],_0x4c4e0f,_0x33cac5);}return _0x3a95e1[_0xb025ee(0x204)]({'code':0x0,'favorite':_0x2853a4});}),router[_0xfde149(0x266)]('/setTitleAndEnding',(_0x2ed080,_0x41ddfb,_0x407e2e)=>{const _0x44eb97=_0xfde149;try{let _0x55bb9c=parseInt(_0x2ed080[_0x44eb97(0x244)][_0x44eb97(0x30d)]),_0x400060=dbFileIndexTable[_0x44eb97(0x2e5)](_0x2ed080[_0x44eb97(0x2a9)][_0x44eb97(0x315)],_0x55bb9c,dbFileIndexTable[_0x44eb97(0x2b3)]);if(!_0x400060)return _0x41ddfb['json']({'code':0x0});let _0x448cec=parseInt(_0x2ed080['body']['openDuration']),_0x550d29=parseInt(_0x2ed080['body'][_0x44eb97(0x31a)]);!_0x550d29&&(_0x550d29=0x0);!_0x448cec&&(_0x448cec=0x0);let _0x49a8bf=parseInt(_0x2ed080[_0x44eb97(0x244)]['autoSkip']);if(_0x448cec<0x0||_0x550d29<0x0||_0x448cec>_0x400060[_0x44eb97(0x24e)]||_0x550d29>_0x400060[_0x44eb97(0x24e)]||_0x49a8bf!=0x0&&_0x49a8bf!=0x1)return _0x2ed080[_0x44eb97(0x2a9)][_0x44eb97(0x298)](_0x41ddfb,_0x44eb97(0x316));let _0x299127=[_0x400060];_0x400060['is_tvplay']==0x1&&(_0x299127=_0x2ed080[_0x44eb97(0x2a9)][_0x44eb97(0x315)]['prepare'](_0x44eb97(0x223)+dbFileIndexTable[_0x44eb97(0x2b3)]+'\x20\x20WHERE\x20\x20type=2\x20and\x20is_file=1\x20and\x20path=?\x20and\x20is_tvplay=1\x20')[_0x44eb97(0x318)](_0x400060[_0x44eb97(0x245)]));let _0xd9eff1='(';for(let _0x1d6454 in _0x299127){_0xd9eff1+=_0x299127[_0x1d6454]['id'],_0x1d6454!=_0x299127[_0x44eb97(0x290)]-0x1&&(_0xd9eff1+=',');}return _0xd9eff1+=')',_0x2ed080['app']['dbFileIndex'][_0x44eb97(0x31e)](_0x44eb97(0x2a1)+_0xd9eff1)[_0x44eb97(0x1f4)](_0x448cec,_0x550d29,_0x49a8bf),_0x41ddfb[_0x44eb97(0x204)]({'code':0x0});}catch(_0x5da6fd){return console[_0x44eb97(0x256)](_0x5da6fd),_0x2ed080[_0x44eb97(0x2a9)][_0x44eb97(0x298)](_0x41ddfb,_0x41ddfb['__'](_0x44eb97(0x2cc)));}});function getMovieLibrary(_0x28e845,_0x3ad36a,_0x42e94f){const _0x2e12d2=_0xfde149;let _0x386e52=_0x28e845[_0x2e12d2(0x244)][_0x2e12d2(0x27e)]||0x0,_0x4e0f52=_0x42e94f||_0x28e845[_0x2e12d2(0x244)][_0x2e12d2(0x235)]||0x32,_0x4c62cf=_0x28e845[_0x2e12d2(0x244)][_0x2e12d2(0x222)]||'',_0x35a078=_0x28e845['body'][_0x2e12d2(0x278)]||_0x2e12d2(0x1dd),_0x227a62=_0x28e845['body']['orderType']||_0x2e12d2(0x2f2);if(![_0x2e12d2(0x1dd),_0x2e12d2(0x202)][_0x2e12d2(0x24f)](_0x35a078))return console[_0x2e12d2(0x256)](_0x2e12d2(0x2f1),_0x35a078),[];let _0x1e5ce8=[],_0x5d2ab2=[],_0x2498e5=_0x2e12d2(0x20b);_0x28e845[_0x2e12d2(0x2ee)][_0x2e12d2(0x225)]==0x1?_0x4c62cf&&(_0x2498e5+=_0x2e12d2(0x2b4),_0x5d2ab2[_0x2e12d2(0x1f2)]('%'+_0x4c62cf+'%')):(_0x2498e5=_0x2e12d2(0x226),_0x4c62cf&&(_0x2498e5+=_0x2e12d2(0x2fe),_0x5d2ab2[_0x2e12d2(0x1f2)]('%'+_0x4c62cf+'%')));_0x2498e5+='\x20ORDER\x20BY\x20'+_0x35a078+'\x20'+_0x227a62+_0x2e12d2(0x207),_0x5d2ab2['push'](_0x4e0f52),_0x5d2ab2[_0x2e12d2(0x1f2)](_0x386e52),_0x1e5ce8=_0x28e845['app'][_0x2e12d2(0x315)][_0x2e12d2(0x31e)](_0x2498e5)[_0x2e12d2(0x318)](_0x5d2ab2);if(_0x1e5ce8['length']<0x1)return[];for(let _0x48ad95 in _0x1e5ce8){let _0x58b468=_0x1e5ce8[_0x48ad95];try{let _0x481d14=JSON['parse'](_0x58b468[_0x2e12d2(0x313)]),_0x4c4611=[];for(let _0xca22f6 of _0x481d14){let _0x33b2af=dbUserTable['findWithField'](_0x28e845[_0x2e12d2(0x2a9)][_0x2e12d2(0x1cd)],_0xca22f6,_0x2e12d2(0x27f));_0x4c4611['push'](_0x33b2af);}_0x1e5ce8[_0x48ad95][_0x2e12d2(0x229)]=_0x4c4611;}catch(_0x2d8b41){console[_0x2e12d2(0x256)](_0x2d8b41);}let _0x221765=getMoviesByParams(_0x3ad36a,_0x28e845,null,_0x2e12d2(0x27c),0x4,0x0,'desc',null,null,null,null,null,null,null,null,null,_0x1e5ce8[_0x48ad95]['id']);_0x1e5ce8[_0x48ad95][_0x2e12d2(0x241)]=_0x221765;}return _0x1e5ce8;}router[_0xfde149(0x266)](_0xfde149(0x324),(_0xd861fd,_0x2006ac,_0x385ada)=>{const _0x23f18c=_0xfde149;let _0x1ab4a9=_0xd861fd['body'][_0x23f18c(0x202)],_0x50cae3=_0xd861fd['body']['libraryId'],_0x506f1f=_0xd861fd['body'][_0x23f18c(0x32a)],_0x3d785a=_0xd861fd[_0x23f18c(0x244)][_0x23f18c(0x312)],_0xcef681=_0xd861fd[_0x23f18c(0x244)][_0x23f18c(0x2d9)],_0xc4fec6=_0xd861fd[_0x23f18c(0x244)][_0x23f18c(0x1c9)];if(_0xc4fec6=='GET'){let _0x1d4397=getMovieLibrary(_0xd861fd,_0x2006ac);return _0x2006ac[_0x23f18c(0x204)]({'code':0x0,'data':_0x1d4397});}else{if(_0xd861fd[_0x23f18c(0x2ee)][_0x23f18c(0x225)]!=0x1)return _0xd861fd[_0x23f18c(0x2a9)][_0x23f18c(0x298)](_0x2006ac,_0x2006ac['__']('noPermission'));if(_0xc4fec6==_0x23f18c(0x2cd)||_0xc4fec6==_0x23f18c(0x299)){if(!_0x506f1f||!_0x506f1f instanceof Array||_0x506f1f['length']<0x1)return _0xd861fd['app'][_0x23f18c(0x298)](_0x2006ac,_0x2006ac['__'](_0x23f18c(0x2cc)));if(_0xcef681){if(_0x3d785a!=null&&!_0x3d785a instanceof Array)return _0xd861fd[_0x23f18c(0x2a9)][_0x23f18c(0x298)](_0x2006ac,_0x2006ac['__'](_0x23f18c(0x2cc)));}if(sqliteUtil[_0x23f18c(0x26b)](JSON[_0x23f18c(0x30c)](_0x506f1f))==!![])return _0xd861fd[_0x23f18c(0x2a9)]['returnErrMsg'](_0x2006ac,_0x23f18c(0x2b9));}if(_0xc4fec6==_0x23f18c(0x299)&&_0x50cae3)_0xd861fd[_0x23f18c(0x2a9)][_0x23f18c(0x315)]['prepare']('UPDATE\x20movie_library\x20SET\x20title=?,path_list=?,share_for_subuser=?,share_uid=?\x20WHERE\x20id=?')[_0x23f18c(0x1f4)](_0x1ab4a9,JSON[_0x23f18c(0x30c)](_0x506f1f),_0xcef681,JSON[_0x23f18c(0x30c)](_0x3d785a),_0x50cae3);else{if(_0xc4fec6==_0x23f18c(0x205)&&_0x50cae3)_0xd861fd['app']['dbFileIndex'][_0x23f18c(0x31e)](_0x23f18c(0x27a))[_0x23f18c(0x1f4)](_0x50cae3);else{if(_0xc4fec6==_0x23f18c(0x2cd))_0xd861fd[_0x23f18c(0x2a9)][_0x23f18c(0x315)]['prepare'](_0x23f18c(0x282))['run'](_0x1ab4a9,JSON[_0x23f18c(0x30c)](_0x506f1f),_0xcef681,JSON[_0x23f18c(0x30c)](_0x3d785a),_0xd861fd[_0x23f18c(0x2ee)]['id']);else return _0xd861fd[_0x23f18c(0x2a9)][_0x23f18c(0x298)](_0x2006ac,_0x2006ac['__']('noPermission'));}}return _0x2006ac[_0x23f18c(0x204)]({'code':0x0});}}),module[_0xfde149(0x262)]=router;