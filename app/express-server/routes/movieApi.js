const _0x680ecf=_0x1d7e;(function(_0x39d749,_0x251cd6){const _0x5c4a25=_0x1d7e,_0x2b0628=_0x39d749();while(!![]){try{const _0x39c5a6=parseInt(_0x5c4a25(0x252))/0x1*(parseInt(_0x5c4a25(0x168))/0x2)+parseInt(_0x5c4a25(0x269))/0x3+-parseInt(_0x5c4a25(0x276))/0x4+parseInt(_0x5c4a25(0x182))/0x5*(-parseInt(_0x5c4a25(0x1e5))/0x6)+parseInt(_0x5c4a25(0x289))/0x7+-parseInt(_0x5c4a25(0x14f))/0x8+parseInt(_0x5c4a25(0x1f3))/0x9*(parseInt(_0x5c4a25(0x20e))/0xa);if(_0x39c5a6===_0x251cd6)break;else _0x2b0628['push'](_0x2b0628['shift']());}catch(_0x85eb2b){_0x2b0628['push'](_0x2b0628['shift']());}}}(_0x3423,0xaf883));var express=require(_0x680ecf(0x259)),router=express['Router']();let path=require('path');const dbFileIndexTable=require(_0x680ecf(0x172)),dbUserTable=require('../../db/dbUserTable');var fs=require('fs');function _0x3423(){const _0x4ee6e0=['\x20order\x20by\x20m.create_time\x20desc\x20limit\x2010','238959IGnIIz','poster.jpeg','/deleteCollection','REPLACE\x20INTO\x20movie_library(title,path_list,share_for_subuser,share_uid,user_id)\x20VALUES(\x20?,?,?,?,?)','/getMoviesByGenres','\x20SET\x20show_in_list\x20=0,is_tvplay=1\x20WHERE\x20path=?','-FHD','isTvSeries','movieIndexId','(filename\x20like\x20?\x20or\x20filename\x20like\x20?\x20\x20or\x20filename\x20like\x20?)','deleteFavorite','/getTvList','power_get','movieHomeShowHistory','value','login.pwdErr','\x20WHERE\x20is_file=0\x20and\x20(path=?\x20or\x20path\x20like\x20?)\x20','pageCount','all','/getTvSeriesDetail','/setTitleAndEnding','(filename\x20like\x20?\x20or\x20filename\x20like\x20?\x20or\x20filename\x20like\x20?)','\x20OFFSET\x20','/getMovieDetail','seasonCount','parseNfo','error\x20data','170YYzMqM','.srt','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20filename\x20like\x20?','end','listType','id,username','prepare','join','\x20and\x20filename\x20>=\x20?\x20','SAMPLE\x27\x20\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','checkPath','getAllFavoriteByWhere','body','folder_cover_path','/addIndexToCollection','show_name','.vtt','/getIndexDetail','/clearHistory','timestamp','getById','power_change','\x20from\x20movie_history\x20as\x20m\x20inner\x20join\x20file_index_movie\x20as\x20f\x20on\x20m.index_id=f.id\x20where\x20m.user_id=','\x20\x20WHERE\x20','../utils/fileUtils','-QHD','is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20and\x20is_tvplay!=1','-seasonCount-','trim','endsWith','type','movie_index_id','subtitleSize','existsSync','\x20as\x20f\x20WHERE\x20','currentUser','SELECT\x20index_id\x20FROM\x20movie_history\x20where\x20index_id\x20in\x20','\x20AND\x20is_tvplay==0','is_tvplay','sourceFolderId','\x20\x20WHERE\x20\x20type=2\x20and\x20is_file=1\x20and\x20path=?\x20and\x20is_tvplay=1\x20and\x20filename_number\x20is\x20null','SELECT\x20count(*)\x20as\x20count\x20FROM\x20file_index_movie\x20WHERE\x20path\x20like\x20?\x20and\x20is_file=1\x20and\x20type=2\x20and\x20show_in_list=1','saveMovieInfoToDb','SPECIALS','EXTRA','SELECT\x20*\x20from\x20','movieTvCache','SELECT\x20id,filename\x20FROM\x20','/addHistory','m.time,\x20f.id,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id,f.movie_douban_score,f.movie_info_name,f.show_name','getFavoriteList','replace','sourceList','then','sort','favorite','movie_genres','dataValue','../../utils/movieSeasonUtil','create_time','seasonList','tvFolderName','search','stat','dbFileIndex','\x20WHERE\x20title\x20like\x20?','needLogoPathAndFanart','json','4261yUjNsx','poster.jpg','getExcludePathWhereStr','tvplay','/getTvHomeData2','UPDATE\x20file_index_movie\x20SET\x20collection_id=0\x20WHERE\x20id\x20in\x20','log','express','addScanTask','DELETE','getTvCount','ignoreSeasonList','doUserCanGet','get','SELECT\x20*\x20FROM\x20movie_keys\x20where\x20key_type=\x27movie_language\x27\x20and\x20\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20100','enablePwd','is_file','movie','updateByWhere','ordinary','./photoApiUtils','\x20SET\x20filename_number=?\x20\x20WHERE\x20\x20id=?','stringify','2956929mqDFVX','history','fileExist','.jpg','\x20\x20AND\x20is_file=1\x20AND\x20show_in_list=1\x20ORDER\x20BY\x20','share_uid','-UHD','readdir','extraAndSpecialsList','order\x20field\x20error','logo_path','\x20SET\x20show_in_list\x20=1,is_tvplay=0,show_name\x20=\x27\x27,show_name_fl=null\x20WHERE\x20path=\x27','folder','3355764RoRJCe','post','-coverCache-','push','delete','\x27\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20\x27','SELECT\x20*\x20FROM\x20movie_library\x20','power_delete','%fanart%','\x20WHERE\x20path=?\x20and\x20is_file=1\x20and\x20type=2\x20order\x20by\x20filename','count','\x20AND\x20title\x20like\x20?\x20','findByTitle','firstLetter','GET','UPDATE\x20movie_history\x20SET\x20time=?,create_time=?\x20where\x20index_id=?\x20AND\x20user_id=?','\x27\x20or\x20filename\x20like\x20\x27','title','(filename\x20like\x20?)','4260004ffXQcI','getPathWhere','pwdCanNotBeNull','movieDirectors','getUserPathWhere','SELECT\x20*\x20FROM\x20movie_library\x20WHERE\x20share_for_subuser=1','indexIdList','tvFolderPath','duration','\x20as\x20f\x20WHERE\x20\x20is_file=1\x20and\x20type=2\x20and\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20LIMIT\x20200','useTvSeriesInfo','data','getSeasonNumber','basename','\x20\x20WHERE\x20\x20type=2\x20and\x20is_file=1\x20and\x20path=?\x20and\x20is_tvplay=1\x20','fromName','../utils/movieUtil','user_list','needTvCount','shareUidList','is_admin','coverPath','\x20order\x20by\x20filename_number,filename','\x20and\x20filename_number\x20>=\x20?\x20','\x20AND\x20id\x20NOT\x20IN\x20(','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20\x27poster.%\x27\x20or\x20filename\x20like\x20\x27POSTER.%\x27\x20or\x20filename\x20like\x20\x27movie.%\x27\x20or\x20filename\x20like\x20\x27folder.%\x27\x20or\x20filename\x20like\x20\x27cover.%\x27\x20or\x20filename\x20like\x20\x27thumb.%\x27)','SELECT\x20*\x20FROM\x20movie_keys\x20WHERE\x20key_type=?\x20and\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20200','toLowerCase','app','operation','\x20id,collection_id,movie_douban_score,movie_info_name,movie_year,movie_info_state,path,is_tvplay,filename,ext,type,width,height,duration,size,movie_douban_id,movie_imdb_id,show_name,show_in_list','\x20or\x20','\x20SET\x20show_in_list=1\x20WHERE\x20id=?','includes','\x20FROM\x20','UPDATE\x20file_index_movie\x20SET\x20movie_info_state=0\x20WHERE\x20(path\x20like\x20?\x20OR\x20path=?)','select\x20id\x20from\x20file_index_movie\x20where\x20(\x20path\x20like\x20?\x20OR\x20path=?)\x20and\x20is_file=1\x20and\x20type=2','parse','orderType','\x20and\x20path=?\x20and\x20is_tvplay=1\x20','videoPath','\x20id,title,data,enable_pwd,collection_cover_path,data_value,create_time,share_for_subuser\x20','clearlogo.%','1486400IWFBkj','fileFullPath','specials','movieActors','/deleteIndex','ignoreTvList','noPermission','INDEX_TABLE_NAME_MOVIE','/getMovieKeys','movieShowMatchName','needSeasonCount','sameFolderImgList','../../db/dbSourceFolderTable','%poster%','path','EXTRA\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','SELECT\x20*\x20from\x20movie_history\x20where\x20user_id=?\x20and\x20index_id=?','/movieFavorite','Specials\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','pathList','smart','\x20type=2\x20and\x20is_file=1','../../utils/movieInfoUtil','UPDATE\x20file_index_movie\x20SET\x20collection_id=?\x20WHERE\x20id\x20in\x20','m.time,\x20f.id,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id','298sHDfzM','startScanPath','now','DELETE\x20FROM\x20movie_library\x20\x20WHERE\x20id=?','\x20order\x20by\x20m.create_time\x20desc\x20limit\x201','\x20order\x20by\x20','/getTvHomeData','movieLanguage','SELECT\x20','time','../../db/dbFileIndexTable','\x20AND\x20collection_id=0','\x20and\x20title\x20like\x20?','tvCount','check_time','path_list','movieGenres','offset','movie_info_name','/removeIndexFromCollection','isAdmin','FAVORITE','SELECT\x20id,title,enable_pwd,create_time\x20FROM\x20movie_collection\x20where\x20id=?\x20and\x20pwd=?','Extra','catch','orderField','85WRINEx','key_value','whereStr','\x20AND\x20(filename_fl=?\x20OR\x20show_name_fl=?\x20OR\x20movie_info_name_fl=?)','SELECT\x20*\x20from\x20movie_collection\x20where\x20id=?','ignoreMatchInfo','desc','Value\x20out\x20of\x20limit','sourceType','\x20AND\x20share_for_subuser\x20=\x20?\x20','returnErrMsg','operationFail','run','replaceAll','enable_pwd','startsWith','\x27\x20and\x20type=1\x20and\x20is_file=1\x20limit\x2020','Sample\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','ADD','getTime','%season','SELECT\x20count(*)\x20as\x20count\x20FROM\x20','\x20AND\x20path\x20not\x20like\x20?','folderName','SWITCH_MOVIE_INFO','endDuration','sample\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20)\x20LIMIT\x20200','\x20AND\x20collection_id\x20=\x20','searchStr','\x20order\x20by\x20create_time\x20desc','set','error\x20pathList','extra','getAllByWhereAndField','indexId','collection_id','movieHomeShowMyMedia','SELECT\x20*\x20from\x20movie_history\x20WHERE\x20index_id=?\x20and\x20user_id=?','UPDATE\x20movie_library\x20SET\x20title=?,path_list=?,share_for_subuser=?,share_uid=?\x20WHERE\x20id=?','UPDATE\x20','decodePath','\x20and\x20show_in_list=1','searchValue','m.time,\x20f.id,f.is_tvplay,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id,f.movie_douban_score,f.movie_info_name,f.show_name','send','SELECT\x20*\x20FROM\x20movie_keys\x20where\x20key_type=\x27movie_regions\x27\x20and\x20\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20100','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20','/getHistory','1080p\x203mbps','DELETE\x20FROM\x20movie_collection\x20WHERE\x20id=?','checkSqlInjection','pageSize','sourceFolderList','paramsList','Extra\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%','sample','REPLACE\x20INTO\x20movie_history(index_id,user_id,time,create_time)\x20VALUES(\x20?,?,?,?)','substr','UPDATE\x20file_index_movie\x20set\x20check_time=?\x20WHERE\x20id=?','collectionId','fanart.%','length','dbOther','UPDATE\x20file_index_movie\x20SET\x20collection_id=0\x20where\x20collection_id=?','-fanart.%','ignore_match_info','-HD','excludePathMovie','ALL','sortField','genresType','pwd','movie_regions','seasonNumber','\x20FROM\x20\x20movie_collection\x20WHERE\x20type=?','dirname','\x20SELECT\x20','Sample','excludeFilenameMovie','sep','getCountByWhere','shareForSubUser','libraryId','index_id','openDuration','\x20type=2','movieCollectionNotExist','coverMovie','dialog','filename','\x20as\x20f\x20WHERE\x20path\x20like\x20?\x20and\x20is_tvplay=1\x20and\x20is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20limit\x20200','getFavorite','\x20AND\x20is_tvplay==1','extname','../utils/sqliteUtil','getPhotoByParams','EDIT','\x20LIMIT\x20?\x20OFFSET\x20?','\x20AND\x20','330618WhbLWy','heic','name','SELECT\x20id\x20FROM\x20','index.videoInfoReadFail','media_type','/addCollection','UPDATE\x20movie_collection\x20SET\x20title=?,data=?,enable_pwd=?,pwd=?,collection_cover_path=?,data_value=?,share_for_subuser=?\x20WHERE\x20id=?','\x20AND\x20(','.ass','SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=\x27','/getMovieHomeData','has'];_0x3423=function(){return _0x4ee6e0;};return _0x3423();}let sha256=require('sha256');function _0x1d7e(_0x4da1b1,_0x835822){const _0x342304=_0x3423();return _0x1d7e=function(_0x1d7e10,_0x2309e5){_0x1d7e10=_0x1d7e10-0x12b;let _0x91626a=_0x342304[_0x1d7e10];return _0x91626a;},_0x1d7e(_0x4da1b1,_0x835822);}const dbConfigTable=require('../../db/dbConfigTable'),dbSourceFolderTable=require(_0x680ecf(0x15b)),nfoUtil=require('../../utils/nfoUtil'),dbMovieFavorite=require('../../db/dbMovieFavorite'),movieUtil=require(_0x680ecf(0x134));let fileUtil=require(_0x680ecf(0x226));const sqliteUtil=require(_0x680ecf(0x1e0)),photoApiUtils=require(_0x680ecf(0x266));let movieSeasonUtil=require(_0x680ecf(0x248)),movieInfoUtil=require(_0x680ecf(0x165));const dbScanTaskTable=require('../../db/dbScanTaskTable');let movieFieldStr=_0x680ecf(0x142);function getTvSeriesPoster(_0x53b426){const _0x4d1f1c=_0x680ecf;let _0x276b0c='',_0x4f01fa=path[_0x4d1f1c(0x215)](path[_0x4d1f1c(0x1cd)](_0x53b426[_0x4d1f1c(0x15d)]),_0x4d1f1c(0x253));return fs[_0x4d1f1c(0x22f)](_0x4f01fa)&&(_0x276b0c=_0x4f01fa),!_0x276b0c&&(_0x4f01fa=path[_0x4d1f1c(0x215)](path[_0x4d1f1c(0x1cd)](_0x53b426[_0x4d1f1c(0x15d)]),_0x4d1f1c(0x1f4)),fs[_0x4d1f1c(0x22f)](_0x4f01fa)&&(_0x276b0c=_0x4f01fa)),!_0x276b0c&&(_0x4f01fa=path[_0x4d1f1c(0x215)](path[_0x4d1f1c(0x1cd)](_0x53b426['path']),'folder.jpg'),fs['existsSync'](_0x4f01fa)&&(_0x276b0c=_0x4f01fa)),!_0x276b0c&&(_0x4f01fa=path[_0x4d1f1c(0x215)](path[_0x4d1f1c(0x1cd)](_0x53b426['path']),'thumb.jpg'),fs['existsSync'](_0x4f01fa)&&(_0x276b0c=_0x4f01fa)),_0x276b0c;}router['post'](_0x680ecf(0x206),(_0x4eefcc,_0x65b093,_0x29d5ee)=>{const _0x3d9559=_0x680ecf;let _0x1959b6=_0x4eefcc[_0x3d9559(0x21a)]['id'],_0x4726d9=dbFileIndexTable[_0x3d9559(0x222)](_0x4eefcc[_0x3d9559(0x140)][_0x3d9559(0x24e)],_0x1959b6,dbFileIndexTable[_0x3d9559(0x156)]);if(!_0x4726d9)return _0x4eefcc[_0x3d9559(0x140)]['returnErrMsg'](_0x65b093,_0x65b093['__']('index.videoInfoReadFail'));if(dbUserTable[_0x3d9559(0x25e)](_0x4eefcc,_0x65b093,_0x3d9559(0x263),'power_get',_0x4726d9[_0x3d9559(0x15d)])==!![]){nfoUtil['parseNfoTvSeries'](_0x4726d9)['then'](_0xbcba95=>{const _0x4c4a82=_0x3d9559;_0x4726d9=_0xbcba95,_0x4eefcc[_0x4c4a82(0x21a)]['needLogoPathAndFanart']=!![],_0x4eefcc[_0x4c4a82(0x21a)][_0x4c4a82(0x12e)]=0x1,_0x4726d9=addFolderCoverPath(_0x65b093,_0x4eefcc,_0x4726d9),_0x236061();})[_0x3d9559(0x180)](_0x1d44bf=>{const _0x22cb94=_0x3d9559;console[_0x22cb94(0x258)]('未找到NFO信息',_0x1d44bf),_0x4726d9=addFolderCoverPath(_0x65b093,_0x4eefcc,_0x4726d9),_0x4726d9[_0x22cb94(0x17a)]=_0x4726d9[_0x22cb94(0x24b)],_0x236061();});function _0x236061(){const _0x5b4b9b=_0x3d9559;addTvFolderPathAndName(_0x4726d9),setLogoAndFanart(_0x4eefcc,_0x4726d9,_0x4726d9[_0x5b4b9b(0x12b)]);let _0x416650=dbMovieFavorite[_0x5b4b9b(0x1dd)](_0x4eefcc['app'][_0x5b4b9b(0x24e)],_0x4eefcc[_0x5b4b9b(0x231)]['id'],_0x4726d9['id']);_0x416650?_0x4726d9[_0x5b4b9b(0x245)]=0x1:_0x4726d9['favorite']=0x0;let _0x70b12c={'code':0x0,'movieIndex':_0x4726d9},_0x260d5c=_0x5b4b9b(0x170)+movieFieldStr+_0x5b4b9b(0x146)+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+'\x20as\x20f\x20WHERE\x20path\x20like\x20?\x20and\x20is_tvplay=1\x20and\x20is_file=1\x20and\x20type=2\x20and\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(path\x20like\x20\x27%'+path['sep']+_0x5b4b9b(0x1b8)+path[_0x5b4b9b(0x1d1)]+'extra\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path[_0x5b4b9b(0x1d1)]+_0x5b4b9b(0x15e)+path[_0x5b4b9b(0x1d1)]+_0x5b4b9b(0x161)+path[_0x5b4b9b(0x1d1)]+'SPECIALS\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path['sep']+'specials\x27\x20or\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20path\x20like\x20\x27%'+path['sep']+_0x5b4b9b(0x193)+path['sep']+_0x5b4b9b(0x217)+path[_0x5b4b9b(0x1d1)]+_0x5b4b9b(0x19c),_0xb0d22d=_0x4eefcc['app'][_0x5b4b9b(0x24e)][_0x5b4b9b(0x214)](_0x260d5c)[_0x5b4b9b(0x205)](path['dirname'](_0x4726d9[_0x5b4b9b(0x15d)])+path[_0x5b4b9b(0x1d1)]+'%');for(let _0x3fd1e8 of _0xb0d22d){_0x3fd1e8['folderName']=path[_0x5b4b9b(0x131)](_0x3fd1e8[_0x5b4b9b(0x15d)]),_0x3fd1e8[_0x5b4b9b(0x234)]=0x0;}_0xb0d22d[_0x5b4b9b(0x1bf)]>0x0&&(_0x70b12c['extraAndSpecialsList']=_0xb0d22d),fs[_0x5b4b9b(0x24d)](_0x4726d9['tvFolderPath'],(_0x1245b7,_0x1174f7)=>{const _0x530cab=_0x5b4b9b;_0x70b12c['fileExist']=_0x1245b7?0x0:0x1,_0x65b093[_0x530cab(0x251)](_0x70b12c),_0x4726d9[_0x530cab(0x234)]==0x1&&_0x4726d9[_0x530cab(0x12b)]&&(dbScanTaskTable[_0x530cab(0x25a)](_0x4eefcc[_0x530cab(0x140)][_0x530cab(0x1c0)],'movie',_0x4726d9['tvFolderPath']),process[_0x530cab(0x1ae)]({'type':_0x530cab(0x169),'source_type':'movie','restartWatcher':![]}));});}}}),router['post'](_0x680ecf(0x20a),(_0x24eaa7,_0x531c75,_0x23e14b)=>{const _0x4775c7=_0x680ecf;let _0x47cb11=_0x24eaa7['body']['id'],_0x27eff3=dbFileIndexTable[_0x4775c7(0x222)](_0x24eaa7[_0x4775c7(0x140)]['dbFileIndex'],_0x47cb11,dbFileIndexTable[_0x4775c7(0x156)]);if(!_0x27eff3)return _0x24eaa7[_0x4775c7(0x140)][_0x4775c7(0x18c)](_0x531c75,_0x531c75['__'](_0x4775c7(0x1e9)));if(dbUserTable[_0x4775c7(0x25e)](_0x24eaa7,_0x531c75,_0x4775c7(0x263),_0x4775c7(0x1ff),_0x27eff3[_0x4775c7(0x15d)])==!![]){nfoUtil['parseNfo'](_0x27eff3,!![],![])[_0x4775c7(0x243)](_0x2acbd1=>{const _0x40e54f=_0x4775c7;_0x27eff3=_0x2acbd1,_0x24eaa7[_0x40e54f(0x21a)]['needLogoPathAndFanart']=!![],_0x27eff3=addFolderCoverPath(_0x531c75,_0x24eaa7,_0x27eff3),movieInfoUtil[_0x40e54f(0x238)](_0x24eaa7['app'][_0x40e54f(0x24e)],_0x27eff3['id'],_0x2acbd1),_0x349caf();})['catch'](()=>{_0x27eff3=addFolderCoverPath(_0x531c75,_0x24eaa7,_0x27eff3),_0x349caf();});function _0x349caf(){const _0x5d0547=_0x4775c7;let _0x4872f9=dbMovieFavorite[_0x5d0547(0x1dd)](_0x24eaa7['app']['dbFileIndex'],_0x24eaa7[_0x5d0547(0x231)]['id'],_0x27eff3['id']);_0x4872f9?_0x27eff3[_0x5d0547(0x245)]=0x1:_0x27eff3['favorite']=0x0;let _0x11034d=null;if(_0x27eff3[_0x5d0547(0x234)]==0x1){let _0x4395ce=_0x24eaa7[_0x5d0547(0x140)][_0x5d0547(0x24e)]['prepare'](_0x5d0547(0x1e8)+dbFileIndexTable[_0x5d0547(0x156)]+_0x5d0547(0x132))[_0x5d0547(0x205)](_0x27eff3[_0x5d0547(0x15d)]),_0x247e85='(';for(let _0x152875 in _0x4395ce){_0x247e85+=_0x4395ce[_0x152875]['id'],_0x152875!=_0x4395ce[_0x5d0547(0x1bf)]-0x1&&(_0x247e85+=',');}_0x247e85+=')';let _0x30dfc7=_0x24eaa7['app'][_0x5d0547(0x24e)]['prepare'](_0x5d0547(0x232)+_0x247e85+_0x5d0547(0x19f))[_0x5d0547(0x25f)]();_0x30dfc7&&(_0x11034d=dbFileIndexTable[_0x5d0547(0x222)](_0x24eaa7[_0x5d0547(0x140)][_0x5d0547(0x24e)],_0x30dfc7[_0x5d0547(0x1d5)],dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']));}let _0x113cb0={'code':0x0,'movieIndex':_0x27eff3,'lastTvEpisodeIndex':_0x11034d},_0x225ee0=_0x5d0547(0x170)+movieFieldStr+_0x5d0547(0x146)+dbFileIndexTable[_0x5d0547(0x156)]+_0x5d0547(0x12d),_0x26bdea=_0x24eaa7[_0x5d0547(0x140)]['dbFileIndex'][_0x5d0547(0x214)](_0x225ee0)[_0x5d0547(0x205)](_0x27eff3[_0x5d0547(0x15d)]+(path[_0x5d0547(0x1d1)]+_0x5d0547(0x17f)),_0x27eff3[_0x5d0547(0x15d)]+(path[_0x5d0547(0x1d1)]+_0x5d0547(0x1a2)),_0x27eff3[_0x5d0547(0x15d)]+(path[_0x5d0547(0x1d1)]+_0x5d0547(0x23a)),_0x27eff3['path']+(path[_0x5d0547(0x1d1)]+'Specials'),_0x27eff3[_0x5d0547(0x15d)]+(path[_0x5d0547(0x1d1)]+_0x5d0547(0x151)),_0x27eff3[_0x5d0547(0x15d)]+(path['sep']+_0x5d0547(0x239)),_0x27eff3['path']+(path[_0x5d0547(0x1d1)]+_0x5d0547(0x1cf)),_0x27eff3[_0x5d0547(0x15d)]+(path['sep']+'SAMPLE'),_0x27eff3['path']+(path[_0x5d0547(0x1d1)]+'sample'));for(let _0x351968 of _0x26bdea){_0x351968[_0x5d0547(0x199)]=path[_0x5d0547(0x131)](_0x351968[_0x5d0547(0x15d)]);}_0x26bdea[_0x5d0547(0x1bf)]>0x0&&(_0x113cb0[_0x5d0547(0x271)]=_0x26bdea);let _0x5ab116=path[_0x5d0547(0x131)](_0x27eff3[_0x5d0547(0x15d)])[_0x5d0547(0x13f)]();(_0x5ab116=='extra'||_0x5ab116==_0x5d0547(0x151)||_0x5ab116==_0x5d0547(0x1b9))&&(_0x27eff3[_0x5d0547(0x234)]=0x0);let _0x5b080b=[];try{let _0x293946=_0x24eaa7[_0x5d0547(0x140)][_0x5d0547(0x24e)]['prepare'](_0x5d0547(0x1ef)+_0x27eff3[_0x5d0547(0x15d)]+_0x5d0547(0x192))[_0x5d0547(0x205)]();for(let _0x5b7185 in _0x293946){let _0xe16c43=path[_0x5d0547(0x215)](_0x293946[_0x5b7185][_0x5d0547(0x15d)],_0x293946[_0x5b7185][_0x5d0547(0x1db)]);(_0x24eaa7['currentUser'][_0x5d0547(0x138)]==0x1||dbUserTable[_0x5d0547(0x25e)](_0x24eaa7,_0x531c75,_0x5d0547(0x275),'power_get',_0xe16c43,!![])==!![])&&_0x5b080b['push'](_0xe16c43);}_0x113cb0[_0x5d0547(0x15a)]=_0x5b080b;}catch(_0x1a6431){}let _0x282a10=path[_0x5d0547(0x215)](_0x27eff3[_0x5d0547(0x15d)],_0x27eff3[_0x5d0547(0x1db)]);fs[_0x5d0547(0x24d)](_0x282a10,(_0x4e147b,_0x40572a)=>{const _0x47c05d=_0x5d0547;_0x113cb0[_0x47c05d(0x26b)]=_0x4e147b?0x0:0x1,_0x113cb0[_0x47c05d(0x150)]=_0x282a10,_0x531c75[_0x47c05d(0x251)](_0x113cb0),_0x27eff3[_0x47c05d(0x234)]==0x1&&_0x27eff3[_0x47c05d(0x12b)]&&_0x27eff3[_0x47c05d(0x1fa)]!=0x1&&(dbScanTaskTable[_0x47c05d(0x25a)](_0x24eaa7[_0x47c05d(0x140)]['dbOther'],_0x47c05d(0x263),_0x27eff3[_0x47c05d(0x12b)]),process['send']({'type':_0x47c05d(0x169),'source_type':_0x47c05d(0x263),'restartWatcher':![]}));});}}}),router[_0x680ecf(0x277)](_0x680ecf(0x1fe),(_0x685f96,_0x172642,_0x16c13d)=>{const _0x2e3cfb=_0x680ecf;let _0x380538=_0x685f96[_0x2e3cfb(0x21a)]['id'],_0x143ccd=_0x685f96[_0x2e3cfb(0x21a)]['page']||0x0,_0x590f16=_0x685f96[_0x2e3cfb(0x21a)][_0x2e3cfb(0x1b5)]||0xa,_0x48e491=_0x685f96[_0x2e3cfb(0x21a)][_0x2e3cfb(0x19e)],_0x341a32=_0x685f96[_0x2e3cfb(0x21a)][_0x2e3cfb(0x133)],_0x58390e=_0x685f96[_0x2e3cfb(0x21a)][_0x2e3cfb(0x154)],_0x216fc6=_0x685f96[_0x2e3cfb(0x21a)][_0x2e3cfb(0x25d)],_0x12dc81=dbFileIndexTable[_0x2e3cfb(0x222)](_0x685f96[_0x2e3cfb(0x140)]['dbFileIndex'],_0x380538,dbFileIndexTable[_0x2e3cfb(0x156)]);if(!_0x12dc81)return _0x685f96[_0x2e3cfb(0x140)][_0x2e3cfb(0x18c)](_0x172642,_0x172642['__'](_0x2e3cfb(0x1e9)));let _0x36da9a=movieFieldStr,_0x30d6b7=[],_0x56554d=0x0;if(dbUserTable['doUserCanGet'](_0x685f96,_0x172642,_0x2e3cfb(0x263),'power_get',_0x12dc81[_0x2e3cfb(0x15d)])==!![]){if(_0x58390e==0x1)return _0x4637e1();let _0x344668=_0x685f96['app']['dbFileIndex'][_0x2e3cfb(0x214)](_0x2e3cfb(0x23d)+dbFileIndexTable[_0x2e3cfb(0x156)]+_0x2e3cfb(0x236))[_0x2e3cfb(0x205)](_0x12dc81[_0x2e3cfb(0x15d)]);for(let _0x3020ea in _0x344668){let _0x2e7d25=_0x344668[_0x3020ea];if(_0x2e7d25[_0x2e3cfb(0x1db)]){let _0x1a9376=movieUtil['getFilenameNumber'](_0x2e7d25[_0x2e3cfb(0x1db)]);_0x685f96['app'][_0x2e3cfb(0x24e)]['prepare'](_0x2e3cfb(0x1a9)+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+_0x2e3cfb(0x267))['run'](_0x1a9376,_0x2e7d25['id']);}}let _0x6afeff=dbUserTable[_0x2e3cfb(0x28d)](_0x685f96,_0x2e3cfb(0x263),_0x2e3cfb(0x1ff),!![]),_0x453591=[..._0x6afeff['paramsList']],_0xc16852=_0x2e3cfb(0x164);_0xc16852+=_0x6afeff[_0x2e3cfb(0x184)],_0xc16852+=_0x2e3cfb(0x14b),_0x453591['push'](_0x12dc81['path']);_0x48e491&&(_0xc16852+='\x20and\x20(filename\x20like\x20?\x20or\x20movie_info_name\x20like\x20?)\x20',_0x453591[_0x2e3cfb(0x279)]('%'+_0x48e491+'%','%'+_0x48e491+'%'));if(_0x341a32){let _0x33c0fe=movieUtil['getFilenameNumber'](_0x341a32);_0x33c0fe?(_0xc16852+=_0x2e3cfb(0x13b),_0x453591['push'](_0x33c0fe)):(_0xc16852+=_0x2e3cfb(0x216),_0x453591[_0x2e3cfb(0x279)](_0x341a32));}let _0x3ec768=_0xc16852+'';_0xc16852+=_0x2e3cfb(0x13a);let _0x3881fb=_0x2e3cfb(0x170)+_0x36da9a+_0x2e3cfb(0x146)+dbFileIndexTable[_0x2e3cfb(0x156)]+_0x2e3cfb(0x230)+_0xc16852+'\x20LIMIT\x20'+_0x590f16+_0x2e3cfb(0x209)+_0x143ccd*_0x590f16;_0x30d6b7=_0x685f96['app'][_0x2e3cfb(0x24e)][_0x2e3cfb(0x214)](_0x3881fb)[_0x2e3cfb(0x205)](_0x453591);let _0x20db55=_0x2e3cfb(0x197)+dbFileIndexTable[_0x2e3cfb(0x156)]+_0x2e3cfb(0x225)+_0x3ec768+'\x20',_0x499399=_0x685f96[_0x2e3cfb(0x140)][_0x2e3cfb(0x24e)]['prepare'](_0x20db55)[_0x2e3cfb(0x25f)](_0x453591);_0x56554d=_0x499399[_0x2e3cfb(0x280)];if(_0x30d6b7[_0x2e3cfb(0x1bf)]>0x0){let _0x308abc=0x0;for(let _0x234481 in _0x30d6b7){let _0x4ebb9e=_0x30d6b7[_0x234481];nfoUtil[_0x2e3cfb(0x20c)](_0x4ebb9e,!![],!![])['then'](_0x6afbcf=>{const _0x28bb21=_0x2e3cfb;_0x308abc+=0x1,_0x30d6b7[_0x234481]=_0x6afbcf,_0x30d6b7[_0x234481]=addFolderCoverPath(_0x172642,_0x685f96,_0x30d6b7[_0x234481],!![]),_0x308abc>=_0x30d6b7[_0x28bb21(0x1bf)]&&_0x4637e1();})[_0x2e3cfb(0x180)](()=>{_0x308abc+=0x1,_0x30d6b7[_0x234481]=addFolderCoverPath(_0x172642,_0x685f96,_0x30d6b7[_0x234481],!![]),_0x308abc>=_0x30d6b7['length']&&_0x4637e1();});}}else _0x4637e1();function _0x4637e1(){const _0x47ef5c=_0x2e3cfb;let _0x53699c={'code':0x0,'tvplayList':_0x30d6b7,'count':_0x56554d,'pageSize':_0x590f16};if(!_0x216fc6){let _0x45b1aa=path[_0x47ef5c(0x131)](_0x12dc81[_0x47ef5c(0x15d)]),_0x3738d8=movieSeasonUtil[_0x47ef5c(0x130)](_0x45b1aa);if(_0x3738d8>-0x1){let _0x1244a0='SELECT\x20'+_0x36da9a+_0x47ef5c(0x146)+dbFileIndexTable[_0x47ef5c(0x156)]+_0x47ef5c(0x1dc),_0x39362f=_0x685f96[_0x47ef5c(0x140)][_0x47ef5c(0x24e)][_0x47ef5c(0x214)](_0x1244a0)[_0x47ef5c(0x205)](path[_0x47ef5c(0x1cd)](_0x12dc81[_0x47ef5c(0x15d)])+path[_0x47ef5c(0x1d1)]+'%'),_0x1aad35=[];for(let _0x17890c of _0x39362f){let _0x25135d=path[_0x47ef5c(0x131)](_0x17890c[_0x47ef5c(0x15d)]),_0x3789ca=movieSeasonUtil['getSeasonNumber'](_0x25135d);_0x3789ca>-0x1&&(_0x17890c[_0x47ef5c(0x1cb)]=_0x3789ca,_0x1aad35[_0x47ef5c(0x279)](_0x17890c));}for(let _0x40962c of _0x1aad35){_0x40962c=addFolderCoverPath(_0x172642,_0x685f96,_0x40962c);let _0x51e5ec=dbFileIndexTable[_0x47ef5c(0x25c)](_0x685f96[_0x47ef5c(0x140)][_0x47ef5c(0x24e)],_0x40962c);_0x40962c[_0x47ef5c(0x175)]=_0x51e5ec[_0x47ef5c(0x280)];}_0x1aad35[_0x47ef5c(0x1bf)]>0x0&&(_0x1aad35[_0x47ef5c(0x244)](function(_0x6fed24,_0x437d9d){const _0x7fac31=_0x47ef5c;return _0x6fed24[_0x7fac31(0x1cb)]-_0x437d9d['seasonNumber'];}),_0x53699c[_0x47ef5c(0x24a)]=_0x1aad35);}}return _0x172642['json'](_0x53699c);}}}),router[_0x680ecf(0x277)](_0x680ecf(0x17b),(_0x135d84,_0x4066b5,_0x3e43fd)=>{const _0x5d25b1=_0x680ecf;let _0x8ff6a4=_0x135d84[_0x5d25b1(0x21a)][_0x5d25b1(0x28f)],_0x5c99c5=[];for(let _0x34311e of _0x8ff6a4){let _0x934f5e=dbFileIndexTable[_0x5d25b1(0x222)](_0x135d84['app'][_0x5d25b1(0x24e)],_0x34311e,dbFileIndexTable[_0x5d25b1(0x156)]);if(!_0x934f5e)continue;if(dbUserTable[_0x5d25b1(0x25e)](_0x135d84,_0x4066b5,'',_0x5d25b1(0x223),_0x934f5e['path'])!==!![])continue;let _0x271e8c=path[_0x5d25b1(0x131)](_0x934f5e['path']),_0x23fb48=movieSeasonUtil[_0x5d25b1(0x130)](_0x271e8c);if(_0x23fb48>-0x1){let _0x511b1f=path['join'](path['dirname'](_0x934f5e['path'])),_0xe57dfb=_0x135d84[_0x5d25b1(0x140)][_0x5d25b1(0x24e)][_0x5d25b1(0x214)]('select\x20id\x20from\x20file_index_movie\x20where\x20(\x20path\x20like\x20?\x20OR\x20path=?)\x20and\x20is_file=1\x20and\x20type=2')[_0x5d25b1(0x205)](_0x511b1f+path['sep']+'%',_0x511b1f);for(let _0xf0762f of _0xe57dfb){_0x5c99c5[_0x5d25b1(0x279)](_0xf0762f['id']);}}}_0x5c99c5[_0x5d25b1(0x1bf)]>0x0&&(_0x8ff6a4=[..._0x8ff6a4,..._0x5c99c5]);if(_0x8ff6a4[_0x5d25b1(0x1bf)]<0x1)return _0x4066b5[_0x5d25b1(0x251)]({'code':0x0});let _0x3aafc1='(';for(let _0x67a776 in _0x8ff6a4){_0x3aafc1+=_0x8ff6a4[_0x67a776],_0x67a776!=_0x8ff6a4[_0x5d25b1(0x1bf)]-0x1&&(_0x3aafc1+=',');}return _0x3aafc1+=')',_0x135d84['app'][_0x5d25b1(0x24e)][_0x5d25b1(0x214)](_0x5d25b1(0x257)+_0x3aafc1)[_0x5d25b1(0x18e)](),_0x4066b5[_0x5d25b1(0x251)]({'code':0x0});}),router[_0x680ecf(0x277)](_0x680ecf(0x21c),(_0x5457f9,_0x1fa138,_0x5e9e42)=>{const _0x44ef53=_0x680ecf;let _0x216a02=_0x5457f9[_0x44ef53(0x21a)][_0x44ef53(0x1bd)],_0x4941aa=_0x5457f9[_0x44ef53(0x21a)][_0x44ef53(0x1a4)],_0x37d657=_0x5457f9[_0x44ef53(0x21a)]['filepath'];function _0xd88478(_0x36ec8f){const _0x23eca6=_0x44ef53;let _0x5e6478=[];for(let _0x752d8 in _0x36ec8f){_0x5e6478[_0x23eca6(0x279)](_0x36ec8f[_0x752d8]['id']);}inSql='(';for(let _0x1bdcb7 in _0x5e6478){inSql+=_0x5e6478[_0x1bdcb7],_0x1bdcb7!=_0x5e6478['length']-0x1&&(inSql+=',');}return inSql+=')',inSql;}if(_0x216a02&&_0x4941aa){let _0x6f383c=dbFileIndexTable[_0x44ef53(0x222)](_0x5457f9['app'][_0x44ef53(0x24e)],_0x4941aa,dbFileIndexTable[_0x44ef53(0x156)]),_0x4db24c='('+_0x4941aa+')';if(!_0x6f383c)return _0x5457f9[_0x44ef53(0x140)]['returnErrMsg'](_0x1fa138,_0x1fa138['__'](_0x44ef53(0x18d)),_0x44ef53(0x1da));if(dbUserTable[_0x44ef53(0x25e)](_0x5457f9,_0x1fa138,'',_0x44ef53(0x223),_0x6f383c['path'])!==!![])return;let _0x471276=path[_0x44ef53(0x131)](_0x6f383c[_0x44ef53(0x15d)]),_0x13a49a=movieSeasonUtil[_0x44ef53(0x130)](_0x471276);_0x13a49a>-0x1&&(_0x6f383c['is_file']=0x0,_0x6f383c['path']=path[_0x44ef53(0x1cd)](_0x6f383c[_0x44ef53(0x15d)]),_0x6f383c['filename']='');if(_0x6f383c[_0x44ef53(0x262)]!=0x1){let _0x243070=path['join'](_0x6f383c[_0x44ef53(0x15d)],_0x6f383c[_0x44ef53(0x1db)]);console[_0x44ef53(0x258)](_0x44ef53(0x218),_0x243070);let _0x4eb3b1=_0x5457f9[_0x44ef53(0x140)][_0x44ef53(0x24e)][_0x44ef53(0x214)](_0x44ef53(0x148))[_0x44ef53(0x205)](_0x243070+path[_0x44ef53(0x1d1)]+'%',_0x243070);if(_0x4eb3b1[_0x44ef53(0x1bf)]<0x1)return _0x1fa138['json']({'code':0x0});_0x4db24c=_0xd88478(_0x4eb3b1);}return _0x5457f9[_0x44ef53(0x140)][_0x44ef53(0x24e)]['prepare'](_0x44ef53(0x166)+_0x4db24c+_0x44ef53(0x1ab))['run'](_0x216a02),_0x1fa138[_0x44ef53(0x251)]({'code':0x0});}else{if(_0x216a02&&_0x37d657){let _0xbfc150=_0x5457f9[_0x44ef53(0x140)][_0x44ef53(0x24e)][_0x44ef53(0x214)](_0x44ef53(0x148))['all'](_0x37d657+path[_0x44ef53(0x1d1)]+'%',_0x37d657),_0x3dd27b=_0xd88478(_0xbfc150);return _0x5457f9[_0x44ef53(0x140)]['dbFileIndex'][_0x44ef53(0x214)](_0x44ef53(0x166)+_0x3dd27b+_0x44ef53(0x1ab))[_0x44ef53(0x18e)](_0x216a02),_0x1fa138[_0x44ef53(0x251)]({'code':0x0});}else return _0x5457f9[_0x44ef53(0x140)][_0x44ef53(0x18c)](_0x1fa138,_0x1fa138['__']('operationFail'),_0x44ef53(0x1da));}});function getCollectionList(_0x1f5e2d,_0x18a85c,_0x404a5e){const _0x28fc7c=_0x680ecf;let _0x32010f=[],_0x1818bb=_0x1f5e2d[_0x28fc7c(0x21a)][_0x28fc7c(0x280)]||0x32,_0x349489=_0x1f5e2d[_0x28fc7c(0x21a)][_0x28fc7c(0x179)]||0x0,_0x4e1a0c=_0x1f5e2d[_0x28fc7c(0x21a)][_0x28fc7c(0x181)]||'id',_0x345928=_0x1f5e2d[_0x28fc7c(0x21a)][_0x28fc7c(0x14a)]||_0x28fc7c(0x188),_0x353026=_0x1f5e2d[_0x28fc7c(0x21a)][_0x28fc7c(0x24c)],_0x501864=_0x28fc7c(0x14d),_0x1916eb=_0x28fc7c(0x1ce)+_0x501864+_0x28fc7c(0x1cc),_0x416738=[_0x404a5e];_0x353026&&(_0x1916eb+=_0x28fc7c(0x281),_0x416738['push']('%'+_0x353026+'%'));_0x1f5e2d['currentUser'][_0x28fc7c(0x138)]!=0x1&&(_0x1916eb+=_0x28fc7c(0x18b),_0x416738[_0x28fc7c(0x279)](0x1));_0x1916eb+=_0x28fc7c(0x16d)+_0x4e1a0c+'\x20'+_0x345928+_0x28fc7c(0x1e3),_0x416738[_0x28fc7c(0x279)](_0x1818bb),_0x416738[_0x28fc7c(0x279)](_0x349489),_0x32010f=_0x1f5e2d['app']['dbFileIndex'][_0x28fc7c(0x214)](_0x1916eb)[_0x28fc7c(0x205)](_0x416738);for(let _0x22a143 of _0x32010f){if(_0x22a143[_0x28fc7c(0x190)]==0x1)continue;let _0x268b1c=getMoviesByParams(_0x18a85c,_0x1f5e2d,null,'id',0x1,0x0,'desc',null,null,null,null,null,null,_0x22a143['id']);_0x268b1c[_0x28fc7c(0x1bf)]>0x0&&(_0x22a143[_0x28fc7c(0x1d9)]=_0x268b1c[0x0]);}return _0x32010f;}router[_0x680ecf(0x277)]('/getCollection',(_0x42dd6b,_0x31eef7,_0xa3fe95)=>{const _0x727e58=_0x680ecf;let _0x43b82d=_0x42dd6b[_0x727e58(0x21a)][_0x727e58(0x22c)]||'ordinary',_0x329414=getCollectionList(_0x42dd6b,_0x31eef7,_0x43b82d);return _0x31eef7[_0x727e58(0x251)]({'code':0x0,'data':_0x329414});}),router[_0x680ecf(0x277)]('/checkCollectionPwd',(_0x56de7e,_0x309214,_0x429812)=>{const _0x5b0023=_0x680ecf;let _0x1dd264=_0x56de7e[_0x5b0023(0x21a)][_0x5b0023(0x1c9)],_0x13388d=_0x56de7e['body'][_0x5b0023(0x1bd)];if(!_0x1dd264)return _0x56de7e[_0x5b0023(0x140)][_0x5b0023(0x18c)](_0x309214,_0x309214['__']('pwdCanNotBeNull'),_0x5b0023(0x1da));_0x1dd264=sha256(_0x1dd264);let _0x5e0b29=_0x56de7e[_0x5b0023(0x140)][_0x5b0023(0x24e)][_0x5b0023(0x214)](_0x5b0023(0x17e))[_0x5b0023(0x25f)](_0x13388d,_0x1dd264);if(!_0x5e0b29)return _0x56de7e[_0x5b0023(0x140)][_0x5b0023(0x18c)](_0x309214,_0x309214['__'](_0x5b0023(0x202)),'dialog');return _0x309214['json']({'code':0x0,'data':_0x5e0b29});}),router[_0x680ecf(0x277)](_0x680ecf(0x1eb),(_0x346c98,_0x5e498d,_0x20c07a)=>{const _0x34424c=_0x680ecf;let _0x3934bb=_0x346c98[_0x34424c(0x21a)][_0x34424c(0x287)],_0x1cb869=_0x346c98[_0x34424c(0x21a)][_0x34424c(0x261)],_0x4939ec=_0x346c98[_0x34424c(0x21a)][_0x34424c(0x1c9)],_0x32ad24=_0x346c98['body']['collectionId'],_0x2dfbd4=_0x346c98[_0x34424c(0x21a)][_0x34424c(0x22c)]?_0x346c98[_0x34424c(0x21a)][_0x34424c(0x22c)]:'ordinary',_0x1d968b=_0x346c98[_0x34424c(0x21a)]['data']?_0x346c98[_0x34424c(0x21a)][_0x34424c(0x12f)]:'',_0x193b4e=_0x346c98[_0x34424c(0x21a)][_0x34424c(0x139)]?_0x346c98['body'][_0x34424c(0x139)]:'',_0x5c2d48=_0x346c98[_0x34424c(0x21a)]['shareForSubUser'];_0x5c2d48==null&&(_0x5c2d48=0x1);if(_0x2dfbd4==_0x34424c(0x163)){if(!_0x1d968b||!_0x1d968b[_0x34424c(0x1ac)]||sqliteUtil[_0x34424c(0x1b4)](_0x1d968b['searchValue'])==!![])return _0x346c98[_0x34424c(0x140)]['returnErrMsg'](_0x5e498d,_0x34424c(0x20d));}let _0x3ce8a8=_0x346c98[_0x34424c(0x21a)][_0x34424c(0x247)]?_0x346c98['body']['dataValue']:'';if(_0x346c98[_0x34424c(0x231)][_0x34424c(0x138)]!=0x1)return _0x346c98[_0x34424c(0x140)][_0x34424c(0x18c)](_0x5e498d,_0x5e498d['__'](_0x34424c(0x155)));if(_0x1cb869=='1'){if(!_0x4939ec)return _0x346c98[_0x34424c(0x140)][_0x34424c(0x18c)](_0x5e498d,_0x5e498d['__'](_0x34424c(0x28b)),'dialog');_0x4939ec=sha256(_0x4939ec);}return _0x32ad24?_0x346c98[_0x34424c(0x140)][_0x34424c(0x24e)][_0x34424c(0x214)](_0x34424c(0x1ec))[_0x34424c(0x18e)](_0x3934bb,JSON['stringify'](_0x1d968b),_0x1cb869+'',_0x4939ec,_0x193b4e,_0x3ce8a8,_0x5c2d48,_0x32ad24):_0x346c98['app']['dbFileIndex']['prepare']('REPLACE\x20INTO\x20movie_collection(title,enable_pwd,pwd,user_id,type,data,collection_cover_path,data_value,share_for_subuser)\x20VALUES(\x20?,?,?,?,?,?,?,?,?)')[_0x34424c(0x18e)](_0x3934bb,_0x1cb869+'',_0x4939ec,_0x346c98[_0x34424c(0x231)]['id']+'',_0x2dfbd4,JSON[_0x34424c(0x268)](_0x1d968b),_0x193b4e,_0x3ce8a8,_0x5c2d48),_0x5e498d[_0x34424c(0x251)]({'code':0x0});}),router[_0x680ecf(0x277)](_0x680ecf(0x1f5),(_0x36921c,_0x29b4af,_0x1cb7ac)=>{const _0x767685=_0x680ecf;let _0x84550e=_0x36921c[_0x767685(0x21a)][_0x767685(0x1bd)];if(_0x36921c[_0x767685(0x231)][_0x767685(0x138)]!=0x1)return _0x36921c[_0x767685(0x140)][_0x767685(0x18c)](_0x29b4af,_0x29b4af['__']('noPermission'));return _0x36921c['app']['dbFileIndex']['prepare'](_0x767685(0x1c1))[_0x767685(0x18e)](_0x84550e),_0x36921c['app'][_0x767685(0x24e)][_0x767685(0x214)](_0x767685(0x1b3))[_0x767685(0x18e)](_0x84550e),_0x29b4af['json']({'code':0x0});}),router[_0x680ecf(0x277)](_0x680ecf(0x220),(_0x22d581,_0x4c205e,_0x1bb00f)=>{const _0x38cb9a=_0x680ecf;return _0x22d581['app'][_0x38cb9a(0x24e)]['prepare']('DELETE\x20FROM\x20movie_history\x20where\x20user_id='+_0x22d581['currentUser']['id'])[_0x38cb9a(0x18e)](),_0x4c205e[_0x38cb9a(0x251)]({'code':0x0});}),router[_0x680ecf(0x277)](_0x680ecf(0x23e),(_0x530ae4,_0x346f09,_0x2e6674)=>{const _0x26a2ed=_0x680ecf;let _0x2c4f32=_0x530ae4['body'][_0x26a2ed(0x1a4)],_0xea28d2=_0x530ae4[_0x26a2ed(0x21a)][_0x26a2ed(0x171)],_0x27f1b2=dbFileIndexTable['getById'](_0x530ae4[_0x26a2ed(0x140)][_0x26a2ed(0x24e)],_0x2c4f32,dbFileIndexTable[_0x26a2ed(0x156)]);if(!_0x27f1b2)return _0x346f09[_0x26a2ed(0x251)]({'code':0x0});if(_0x27f1b2[_0x26a2ed(0x1a5)]){let _0x457f95=_0x530ae4[_0x26a2ed(0x140)]['dbFileIndex'][_0x26a2ed(0x214)](_0x26a2ed(0x186))[_0x26a2ed(0x25f)](_0x27f1b2[_0x26a2ed(0x1a5)]);if(_0x457f95&&_0x457f95[_0x26a2ed(0x190)]==0x1)return _0x346f09[_0x26a2ed(0x251)]({'code':0x0});}let _0x2562f7=_0x530ae4['app'][_0x26a2ed(0x24e)]['prepare'](_0x26a2ed(0x1a7))[_0x26a2ed(0x25f)](_0x2c4f32+'',_0x530ae4['currentUser']['id']+'');return _0x2562f7?_0x530ae4[_0x26a2ed(0x140)][_0x26a2ed(0x24e)][_0x26a2ed(0x214)](_0x26a2ed(0x285))[_0x26a2ed(0x18e)](_0xea28d2,new Date()[_0x26a2ed(0x195)](),_0x2c4f32+'',_0x530ae4[_0x26a2ed(0x231)]['id']+''):_0x530ae4[_0x26a2ed(0x140)][_0x26a2ed(0x24e)][_0x26a2ed(0x214)](_0x26a2ed(0x1ba))[_0x26a2ed(0x18e)](_0x2c4f32+'',_0x530ae4[_0x26a2ed(0x231)]['id']+'',_0xea28d2,new Date()[_0x26a2ed(0x195)]()),_0x346f09[_0x26a2ed(0x251)]({'code':0x0});}),router[_0x680ecf(0x277)](_0x680ecf(0x1b1),(_0x4a28bb,_0x25ab16,_0x18daf1)=>{const _0x312e8f=_0x680ecf;let _0x30a6df=_0x4a28bb['body']['indexId'],_0x54247d=_0x312e8f(0x167);if(_0x30a6df){let _0x68c1e4=_0x4a28bb['app'][_0x312e8f(0x24e)][_0x312e8f(0x214)](_0x312e8f(0x15f))[_0x312e8f(0x25f)](_0x4a28bb[_0x312e8f(0x231)]['id']+'',_0x30a6df+'');return _0x25ab16['json']({'code':0x0,'data':_0x68c1e4});}else{let _0x8e56e8=_0x312e8f(0x170)+_0x54247d+_0x312e8f(0x224)+_0x4a28bb['currentUser']['id']+'\x20order\x20by\x20m.create_time\x20desc\x20limit\x2050',_0x27ec5c=_0x4a28bb[_0x312e8f(0x140)][_0x312e8f(0x24e)]['prepare'](_0x8e56e8)[_0x312e8f(0x205)]();return _0x25ab16['json']({'code':0x0,'data':_0x27ec5c});}}),router['post'](_0x680ecf(0x21f),(_0x3991c3,_0x3e10f1,_0x42580e)=>{const _0x2a3773=_0x680ecf;let _0x2ec3d1=_0x3991c3[_0x2a3773(0x21a)]['id'],_0x11de95=dbFileIndexTable[_0x2a3773(0x222)](_0x3991c3[_0x2a3773(0x140)]['dbFileIndex'],_0x2ec3d1,dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']);if(dbUserTable[_0x2a3773(0x25e)](_0x3991c3,_0x3e10f1,'movie',_0x2a3773(0x1ff),_0x11de95[_0x2a3773(0x15d)])==!![]){let _0x32857c={'code':0x0,'data':_0x11de95};return _0x3e10f1['json'](_0x32857c);}}),router[_0x680ecf(0x277)]('/switchMatchInfo',(_0x491a8d,_0x5cea75,_0x29784d)=>{const _0x511da3=_0x680ecf;let _0x131ab9=_0x491a8d[_0x511da3(0x21a)]['sourceFolderId'],_0xb2c181=_0x491a8d[_0x511da3(0x21a)][_0x511da3(0x187)];if(dbUserTable[_0x511da3(0x17c)](_0x491a8d,_0x5cea75)===!![]){let _0xb09141=dbSourceFolderTable[_0x511da3(0x222)](_0x491a8d[_0x511da3(0x140)][_0x511da3(0x1c0)],_0x131ab9);if(!_0xb09141)return _0x5cea75['status'](0x194)[_0x511da3(0x211)]();return _0xb2c181==0x1?(_0x491a8d[_0x511da3(0x140)]['dbFileIndex']['prepare']('UPDATE\x20file_index_movie\x20SET\x20movie_info_state=3\x20WHERE\x20path\x20like\x20?\x20OR\x20path=?')[_0x511da3(0x18e)](_0xb09141[_0x511da3(0x15d)]+path[_0x511da3(0x1d1)]+'%',_0xb09141[_0x511da3(0x15d)]),dbSourceFolderTable['updateByWhere'](_0x491a8d[_0x511da3(0x140)][_0x511da3(0x1c0)],_0x511da3(0x1c3),_0xb2c181,_0x131ab9),process['send']({'type':_0x511da3(0x19a)}),_0x5cea75[_0x511da3(0x251)]({'code':0x0})):(dbSourceFolderTable['updateByWhere'](_0x491a8d[_0x511da3(0x140)][_0x511da3(0x1c0)],_0x511da3(0x1c3),_0xb2c181,_0x131ab9),_0x491a8d['app'][_0x511da3(0x24e)][_0x511da3(0x214)](_0x511da3(0x147))['run'](_0xb09141['path']+path[_0x511da3(0x1d1)]+'%',_0xb09141[_0x511da3(0x15d)]),process[_0x511da3(0x1ae)]({'type':_0x511da3(0x19a)}),_0x5cea75[_0x511da3(0x251)]({'code':0x0}));}}),router[_0x680ecf(0x277)]('/setTvplay',(_0x129211,_0x5700ad,_0x272933)=>{const _0x36b87f=_0x680ecf;let _0xc895f1=_0x129211[_0x36b87f(0x21a)]['isTvPlay'],_0x41fceb=_0x129211[_0x36b87f(0x21a)][_0x36b87f(0x1a4)],_0x442025=_0x129211[_0x36b87f(0x21a)][_0x36b87f(0x235)];function _0x545e39(_0x2a3087){const _0x2e76b7=_0x36b87f;let _0x2dba34=_0x129211[_0x2e76b7(0x140)][_0x2e76b7(0x24e)][_0x2e76b7(0x214)](_0x2e76b7(0x23b)+dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']+_0x2e76b7(0x27f))[_0x2e76b7(0x25f)](_0x2a3087);if(!_0x2dba34)return;_0x129211[_0x2e76b7(0x140)][_0x2e76b7(0x24e)][_0x2e76b7(0x214)](_0x2e76b7(0x1a9)+dbFileIndexTable[_0x2e76b7(0x156)]+_0x2e76b7(0x1f8))[_0x2e76b7(0x18e)](_0x2a3087),_0x129211[_0x2e76b7(0x140)]['dbFileIndex'][_0x2e76b7(0x214)]('UPDATE\x20'+dbFileIndexTable[_0x2e76b7(0x156)]+_0x2e76b7(0x144))[_0x2e76b7(0x18e)](_0x2dba34['id']),movieUtil['dealFirstLetterSingle'](_0x129211[_0x2e76b7(0x140)]['dbFileIndex'],_0x2dba34);}if(_0x41fceb){let _0x2b7275=dbFileIndexTable[_0x36b87f(0x222)](_0x129211['app'][_0x36b87f(0x24e)],_0x41fceb,dbFileIndexTable[_0x36b87f(0x156)]);if(dbUserTable[_0x36b87f(0x25e)](_0x129211,_0x5700ad,_0x36b87f(0x263),_0x36b87f(0x223),_0x2b7275[_0x36b87f(0x15d)])==!![])return _0xc895f1==0x1?_0x545e39(_0x2b7275['path']):_0x129211[_0x36b87f(0x140)][_0x36b87f(0x24e)][_0x36b87f(0x214)](_0x36b87f(0x1a9)+dbFileIndexTable[_0x36b87f(0x156)]+_0x36b87f(0x274)+_0x2b7275[_0x36b87f(0x15d)]+'\x27')[_0x36b87f(0x18e)](),_0x5700ad[_0x36b87f(0x251)]({'code':0x0});}else{if(_0x442025){let _0x236ce7=dbSourceFolderTable['getById'](_0x129211[_0x36b87f(0x140)][_0x36b87f(0x1c0)],_0x442025);if(!_0x236ce7||_0x236ce7[_0x36b87f(0x22c)]!=_0x36b87f(0x263))return _0x129211['app'][_0x36b87f(0x18c)](_0x5700ad,_0x5700ad['__'](_0x36b87f(0x18d)),_0x36b87f(0x1da));if(_0xc895f1==0x1){dbSourceFolderTable[_0x36b87f(0x264)](_0x129211['app'][_0x36b87f(0x1c0)],_0x36b87f(0x1ea),_0x36b87f(0x255),_0x442025),_0x545e39(_0x236ce7[_0x36b87f(0x15d)]);let _0xa9358f=_0x129211[_0x36b87f(0x140)][_0x36b87f(0x24e)][_0x36b87f(0x214)]('SELECT\x20path,filename\x20from\x20'+dbFileIndexTable[_0x36b87f(0x156)]+_0x36b87f(0x203))[_0x36b87f(0x205)](_0x236ce7[_0x36b87f(0x15d)],''+_0x236ce7['path']+path[_0x36b87f(0x1d1)]+'%');for(let _0x46d9fb in _0xa9358f){let _0x1b7f0d=path['join'](_0xa9358f[_0x46d9fb][_0x36b87f(0x15d)],_0xa9358f[_0x46d9fb][_0x36b87f(0x1db)]);_0x545e39(_0x1b7f0d);}}else{dbSourceFolderTable['updateByWhere'](_0x129211[_0x36b87f(0x140)][_0x36b87f(0x1c0)],'media_type',_0x36b87f(0x263),_0x442025);let _0x170f92=_0x129211[_0x36b87f(0x140)][_0x36b87f(0x24e)][_0x36b87f(0x214)](_0x36b87f(0x1a9)+dbFileIndexTable[_0x36b87f(0x156)]+'\x20SET\x20show_in_list=1,is_tvplay=0,show_name\x20=\x27\x27,show_name_fl=null\x20WHERE\x20path=?\x20or\x20path\x20like\x20?')['run'](_0x236ce7[_0x36b87f(0x15d)],''+_0x236ce7[_0x36b87f(0x15d)]+path[_0x36b87f(0x1d1)]+'%');}return _0x5700ad['json']({'code':0x0});}else return _0x129211[_0x36b87f(0x140)][_0x36b87f(0x18c)](_0x5700ad,_0x5700ad['__'](_0x36b87f(0x18d)),_0x36b87f(0x1da));}});function setLogoAndFanart(_0x40be67,_0x403cde,_0x436916,_0x15479c){const _0x569e24=_0x680ecf;if(_0x40be67['body'][_0x569e24(0x250)]){let _0x585079=_0x569e24(0x1b0),_0x3e09f5=[_0x436916];_0x15479c?(_0x585079+=_0x569e24(0x1fc),_0x3e09f5[_0x569e24(0x279)](_0x569e24(0x14e)),_0x3e09f5[_0x569e24(0x279)](_0x15479c+'-clearlogo.%'),_0x3e09f5[_0x569e24(0x279)](_0x15479c+'.clearlogo.%')):(_0x585079+=_0x569e24(0x288),_0x3e09f5[_0x569e24(0x279)]('clearlogo.%'));let _0x30f878=_0x40be67[_0x569e24(0x140)][_0x569e24(0x24e)][_0x569e24(0x214)](_0x585079)['get'](_0x3e09f5);if(_0x30f878){let _0x2dfed6=path[_0x569e24(0x215)](_0x30f878['path'],_0x30f878[_0x569e24(0x1db)]);_0x403cde[_0x569e24(0x273)]=_0x2dfed6;}let _0x1fe132='SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20',_0x434df7=[_0x436916];_0x15479c?(_0x1fe132+=_0x569e24(0x208),_0x434df7[_0x569e24(0x279)]('fanart.%'),_0x434df7[_0x569e24(0x279)](_0x15479c+_0x569e24(0x1c2)),_0x434df7[_0x569e24(0x279)](_0x15479c+'.fanart.%')):(_0x1fe132+=_0x569e24(0x288),_0x434df7['push'](_0x569e24(0x1be)));let _0x433ef4=_0x40be67[_0x569e24(0x140)][_0x569e24(0x24e)][_0x569e24(0x214)](_0x1fe132)[_0x569e24(0x25f)](_0x434df7);if(_0x433ef4){let _0x4b899c=path[_0x569e24(0x215)](_0x433ef4['path'],_0x433ef4[_0x569e24(0x1db)]);_0x403cde['fanart_path']=_0x4b899c;}}}function addTvFolderPathAndName(_0x2bec64){const _0xaa0dd7=_0x680ecf;_0x2bec64[_0xaa0dd7(0x24b)]=path[_0xaa0dd7(0x131)](_0x2bec64[_0xaa0dd7(0x15d)]),_0x2bec64[_0xaa0dd7(0x12b)]=_0x2bec64[_0xaa0dd7(0x15d)];if(_0x2bec64[_0xaa0dd7(0x234)]==0x1){let _0x4802d5=path[_0xaa0dd7(0x131)](_0x2bec64['path']),_0x128475=path[_0xaa0dd7(0x1cd)](_0x2bec64['path']),_0x1c2b31=movieSeasonUtil[_0xaa0dd7(0x130)](_0x4802d5);_0x1c2b31>-0x1&&(_0x2bec64['tvFolderName']=path['basename'](_0x128475),_0x2bec64[_0xaa0dd7(0x12b)]=_0x128475);if(!_0x2bec64[_0xaa0dd7(0x21d)])_0x2bec64[_0xaa0dd7(0x21d)]=_0x2bec64[_0xaa0dd7(0x24b)];}}function addFolderCoverPath(_0x2a17ce,_0x18ae17,_0x4328b1,_0x1687c1=![]){const _0x4e9934=_0x680ecf;let _0x470ff7;addTvFolderPathAndName(_0x4328b1);let _0x10a1e5=_0x4328b1['id']+_0x4e9934(0x278)+_0x1687c1;!_0x18ae17[_0x4e9934(0x23c)]&&(_0x18ae17['movieTvCache']=new Map());try{if(_0x4328b1[_0x4e9934(0x234)]==0x1&&!_0x1687c1)try{let _0x58b2c6=path[_0x4e9934(0x131)](_0x4328b1['path']),_0x2e5deb=path['dirname'](_0x4328b1[_0x4e9934(0x15d)]),_0x431a18=movieSeasonUtil['getSeasonNumber'](_0x58b2c6);if(_0x431a18>-0x1){_0x4328b1['isTvSeries']=0x1,_0x4328b1[_0x4e9934(0x1cb)]=_0x431a18;if(_0x18ae17[_0x4e9934(0x21a)]['needSeasonCount']){let _0x145424=_0x2e5deb+_0x4e9934(0x229)+_0x1687c1;_0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x1f1)](_0x145424)?_0x4328b1[_0x4e9934(0x20b)]=_0x18ae17['movieTvCache'][_0x4e9934(0x25f)](_0x145424):(_0x4328b1[_0x4e9934(0x20b)]=_0x18ae17[_0x4e9934(0x140)][_0x4e9934(0x24e)][_0x4e9934(0x214)](_0x4e9934(0x237))[_0x4e9934(0x25f)](''+_0x2e5deb+path[_0x4e9934(0x1d1)]+'%')[_0x4e9934(0x280)],_0x18ae17[_0x4e9934(0x23c)]['set'](_0x145424,_0x4328b1[_0x4e9934(0x20b)]));}}setLogoAndFanart(_0x18ae17,_0x4328b1,_0x4328b1[_0x4e9934(0x12b)]);if(_0x18ae17[_0x4e9934(0x21a)][_0x4e9934(0x12e)]==0x1&&_0x431a18>-0x1){let _0x27909c=_0x4328b1[_0x4e9934(0x12b)]+'-seriesPoster';if(_0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x1f1)](_0x27909c))return _0x4328b1[_0x4e9934(0x21b)]=_0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x25f)](_0x27909c),_0x4328b1;let _0x14b500=getTvSeriesPoster(_0x4328b1);if(_0x14b500)return _0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x1a0)](_0x27909c,_0x14b500),_0x4328b1[_0x4e9934(0x21b)]=_0x14b500,_0x4328b1;}if(!_0x470ff7&&_0x18ae17[_0x4e9934(0x23c)]['has'](_0x10a1e5))return _0x4328b1[_0x4e9934(0x21b)]=_0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x25f)](_0x10a1e5),_0x4328b1;if(!_0x470ff7&&_0x431a18>-0x1){parseInt(_0x431a18)<0xa&&(_0x431a18='0'+_0x431a18);let _0x33fee4=_0x4e9934(0x196)+_0x431a18+_0x4e9934(0x15c),_0x527ed6='%s'+_0x431a18+_0x4e9934(0x15c),_0x2d36f6='SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=\x27'+_0x2e5deb+_0x4e9934(0x27b)+_0x33fee4+_0x4e9934(0x286)+_0x527ed6+'\x27)';_0x470ff7=_0x18ae17['app']['dbFileIndex'][_0x4e9934(0x214)](_0x2d36f6)[_0x4e9934(0x25f)]();}!_0x470ff7&&(_0x470ff7=_0x18ae17[_0x4e9934(0x140)][_0x4e9934(0x24e)][_0x4e9934(0x214)](_0x4e9934(0x13d))['get'](_0x4328b1['path']));}catch(_0x31f769){console['log'](_0x31f769);}else{if(_0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x1f1)](_0x10a1e5))return _0x4328b1[_0x4e9934(0x21b)]=_0x18ae17['movieTvCache']['get'](_0x10a1e5),_0x4328b1;let _0x1f7702=path[_0x4e9934(0x149)](_0x4328b1[_0x4e9934(0x1db)]),_0x34a3b2=_0x1f7702[_0x4e9934(0x1e7)],_0x4a8a84=path[_0x4e9934(0x215)](_0x4328b1[_0x4e9934(0x15d)],_0x34a3b2+_0x4e9934(0x26c));if(fs['existsSync'](_0x4a8a84))return _0x4328b1[_0x4e9934(0x21b)]=_0x4a8a84,_0x4328b1;!_0x470ff7&&(_0x470ff7=_0x18ae17['app']['dbFileIndex'][_0x4e9934(0x214)](_0x4e9934(0x210))['get'](_0x4328b1[_0x4e9934(0x15d)],'%'+_0x34a3b2+'%poster%'));if(!_0x470ff7){let _0x40e848=_0x34a3b2;(_0x34a3b2[_0x4e9934(0x22b)](_0x4e9934(0x1c4))||_0x34a3b2['endsWith'](_0x4e9934(0x1f9))||_0x34a3b2[_0x4e9934(0x22b)](_0x4e9934(0x227))||_0x34a3b2['endsWith'](_0x4e9934(0x26f)))&&(_0x34a3b2[_0x4e9934(0x22b)]('-HD')?_0x40e848=_0x40e848[_0x4e9934(0x1bb)](0x0,_0x40e848['length']-0x3):_0x40e848=_0x40e848[_0x4e9934(0x1bb)](0x0,_0x40e848[_0x4e9934(0x1bf)]-0x4)),_0x470ff7=_0x18ae17[_0x4e9934(0x140)][_0x4e9934(0x24e)]['prepare']('SELECT\x20path,filename\x20FROM\x20file_index_movie\x20WHERE\x20path=?\x20and\x20type=1\x20and\x20is_file=1\x20and\x20(filename\x20like\x20?\x20or\x20filename\x20like\x20?)\x20and\x20filename\x20not\x20like\x20?')['get'](_0x4328b1['path'],_0x34a3b2+'%',_0x40e848+'%',_0x4e9934(0x27e));}!_0x470ff7&&(_0x470ff7=_0x18ae17[_0x4e9934(0x140)][_0x4e9934(0x24e)][_0x4e9934(0x214)](_0x4e9934(0x13d))[_0x4e9934(0x25f)](_0x4328b1[_0x4e9934(0x15d)]));let {name:_0x1b682e}=path[_0x4e9934(0x149)](_0x4328b1[_0x4e9934(0x1db)]);setLogoAndFanart(_0x18ae17,_0x4328b1,_0x4328b1['path'],_0x1b682e);}if(_0x470ff7){let _0x5f4110=path[_0x4e9934(0x215)](_0x470ff7['path'],_0x470ff7['filename']);!_0x5f4110[_0x4e9934(0x22b)]('HEIC')&&!_0x5f4110[_0x4e9934(0x22b)](_0x4e9934(0x1e6))&&fs[_0x4e9934(0x22f)](_0x5f4110)?(_0x4328b1[_0x4e9934(0x21b)]=_0x5f4110,_0x18ae17[_0x4e9934(0x23c)][_0x4e9934(0x1a0)](_0x10a1e5,_0x4328b1[_0x4e9934(0x21b)])):_0x18ae17[_0x4e9934(0x23c)]['set'](_0x10a1e5,'');}return _0x4328b1;}catch(_0x410996){return console[_0x4e9934(0x258)](_0x410996),_0x4328b1;}}function getMoviesByParams(_0x25ec10,_0x3a2407,_0x50c1f0,_0x3d0329,_0x460d16,_0x5ead64,_0x4ad66a,_0x5cbfab,_0x2c5038,_0x4ed5af,_0x1083aa,_0x2bcbaf,_0xecdcbe,_0x44a9d3,_0x179499,_0x87c704,_0xb4f80d,_0x1aa1f6){const _0x5be3cd=_0x680ecf;let _0x27b412=movieFieldStr;_0x1aa1f6&&(_0x27b412=_0x1aa1f6);!_0x179499&&(_0x179499=_0x5be3cd(0x1c6));let _0x4d3358='',_0xb72b56=[],_0x2c453f=dbUserTable[_0x5be3cd(0x28d)](_0x3a2407,_0x5be3cd(0x263),_0x5be3cd(0x1ff),!![],_0x4ed5af);if(_0x3a2407[_0x5be3cd(0x231)]['is_admin']!=0x1&&!_0x2c453f['whereStr'])return[];_0x4d3358+=_0x5be3cd(0x1d7);_0x2c5038&&(_0x2c5038=_0x2c5038[_0x5be3cd(0x241)]('\x27','')['replace']('’',''),_0x4d3358+='\x20AND\x20(path\x20like\x20?\x20OR\x20filename\x20like\x20?\x20OR\x20movie_info_name\x20like\x20?\x20)',_0xb72b56['push']('%'+_0x2c5038+'%'),_0xb72b56[_0x5be3cd(0x279)]('%'+_0x2c5038+'%'),_0xb72b56['push']('%'+_0x2c5038+'%'));let _0x254acf=dbSourceFolderTable[_0x5be3cd(0x254)](_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x1c0)],'path',_0x5be3cd(0x1c5));_0x254acf&&(_0x4d3358+='\x20AND\x20'+_0x254acf);let _0x92b23d=dbSourceFolderTable[_0x5be3cd(0x254)](_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x1c0)],'filename',_0x5be3cd(0x1d0));_0x92b23d&&(_0x4d3358+=_0x5be3cd(0x1e4)+_0x92b23d);function _0x8cfe70(_0x5219b9,_0x5eddb){const _0x40c397=_0x5be3cd;let _0x323c9a=_0x40c397(0x1ed);try{let _0x20a2d6=JSON['parse'](_0x5eddb),_0x183c45=![];for(let _0x5d4cad=0x0;_0x5d4cad<_0x20a2d6[_0x40c397(0x1bf)];_0x5d4cad++){if(!_0x20a2d6[_0x5d4cad])continue;_0x183c45=!![],_0x323c9a+='\x20'+_0x5219b9+'\x20like\x20?\x20',_0xb72b56[_0x40c397(0x279)]('%'+_0x20a2d6[_0x5d4cad][_0x40c397(0x22a)]()+'%'),_0x5d4cad!=_0x20a2d6[_0x40c397(0x1bf)]-0x1&&(_0x323c9a+=_0x40c397(0x143));}_0x323c9a+=')',_0x183c45&&(_0x4d3358+=_0x323c9a);}catch(_0x355192){console[_0x40c397(0x258)](_0x355192);}}_0x1083aa&&_0x8cfe70(_0x5be3cd(0x1ca),_0x1083aa);_0x2bcbaf&&_0x8cfe70('movie_language',_0x2bcbaf);_0xecdcbe&&_0x8cfe70(_0x5be3cd(0x246),_0xecdcbe);_0x3a2407[_0x5be3cd(0x21a)][_0x5be3cd(0x152)]&&_0x3a2407[_0x5be3cd(0x21a)][_0x5be3cd(0x152)][_0x5be3cd(0x1bf)]>0x0&&_0x3a2407[_0x5be3cd(0x21a)][_0x5be3cd(0x152)][0x0]!=''&&_0x8cfe70('movie_actor',_0x3a2407[_0x5be3cd(0x21a)][_0x5be3cd(0x152)]);_0x3a2407[_0x5be3cd(0x21a)][_0x5be3cd(0x28c)]&&_0x3a2407['body'][_0x5be3cd(0x28c)][_0x5be3cd(0x1bf)]>0x0&&_0x3a2407[_0x5be3cd(0x21a)][_0x5be3cd(0x28c)][0x0]!=''&&_0x8cfe70('movie_director',_0x3a2407['body'][_0x5be3cd(0x28c)]);if(_0xb4f80d){let _0xc2f575=_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x24e)][_0x5be3cd(0x214)]('SELECT\x20*\x20FROM\x20movie_library\x20WHERE\x20id=?')[_0x5be3cd(0x25f)](_0xb4f80d);if(_0xc2f575)try{let _0x25357a=JSON[_0x5be3cd(0x149)](_0xc2f575[_0x5be3cd(0x177)]),_0x1d4122=dbUserTable[_0x5be3cd(0x28a)](!![],_0x25357a);_0x4d3358+=_0x1d4122[_0x5be3cd(0x184)],_0xb72b56[_0x5be3cd(0x279)](..._0x1d4122[_0x5be3cd(0x1b7)]);}catch(_0x3c4a60){console['log'](_0x3c4a60);}}else{!_0x44a9d3&&(_0x44a9d3=0x0);let _0x5404bb;if(_0x44a9d3!=0x0){_0x5404bb=_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x24e)][_0x5be3cd(0x214)]('SELECT\x20*\x20from\x20movie_collection\x20where\x20id=?')[_0x5be3cd(0x25f)](_0x44a9d3);if(!_0x5404bb)return _0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x18c)](_0x25ec10,_0x25ec10['__'](_0x5be3cd(0x1d8)));if(_0x5404bb[_0x5be3cd(0x190)]==0x1){let _0x349ea3=_0x3a2407[_0x5be3cd(0x21a)]['collectionPwd'];if(!_0x349ea3||_0x5404bb[_0x5be3cd(0x1c9)]!=sha256(_0x349ea3))return _0x3a2407['app'][_0x5be3cd(0x18c)](_0x25ec10,_0x25ec10['__'](_0x5be3cd(0x202)));}}if(_0x5404bb&&_0x5404bb[_0x5be3cd(0x22c)]=='smart')try{_0x5404bb[_0x5be3cd(0x12f)]=JSON['parse'](_0x5404bb[_0x5be3cd(0x12f)]),_0x4d3358+=_0x5be3cd(0x1e4)+_0x5404bb[_0x5be3cd(0x12f)][_0x5be3cd(0x1ac)];}catch(_0x4b05cf){console[_0x5be3cd(0x258)](_0x4b05cf);}else _0x4d3358+=_0x5be3cd(0x19d)+_0x44a9d3;}if(_0x50c1f0){if(_0x50c1f0==0x1)_0x4d3358+=_0x5be3cd(0x233);else _0x50c1f0==0x2&&(_0x4d3358+=_0x5be3cd(0x1de));}_0x87c704&&(_0x87c704=='#'?(_0x4d3358+='\x20AND\x20(filename_fl=?\x20AND\x20show_name_fl=?\x20AND\x20movie_info_name_fl=?)',_0xb72b56[_0x5be3cd(0x279)](_0x87c704),_0xb72b56[_0x5be3cd(0x279)](_0x87c704),_0xb72b56[_0x5be3cd(0x279)](_0x87c704)):(_0x4d3358+=_0x5be3cd(0x185),_0xb72b56[_0x5be3cd(0x279)](_0x87c704),_0xb72b56[_0x5be3cd(0x279)](_0x87c704),_0xb72b56[_0x5be3cd(0x279)](_0x87c704)));if(_0x5cbfab&&_0x5cbfab[_0x5be3cd(0x1bf)]>0x0){_0x4d3358+=_0x5be3cd(0x13c);for(let _0x193f54=0x0;_0x193f54<_0x5cbfab[_0x5be3cd(0x1bf)];_0x193f54++){_0x4d3358+=_0x5cbfab[_0x193f54],_0x193f54!=_0x5cbfab[_0x5be3cd(0x1bf)]-0x1&&(_0x4d3358+=',');}_0x4d3358+=')';}_0x4d3358+=_0x5be3cd(0x198),_0xb72b56[_0x5be3cd(0x279)]('%'+path[_0x5be3cd(0x1d1)]+_0x5be3cd(0x1cf)),_0x4d3358+=_0x2c453f[_0x5be3cd(0x184)],_0xb72b56[_0x5be3cd(0x279)](..._0x2c453f[_0x5be3cd(0x1b7)]);_0x3d0329&&_0x4ad66a?_0x4d3358+=_0x5be3cd(0x26d)+_0x3d0329+'\x20'+_0x4ad66a:_0x4d3358+='\x20\x20AND\x20is_file=1\x20AND\x20show_in_list=1';!_0x460d16&&(_0x460d16=0x32);_0x4d3358+=_0x5be3cd(0x1e3),_0xb72b56[_0x5be3cd(0x279)](_0x460d16),_0xb72b56[_0x5be3cd(0x279)](_0x5ead64);let _0xcec4b=[];if(_0x179499==_0x5be3cd(0x17d))_0xcec4b=dbMovieFavorite[_0x5be3cd(0x219)](_0x3a2407[_0x5be3cd(0x140)]['dbFileIndex'],_0x3a2407[_0x5be3cd(0x231)]['id'],_0x4d3358,_0x27b412,_0xb72b56);else _0x179499==_0x5be3cd(0x1c6)&&(_0xcec4b=dbFileIndexTable[_0x5be3cd(0x1a3)](_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x24e)],_0x4d3358,_0x27b412,dbFileIndexTable[_0x5be3cd(0x156)],_0xb72b56));if(_0xcec4b[_0x5be3cd(0x1bf)]<0x1)return _0xcec4b;let _0x5e2ca6=[];for(let _0x3d73d5 in _0xcec4b){_0x5e2ca6[_0x5be3cd(0x279)](_0xcec4b[_0x3d73d5]['id']);}let _0x265397=dbMovieFavorite[_0x5be3cd(0x240)](_0x3a2407[_0x5be3cd(0x140)]['dbFileIndex'],_0x3a2407[_0x5be3cd(0x231)]['id'],_0x5e2ca6);for(let _0x4732fd=0x0;_0x4732fd<_0xcec4b[_0x5be3cd(0x1bf)];_0x4732fd++){_0xcec4b[_0x4732fd][_0x5be3cd(0x245)]=0x0;for(let _0x30b4c5 in _0x265397){if(_0x265397[_0x30b4c5][_0x5be3cd(0x22d)]==_0xcec4b[_0x4732fd]['id']){_0xcec4b[_0x4732fd]['favorite']=0x1;break;}}let _0x153dd2=_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x24e)][_0x5be3cd(0x214)]('SELECT\x20*\x20from\x20movie_history\x20where\x20user_id=?\x20and\x20index_id=?')[_0x5be3cd(0x25f)](_0x3a2407['currentUser']['id']+'',_0xcec4b[_0x4732fd]['id']+'');_0x153dd2&&(_0xcec4b[_0x4732fd][_0x5be3cd(0x26a)]=_0x153dd2);_0xcec4b[_0x4732fd]=addFolderCoverPath(_0x25ec10,_0x3a2407,_0xcec4b[_0x4732fd]);if(_0xcec4b[_0x4732fd]['is_tvplay']==0x1&&_0x3a2407[_0x5be3cd(0x21a)]['needTvCount']){let _0x10e53d=dbFileIndexTable['getTvCount'](_0x3a2407[_0x5be3cd(0x140)][_0x5be3cd(0x24e)],_0xcec4b[_0x4732fd]);_0xcec4b[_0x4732fd][_0x5be3cd(0x175)]=_0x10e53d[_0x5be3cd(0x280)];}}return _0xcec4b;}function getShowMatchName(_0x2de704){const _0x304bda=_0x680ecf;let _0x2597dc=dbConfigTable[_0x304bda(0x282)](_0x2de704,_0x304bda(0x158));return!_0x2597dc||_0x2597dc&&_0x2597dc[_0x304bda(0x201)]!=0x0?0x1:0x0;}router[_0x680ecf(0x277)]('/getMovies',(_0x246353,_0x1163f4,_0x432970)=>{const _0x10aec6=_0x680ecf;if(dbUserTable['doUserCanGet'](_0x246353,_0x1163f4,_0x10aec6(0x263),_0x10aec6(0x1ff))==!![]){let _0x2d0995=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x280)],_0xfccc52=_0x246353['body'][_0x10aec6(0x179)],_0x33b45a=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x1c7)],_0x25c890=_0x246353['body']['sortType'],_0x214a52=_0x246353[_0x10aec6(0x21a)]['excludeIds'],_0x3be51d=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x19e)],_0x3894f6=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x1b6)],_0x2c8a9e=_0x246353[_0x10aec6(0x21a)]['movieRegion'],_0x355608=_0x246353['body'][_0x10aec6(0x16f)],_0x353bcd=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x178)],_0x2cb753=_0x246353[_0x10aec6(0x21a)]['sourceType'],_0x380e1d=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x1bd)],_0x228f5e=_0x246353['body'][_0x10aec6(0x212)],_0x21b531=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x283)],_0x153ee3=_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x1d4)];_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x136)]=!![],_0x246353[_0x10aec6(0x21a)][_0x10aec6(0x159)]=!![];let _0x26079a=getMoviesByParams(_0x1163f4,_0x246353,_0x2cb753,_0x33b45a,_0x2d0995,_0xfccc52,_0x25c890,_0x214a52,_0x3be51d,_0x3894f6,_0x2c8a9e,_0x355608,_0x353bcd,_0x380e1d,_0x228f5e,_0x21b531,_0x153ee3);return _0x1163f4['json']({'movieShowMatchName':getShowMatchName(_0x246353['app'][_0x10aec6(0x1c0)]),'code':0x0,'data':_0x26079a});}}),router[_0x680ecf(0x277)](_0x680ecf(0x1f7),(_0x2a543a,_0x161a77,_0x2d4f00)=>{const _0x31649e=_0x680ecf;if(dbUserTable[_0x31649e(0x25e)](_0x2a543a,_0x161a77,'movie',_0x31649e(0x1ff))==!![]){let _0xd24b96=_0x2a543a['body']['sourceFolderList'],_0x13b3e9=_0x2a543a[_0x31649e(0x21a)][_0x31649e(0x204)],_0x4b7f19=_0x2a543a['body'][_0x31649e(0x18a)];!_0x13b3e9&&(_0x13b3e9=0x9);let _0x18a124='\x20id,movie_douban_score,movie_info_name,movie_year,movie_info_state,path,is_tvplay,filename,ext,type,width,height,duration,size,movie_douban_id,movie_imdb_id,show_name,show_in_list',_0x442410='';_0xd24b96?_0x442410=dbUserTable['getUserPathWhere'](_0x2a543a,_0x31649e(0x263),_0x31649e(0x1ff),!![],_0xd24b96):_0x442410=dbUserTable[_0x31649e(0x28d)](_0x2a543a,_0x31649e(0x263),_0x31649e(0x1ff),!![]);let _0x24f9ec=_0x2a543a[_0x31649e(0x21a)][_0x31649e(0x1c8)];_0x24f9ec!='movie_genres'&&_0x24f9ec!='movie_regions'&&(_0x24f9ec=_0x31649e(0x246));!_0x24f9ec&&(_0x24f9ec='movie_genres');let _0x274e20=_0x2a543a[_0x31649e(0x140)]['dbFileIndex']['prepare'](_0x31649e(0x13e))[_0x31649e(0x205)](_0x24f9ec),_0x1d27f4=[];for(let _0x47ddb3 of _0x274e20){let _0x12be6c=_0x47ddb3[_0x31649e(0x183)],_0x526200=_0x31649e(0x1d7),_0x119226=[];_0x526200+=_0x442410[_0x31649e(0x184)],_0x119226[_0x31649e(0x279)](..._0x442410[_0x31649e(0x1b7)]),_0x526200+=_0x31649e(0x173);if(_0x4b7f19){if(_0x4b7f19==0x1)_0x526200+=_0x31649e(0x233);else _0x4b7f19==0x2&&(_0x526200+='\x20AND\x20is_tvplay==1');}_0x526200+=_0x31649e(0x1e4)+_0x24f9ec+'\x20LIKE\x20?',_0x119226[_0x31649e(0x279)]('%'+_0x12be6c+'%'),_0x526200+='\x20AND\x20is_file=1\x20AND\x20show_in_list=1\x20ORDER\x20BY\x20check_time\x20DESC\x20LIMIT\x20?',_0x119226[_0x31649e(0x279)](parseInt(_0x13b3e9));let _0x42862a=dbFileIndexTable['getAllByWhereAndField'](_0x2a543a[_0x31649e(0x140)]['dbFileIndex'],_0x526200,_0x18a124,dbFileIndexTable[_0x31649e(0x156)],_0x119226),_0x586452=[];for(let _0x4d95a3 in _0x42862a){_0x586452['push'](_0x42862a[_0x4d95a3]['id']);}let _0x2c8474=dbMovieFavorite[_0x31649e(0x240)](_0x2a543a[_0x31649e(0x140)][_0x31649e(0x24e)],_0x2a543a[_0x31649e(0x231)]['id'],_0x586452);for(let _0x2d2756=0x0;_0x2d2756<_0x42862a[_0x31649e(0x1bf)];_0x2d2756++){_0x42862a[_0x2d2756][_0x31649e(0x245)]=0x0;for(let _0x682b99 in _0x2c8474){if(_0x2c8474[_0x682b99]['movie_index_id']==_0x42862a[_0x2d2756]['id']){_0x42862a[_0x2d2756]['favorite']=0x1;break;}}_0x42862a[_0x2d2756]=addFolderCoverPath(_0x161a77,_0x2a543a,_0x42862a[_0x2d2756]);}_0x42862a[_0x31649e(0x1bf)]>0x0&&_0x1d27f4['push']({'genresType':_0x24f9ec,'genresValue':_0x12be6c,'movieList':_0x42862a,'indexCount':_0x47ddb3['index_count']});}_0x161a77[_0x31649e(0x251)]({'code':0x0,'data':_0x1d27f4,'movieShowMatchName':getShowMatchName(_0x2a543a[_0x31649e(0x140)][_0x31649e(0x1c0)])});}}),router[_0x680ecf(0x277)](_0x680ecf(0x1f0),(_0x5c9f43,_0x3ce9d1,_0x47b111)=>{const _0x5ab4a4=_0x680ecf;if(dbUserTable['doUserCanGet'](_0x5c9f43,_0x3ce9d1,_0x5ab4a4(0x263),_0x5ab4a4(0x1ff))==!![]){let _0x3d5e52=getMoviesByParams(_0x3ce9d1,_0x5c9f43,0x1,_0x5ab4a4(0x249),0xf,0x0,'desc');_0x5c9f43[_0x5ab4a4(0x21a)][_0x5ab4a4(0x136)]=!![],_0x5c9f43[_0x5ab4a4(0x21a)][_0x5ab4a4(0x159)]=!![],_0x5c9f43[_0x5ab4a4(0x21a)][_0x5ab4a4(0x12e)]=0x1;let _0x1ad2e6=getMoviesByParams(_0x3ce9d1,_0x5c9f43,0x2,_0x5ab4a4(0x249),0x32,0x0,'desc');_0x5c9f43['body']['needTvCount']=![],_0x5c9f43[_0x5ab4a4(0x21a)][_0x5ab4a4(0x159)]=![],_0x5c9f43[_0x5ab4a4(0x21a)][_0x5ab4a4(0x12e)]=0x0;let _0x2f6023=dbConfigTable['findByTitle'](_0x5c9f43[_0x5ab4a4(0x140)]['dbOther'],_0x5ab4a4(0x1a6));_0x2f6023=!_0x2f6023||_0x2f6023&&_0x2f6023[_0x5ab4a4(0x201)]==0x1;let _0x1e3794=dbConfigTable['findByTitle'](_0x5c9f43[_0x5ab4a4(0x140)]['dbOther'],'movieHomeShowLibrary');_0x1e3794=!_0x1e3794||_0x1e3794&&_0x1e3794[_0x5ab4a4(0x201)]==0x1;let _0x254fd1=dbConfigTable['findByTitle'](_0x5c9f43[_0x5ab4a4(0x140)][_0x5ab4a4(0x1c0)],_0x5ab4a4(0x200));_0x254fd1=!_0x254fd1||_0x254fd1&&_0x254fd1['value']==0x1;let _0x1ccf45=[];if(_0x254fd1){let _0x4c23cf=_0x5ab4a4(0x1ad),_0x733a7b=_0x5ab4a4(0x170)+_0x4c23cf+'\x20from\x20movie_history\x20as\x20m\x20inner\x20join\x20file_index_movie\x20as\x20f\x20on\x20m.index_id=f.id\x20where\x20m.user_id='+_0x5c9f43[_0x5ab4a4(0x231)]['id']+_0x5ab4a4(0x1f2);_0x1ccf45=_0x5c9f43['app']['dbFileIndex']['prepare'](_0x733a7b)[_0x5ab4a4(0x205)]();let _0x543620=[];for(let _0x14725b in _0x1ccf45){_0x543620[_0x5ab4a4(0x279)](_0x1ccf45[_0x14725b]['id']);}let _0x45d2a8=dbMovieFavorite['getFavoriteList'](_0x5c9f43[_0x5ab4a4(0x140)][_0x5ab4a4(0x24e)],_0x5c9f43[_0x5ab4a4(0x231)]['id'],_0x543620);for(let _0x4d540d=0x0;_0x4d540d<_0x1ccf45[_0x5ab4a4(0x1bf)];_0x4d540d++){_0x1ccf45[_0x4d540d][_0x5ab4a4(0x245)]=0x0;for(let _0x3808a6 in _0x45d2a8){if(_0x45d2a8[_0x3808a6]['movie_index_id']==_0x1ccf45[_0x4d540d]['id']){_0x1ccf45[_0x4d540d]['favorite']=0x1;break;}}}}let _0xc385b4=[];_0x1e3794&&(_0xc385b4=getMovieLibrary(_0x5c9f43,_0x3ce9d1,0x6));let _0x29e06d={'code':0x0,'movies':_0x3d5e52,'tv':_0x1ad2e6,'history':_0x1ccf45,'libraryList':_0xc385b4,'sourceList':[]};_0x29e06d[_0x5ab4a4(0x158)]=getShowMatchName(_0x5c9f43['app'][_0x5ab4a4(0x1c0)]);if(_0x2f6023){let _0x803aa5=_0x5c9f43[_0x5ab4a4(0x140)]['dbOther']['prepare']('SELECT\x20*\x20FROM\x20source_folder\x20WHERE\x20type=?\x20LIMIT\x2010')[_0x5ab4a4(0x205)](_0x5ab4a4(0x263));for(let _0x2acbf5 of _0x803aa5){let _0x1ea0d4=getMoviesByParams(_0x3ce9d1,_0x5c9f43,null,'check_time',0x4,0x0,_0x5ab4a4(0x188),null,null,JSON[_0x5ab4a4(0x268)]([path[_0x5ab4a4(0x215)](_0x2acbf5[_0x5ab4a4(0x15d)])]));if(_0x1ea0d4['length']<0x1)continue;_0x29e06d[_0x5ab4a4(0x242)][_0x5ab4a4(0x279)]({'mediaType':_0x2acbf5[_0x5ab4a4(0x1ea)],'path':_0x2acbf5['path'],'name':path[_0x5ab4a4(0x131)](_0x2acbf5[_0x5ab4a4(0x15d)]),'sourceMovies':_0x1ea0d4});}}return _0x3ce9d1['json'](_0x29e06d);}}),router[_0x680ecf(0x277)](_0x680ecf(0x16e),(_0x54e940,_0x40e88c,_0x2eb240)=>{const _0x1ba9c5=_0x680ecf;if(dbUserTable[_0x1ba9c5(0x25e)](_0x54e940,_0x40e88c,_0x1ba9c5(0x263),'power_get')==!![]){let _0x11bc0d=getMoviesByParams(_0x40e88c,_0x54e940,0x1,_0x1ba9c5(0x176),0xa,0x0,_0x1ba9c5(0x188)),_0x4c1d92=getMoviesByParams(_0x40e88c,_0x54e940,0x2,_0x1ba9c5(0x176),0xa,0x0,_0x1ba9c5(0x188)),_0xd59900=_0x1ba9c5(0x23f),_0x48c804=_0x1ba9c5(0x170)+_0xd59900+_0x1ba9c5(0x224)+_0x54e940[_0x1ba9c5(0x231)]['id']+_0x1ba9c5(0x1f2),_0x237703=_0x54e940[_0x1ba9c5(0x140)]['dbFileIndex'][_0x1ba9c5(0x214)](_0x48c804)[_0x1ba9c5(0x205)](),_0x243398=getCollectionList(_0x54e940,_0x40e88c,_0x1ba9c5(0x265)),_0x3b4395=getCollectionList(_0x54e940,_0x40e88c,_0x1ba9c5(0x163)),_0x58cc57=getMoviesByParams(_0x40e88c,_0x54e940,null,_0x1ba9c5(0x176),0xa,0x0,_0x1ba9c5(0x188),null,null,null,null,null,null,null,_0x1ba9c5(0x17d)),_0x371440=getMovieLibrary(_0x54e940,_0x40e88c),_0x549af6={'code':0x0,'movies':_0x11bc0d,'tv':_0x4c1d92,'history':_0x237703,'favorites':_0x58cc57,'collectionList':_0x243398,'aiCollectionList':_0x3b4395,'libraryList':_0x371440};return _0x40e88c[_0x1ba9c5(0x251)](_0x549af6);}}),router[_0x680ecf(0x277)](_0x680ecf(0x256),(_0x865205,_0x58ec02,_0x2aa459)=>{const _0x3f2e2c=_0x680ecf;if(dbUserTable[_0x3f2e2c(0x25e)](_0x865205,_0x58ec02,_0x3f2e2c(0x263),_0x3f2e2c(0x1ff))==!![]){let _0x34ab4d=getMoviesByParams(_0x58ec02,_0x865205,0x1,_0x3f2e2c(0x176),0x1,0x0,_0x3f2e2c(0x188)),_0x4f36b0=getMoviesByParams(_0x58ec02,_0x865205,0x2,_0x3f2e2c(0x176),0x1,0x0,'desc'),_0x268d60='m.time,\x20f.id,f.path,f.filename,f.ext,f.type,f.width,f.height,f.duration,f.size,f.movie_info_state,f.movie_douban_id,f.movie_imdb_id,f.movie_douban_score,f.movie_info_name,f.show_name',_0x5032c3=_0x3f2e2c(0x170)+_0x268d60+_0x3f2e2c(0x224)+_0x865205[_0x3f2e2c(0x231)]['id']+_0x3f2e2c(0x16c),_0x45219c=_0x865205[_0x3f2e2c(0x140)][_0x3f2e2c(0x24e)][_0x3f2e2c(0x214)](_0x5032c3)[_0x3f2e2c(0x205)](),_0x455b83=getMoviesByParams(_0x58ec02,_0x865205,null,_0x3f2e2c(0x176),0x1,0x0,_0x3f2e2c(0x188),null,null,null,null,null,null,null,_0x3f2e2c(0x17d)),_0x4ce56f=dbFileIndexTable[_0x3f2e2c(0x1d2)](_0x865205[_0x3f2e2c(0x140)][_0x3f2e2c(0x24e)],_0x3f2e2c(0x228),dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']),_0x5ebba5=dbFileIndexTable[_0x3f2e2c(0x1d2)](_0x865205['app'][_0x3f2e2c(0x24e)],'is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20and\x20is_tvplay==1',dbFileIndexTable[_0x3f2e2c(0x156)]);_0x865205[_0x3f2e2c(0x21a)][_0x3f2e2c(0x221)]=0x5af3107a3fff,_0x865205[_0x3f2e2c(0x21a)]['timeType']=0x1,_0x865205[_0x3f2e2c(0x21a)]['sortField']=_0x3f2e2c(0x176),_0x865205['body']['sortType']='desc',_0x865205[_0x3f2e2c(0x21a)]['trash']=0x0,_0x865205['body'][_0x3f2e2c(0x280)]=0x1;let _0x180ac9=photoApiUtils[_0x3f2e2c(0x1e1)](_0x865205,_0x58ec02),_0x20615c=getMovieLibrary(_0x865205,_0x58ec02),_0xf61da0={'movieCount':_0x4ce56f[_0x3f2e2c(0x280)],'tvCount':_0x5ebba5[_0x3f2e2c(0x280)],'code':0x0,'movies':_0x34ab4d,'tv':_0x4f36b0,'history':_0x45219c,'favorites':_0x455b83,'photos':_0x180ac9,'libraryList':_0x20615c};return _0x58ec02[_0x3f2e2c(0x251)](_0xf61da0);}});let subtitleExtList=[_0x680ecf(0x20f),_0x680ecf(0x1ee),_0x680ecf(0x21e)];router[_0x680ecf(0x277)]('/getSameNameSubtitles',(_0x40e615,_0x21ae33,_0x5121c)=>{const _0x5424ce=_0x680ecf;let _0x578bc5=[],_0x52684b=null;if(_0x40e615[_0x5424ce(0x21a)][_0x5424ce(0x14c)])_0x52684b=_0x40e615['body'][_0x5424ce(0x14c)],_0x52684b=fileUtil[_0x5424ce(0x1aa)](_0x52684b);else{if(_0x40e615[_0x5424ce(0x21a)]['id']){let _0x3b1164=_0x40e615[_0x5424ce(0x21a)]['id'],_0x3f8ac3=dbFileIndexTable[_0x5424ce(0x222)](_0x40e615['app'][_0x5424ce(0x24e)],_0x3b1164,dbFileIndexTable[_0x5424ce(0x156)]);_0x3f8ac3&&(_0x52684b=path[_0x5424ce(0x215)](_0x3f8ac3[_0x5424ce(0x15d)],_0x3f8ac3[_0x5424ce(0x1db)]),_0x40e615[_0x5424ce(0x140)][_0x5424ce(0x24e)][_0x5424ce(0x214)](_0x5424ce(0x1bc))[_0x5424ce(0x18e)](Date[_0x5424ce(0x16a)](),_0x3f8ac3['id']));}}function _0x57e994(){const _0x1d50ee=_0x5424ce;let _0x25d384=dbConfigTable[_0x1d50ee(0x282)](_0x40e615[_0x1d50ee(0x140)][_0x1d50ee(0x1c0)],_0x1d50ee(0x22e)),_0x5b53dc=dbConfigTable[_0x1d50ee(0x282)](_0x40e615[_0x1d50ee(0x140)][_0x1d50ee(0x1c0)],'defaultTranscodeResolution');return _0x21ae33[_0x1d50ee(0x251)]({'code':0x0,'data':_0x578bc5,'defaultTranscodeResolution':_0x5b53dc?_0x5b53dc[_0x1d50ee(0x201)]:_0x1d50ee(0x1b2),'userFontSize':_0x25d384?_0x25d384[_0x1d50ee(0x201)]:1.5});}_0x52684b?fs[_0x5424ce(0x24d)](_0x52684b,(_0x459429,_0x5eebfd)=>{const _0x30883d=_0x5424ce;if(_0x459429)return _0x57e994();let _0x236bde=path[_0x30883d(0x1cd)](_0x52684b);fs[_0x30883d(0x270)](_0x236bde,(_0x13046e,_0x1f032d)=>{const _0x26276c=_0x30883d;if(_0x13046e)return _0x57e994();let _0x8ea57d=path[_0x26276c(0x131)](_0x52684b)[_0x26276c(0x241)](path[_0x26276c(0x1df)](_0x52684b),''),_0x3af888=_0x8ea57d[_0x26276c(0x18f)]('\x20','_');for(let _0x3b6bc7 in _0x1f032d){let _0x2327bc=_0x1f032d[_0x3b6bc7],_0x20c44f=path[_0x26276c(0x1df)](_0x2327bc);(_0x2327bc[_0x26276c(0x191)](_0x8ea57d)||_0x2327bc['startsWith'](_0x3af888))&&subtitleExtList[_0x26276c(0x145)](_0x20c44f)&&_0x578bc5[_0x26276c(0x279)]({'fileName':path[_0x26276c(0x131)](_0x2327bc),'filePath':path['join'](_0x236bde,_0x2327bc)});}return _0x57e994();});}):_0x57e994();}),router[_0x680ecf(0x277)](_0x680ecf(0x157),(_0x5ac8fd,_0x54d6ef,_0x34c7fb)=>{const _0x42b676=_0x680ecf;let _0x46ffdc=_0x5ac8fd[_0x42b676(0x140)][_0x42b676(0x24e)][_0x42b676(0x214)]('SELECT\x20*\x20FROM\x20movie_keys\x20where\x20key_type=\x27movie_genres\x27\x20and\x20index_count>0\x20ORDER\x20BY\x20index_count\x20DESC\x20LIMIT\x20100')[_0x42b676(0x205)](),_0x1d00d2=_0x5ac8fd[_0x42b676(0x140)][_0x42b676(0x24e)][_0x42b676(0x214)](_0x42b676(0x260))[_0x42b676(0x205)](),_0x278246=_0x5ac8fd[_0x42b676(0x140)][_0x42b676(0x24e)][_0x42b676(0x214)](_0x42b676(0x1af))[_0x42b676(0x205)]();_0x54d6ef[_0x42b676(0x251)]({'code':0x0,'data':_0x46ffdc['concat'](_0x1d00d2,_0x278246)});}),router[_0x680ecf(0x277)](_0x680ecf(0x153),(_0x24ca84,_0x56d567,_0x4dd775)=>{const _0x1f2f43=_0x680ecf;let _0x4f01b8=_0x24ca84[_0x1f2f43(0x21a)][_0x1f2f43(0x1a4)],_0x447004=dbFileIndexTable[_0x1f2f43(0x222)](_0x24ca84['app'][_0x1f2f43(0x24e)],_0x4f01b8,dbFileIndexTable[_0x1f2f43(0x156)]);if(!_0x447004)return _0x56d567[_0x1f2f43(0x251)]({'code':0x0});if(dbUserTable['doUserCanGet'](_0x24ca84,_0x56d567,_0x1f2f43(0x263),_0x1f2f43(0x27d),_0x447004['path'])==!![])return dbFileIndexTable[_0x1f2f43(0x27a)](_0x24ca84[_0x1f2f43(0x140)][_0x1f2f43(0x24e)],_0x4f01b8,dbFileIndexTable['INDEX_TABLE_NAME_MOVIE']),_0x56d567[_0x1f2f43(0x251)]({'code':0x0});}),router[_0x680ecf(0x277)](_0x680ecf(0x160),(_0x428d1e,_0x15d334,_0x38d1c1)=>{const _0xdad6dd=_0x680ecf;let _0x4117e1=_0x428d1e[_0xdad6dd(0x231)]['id'],_0x3230a5=parseInt(_0x428d1e['body'][_0xdad6dd(0x1fb)]),_0x2a03d2=dbMovieFavorite[_0xdad6dd(0x1dd)](_0x428d1e[_0xdad6dd(0x140)][_0xdad6dd(0x24e)],_0x4117e1,_0x3230a5),_0xc12ac5=0x0;if(_0x2a03d2)dbMovieFavorite[_0xdad6dd(0x1fd)](_0x428d1e[_0xdad6dd(0x140)][_0xdad6dd(0x24e)],_0x4117e1,_0x3230a5);else{_0xc12ac5=0x1;let _0x6a01c4=new Date()['getTime']();_0x428d1e['app']['dbFileIndex'][_0xdad6dd(0x214)](_0xdad6dd(0x1bc))[_0xdad6dd(0x18e)](_0x6a01c4,_0x3230a5),dbMovieFavorite['addFavorite'](_0x428d1e[_0xdad6dd(0x140)][_0xdad6dd(0x24e)],_0x4117e1,_0x3230a5);}return _0x15d334['json']({'code':0x0,'favorite':_0xc12ac5});}),router[_0x680ecf(0x277)](_0x680ecf(0x207),(_0x503776,_0x9948ce,_0x15d622)=>{const _0x442a25=_0x680ecf;try{let _0x40fef2=parseInt(_0x503776[_0x442a25(0x21a)][_0x442a25(0x1a4)]),_0x590e87=dbFileIndexTable[_0x442a25(0x222)](_0x503776['app'][_0x442a25(0x24e)],_0x40fef2,dbFileIndexTable[_0x442a25(0x156)]);if(!_0x590e87)return _0x9948ce[_0x442a25(0x251)]({'code':0x0});let _0xd7401c=parseInt(_0x503776['body'][_0x442a25(0x1d6)]),_0x58ad86=parseInt(_0x503776[_0x442a25(0x21a)][_0x442a25(0x19b)]);!_0x58ad86&&(_0x58ad86=0x0);!_0xd7401c&&(_0xd7401c=0x0);let _0x213e7f=parseInt(_0x503776[_0x442a25(0x21a)]['autoSkip']);if(_0xd7401c<0x0||_0x58ad86<0x0||_0xd7401c>_0x590e87[_0x442a25(0x12c)]||_0x58ad86>_0x590e87['duration']||_0x213e7f!=0x0&&_0x213e7f!=0x1)return _0x503776[_0x442a25(0x140)][_0x442a25(0x18c)](_0x9948ce,_0x442a25(0x189));let _0x10c235=[_0x590e87];_0x590e87[_0x442a25(0x234)]==0x1&&(_0x10c235=_0x503776[_0x442a25(0x140)][_0x442a25(0x24e)][_0x442a25(0x214)]('SELECT\x20id\x20FROM\x20'+dbFileIndexTable[_0x442a25(0x156)]+_0x442a25(0x132))[_0x442a25(0x205)](_0x590e87['path']));let _0x5a0888='(';for(let _0x45de1c in _0x10c235){_0x5a0888+=_0x10c235[_0x45de1c]['id'],_0x45de1c!=_0x10c235[_0x442a25(0x1bf)]-0x1&&(_0x5a0888+=',');}return _0x5a0888+=')',_0x503776[_0x442a25(0x140)]['dbFileIndex']['prepare']('UPDATE\x20file_index_movie\x20set\x20open_duration=?,end_duration=?,skip_open_end=?\x20WHERE\x20id\x20in\x20'+_0x5a0888)[_0x442a25(0x18e)](_0xd7401c,_0x58ad86,_0x213e7f),_0x9948ce[_0x442a25(0x251)]({'code':0x0});}catch(_0x442443){return console[_0x442a25(0x258)](_0x442443),_0x503776[_0x442a25(0x140)][_0x442a25(0x18c)](_0x9948ce,_0x9948ce['__'](_0x442a25(0x18d)));}});function getMovieLibrary(_0x547c97,_0x1e9f64,_0x2dffe0){const _0x21c2b1=_0x680ecf;let _0x10f0c3=_0x547c97[_0x21c2b1(0x21a)][_0x21c2b1(0x179)]||0x0,_0x225ade=_0x2dffe0||_0x547c97[_0x21c2b1(0x21a)]['count']||0x32,_0x15edce=_0x547c97[_0x21c2b1(0x21a)][_0x21c2b1(0x24c)]||'',_0x3d43ac=_0x547c97[_0x21c2b1(0x21a)][_0x21c2b1(0x181)]||'create_time',_0x5e86ad=_0x547c97[_0x21c2b1(0x21a)]['orderType']||'desc';if(![_0x21c2b1(0x249),'title'][_0x21c2b1(0x145)](_0x3d43ac))return console[_0x21c2b1(0x258)](_0x21c2b1(0x272),_0x3d43ac),[];let _0x437039=[],_0x2f814b=[],_0x416333=_0x21c2b1(0x27c);_0x547c97[_0x21c2b1(0x231)][_0x21c2b1(0x138)]==0x1?_0x15edce&&(_0x416333+=_0x21c2b1(0x24f),_0x2f814b[_0x21c2b1(0x279)]('%'+_0x15edce+'%')):(_0x416333=_0x21c2b1(0x28e),_0x15edce&&(_0x416333+=_0x21c2b1(0x174),_0x2f814b[_0x21c2b1(0x279)]('%'+_0x15edce+'%')));_0x416333+='\x20ORDER\x20BY\x20'+_0x3d43ac+'\x20'+_0x5e86ad+_0x21c2b1(0x1e3),_0x2f814b['push'](_0x225ade),_0x2f814b[_0x21c2b1(0x279)](_0x10f0c3),_0x437039=_0x547c97['app'][_0x21c2b1(0x24e)][_0x21c2b1(0x214)](_0x416333)['all'](_0x2f814b);if(_0x437039[_0x21c2b1(0x1bf)]<0x1)return[];for(let _0x5751ca in _0x437039){let _0x265dd9=_0x437039[_0x5751ca];try{let _0x36f26d=JSON[_0x21c2b1(0x149)](_0x265dd9[_0x21c2b1(0x26e)]),_0x1825af=[];for(let _0x4b5e70 of _0x36f26d){let _0x4562a7=dbUserTable['findWithField'](_0x547c97[_0x21c2b1(0x140)]['dbOther'],_0x4b5e70,_0x21c2b1(0x213));_0x1825af['push'](_0x4562a7);}_0x437039[_0x5751ca][_0x21c2b1(0x135)]=_0x1825af;}catch(_0x2a0578){console[_0x21c2b1(0x258)](_0x2a0578);}let _0x3ec906=getMoviesByParams(_0x1e9f64,_0x547c97,null,_0x21c2b1(0x176),0x4,0x0,_0x21c2b1(0x188),null,null,null,null,null,null,null,null,null,_0x437039[_0x5751ca]['id']);_0x437039[_0x5751ca]['dataPreview']=_0x3ec906;}return _0x437039;}router[_0x680ecf(0x277)]('/operationLibrary',(_0x1fdf6a,_0x433f39,_0x55f7b0)=>{const _0x1c5985=_0x680ecf;let _0x436651=_0x1fdf6a['body'][_0x1c5985(0x287)],_0x4e0fd5=_0x1fdf6a[_0x1c5985(0x21a)][_0x1c5985(0x1d4)],_0x26e223=_0x1fdf6a[_0x1c5985(0x21a)][_0x1c5985(0x162)],_0x2b9ff5=_0x1fdf6a[_0x1c5985(0x21a)][_0x1c5985(0x137)],_0x232042=_0x1fdf6a[_0x1c5985(0x21a)][_0x1c5985(0x1d3)],_0x4857a5=_0x1fdf6a[_0x1c5985(0x21a)][_0x1c5985(0x141)];if(_0x4857a5==_0x1c5985(0x284)){let _0x261878=getMovieLibrary(_0x1fdf6a,_0x433f39);return _0x433f39[_0x1c5985(0x251)]({'code':0x0,'data':_0x261878});}else{if(_0x1fdf6a[_0x1c5985(0x231)][_0x1c5985(0x138)]!=0x1)return _0x1fdf6a['app']['returnErrMsg'](_0x433f39,_0x433f39['__'](_0x1c5985(0x155)));if(_0x4857a5=='ADD'||_0x4857a5==_0x1c5985(0x1e2)){if(!_0x26e223||!_0x26e223 instanceof Array||_0x26e223['length']<0x1)return _0x1fdf6a[_0x1c5985(0x140)][_0x1c5985(0x18c)](_0x433f39,_0x433f39['__'](_0x1c5985(0x18d)));if(_0x232042){if(_0x2b9ff5!=null&&!_0x2b9ff5 instanceof Array)return _0x1fdf6a['app'][_0x1c5985(0x18c)](_0x433f39,_0x433f39['__']('operationFail'));}if(sqliteUtil[_0x1c5985(0x1b4)](JSON[_0x1c5985(0x268)](_0x26e223))==!![])return _0x1fdf6a['app']['returnErrMsg'](_0x433f39,_0x1c5985(0x1a1));}if(_0x4857a5==_0x1c5985(0x1e2)&&_0x4e0fd5)_0x1fdf6a[_0x1c5985(0x140)][_0x1c5985(0x24e)][_0x1c5985(0x214)](_0x1c5985(0x1a8))[_0x1c5985(0x18e)](_0x436651,JSON[_0x1c5985(0x268)](_0x26e223),_0x232042,JSON['stringify'](_0x2b9ff5),_0x4e0fd5);else{if(_0x4857a5==_0x1c5985(0x25b)&&_0x4e0fd5)_0x1fdf6a[_0x1c5985(0x140)]['dbFileIndex'][_0x1c5985(0x214)](_0x1c5985(0x16b))[_0x1c5985(0x18e)](_0x4e0fd5);else{if(_0x4857a5==_0x1c5985(0x194))_0x1fdf6a[_0x1c5985(0x140)][_0x1c5985(0x24e)][_0x1c5985(0x214)](_0x1c5985(0x1f6))[_0x1c5985(0x18e)](_0x436651,JSON[_0x1c5985(0x268)](_0x26e223),_0x232042,JSON[_0x1c5985(0x268)](_0x2b9ff5),_0x1fdf6a[_0x1c5985(0x231)]['id']);else return _0x1fdf6a[_0x1c5985(0x140)][_0x1c5985(0x18c)](_0x433f39,_0x433f39['__'](_0x1c5985(0x155)));}}return _0x433f39['json']({'code':0x0});}}),module['exports']=router;