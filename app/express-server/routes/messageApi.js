const _0x5c76ad=_0xbbef;function _0x5b5c(){const _0x44c328=['/getMessage','post','body','dbOther','level','info','11700Ejjzfe','returnErrMsg','operationFail','isAll','getUnReadCount','3991940XcLEak','559473bJWnKz','11370504zLcfRj','/getUnReadCount','Router','/read','delete','../../myConfig/config','exports','json','push','includes','refreshReadById','\x20level=?\x20AND\x20id\x20<\x20?\x20ORDER\x20BY\x20create_time\x20DESC\x20LIMIT\x20?\x20','88CLWbqK','msgType','7061152zlIKbg','5442924KRWCPR','count','/delete','refreshRead','app','is_admin','error','1422080DrnODq'];_0x5b5c=function(){return _0x44c328;};return _0x5b5c();}(function(_0x69195c,_0x467998){const _0x2a4bfc=_0xbbef,_0x96934f=_0x69195c();while(!![]){try{const _0x27eb4b=parseInt(_0x2a4bfc(0xd7))/0x1*(parseInt(_0x2a4bfc(0xe8))/0x2)+-parseInt(_0x2a4bfc(0xee))/0x3+parseInt(_0x2a4bfc(0xed))/0x4+-parseInt(_0x2a4bfc(0xe1))/0x5+-parseInt(_0x2a4bfc(0xda))/0x6+-parseInt(_0x2a4bfc(0xd9))/0x7+parseInt(_0x2a4bfc(0xef))/0x8;if(_0x27eb4b===_0x467998)break;else _0x96934f['push'](_0x96934f['shift']());}catch(_0x48ec7f){_0x96934f['push'](_0x96934f['shift']());}}}(_0x5b5c,0x859e5));var express=require('express'),router=express[_0x5c76ad(0xf1)]();function _0xbbef(_0x1206e4,_0xdb2789){const _0x5b5c18=_0x5b5c();return _0xbbef=function(_0xbbef17,_0x240500){_0xbbef17=_0xbbef17-0xd2;let _0x123a2e=_0x5b5c18[_0xbbef17];return _0x123a2e;},_0xbbef(_0x1206e4,_0xdb2789);}let config=require(_0x5c76ad(0xf4)),dbNoticeCenterTable=require('../../db/dbNoticeCenterTable');router['post'](_0x5c76ad(0xe2),(_0x2d90c5,_0x34756b,_0x66d9f0)=>{const _0x46a97f=_0x5c76ad;let _0x15363a=_0x2d90c5[_0x46a97f(0xe4)]['id'],_0x90c41b=_0x2d90c5['body'][_0x46a97f(0xdb)],_0x500eea=_0x2d90c5['body'][_0x46a97f(0xd8)];!_0x15363a&&(_0x15363a=0x9184e729fff);let _0x175f07=[_0x46a97f(0xe7),_0x46a97f(0xe0)];if(!_0x500eea||!_0x175f07[_0x46a97f(0xd4)](_0x500eea))return _0x2d90c5['app'][_0x46a97f(0xe9)](_0x34756b,_0x34756b['__'](_0x46a97f(0xea)));let _0x1f6539='',_0x589707=[];_0x1f6539+=_0x46a97f(0xd6),_0x589707[_0x46a97f(0xd3)](_0x500eea),_0x589707['push'](_0x15363a),_0x589707[_0x46a97f(0xd3)](_0x90c41b);let _0x56116d=dbNoticeCenterTable['getByWhere'](_0x2d90c5[_0x46a97f(0xde)][_0x46a97f(0xe5)],_0x1f6539,_0x589707),_0x44c933=dbNoticeCenterTable['getUnReadCount'](_0x2d90c5[_0x46a97f(0xde)][_0x46a97f(0xe5)],_0x46a97f(0xe7)),_0x546855=dbNoticeCenterTable[_0x46a97f(0xec)](_0x2d90c5[_0x46a97f(0xde)][_0x46a97f(0xe5)],_0x46a97f(0xe0));_0x34756b['json']({'code':0x0,'data':_0x56116d,'infoUnReadCount':_0x44c933[_0x46a97f(0xdb)],'errorUnReadCount':_0x546855[_0x46a97f(0xdb)]});}),router[_0x5c76ad(0xe3)](_0x5c76ad(0xf0),(_0x15cce5,_0x50779d,_0x3038b5)=>{const _0x342dcf=_0x5c76ad;let _0x55422b=_0x15cce5['body']['level'],_0x1a9ac2=dbNoticeCenterTable[_0x342dcf(0xec)](_0x15cce5[_0x342dcf(0xde)][_0x342dcf(0xe5)],_0x55422b);_0x50779d[_0x342dcf(0xd2)]({'code':0x0,'unReadCount':_0x1a9ac2[_0x342dcf(0xdb)]});}),router[_0x5c76ad(0xe3)](_0x5c76ad(0xf2),(_0xf7cf21,_0x339716,_0x41eb74)=>{const _0x1c6922=_0x5c76ad;let _0x59e4a3=_0xf7cf21['body']['id'],_0x587066=_0xf7cf21[_0x1c6922(0xe4)][_0x1c6922(0xeb)],_0xdacad8=_0xf7cf21[_0x1c6922(0xe4)]['level'];_0x587066?dbNoticeCenterTable[_0x1c6922(0xdd)](_0xf7cf21['app'][_0x1c6922(0xe5)],_0xdacad8):dbNoticeCenterTable[_0x1c6922(0xd5)](_0xf7cf21[_0x1c6922(0xde)]['dbOther'],_0x59e4a3),_0x339716[_0x1c6922(0xd2)]({'code':0x0});}),router[_0x5c76ad(0xe3)](_0x5c76ad(0xdc),(_0x3f1da4,_0x36ff48,_0x39fec7)=>{const _0x3198f9=_0x5c76ad;if(_0x3f1da4['currentUser'][_0x3198f9(0xdf)]!=0x1)return _0x36ff48[_0x3198f9(0xd2)]({'code':0x66});let _0x1fd681=_0x3f1da4['body']['id'],_0xbfff76=_0x3f1da4['body'][_0x3198f9(0xeb)],_0x3c88c9=_0x3f1da4[_0x3198f9(0xe4)][_0x3198f9(0xe6)];_0xbfff76?dbNoticeCenterTable['clearAllByLevel'](_0x3f1da4['app'][_0x3198f9(0xe5)],_0x3c88c9):dbNoticeCenterTable[_0x3198f9(0xf3)](_0x3f1da4[_0x3198f9(0xde)][_0x3198f9(0xe5)],_0x1fd681),_0x36ff48[_0x3198f9(0xd2)]({'code':0x0});}),module[_0x5c76ad(0xf5)]=router;