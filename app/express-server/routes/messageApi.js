function _0x53ee(){const _0x3934e5=['error','8PiUoyY','info','../../myConfig/config','post','body','includes','exports','app','is_admin','returnErrMsg','refreshRead','express','../../db/dbNoticeCenterTable','16812qFhslD','16995BfzaMN','8200557rVQozD','66948GFrCFl','1036500oNKvVX','Router','24TkfxQV','json','getByWhere','29614YVvSLc','66SPmCij','msgType','/getUnReadCount','push','/read','isAll','getUnReadCount','763cCHERy','dbOther','4693260mMuXQh','count','delete','3760428pjfNJt','/delete','currentUser'];_0x53ee=function(){return _0x3934e5;};return _0x53ee();}const _0x565386=_0x5ce9;function _0x5ce9(_0x5488e0,_0x2ed000){const _0x53ee0b=_0x53ee();return _0x5ce9=function(_0x5ce900,_0x14a563){_0x5ce900=_0x5ce900-0xf9;let _0x747c5d=_0x53ee0b[_0x5ce900];return _0x747c5d;},_0x5ce9(_0x5488e0,_0x2ed000);}(function(_0x503fc5,_0x2b779b){const _0x4edd96=_0x5ce9,_0x3b07a8=_0x503fc5();while(!![]){try{const _0x1da706=-parseInt(_0x4edd96(0xfc))/0x1*(-parseInt(_0x4edd96(0xfd))/0x2)+-parseInt(_0x4edd96(0x109))/0x3+-parseInt(_0x4edd96(0xf9))/0x4*(parseInt(_0x4edd96(0x11e))/0x5)+-parseInt(_0x4edd96(0x11d))/0x6*(parseInt(_0x4edd96(0x104))/0x7)+-parseInt(_0x4edd96(0x10d))/0x8*(-parseInt(_0x4edd96(0x11c))/0x9)+parseInt(_0x4edd96(0x106))/0xa+-parseInt(_0x4edd96(0x11b))/0xb*(-parseInt(_0x4edd96(0x11a))/0xc);if(_0x1da706===_0x2b779b)break;else _0x3b07a8['push'](_0x3b07a8['shift']());}catch(_0x1b5e16){_0x3b07a8['push'](_0x3b07a8['shift']());}}}(_0x53ee,0xc5768));var express=require(_0x565386(0x118)),router=express[_0x565386(0x11f)]();let config=require(_0x565386(0x10f)),dbNoticeCenterTable=require(_0x565386(0x119));router[_0x565386(0x110)]('/getMessage',(_0x1d7500,_0x5d2bc6,_0x8c67d7)=>{const _0x251fa3=_0x565386;let _0x16c445=_0x1d7500[_0x251fa3(0x111)]['id'],_0x4be85f=_0x1d7500[_0x251fa3(0x111)][_0x251fa3(0x107)],_0x1873cf=_0x1d7500[_0x251fa3(0x111)][_0x251fa3(0xfe)];!_0x16c445&&(_0x16c445=0x9184e729fff);let _0x4b9c01=['info',_0x251fa3(0x10c)];if(!_0x1873cf||!_0x4b9c01[_0x251fa3(0x112)](_0x1873cf))return _0x1d7500[_0x251fa3(0x114)][_0x251fa3(0x116)](_0x5d2bc6,_0x5d2bc6['__']('operationFail'));let _0x214206='',_0x4c23b0=[];_0x214206+='\x20level=?\x20AND\x20id\x20<\x20?\x20ORDER\x20BY\x20create_time\x20DESC\x20LIMIT\x20?\x20',_0x4c23b0[_0x251fa3(0x100)](_0x1873cf),_0x4c23b0[_0x251fa3(0x100)](_0x16c445),_0x4c23b0[_0x251fa3(0x100)](_0x4be85f);let _0x3cd48b=dbNoticeCenterTable[_0x251fa3(0xfb)](_0x1d7500['app'][_0x251fa3(0x105)],_0x214206,_0x4c23b0),_0x2b7e62=dbNoticeCenterTable[_0x251fa3(0x103)](_0x1d7500['app']['dbOther'],_0x251fa3(0x10e)),_0x2784f2=dbNoticeCenterTable[_0x251fa3(0x103)](_0x1d7500['app'][_0x251fa3(0x105)],'error');_0x5d2bc6[_0x251fa3(0xfa)]({'code':0x0,'data':_0x3cd48b,'infoUnReadCount':_0x2b7e62[_0x251fa3(0x107)],'errorUnReadCount':_0x2784f2[_0x251fa3(0x107)]});}),router[_0x565386(0x110)](_0x565386(0xff),(_0x24dea3,_0x4df7ef,_0x3261d2)=>{const _0x2b8445=_0x565386;let _0x1f3d89=_0x24dea3['body']['level'],_0x58813d=dbNoticeCenterTable['getUnReadCount'](_0x24dea3['app'][_0x2b8445(0x105)],_0x1f3d89);_0x4df7ef['json']({'code':0x0,'unReadCount':_0x58813d[_0x2b8445(0x107)]});}),router[_0x565386(0x110)](_0x565386(0x101),(_0x5c31a2,_0x26c218,_0x1b21a8)=>{const _0x58112c=_0x565386;let _0xa72329=_0x5c31a2['body']['id'],_0x5f8d8e=_0x5c31a2[_0x58112c(0x111)][_0x58112c(0x102)],_0x223b33=_0x5c31a2[_0x58112c(0x111)]['level'];_0x5f8d8e?dbNoticeCenterTable[_0x58112c(0x117)](_0x5c31a2[_0x58112c(0x114)]['dbOther'],_0x223b33):dbNoticeCenterTable['refreshReadById'](_0x5c31a2[_0x58112c(0x114)][_0x58112c(0x105)],_0xa72329),_0x26c218[_0x58112c(0xfa)]({'code':0x0});}),router[_0x565386(0x110)](_0x565386(0x10a),(_0x422ad9,_0x4f6cfe,_0x598197)=>{const _0x23c3b9=_0x565386;if(_0x422ad9[_0x23c3b9(0x10b)][_0x23c3b9(0x115)]!=0x1)return _0x4f6cfe['json']({'code':0x66});let _0x419fb2=_0x422ad9[_0x23c3b9(0x111)]['id'],_0x2c0037=_0x422ad9[_0x23c3b9(0x111)][_0x23c3b9(0x102)],_0xa89621=_0x422ad9[_0x23c3b9(0x111)]['level'];_0x2c0037?dbNoticeCenterTable['clearAllByLevel'](_0x422ad9[_0x23c3b9(0x114)][_0x23c3b9(0x105)],_0xa89621):dbNoticeCenterTable[_0x23c3b9(0x108)](_0x422ad9[_0x23c3b9(0x114)][_0x23c3b9(0x105)],_0x419fb2),_0x4f6cfe['json']({'code':0x0});}),module[_0x565386(0x113)]=router;