const _0x224022=_0xd3b8;(function(_0x3285df,_0x2eafbe){const _0x2315e2=_0xd3b8,_0x22b60b=_0x3285df();while(!![]){try{const _0x1f9d9d=parseInt(_0x2315e2(0xd3))/0x1*(-parseInt(_0x2315e2(0xb7))/0x2)+parseInt(_0x2315e2(0xc8))/0x3+parseInt(_0x2315e2(0x103))/0x4*(-parseInt(_0x2315e2(0xd4))/0x5)+-parseInt(_0x2315e2(0xd5))/0x6*(-parseInt(_0x2315e2(0xe7))/0x7)+parseInt(_0x2315e2(0xb9))/0x8*(parseInt(_0x2315e2(0x101))/0x9)+-parseInt(_0x2315e2(0xe4))/0xa+-parseInt(_0x2315e2(0xc3))/0xb*(-parseInt(_0x2315e2(0x10a))/0xc);if(_0x1f9d9d===_0x2eafbe)break;else _0x22b60b['push'](_0x22b60b['shift']());}catch(_0x533f41){_0x22b60b['push'](_0x22b60b['shift']());}}}(_0x5441,0x81f09));function _0xd3b8(_0x4b2ee5,_0x11ae1c){const _0x54412f=_0x5441();return _0xd3b8=function(_0xd3b830,_0x4074a5){_0xd3b830=_0xd3b830-0xb6;let _0x2f09ba=_0x54412f[_0xd3b830];return _0x2f09ba;},_0xd3b8(_0x4b2ee5,_0x11ae1c);}let photoApiUtil={};function _0x5441(){const _0x5e9d58=['236654NqbhoI','dbOther','dbFileIndex','excludeFilenamePhoto','length','2128188pbolWJ','fileType','count','getRawImageIndex','>=?','Params\x20error\x20:\x20count','whereStr','\x20LIMIT\x20?','\x20>\x200','\x20AND\x20(type=1\x20or\x20type=2)','power_get','638126CzODNF','398660wHvyCa','2093034zMaZMR','../../db/dbSourceFolderTable','getAllByWhereAndFieldFromFaceIndex','checkOrderParams','Params\x20error\x20:\x20fileType','sourceFolderList','desc','filename','aiClassId','paramsList','arrayInCheck','\x20AND\x20(type=?\x20\x20and\x20is_livephoto!=1)','\x20AND\x20in_trash=1','getPhotoByParams','getExcludePathWhereStr','7661650wojJgK','<=?\x20AND\x20','timestamp','14CNfHgA','log','timeType','\x20AND\x20(filename\x20LIKE\x20?\x20OR\x20mode\x20\x20LIKE\x20?)','sortType','../../db/dbUserTable','asc','searchStr','getAllByWhereAndFieldFromAiClassesToIndex','faceId','Params\x20error\x20:\x20albumId','body','Params\x20error\x20:\x20sortType','\x20AND\x20','prepare','INDEX_TABLE_NAME_PHOTO','raw_filename','../utils/checkUtil','getAllByWhereAndField','doUserCanGet','isNumber','\x20GROUP\x20BY\x20f.id','get','rawImageIndex','ordinaryAlbumId','albumId','355014OTkrkH','getPathWhere','40FHOpEt','push','path','\x20f.id,path,is_livephoto,is_raw,raw_filename,check_time,original_time,in_trash_time,original_date,filename,ext,type,f.width,f.height,duration,size,latitude,longitude,geohash,mode,tiny_path','../../db/dbFileIndexTable','photo','../../db/dbAlbumTable','300BjuDFl','livephotoIndex','excludeIdsJson','\x20\x20AND\x20is_file=1\x20\x20','2vLpQZG','exports','160KilYaa','excludeIds','\x20AND\x20in_trash=0','is_raw','trash','\x20AND\x20is_livephoto=1','Params\x20error\x20:\x20timestamp\x20/\x20timeType','app','excludePathPhoto','\x20AND\x20is_show=1'];_0x5441=function(){return _0x5e9d58;};return _0x5441();}const dbFileIndexTable=require(_0x224022(0x107)),dbSourceFolderTable=require(_0x224022(0xd6));let checkUtil=require(_0x224022(0xf8));const dbUserTable=require(_0x224022(0xec)),dbAlbumTable=require(_0x224022(0x109));photoApiUtil[_0x224022(0xe2)]=function(_0x1dc805,_0x4ba16f){const _0x49a046=_0x224022;if(dbUserTable[_0x49a046(0xfa)](_0x1dc805,_0x4ba16f,'photo',_0x49a046(0xd2),'',!![])!=!![])return[];let _0x29feb9=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xda)],_0x316545=dbUserTable['getUserPathWhere'](_0x1dc805,_0x49a046(0x108),_0x49a046(0xd2),!![],_0x29feb9),_0x8e3073=_0x49a046(0x106),_0xc264e7=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xe6)],_0x32248d=_0x1dc805['body'][_0x49a046(0xe9)],_0xfb8b6=_0x1dc805['body'][_0x49a046(0xca)],_0x5b6071=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xc9)],_0x4df907=_0x1dc805['body'][_0x49a046(0xbd)],_0x192479=_0x1dc805[_0x49a046(0xf2)]['sortField'],_0x53c1f5=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xeb)],_0x372c21=_0x1dc805[_0x49a046(0xf2)]['geohash'],_0x731fb0=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xee)],_0x1f0c5d=_0x1dc805['body']['libraryId'];if(dbFileIndexTable[_0x49a046(0xd8)](_0x1dc805,_0x4ba16f,_0x192479,_0x53c1f5)!==!![])return[];if(!checkUtil[_0x49a046(0xdf)]([_0x49a046(0xed),_0x49a046(0xdb)],_0x53c1f5))return console[_0x49a046(0xe8)](_0x49a046(0xf3)),[];if(!checkUtil[_0x49a046(0xfb)](_0xc264e7)||!checkUtil['isNumber'](_0x32248d))return console[_0x49a046(0xe8)](_0x49a046(0xbf)),[];let _0x32273f=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xba)];if(!_0x32248d||!_0xc264e7)return[];let _0x185e2b='',_0x1a3ccb=[];_0x32248d==0x1?(_0x185e2b+='\x20'+_0x192479+_0x49a046(0xe5)+_0x192479+_0x49a046(0xd0),_0x1a3ccb[_0x49a046(0x104)](_0xc264e7)):(_0x185e2b+='\x20'+_0x192479+_0x49a046(0xcc),_0x1a3ccb[_0x49a046(0x104)](_0xc264e7));let _0x504020=_0x1dc805[_0x49a046(0xf2)][_0x49a046(0x10c)];if(_0x504020)try{_0x32273f=JSON['parse'](_0x504020);}catch(_0x1a0568){console[_0x49a046(0xe8)](_0x1a0568);}if(_0x32273f&&_0x32273f[_0x49a046(0xc7)]>0x0){_0x185e2b+='\x20AND\x20f.id\x20NOT\x20IN\x20(';for(let _0x30c37e=0x0;_0x30c37e<_0x32273f[_0x49a046(0xc7)];_0x30c37e++){_0x185e2b+=_0x32273f[_0x30c37e],_0x30c37e!=_0x32273f[_0x49a046(0xc7)]-0x1&&(_0x185e2b+=',');}_0x185e2b+=')';}_0x372c21&&(_0x185e2b+='\x20AND\x20geohash\x20LIKE\x20?\x20',_0x1a3ccb[_0x49a046(0x104)](_0x372c21+'%'));let _0x1553d6=dbSourceFolderTable[_0x49a046(0xe3)](_0x1dc805[_0x49a046(0xc0)][_0x49a046(0xc4)],_0x49a046(0x105),_0x49a046(0xc1));_0x1553d6&&(_0x185e2b+=_0x49a046(0xf4)+_0x1553d6);let _0x234921=dbSourceFolderTable[_0x49a046(0xe3)](_0x1dc805[_0x49a046(0xc0)][_0x49a046(0xc4)],_0x49a046(0xdc),_0x49a046(0xc6));_0x234921&&(_0x185e2b+=_0x49a046(0xf4)+_0x234921);if(_0x5b6071==0x0||!_0x5b6071)_0x185e2b+=_0x49a046(0xd1);else{if(_0x5b6071==0x1||_0x5b6071==0x2){if(!checkUtil[_0x49a046(0xfb)](_0x5b6071))return console['log'](_0x49a046(0xd9)),[];_0x185e2b+=_0x49a046(0xe0),_0x1a3ccb['push'](_0x5b6071);}else _0x5b6071==0x3&&(_0x185e2b+=_0x49a046(0xbe));}_0x731fb0&&(_0x185e2b+=_0x49a046(0xea),_0x1a3ccb[_0x49a046(0x104)]('%'+_0x731fb0+'%'),_0x1a3ccb[_0x49a046(0x104)]('%'+_0x731fb0+'%'));!_0x4df907||_0x4df907==0x0?(_0x185e2b+=_0x49a046(0xbb),_0x185e2b+=_0x49a046(0xc2)):_0x185e2b+=_0x49a046(0xe1);if(_0x1f0c5d){let _0x55e49f=_0x1dc805[_0x49a046(0xc0)][_0x49a046(0xc5)][_0x49a046(0xf5)]('SELECT\x20*\x20FROM\x20photo_library\x20WHERE\x20id=?')[_0x49a046(0xfd)](_0x1f0c5d);if(_0x55e49f)try{let _0x88a194=JSON['parse'](_0x55e49f['path_list']),_0x2c1fb8=dbUserTable[_0x49a046(0x102)](!![],_0x88a194);_0x185e2b+=_0x2c1fb8[_0x49a046(0xce)],_0x1a3ccb['push'](..._0x2c1fb8[_0x49a046(0xde)]);}catch(_0x776de2){console[_0x49a046(0xe8)](_0x776de2);}}if(_0x1dc805[_0x49a046(0xf2)][_0x49a046(0x100)]){if(!checkUtil[_0x49a046(0xfb)](_0x1dc805[_0x49a046(0xf2)][_0x49a046(0x100)]))return console[_0x49a046(0xe8)](_0x49a046(0xf1)),[];let _0x13130b=dbAlbumTable['getAlbumWhereStr'](_0x1dc805[_0x49a046(0xc0)][_0x49a046(0xc4)],_0x1dc805[_0x49a046(0xf2)]['albumId']);_0x13130b&&(_0x185e2b+=_0x49a046(0xf4)+_0x13130b);}_0x185e2b+=_0x316545[_0x49a046(0xce)],_0x1a3ccb[_0x49a046(0x104)](..._0x316545[_0x49a046(0xde)]),_0x185e2b+=_0x49a046(0xb6);(_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xdd)]||_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xf0)])&&(_0x185e2b+=_0x49a046(0xfc));_0x185e2b+='\x20ORDER\x20BY\x20'+_0x192479+'\x20'+_0x53c1f5;!_0xfb8b6&&(_0xfb8b6=0x32);if(!checkUtil[_0x49a046(0xfb)](_0xfb8b6))return console[_0x49a046(0xe8)](_0x49a046(0xcd)),[];_0x185e2b+=_0x49a046(0xcf),_0x1a3ccb[_0x49a046(0x104)](_0xfb8b6);let _0x13be11=[];if(_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xff)])_0x13be11=dbFileIndexTable['getAllByWhereAndFieldFromOrdinaryAlbum'](_0x1dc805[_0x49a046(0xc0)]['dbFileIndex'],_0x185e2b,_0x8e3073,[parseInt(_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xff)]),..._0x1a3ccb]);else{if(_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xdd)])_0x13be11=dbFileIndexTable[_0x49a046(0xef)](_0x1dc805[_0x49a046(0xc0)][_0x49a046(0xc5)],_0x1dc805['body'][_0x49a046(0xdd)],_0x185e2b,_0x8e3073,_0x1a3ccb);else _0x1dc805['body']['faceId']?_0x13be11=dbFileIndexTable[_0x49a046(0xd7)](_0x1dc805['app'][_0x49a046(0xc5)],_0x1dc805[_0x49a046(0xf2)][_0x49a046(0xf0)],_0x185e2b,_0x8e3073,_0x1a3ccb):_0x13be11=dbFileIndexTable[_0x49a046(0xf9)](_0x1dc805[_0x49a046(0xc0)]['dbFileIndex'],_0x185e2b,_0x8e3073,dbFileIndexTable[_0x49a046(0xf6)],_0x1a3ccb);}if(_0x13be11&&_0x13be11['length']>0x0)for(let _0x194053 in _0x13be11){_0x13be11[_0x194053]['is_livephoto']==0x1&&(_0x13be11[_0x194053][_0x49a046(0x10b)]=dbFileIndexTable['getLivePhotoIndex'](_0x1dc805[_0x49a046(0xc0)]['dbFileIndex'],_0x13be11[_0x194053],_0x8e3073));if(_0x13be11[_0x194053][_0x49a046(0xbc)]==0x0&&_0x13be11[_0x194053][_0x49a046(0xf7)]!=null&&_0x13be11[_0x194053][_0x49a046(0xf7)]!=''){let _0x523dbc=dbFileIndexTable[_0x49a046(0xcb)](_0x1dc805['app']['dbFileIndex'],_0x13be11[_0x194053],_0x8e3073);_0x523dbc&&(_0x13be11[_0x194053][_0x49a046(0xfe)]=_0x523dbc);}}return _0x13be11;},module[_0x224022(0xb8)]=photoApiUtil;