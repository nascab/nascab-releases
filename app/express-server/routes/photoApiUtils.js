const _0x3a115b=_0xc67d;function _0xc67d(_0x306ea9,_0x5c7675){const _0x20b531=_0x20b5();return _0xc67d=function(_0xc67dde,_0x4da484){_0xc67dde=_0xc67dde-0x165;let _0x290325=_0x20b531[_0xc67dde];return _0x290325;},_0xc67d(_0x306ea9,_0x5c7675);}(function(_0x1b5006,_0x25ab6d){const _0x47d64b=_0xc67d,_0x49e447=_0x1b5006();while(!![]){try{const _0x2fe93e=parseInt(_0x47d64b(0x171))/0x1*(parseInt(_0x47d64b(0x16e))/0x2)+parseInt(_0x47d64b(0x1b5))/0x3*(-parseInt(_0x47d64b(0x1a4))/0x4)+-parseInt(_0x47d64b(0x173))/0x5*(parseInt(_0x47d64b(0x1ac))/0x6)+-parseInt(_0x47d64b(0x1a0))/0x7*(-parseInt(_0x47d64b(0x1a1))/0x8)+-parseInt(_0x47d64b(0x197))/0x9+parseInt(_0x47d64b(0x1b0))/0xa+parseInt(_0x47d64b(0x17d))/0xb;if(_0x2fe93e===_0x25ab6d)break;else _0x49e447['push'](_0x49e447['shift']());}catch(_0xaddf93){_0x49e447['push'](_0x49e447['shift']());}}}(_0x20b5,0x29dfb));let photoApiUtil={};const dbFileIndexTable=require(_0x3a115b(0x184)),dbSourceFolderTable=require(_0x3a115b(0x17a));let checkUtil=require(_0x3a115b(0x194));const dbUserTable=require('../../db/dbUserTable'),dbAlbumTable=require(_0x3a115b(0x1a7));photoApiUtil[_0x3a115b(0x1b8)]=function(_0x9b95b4,_0xecda3d){const _0x23e1f3=_0x3a115b;if(dbUserTable[_0x23e1f3(0x1af)](_0x9b95b4,_0xecda3d,_0x23e1f3(0x192),_0x23e1f3(0x18c),'',!![])!=!![])return[];let _0x3217e3=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x1a9)],_0x4f8d10=dbUserTable[_0x23e1f3(0x175)](_0x9b95b4,_0x23e1f3(0x192),_0x23e1f3(0x18c),!![],_0x3217e3),_0x416750='\x20f.id,path,is_livephoto,is_raw,raw_filename,check_time,original_time,in_trash_time,original_date,filename,ext,type,f.width,f.height,duration,size,latitude,longitude,geohash,mode,tiny_path',_0x4bbab7=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x1b3)],_0x5509cd=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x16f)],_0x20501b=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x174)],_0x1dcff0=_0x9b95b4[_0x23e1f3(0x18a)]['fileType'],_0x53b56b=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x195)],_0x541172=_0x9b95b4[_0x23e1f3(0x18a)]['sortField'],_0x3156b5=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x19c)],_0x114a4e=_0x9b95b4[_0x23e1f3(0x18a)]['geohash'],_0x4e47be=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x1b6)],_0x616b52=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x1ab)];if(dbFileIndexTable[_0x23e1f3(0x18b)](_0x9b95b4,_0xecda3d,_0x541172,_0x3156b5)!==!![])return[];if(!checkUtil[_0x23e1f3(0x1a6)]([_0x23e1f3(0x199),_0x23e1f3(0x16c)],_0x3156b5))return console[_0x23e1f3(0x168)]('Params\x20error\x20:\x20sortType'),[];if(!checkUtil[_0x23e1f3(0x1b4)](_0x4bbab7)||!checkUtil[_0x23e1f3(0x1b4)](_0x5509cd))return console['log']('Params\x20error\x20:\x20timestamp\x20/\x20timeType'),[];let _0xa16157=_0x9b95b4[_0x23e1f3(0x18a)]['excludeIds'];if(!_0x5509cd||!_0x4bbab7)return[];let _0x2fe4c1='',_0xb48df0=[];_0x5509cd==0x1?(_0x2fe4c1+='\x20'+_0x541172+_0x23e1f3(0x182)+_0x541172+'\x20>\x200',_0xb48df0[_0x23e1f3(0x1ad)](_0x4bbab7)):(_0x2fe4c1+='\x20'+_0x541172+_0x23e1f3(0x17f),_0xb48df0[_0x23e1f3(0x1ad)](_0x4bbab7));let _0x32e209=_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x1b7)];if(_0x32e209)try{_0xa16157=JSON[_0x23e1f3(0x193)](_0x32e209);}catch(_0x4f8f1c){console[_0x23e1f3(0x168)](_0x4f8f1c);}if(_0xa16157&&_0xa16157[_0x23e1f3(0x190)]>0x0){_0x2fe4c1+=_0x23e1f3(0x19b);for(let _0x56573e=0x0;_0x56573e<_0xa16157[_0x23e1f3(0x190)];_0x56573e++){_0x2fe4c1+=_0xa16157[_0x56573e],_0x56573e!=_0xa16157[_0x23e1f3(0x190)]-0x1&&(_0x2fe4c1+=',');}_0x2fe4c1+=')';}_0x114a4e&&(_0x2fe4c1+=_0x23e1f3(0x177),_0xb48df0['push'](_0x114a4e+'%'));let _0x210105=dbSourceFolderTable[_0x23e1f3(0x1b2)](_0x9b95b4['app']['dbOther'],_0x23e1f3(0x172),'excludePathPhoto');_0x210105&&(_0x2fe4c1+='\x20AND\x20'+_0x210105);let _0x162ba8=dbSourceFolderTable[_0x23e1f3(0x1b2)](_0x9b95b4['app'][_0x23e1f3(0x189)],'filename','excludeFilenamePhoto');_0x162ba8&&(_0x2fe4c1+=_0x23e1f3(0x167)+_0x162ba8);if(_0x1dcff0==0x0||!_0x1dcff0)_0x2fe4c1+=_0x23e1f3(0x1a8);else{if(_0x1dcff0==0x1||_0x1dcff0==0x2){if(!checkUtil[_0x23e1f3(0x1b4)](_0x1dcff0))return console[_0x23e1f3(0x168)]('Params\x20error\x20:\x20fileType'),[];_0x2fe4c1+=_0x23e1f3(0x1a5),_0xb48df0['push'](_0x1dcff0);}else _0x1dcff0==0x3&&(_0x2fe4c1+=_0x23e1f3(0x1a2));}_0x4e47be&&(_0x2fe4c1+=_0x23e1f3(0x176),_0xb48df0[_0x23e1f3(0x1ad)]('%'+_0x4e47be+'%'),_0xb48df0[_0x23e1f3(0x1ad)]('%'+_0x4e47be+'%'));!_0x53b56b||_0x53b56b==0x0?(_0x2fe4c1+=_0x23e1f3(0x17e),_0x2fe4c1+=_0x23e1f3(0x1b9)):_0x2fe4c1+=_0x23e1f3(0x191);if(_0x616b52){let _0x48059f=_0x9b95b4[_0x23e1f3(0x19d)][_0x23e1f3(0x1a3)][_0x23e1f3(0x169)](_0x23e1f3(0x17b))[_0x23e1f3(0x185)](_0x616b52);if(_0x48059f)try{let _0x7a7e45=JSON['parse'](_0x48059f[_0x23e1f3(0x16d)]),_0x9b56d7=dbUserTable['getPathWhere'](!![],_0x7a7e45);_0x2fe4c1+=_0x9b56d7[_0x23e1f3(0x19a)],_0xb48df0[_0x23e1f3(0x1ad)](..._0x9b56d7[_0x23e1f3(0x1ae)]);}catch(_0x161508){console[_0x23e1f3(0x168)](_0x161508);}}if(_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x180)]){if(!checkUtil['isNumber'](_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x180)]))return console['log'](_0x23e1f3(0x19f)),[];let _0x2e2e99=dbAlbumTable[_0x23e1f3(0x187)](_0x9b95b4[_0x23e1f3(0x19d)][_0x23e1f3(0x189)],_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x180)]);_0x2e2e99&&(_0x2fe4c1+=_0x23e1f3(0x167)+_0x2e2e99);}_0x2fe4c1+=_0x4f8d10['whereStr'],_0xb48df0[_0x23e1f3(0x1ad)](..._0x4f8d10['paramsList']),_0x2fe4c1+=_0x23e1f3(0x165);(_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x17c)]||_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x18e)])&&(_0x2fe4c1+=_0x23e1f3(0x179));_0x2fe4c1+=_0x23e1f3(0x1aa)+_0x541172+'\x20'+_0x3156b5;!_0x20501b&&(_0x20501b=0x32);if(!checkUtil[_0x23e1f3(0x1b4)](_0x20501b))return console['log'](_0x23e1f3(0x16a)),[];_0x2fe4c1+=_0x23e1f3(0x16b),_0xb48df0[_0x23e1f3(0x1ad)](_0x20501b);let _0x57749a=[];if(_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x19e)])_0x57749a=dbFileIndexTable[_0x23e1f3(0x166)](_0x9b95b4['app'][_0x23e1f3(0x1a3)],_0x2fe4c1,_0x416750,[parseInt(_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x19e)]),..._0xb48df0]);else{if(_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x17c)])_0x57749a=dbFileIndexTable[_0x23e1f3(0x198)](_0x9b95b4[_0x23e1f3(0x19d)][_0x23e1f3(0x1a3)],_0x9b95b4[_0x23e1f3(0x18a)][_0x23e1f3(0x17c)],_0x2fe4c1,_0x416750,_0xb48df0);else _0x9b95b4['body'][_0x23e1f3(0x18e)]?_0x57749a=dbFileIndexTable[_0x23e1f3(0x183)](_0x9b95b4['app'][_0x23e1f3(0x1a3)],_0x9b95b4['body'][_0x23e1f3(0x18e)],_0x2fe4c1,_0x416750,_0xb48df0):_0x57749a=dbFileIndexTable[_0x23e1f3(0x18f)](_0x9b95b4[_0x23e1f3(0x19d)][_0x23e1f3(0x1a3)],_0x2fe4c1,_0x416750,dbFileIndexTable[_0x23e1f3(0x196)],_0xb48df0);}if(_0x57749a&&_0x57749a[_0x23e1f3(0x190)]>0x0)for(let _0x96df0b in _0x57749a){_0x57749a[_0x96df0b][_0x23e1f3(0x1b1)]==0x1&&(_0x57749a[_0x96df0b][_0x23e1f3(0x181)]=dbFileIndexTable[_0x23e1f3(0x18d)](_0x9b95b4[_0x23e1f3(0x19d)][_0x23e1f3(0x1a3)],_0x57749a[_0x96df0b],_0x416750));if(_0x57749a[_0x96df0b][_0x23e1f3(0x186)]==0x0&&_0x57749a[_0x96df0b][_0x23e1f3(0x178)]!=null&&_0x57749a[_0x96df0b][_0x23e1f3(0x178)]!=''){let _0x322ae4=dbFileIndexTable[_0x23e1f3(0x188)](_0x9b95b4[_0x23e1f3(0x19d)][_0x23e1f3(0x1a3)],_0x57749a[_0x96df0b],_0x416750);_0x322ae4&&(_0x57749a[_0x96df0b]['rawImageIndex']=_0x322ae4);}}return _0x57749a;},module[_0x3a115b(0x170)]=photoApiUtil;function _0x20b5(){const _0x155c8a=['1708sWqIVW','1432FfSGAO','\x20AND\x20is_livephoto=1','dbFileIndex','308qmZogb','\x20AND\x20(type=?\x20\x20and\x20is_livephoto!=1)','arrayInCheck','../../db/dbAlbumTable','\x20AND\x20(type=1\x20or\x20type=2)','sourceFolderList','\x20ORDER\x20BY\x20','libraryId','24cSaezB','push','paramsList','doUserCanGet','2197110EXaIqf','is_livephoto','getExcludePathWhereStr','timestamp','isNumber','1668QkASvf','searchStr','excludeIdsJson','getPhotoByParams','\x20AND\x20is_show=1','\x20\x20AND\x20is_file=1\x20\x20','getAllByWhereAndFieldFromOrdinaryAlbum','\x20AND\x20','log','prepare','Params\x20error\x20:\x20count','\x20LIMIT\x20?','desc','path_list','2zNgdzU','timeType','exports','229117FWqeol','path','372965GQqhlR','count','getUserPathWhere','\x20AND\x20(filename\x20LIKE\x20?\x20OR\x20mode\x20\x20LIKE\x20?)','\x20AND\x20geohash\x20LIKE\x20?\x20','raw_filename','\x20GROUP\x20BY\x20f.id','../../db/dbSourceFolderTable','SELECT\x20*\x20FROM\x20photo_library\x20WHERE\x20id=?','aiClassId','1496550lSSJDk','\x20AND\x20in_trash=0','>=?','albumId','livephotoIndex','<=?\x20AND\x20','getAllByWhereAndFieldFromFaceIndex','../../db/dbFileIndexTable','get','is_raw','getAlbumWhereStr','getRawImageIndex','dbOther','body','checkOrderParams','power_get','getLivePhotoIndex','faceId','getAllByWhereAndField','length','\x20AND\x20in_trash=1','photo','parse','../utils/checkUtil','trash','INDEX_TABLE_NAME_PHOTO','1042695RloGVn','getAllByWhereAndFieldFromAiClassesToIndex','asc','whereStr','\x20AND\x20f.id\x20NOT\x20IN\x20(','sortType','app','ordinaryAlbumId','Params\x20error\x20:\x20albumId'];_0x20b5=function(){return _0x155c8a;};return _0x20b5();}