function _0x4af9(){const _0x406467=['path','\x20AND\x20geohash\x20LIKE\x20?\x20','getAlbumWhereStr','excludeIds','ordinaryAlbumId','getLivePhotoIndex','trash','../utils/checkUtil','isNumber','getExcludePathWhereStr','\x20AND\x20in_trash=0','fileType','\x20AND\x20(filename\x20LIKE\x20?\x20OR\x20mode\x20\x20LIKE\x20?)','Params\x20error\x20:\x20count','1196250twctpp','desc','Params\x20error\x20:\x20fileType','filename','get','asc','22403980VlQAJA','\x20AND\x20is_show=1','../../db/dbUserTable','is_raw','\x20>\x200','app','getPhotoByParams','log','getAllByWhereAndField','\x20LIMIT\x20?','arrayInCheck','photo','power_get','../../db/dbSourceFolderTable','\x20AND\x20','getUserPathWhere','getAllByWhereAndFieldFromOrdinaryAlbum','2069850NLaRro','3145854XCReHQ','push','geohash','getRawImageIndex','dbFileIndex','248951UCReda','getPathWhere','excludeIdsJson','dbOther','prepare','\x20AND\x20is_livephoto=1','Params\x20error\x20:\x20albumId','Params\x20error\x20:\x20timestamp\x20/\x20timeType','\x20AND\x20(type=?\x20\x20and\x20is_livephoto!=1)','\x20AND\x20in_trash=1','188OmxkdA','doUserCanGet','\x20\x20AND\x20is_file=1\x20\x20','Params\x20error\x20:\x20sortType','../../db/dbAlbumTable','count','length','raw_filename','faceId','body','rawImageIndex','excludeFilenamePhoto','excludePathPhoto','\x20GROUP\x20BY\x20f.id','checkOrderParams','parse','timestamp','albumId','47739PZGdNL','sortField','7LCSdnB','6632848QvTvnv','INDEX_TABLE_NAME_PHOTO','paramsList','\x20AND\x20(type=1\x20or\x20type=2)','getAllByWhereAndFieldFromAiClassesToIndex','9BmtZyQ','aiClassId'];_0x4af9=function(){return _0x406467;};return _0x4af9();}const _0xe246cf=_0x1017;(function(_0x558d93,_0x5144dc){const _0xa72502=_0x1017,_0x18ee38=_0x558d93();while(!![]){try{const _0xa934c2=parseInt(_0xa72502(0x1eb))/0x1+-parseInt(_0xa72502(0x21f))/0x2+parseInt(_0xa72502(0x207))/0x3*(-parseInt(_0xa72502(0x1f5))/0x4)+-parseInt(_0xa72502(0x1e5))/0x5+parseInt(_0xa72502(0x1e6))/0x6*(parseInt(_0xa72502(0x209))/0x7)+-parseInt(_0xa72502(0x20a))/0x8+-parseInt(_0xa72502(0x20f))/0x9*(-parseInt(_0xa72502(0x1d4))/0xa);if(_0xa934c2===_0x5144dc)break;else _0x18ee38['push'](_0x18ee38['shift']());}catch(_0x962029){_0x18ee38['push'](_0x18ee38['shift']());}}}(_0x4af9,0x67a62));let photoApiUtil={};function _0x1017(_0x2faa97,_0x1bf245){const _0x4af934=_0x4af9();return _0x1017=function(_0x1017c3,_0x3b30c6){_0x1017c3=_0x1017c3-0x1d0;let _0x591de7=_0x4af934[_0x1017c3];return _0x591de7;},_0x1017(_0x2faa97,_0x1bf245);}const dbFileIndexTable=require('../../db/dbFileIndexTable'),dbSourceFolderTable=require(_0xe246cf(0x1e1));let checkUtil=require(_0xe246cf(0x218));const dbUserTable=require(_0xe246cf(0x1d6)),dbAlbumTable=require(_0xe246cf(0x1f9));photoApiUtil[_0xe246cf(0x1da)]=function(_0x316b6f,_0x586605){const _0x55c3bd=_0xe246cf;if(dbUserTable[_0x55c3bd(0x1f6)](_0x316b6f,_0x586605,_0x55c3bd(0x1df),_0x55c3bd(0x1e0),'',!![])!=!![])return[];let _0x4b0ec0=_0x316b6f['body']['sourceFolderList'],_0x132114=dbUserTable[_0x55c3bd(0x1e3)](_0x316b6f,_0x55c3bd(0x1df),_0x55c3bd(0x1e0),!![],_0x4b0ec0),_0x5bfd1b='\x20f.id,path,is_livephoto,is_raw,raw_filename,check_time,original_time,in_trash_time,original_date,filename,ext,type,f.width,f.height,duration,size,latitude,longitude,geohash,mode,tiny_path',_0x1ef459=_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x205)],_0x171653=_0x316b6f[_0x55c3bd(0x1fe)]['timeType'],_0x199b09=_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x1fa)],_0x28e050=_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x21c)],_0x11fc09=_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x217)],_0x10a3c5=_0x316b6f['body'][_0x55c3bd(0x208)],_0x1d97c7=_0x316b6f[_0x55c3bd(0x1fe)]['sortType'],_0x2c1fce=_0x316b6f['body'][_0x55c3bd(0x1e8)],_0x2dd632=_0x316b6f[_0x55c3bd(0x1fe)]['searchStr'],_0x5ed0be=_0x316b6f['body']['libraryId'];if(dbFileIndexTable[_0x55c3bd(0x203)](_0x316b6f,_0x586605,_0x10a3c5,_0x1d97c7)!==!![])return[];if(!checkUtil[_0x55c3bd(0x1de)]([_0x55c3bd(0x1d3),_0x55c3bd(0x220)],_0x1d97c7))return console[_0x55c3bd(0x1db)](_0x55c3bd(0x1f8)),[];if(!checkUtil[_0x55c3bd(0x219)](_0x1ef459)||!checkUtil[_0x55c3bd(0x219)](_0x171653))return console[_0x55c3bd(0x1db)](_0x55c3bd(0x1f2)),[];let _0xdabaca=_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x214)];if(!_0x171653||!_0x1ef459)return[];let _0x773453='',_0x4f6c95=[];_0x171653==0x1?(_0x773453+='\x20'+_0x10a3c5+'<=?\x20AND\x20'+_0x10a3c5+_0x55c3bd(0x1d8),_0x4f6c95[_0x55c3bd(0x1e7)](_0x1ef459)):(_0x773453+='\x20'+_0x10a3c5+'>=?',_0x4f6c95[_0x55c3bd(0x1e7)](_0x1ef459));let _0x2187ba=_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x1ed)];if(_0x2187ba)try{_0xdabaca=JSON[_0x55c3bd(0x204)](_0x2187ba);}catch(_0x42126b){console[_0x55c3bd(0x1db)](_0x42126b);}if(_0xdabaca&&_0xdabaca[_0x55c3bd(0x1fb)]>0x0){_0x773453+='\x20AND\x20f.id\x20NOT\x20IN\x20(';for(let _0x41f7b3=0x0;_0x41f7b3<_0xdabaca[_0x55c3bd(0x1fb)];_0x41f7b3++){_0x773453+=_0xdabaca[_0x41f7b3],_0x41f7b3!=_0xdabaca[_0x55c3bd(0x1fb)]-0x1&&(_0x773453+=',');}_0x773453+=')';}_0x2c1fce&&(_0x773453+=_0x55c3bd(0x212),_0x4f6c95['push'](_0x2c1fce+'%'));let _0x7f5c33=dbSourceFolderTable[_0x55c3bd(0x21a)](_0x316b6f['app'][_0x55c3bd(0x1ee)],_0x55c3bd(0x211),_0x55c3bd(0x201));_0x7f5c33&&(_0x773453+='\x20AND\x20'+_0x7f5c33);let _0x1d0a80=dbSourceFolderTable['getExcludePathWhereStr'](_0x316b6f['app'][_0x55c3bd(0x1ee)],_0x55c3bd(0x1d1),_0x55c3bd(0x200));_0x1d0a80&&(_0x773453+=_0x55c3bd(0x1e2)+_0x1d0a80);if(_0x28e050==0x0||!_0x28e050)_0x773453+=_0x55c3bd(0x20d);else{if(_0x28e050==0x1||_0x28e050==0x2){if(!checkUtil[_0x55c3bd(0x219)](_0x28e050))return console[_0x55c3bd(0x1db)](_0x55c3bd(0x1d0)),[];_0x773453+=_0x55c3bd(0x1f3),_0x4f6c95[_0x55c3bd(0x1e7)](_0x28e050);}else _0x28e050==0x3&&(_0x773453+=_0x55c3bd(0x1f0));}_0x2dd632&&(_0x773453+=_0x55c3bd(0x21d),_0x4f6c95[_0x55c3bd(0x1e7)]('%'+_0x2dd632+'%'),_0x4f6c95['push']('%'+_0x2dd632+'%'));!_0x11fc09||_0x11fc09==0x0?(_0x773453+=_0x55c3bd(0x21b),_0x773453+=_0x55c3bd(0x1d5)):_0x773453+=_0x55c3bd(0x1f4);if(_0x5ed0be){let _0x17688f=_0x316b6f['app']['dbFileIndex'][_0x55c3bd(0x1ef)]('SELECT\x20*\x20FROM\x20photo_library\x20WHERE\x20id=?')[_0x55c3bd(0x1d2)](_0x5ed0be);if(_0x17688f)try{let _0x4f471c=JSON[_0x55c3bd(0x204)](_0x17688f['path_list']),_0x36c0b1=dbUserTable[_0x55c3bd(0x1ec)](!![],_0x4f471c);_0x773453+=_0x36c0b1['whereStr'],_0x4f6c95['push'](..._0x36c0b1[_0x55c3bd(0x20c)]);}catch(_0x1e125b){console['log'](_0x1e125b);}}if(_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x206)]){if(!checkUtil[_0x55c3bd(0x219)](_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x206)]))return console[_0x55c3bd(0x1db)](_0x55c3bd(0x1f1)),[];let _0x3570a1=dbAlbumTable[_0x55c3bd(0x213)](_0x316b6f['app'][_0x55c3bd(0x1ee)],_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x206)]);_0x3570a1&&(_0x773453+=_0x55c3bd(0x1e2)+_0x3570a1);}_0x773453+=_0x132114['whereStr'],_0x4f6c95[_0x55c3bd(0x1e7)](..._0x132114[_0x55c3bd(0x20c)]),_0x773453+=_0x55c3bd(0x1f7);(_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x210)]||_0x316b6f['body'][_0x55c3bd(0x1fd)])&&(_0x773453+=_0x55c3bd(0x202));_0x773453+='\x20ORDER\x20BY\x20'+_0x10a3c5+'\x20'+_0x1d97c7;!_0x199b09&&(_0x199b09=0x32);if(!checkUtil[_0x55c3bd(0x219)](_0x199b09))return console[_0x55c3bd(0x1db)](_0x55c3bd(0x21e)),[];_0x773453+=_0x55c3bd(0x1dd),_0x4f6c95[_0x55c3bd(0x1e7)](_0x199b09);let _0x4f1bd4=[];if(_0x316b6f[_0x55c3bd(0x1fe)]['ordinaryAlbumId'])_0x4f1bd4=dbFileIndexTable[_0x55c3bd(0x1e4)](_0x316b6f[_0x55c3bd(0x1d9)][_0x55c3bd(0x1ea)],_0x773453,_0x5bfd1b,[parseInt(_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x215)]),..._0x4f6c95]);else{if(_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x210)])_0x4f1bd4=dbFileIndexTable[_0x55c3bd(0x20e)](_0x316b6f[_0x55c3bd(0x1d9)]['dbFileIndex'],_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x210)],_0x773453,_0x5bfd1b,_0x4f6c95);else _0x316b6f[_0x55c3bd(0x1fe)]['faceId']?_0x4f1bd4=dbFileIndexTable['getAllByWhereAndFieldFromFaceIndex'](_0x316b6f[_0x55c3bd(0x1d9)][_0x55c3bd(0x1ea)],_0x316b6f[_0x55c3bd(0x1fe)][_0x55c3bd(0x1fd)],_0x773453,_0x5bfd1b,_0x4f6c95):_0x4f1bd4=dbFileIndexTable[_0x55c3bd(0x1dc)](_0x316b6f[_0x55c3bd(0x1d9)]['dbFileIndex'],_0x773453,_0x5bfd1b,dbFileIndexTable[_0x55c3bd(0x20b)],_0x4f6c95);}if(_0x4f1bd4&&_0x4f1bd4[_0x55c3bd(0x1fb)]>0x0)for(let _0x50142d in _0x4f1bd4){_0x4f1bd4[_0x50142d]['is_livephoto']==0x1&&(_0x4f1bd4[_0x50142d]['livephotoIndex']=dbFileIndexTable[_0x55c3bd(0x216)](_0x316b6f['app']['dbFileIndex'],_0x4f1bd4[_0x50142d],_0x5bfd1b));if(_0x4f1bd4[_0x50142d][_0x55c3bd(0x1d7)]==0x0&&_0x4f1bd4[_0x50142d][_0x55c3bd(0x1fc)]!=null&&_0x4f1bd4[_0x50142d][_0x55c3bd(0x1fc)]!=''){let _0x4d20c3=dbFileIndexTable[_0x55c3bd(0x1e9)](_0x316b6f['app'][_0x55c3bd(0x1ea)],_0x4f1bd4[_0x50142d],_0x5bfd1b);_0x4d20c3&&(_0x4f1bd4[_0x50142d][_0x55c3bd(0x1ff)]=_0x4d20c3);}}return _0x4f1bd4;},module['exports']=photoApiUtil;