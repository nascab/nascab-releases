function _0x1707(_0x35abd1,_0x5aef6c){const _0x33bfcd=_0x33bf();return _0x1707=function(_0x17076b,_0x16b048){_0x17076b=_0x17076b-0x1f1;let _0x501712=_0x33bfcd[_0x17076b];return _0x501712;},_0x1707(_0x35abd1,_0x5aef6c);}function _0x33bf(){const _0x147979=['log','targetFolderNotExist','app','1090TGjdjf','SAMENAME','2749327UdpCQU','sameNameFileAlreadExist','书籍封面保存目录','basename','encodeFilename','mkdirSync','W_OK','need\x20book\x20index\x20id','body','653292vQturu','462378mMwaQU','headers','../utils/fileUtils','uploadBookCover','express','decodePath','doUserCanGet','1415GEXuKK','json','over','INDEX_TABLE_NAME_BOOK','7805392slvzdY','constants','save_path','over_mode','804mdZcgV','existsSync','relativePath','returnErrMsg','/folderExist','join','4Hgfpir','lastIndexOf','uploadSubtitle','skip','overMode','1309947glNtPK','stat','folder','1062WgzJYA','query','operationFail','uploadFile','filename','path','../../db/dbUserTable','savePath','/regularUpload','post','access','returnFileError','getById','exports'];_0x33bf=function(){return _0x147979;};return _0x33bf();}const _0x26d8fe=_0x1707;(function(_0x4a56f0,_0x151aa1){const _0x569c8b=_0x1707,_0x35eadb=_0x4a56f0();while(!![]){try{const _0x205447=-parseInt(_0x569c8b(0x22a))/0x1+parseInt(_0x569c8b(0x1f1))/0x2+-parseInt(_0x569c8b(0x20b))/0x3*(parseInt(_0x569c8b(0x206))/0x4)+-parseInt(_0x569c8b(0x1f8))/0x5*(-parseInt(_0x569c8b(0x200))/0x6)+parseInt(_0x569c8b(0x221))/0x7+parseInt(_0x569c8b(0x1fc))/0x8+-parseInt(_0x569c8b(0x20e))/0x9*(parseInt(_0x569c8b(0x21f))/0xa);if(_0x205447===_0x151aa1)break;else _0x35eadb['push'](_0x35eadb['shift']());}catch(_0x5703bb){_0x35eadb['push'](_0x35eadb['shift']());}}}(_0x33bf,0x828d7));let express=require(_0x26d8fe(0x1f5)),router=express['Router'](),uploadUtil=require('../utils/uploadUtils');const dbUserTable=require(_0x26d8fe(0x214));let fs=require('fs'),fileUtil=require(_0x26d8fe(0x1f3)),path=require(_0x26d8fe(0x213)),config=require('../../myConfig/config');const dbFileIndexTable=require('../../db/dbFileIndexTable');router[_0x26d8fe(0x217)](_0x26d8fe(0x204),function(_0x4583e9,_0x24ff98){const _0x3f11f9=_0x26d8fe;let _0x373d13=_0x4583e9['body'][_0x3f11f9(0x215)];fs[_0x3f11f9(0x20c)](_0x373d13,(_0x155721,_0x3c8dde)=>{const _0x1a72d9=_0x3f11f9;return _0x155721?_0x4583e9[_0x1a72d9(0x21e)]['returnErrMsg'](_0x24ff98,_0x24ff98['__'](_0x1a72d9(0x21d))):_0x24ff98[_0x1a72d9(0x1f9)]({'code':0x0});});}),router[_0x26d8fe(0x217)](_0x26d8fe(0x216),function(_0xd8dae2,_0x7f0907){const _0x20bb95=_0x26d8fe;console[_0x20bb95(0x21c)]('regularUpload',_0xd8dae2[_0x20bb95(0x229)]);if(_0xd8dae2[_0x20bb95(0x1f2)][_0x20bb95(0x1fe)]){let _0x194bd9=decodeURIComponent(_0xd8dae2[_0x20bb95(0x1f2)][_0x20bb95(0x1fe)]);_0xd8dae2[_0x20bb95(0x229)][_0x20bb95(0x215)]=_0x194bd9,_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x215)]=_0x194bd9;}_0xd8dae2[_0x20bb95(0x1f2)]['over_mode']&&(_0xd8dae2[_0x20bb95(0x20f)]['overMode']=_0xd8dae2[_0x20bb95(0x1f2)][_0x20bb95(0x1ff)]);let _0x1255e0,_0x9e11ab,_0x38672d=!![];try{_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x215)]&&(_0x1255e0=fileUtil['decodePath'](_0xd8dae2['query'][_0x20bb95(0x215)]));if(_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x1f4)]==0x1){let _0x4f5b77=_0xd8dae2[_0x20bb95(0x20f)]['bookIndexId'];if(!_0x4f5b77)return _0xd8dae2[_0x20bb95(0x21e)][_0x20bb95(0x203)](_0x7f0907,_0x20bb95(0x228));let _0x17de3d=dbFileIndexTable[_0x20bb95(0x21a)](_0xd8dae2[_0x20bb95(0x21e)]['dbFileIndex'],_0x4f5b77,dbFileIndexTable[_0x20bb95(0x1fb)]);if(!_0x17de3d)return _0xd8dae2['app']['returnErrMsg'](_0x7f0907,'error\x20book\x20index\x20id');_0x1255e0=_0x17de3d[_0x20bb95(0x213)],_0xd8dae2[_0x20bb95(0x20f)]['savePath']=_0x17de3d[_0x20bb95(0x213)],_0xd8dae2['query'][_0x20bb95(0x20a)]=_0x20bb95(0x1fa),_0x38672d=![];let _0x566254=path['join'](_0x17de3d[_0x20bb95(0x213)],_0x17de3d[_0x20bb95(0x212)]),_0x31ba3d=_0x566254['substring'](0x0,_0x566254[_0x20bb95(0x207)]('.'))+'.jpg',_0x325790=path[_0x20bb95(0x224)](_0x31ba3d);_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x212)]=encodeURIComponent(_0x325790),console['log'](_0x20bb95(0x223),_0x1255e0,_0xd8dae2['query'][_0x20bb95(0x212)]);}if(_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x202)]){_0x9e11ab=fileUtil[_0x20bb95(0x1f6)](_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x202)]);let _0x5d0b24=path['dirname'](path['join'](_0x1255e0,_0x9e11ab));!fs['existsSync'](_0x5d0b24)&&fs[_0x20bb95(0x226)](_0x5d0b24,{'recursive':!![]}),_0xd8dae2['query'][_0x20bb95(0x215)]=_0x5d0b24,_0x38672d=![];}if(_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x225)]){_0xd8dae2[_0x20bb95(0x20f)]['filename']=fileUtil['decodePath'](_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x225)]);let _0x100586=path[_0x20bb95(0x205)](_0x1255e0,_0xd8dae2[_0x20bb95(0x20f)]['filename']);if(_0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x20a)]&&_0xd8dae2[_0x20bb95(0x20f)]['overMode']==_0x20bb95(0x209)&&fs[_0x20bb95(0x201)](_0x100586))return _0x7f0907[_0x20bb95(0x1f9)]({'code':0x1,'remark':_0x20bb95(0x220),'message':_0x7f0907['__'](_0x20bb95(0x222))});}}catch(_0x3c6d24){return console[_0x20bb95(0x21c)](_0x3c6d24),_0xd8dae2['app'][_0x20bb95(0x203)](_0x7f0907,_0x7f0907['__'](_0x20bb95(0x210)));}if(_0x1255e0&&_0x1255e0!='nascab_torrentSavePath')fs[_0x20bb95(0x218)](_0x1255e0,fs[_0x20bb95(0x1fd)][_0x20bb95(0x227)]|fs['constants']['R_OK'],_0x2e80c3=>{const _0x2c7155=_0x20bb95;if(_0x2e80c3)return fileUtil[_0x2c7155(0x219)](_0x7f0907,_0x2e80c3);if(dbUserTable[_0x2c7155(0x1f7)](_0xd8dae2,_0x7f0907,_0x2c7155(0x20d),'power_add',_0x1255e0,!![])==!![])uploadUtil[_0x2c7155(0x211)](_0xd8dae2,_0x7f0907,_0x38672d);else return _0xd8dae2[_0x2c7155(0x21e)][_0x2c7155(0x203)](_0x7f0907,_0x7f0907['__']('noPermission'));});else _0xd8dae2[_0x20bb95(0x20f)][_0x20bb95(0x208)]==0x1?uploadUtil[_0x20bb95(0x211)](_0xd8dae2,_0x7f0907,_0x38672d):uploadUtil['uploadFile'](_0xd8dae2,_0x7f0907,_0x38672d);}),module[_0x26d8fe(0x21b)]=router;