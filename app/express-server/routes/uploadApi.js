function _0x308b(_0x509fe1,_0x46a864){const _0x49df8a=_0x49df();return _0x308b=function(_0x308b8b,_0x2440f6){_0x308b8b=_0x308b8b-0xc9;let _0x18c11e=_0x49df8a[_0x308b8b];return _0x18c11e;},_0x308b(_0x509fe1,_0x46a864);}const _0x1df843=_0x308b;(function(_0x16da5f,_0x16ead4){const _0x2bcb91=_0x308b,_0x5e7e20=_0x16da5f();while(!![]){try{const _0xaf4c37=-parseInt(_0x2bcb91(0xcc))/0x1+parseInt(_0x2bcb91(0xf8))/0x2+parseInt(_0x2bcb91(0xd4))/0x3*(parseInt(_0x2bcb91(0xfa))/0x4)+parseInt(_0x2bcb91(0xe5))/0x5*(-parseInt(_0x2bcb91(0xf1))/0x6)+-parseInt(_0x2bcb91(0xd0))/0x7*(parseInt(_0x2bcb91(0xf0))/0x8)+parseInt(_0x2bcb91(0x106))/0x9+-parseInt(_0x2bcb91(0xef))/0xa;if(_0xaf4c37===_0x16ead4)break;else _0x5e7e20['push'](_0x5e7e20['shift']());}catch(_0x5f2300){_0x5e7e20['push'](_0x5e7e20['shift']());}}}(_0x49df,0x62a9b));let express=require(_0x1df843(0xe1)),router=express['Router'](),uploadUtil=require(_0x1df843(0xcf));const dbUserTable=require('../../db/dbUserTable');let fs=require('fs'),fileUtil=require('../utils/fileUtils'),path=require(_0x1df843(0xf3)),config=require(_0x1df843(0xe3));const dbFileIndexTable=require(_0x1df843(0xea));function _0x49df(){const _0x10f70a=['428088uqTVgq','237060SvZyos','access','path','query','mkdirSync','W_OK','getById','1005168gJrCxg','returnFileError','1524amWgns','书籍封面保存目录','filename','targetFolderNotExist','need\x20book\x20index\x20id','dirname','skip','exports','overMode','over_mode','post','doUserCanGet','7140393cBJRDB','app','power_add','returnErrMsg','4348EbgYwU','substring','constants','../utils/uploadUtils','35wusiOG','body','bookIndexId','error\x20book\x20index\x20id','3696Acomug','/folderExist','join','encodeFilename','noPermission','.jpg','existsSync','folder','savePath','decodePath','uploadFile','json','headers','express','lastIndexOf','../../myConfig/config','uploadBookCover','85flZEJD','operationFail','log','nascab_torrentSavePath','relativePath','../../db/dbFileIndexTable','sameNameFileAlreadExist','over','SAMENAME','save_path','4176570wadGuC'];_0x49df=function(){return _0x10f70a;};return _0x49df();}router[_0x1df843(0x104)](_0x1df843(0xd5),function(_0x2fe9d6,_0x1c402d){const _0x24a013=_0x1df843;let _0x58388c=_0x2fe9d6[_0x24a013(0xd1)]['savePath'];fs['stat'](_0x58388c,(_0x170a38,_0x4a16ae)=>{const _0x4d835a=_0x24a013;return _0x170a38?_0x2fe9d6[_0x4d835a(0xc9)][_0x4d835a(0xcb)](_0x1c402d,_0x1c402d['__'](_0x4d835a(0xfd))):_0x1c402d[_0x4d835a(0xdf)]({'code':0x0});});}),router[_0x1df843(0x104)]('/regularUpload',function(_0x3f551f,_0x1b9bcd){const _0x49c2d6=_0x1df843;if(_0x3f551f['headers']['save_path']){let _0x28b0f9=decodeURIComponent(_0x3f551f[_0x49c2d6(0xe0)][_0x49c2d6(0xee)]);_0x3f551f[_0x49c2d6(0xd1)][_0x49c2d6(0xdc)]=_0x28b0f9,_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xdc)]=_0x28b0f9;}_0x3f551f[_0x49c2d6(0xe0)][_0x49c2d6(0x103)]&&(_0x3f551f['query'][_0x49c2d6(0x102)]=_0x3f551f[_0x49c2d6(0xe0)][_0x49c2d6(0x103)]);let _0x36a96d,_0x4c1d23,_0x353c46=!![];try{_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xdc)]&&(_0x36a96d=fileUtil[_0x49c2d6(0xdd)](_0x3f551f['query'][_0x49c2d6(0xdc)]));if(_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xe4)]==0x1){let _0x33a37b=_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xd2)];if(!_0x33a37b)return _0x3f551f[_0x49c2d6(0xc9)][_0x49c2d6(0xcb)](_0x1b9bcd,_0x49c2d6(0xfe));let _0x4edf0c=dbFileIndexTable[_0x49c2d6(0xf7)](_0x3f551f['app']['dbFileIndex'],_0x33a37b,dbFileIndexTable['INDEX_TABLE_NAME_BOOK']);if(!_0x4edf0c)return _0x3f551f[_0x49c2d6(0xc9)][_0x49c2d6(0xcb)](_0x1b9bcd,_0x49c2d6(0xd3));_0x36a96d=_0x4edf0c[_0x49c2d6(0xf3)],_0x3f551f[_0x49c2d6(0xf4)]['savePath']=_0x4edf0c[_0x49c2d6(0xf3)],_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0x102)]=_0x49c2d6(0xec),_0x353c46=![];let _0x208701=path['join'](_0x4edf0c[_0x49c2d6(0xf3)],_0x4edf0c[_0x49c2d6(0xfc)]),_0x3c54fd=_0x208701[_0x49c2d6(0xcd)](0x0,_0x208701[_0x49c2d6(0xe2)]('.'))+_0x49c2d6(0xd9),_0x19fe5a=path['basename'](_0x3c54fd);_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xfc)]=encodeURIComponent(_0x19fe5a),console[_0x49c2d6(0xe7)](_0x49c2d6(0xfb),_0x36a96d,_0x3f551f['query'][_0x49c2d6(0xfc)]);}if(_0x3f551f[_0x49c2d6(0xf4)]['relativePath']){_0x4c1d23=fileUtil[_0x49c2d6(0xdd)](_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xe9)]);let _0xd78992=path[_0x49c2d6(0xff)](path[_0x49c2d6(0xd6)](_0x36a96d,_0x4c1d23));!fs['existsSync'](_0xd78992)&&fs[_0x49c2d6(0xf5)](_0xd78992,{'recursive':!![]}),_0x3f551f['query'][_0x49c2d6(0xdc)]=_0xd78992,_0x353c46=![];}if(_0x3f551f['query']['encodeFilename']){_0x3f551f['query'][_0x49c2d6(0xfc)]=fileUtil[_0x49c2d6(0xdd)](_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xd7)]);let _0x2ffc41=path['join'](_0x36a96d,_0x3f551f[_0x49c2d6(0xf4)][_0x49c2d6(0xfc)]);if(_0x3f551f['query']['overMode']&&_0x3f551f['query'][_0x49c2d6(0x102)]==_0x49c2d6(0x100)&&fs[_0x49c2d6(0xda)](_0x2ffc41))return _0x1b9bcd[_0x49c2d6(0xdf)]({'code':0x1,'remark':_0x49c2d6(0xed),'message':_0x1b9bcd['__'](_0x49c2d6(0xeb))});}}catch(_0x58a610){return console[_0x49c2d6(0xe7)](_0x58a610),_0x3f551f[_0x49c2d6(0xc9)][_0x49c2d6(0xcb)](_0x1b9bcd,_0x1b9bcd['__'](_0x49c2d6(0xe6)));}if(_0x36a96d&&_0x36a96d!=_0x49c2d6(0xe8))fs[_0x49c2d6(0xf2)](_0x36a96d,fs[_0x49c2d6(0xce)][_0x49c2d6(0xf6)]|fs['constants']['R_OK'],_0x5a6325=>{const _0x1d5da5=_0x49c2d6;if(_0x5a6325)return fileUtil[_0x1d5da5(0xf9)](_0x1b9bcd,_0x5a6325);if(dbUserTable[_0x1d5da5(0x105)](_0x3f551f,_0x1b9bcd,_0x1d5da5(0xdb),_0x1d5da5(0xca),_0x36a96d,!![])==!![])uploadUtil['uploadFile'](_0x3f551f,_0x1b9bcd,_0x353c46);else return _0x3f551f[_0x1d5da5(0xc9)][_0x1d5da5(0xcb)](_0x1b9bcd,_0x1b9bcd['__'](_0x1d5da5(0xd8)));});else _0x3f551f[_0x49c2d6(0xf4)]['uploadSubtitle']==0x1?uploadUtil[_0x49c2d6(0xde)](_0x3f551f,_0x1b9bcd,_0x353c46):uploadUtil[_0x49c2d6(0xde)](_0x3f551f,_0x1b9bcd,_0x353c46);}),module[_0x1df843(0x101)]=router;