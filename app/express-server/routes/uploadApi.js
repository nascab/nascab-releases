function _0x431a(_0x30be43,_0x4eb9a1){const _0x4b059c=_0x4b05();return _0x431a=function(_0x431a6c,_0xbe93d7){_0x431a6c=_0x431a6c-0x1e2;let _0x10bcc9=_0x4b059c[_0x431a6c];return _0x10bcc9;},_0x431a(_0x30be43,_0x4eb9a1);}const _0x5b011d=_0x431a;(function(_0x9553a2,_0x31a966){const _0x5520e4=_0x431a,_0x56bef0=_0x9553a2();while(!![]){try{const _0x226a04=-parseInt(_0x5520e4(0x1f1))/0x1*(-parseInt(_0x5520e4(0x1fb))/0x2)+parseInt(_0x5520e4(0x1f7))/0x3*(parseInt(_0x5520e4(0x1f8))/0x4)+parseInt(_0x5520e4(0x203))/0x5+parseInt(_0x5520e4(0x21c))/0x6*(-parseInt(_0x5520e4(0x1e6))/0x7)+parseInt(_0x5520e4(0x21d))/0x8+-parseInt(_0x5520e4(0x217))/0x9*(-parseInt(_0x5520e4(0x1f6))/0xa)+parseInt(_0x5520e4(0x21e))/0xb*(-parseInt(_0x5520e4(0x1eb))/0xc);if(_0x226a04===_0x31a966)break;else _0x56bef0['push'](_0x56bef0['shift']());}catch(_0x34258e){_0x56bef0['push'](_0x56bef0['shift']());}}}(_0x4b05,0x869a9));function _0x4b05(){const _0x59ba0d=['relativePath','20JkiDxi','87yjqfJn','52664WiqbvO','lastIndexOf','.jpg','454364LHfqlJ','app','query','encodeFilename','constants','skip','../utils/uploadUtils','json','4681450oljqqx','书籍封面保存目录','operationFail','access','express','INDEX_TABLE_NAME_BOOK','overMode','body','post','targetFolderNotExist','path','/regularUpload','returnErrMsg','error\x20book\x20index\x20id','over_mode','log','SAMENAME','mkdirSync','getById','uploadFile','4272066dSLhYJ','power_add','Router','filename','join','6BjkjkL','1094424ISIlle','2504403WVNEdA','savePath','headers','stat','uploadBookCover','3404723TjszCp','exports','need\x20book\x20index\x20id','R_OK','bookIndexId','84uYHpzs','doUserCanGet','nascab_torrentSavePath','decodePath','existsSync','substring','1NXxpzi','W_OK','dirname','uploadSubtitle'];_0x4b05=function(){return _0x59ba0d;};return _0x4b05();}let express=require(_0x5b011d(0x207)),router=express[_0x5b011d(0x219)](),uploadUtil=require(_0x5b011d(0x201));const dbUserTable=require('../../db/dbUserTable');let fs=require('fs'),fileUtil=require('../utils/fileUtils'),path=require(_0x5b011d(0x20d)),config=require('../../myConfig/config');const dbFileIndexTable=require('../../db/dbFileIndexTable');router[_0x5b011d(0x20b)]('/folderExist',function(_0x4442cd,_0x5287c7){const _0x4719a6=_0x5b011d;let _0x17a20e=_0x4442cd[_0x4719a6(0x20a)][_0x4719a6(0x1e2)];fs[_0x4719a6(0x1e4)](_0x17a20e,(_0x473de2,_0x481a2d)=>{const _0x41d392=_0x4719a6;return _0x473de2?_0x4442cd[_0x41d392(0x1fc)]['returnErrMsg'](_0x5287c7,_0x5287c7['__'](_0x41d392(0x20c))):_0x5287c7[_0x41d392(0x202)]({'code':0x0});});}),router[_0x5b011d(0x20b)](_0x5b011d(0x20e),function(_0x1232c5,_0x1c2730){const _0x38b56b=_0x5b011d;if(_0x1232c5[_0x38b56b(0x1e3)]['save_path']){let _0x5f5a0c=decodeURIComponent(_0x1232c5['headers']['save_path']);_0x1232c5[_0x38b56b(0x20a)][_0x38b56b(0x1e2)]=_0x5f5a0c,_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x1e2)]=_0x5f5a0c;}_0x1232c5[_0x38b56b(0x1e3)][_0x38b56b(0x211)]&&(_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x209)]=_0x1232c5['headers'][_0x38b56b(0x211)]);let _0x5379f7,_0x2b92f6,_0x432fbf=!![];try{_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x1e2)]&&(_0x5379f7=fileUtil['decodePath'](_0x1232c5['query'][_0x38b56b(0x1e2)]));if(_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x1e5)]==0x1){let _0xd46138=_0x1232c5['query'][_0x38b56b(0x1ea)];if(!_0xd46138)return _0x1232c5[_0x38b56b(0x1fc)][_0x38b56b(0x20f)](_0x1c2730,_0x38b56b(0x1e8));let _0x31772f=dbFileIndexTable[_0x38b56b(0x215)](_0x1232c5[_0x38b56b(0x1fc)]['dbFileIndex'],_0xd46138,dbFileIndexTable[_0x38b56b(0x208)]);if(!_0x31772f)return _0x1232c5[_0x38b56b(0x1fc)][_0x38b56b(0x20f)](_0x1c2730,_0x38b56b(0x210));_0x5379f7=_0x31772f[_0x38b56b(0x20d)],_0x1232c5['query'][_0x38b56b(0x1e2)]=_0x31772f['path'],_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x209)]='over',_0x432fbf=![];let _0x64319a=path[_0x38b56b(0x21b)](_0x31772f[_0x38b56b(0x20d)],_0x31772f[_0x38b56b(0x21a)]),_0x1fe0df=_0x64319a[_0x38b56b(0x1f0)](0x0,_0x64319a[_0x38b56b(0x1f9)]('.'))+_0x38b56b(0x1fa),_0x3c7f31=path['basename'](_0x1fe0df);_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x21a)]=encodeURIComponent(_0x3c7f31),console[_0x38b56b(0x212)](_0x38b56b(0x204),_0x5379f7,_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x21a)]);}if(_0x1232c5['query'][_0x38b56b(0x1f5)]){_0x2b92f6=fileUtil[_0x38b56b(0x1ee)](_0x1232c5['query'][_0x38b56b(0x1f5)]);let _0x147038=path[_0x38b56b(0x1f3)](path[_0x38b56b(0x21b)](_0x5379f7,_0x2b92f6));!fs[_0x38b56b(0x1ef)](_0x147038)&&fs[_0x38b56b(0x214)](_0x147038,{'recursive':!![]}),_0x1232c5['query'][_0x38b56b(0x1e2)]=_0x147038,_0x432fbf=![];}if(_0x1232c5['query'][_0x38b56b(0x1fe)]){_0x1232c5['query']['filename']=fileUtil['decodePath'](_0x1232c5[_0x38b56b(0x1fd)]['encodeFilename']);let _0x2579d0=path['join'](_0x5379f7,_0x1232c5['query'][_0x38b56b(0x21a)]);if(_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x209)]&&_0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x209)]==_0x38b56b(0x200)&&fs[_0x38b56b(0x1ef)](_0x2579d0))return _0x1c2730[_0x38b56b(0x202)]({'code':0x1,'remark':_0x38b56b(0x213),'message':_0x1c2730['__']('sameNameFileAlreadExist')});}}catch(_0x42813c){return console['log'](_0x42813c),_0x1232c5[_0x38b56b(0x1fc)]['returnErrMsg'](_0x1c2730,_0x1c2730['__'](_0x38b56b(0x205)));}if(_0x5379f7&&_0x5379f7!=_0x38b56b(0x1ed))fs[_0x38b56b(0x206)](_0x5379f7,fs['constants'][_0x38b56b(0x1f2)]|fs[_0x38b56b(0x1ff)][_0x38b56b(0x1e9)],_0x90940a=>{const _0x4d31c8=_0x38b56b;if(_0x90940a)return fileUtil['returnFileError'](_0x1c2730,_0x90940a);if(dbUserTable[_0x4d31c8(0x1ec)](_0x1232c5,_0x1c2730,'folder',_0x4d31c8(0x218),_0x5379f7,!![])==!![])uploadUtil[_0x4d31c8(0x216)](_0x1232c5,_0x1c2730,_0x432fbf);else return _0x1232c5[_0x4d31c8(0x1fc)][_0x4d31c8(0x20f)](_0x1c2730,_0x1c2730['__']('noPermission'));});else _0x1232c5[_0x38b56b(0x1fd)][_0x38b56b(0x1f4)]==0x1?uploadUtil['uploadFile'](_0x1232c5,_0x1c2730,_0x432fbf):uploadUtil[_0x38b56b(0x216)](_0x1232c5,_0x1c2730,_0x432fbf);}),module[_0x5b011d(0x1e7)]=router;