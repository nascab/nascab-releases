const _0x5ed077=_0x43f2;(function(_0x35fd6e,_0x556f43){const _0x4e9fe9=_0x43f2,_0x7c5fc7=_0x35fd6e();while(!![]){try{const _0x3bd390=-parseInt(_0x4e9fe9(0x1ae))/0x1*(parseInt(_0x4e9fe9(0xfe))/0x2)+-parseInt(_0x4e9fe9(0x149))/0x3*(parseInt(_0x4e9fe9(0x1a8))/0x4)+-parseInt(_0x4e9fe9(0xd8))/0x5*(parseInt(_0x4e9fe9(0xe7))/0x6)+parseInt(_0x4e9fe9(0x1a6))/0x7+parseInt(_0x4e9fe9(0x1d2))/0x8+-parseInt(_0x4e9fe9(0x1b3))/0x9*(-parseInt(_0x4e9fe9(0xf9))/0xa)+-parseInt(_0x4e9fe9(0x11e))/0xb*(-parseInt(_0x4e9fe9(0x162))/0xc);if(_0x3bd390===_0x556f43)break;else _0x7c5fc7['push'](_0x7c5fc7['shift']());}catch(_0xcb8c2d){_0x7c5fc7['push'](_0x7c5fc7['shift']());}}}(_0x183a,0x85039));function _0x43f2(_0x1442b2,_0x4c7e00){const _0x183a37=_0x183a();return _0x43f2=function(_0x43f21b,_0x57669f){_0x43f21b=_0x43f21b-0xc7;let _0x56965f=_0x183a37[_0x43f21b];return _0x56965f;},_0x43f2(_0x1442b2,_0x4c7e00);}var express=require('express'),router=express[_0x5ed077(0x115)]();let config=require('../../myConfig/config'),dbFileIndexTable=require(_0x5ed077(0x12d)),dbConfigTable=require('../../db/dbConfigTable'),dbSourceTable=require(_0x5ed077(0x143)),dbNoticeCenterTable=require(_0x5ed077(0x109)),netUtils=require(_0x5ed077(0x137));const dbUserTable=require(_0x5ed077(0x138)),dbBackupTask=require('../../db/dbBackupTask'),OS=require('os');let path=require(_0x5ed077(0x189)),fs=require('fs'),fileUtil=require(_0x5ed077(0x130));var package=require(_0x5ed077(0xfb));const sqliteUtil=require(_0x5ed077(0x10c)),sharp=require('sharp'),si=require(_0x5ed077(0x15e));let tls=require('tls');function testCertAndKeyMatch(_0x351c97,_0x406540){const _0x5790c9=_0x5ed077;try{return tls[_0x5790c9(0x13e)]({'cert':_0x351c97,'key':_0x406540}),!![];}catch(_0x2a9193){return![];}}router[_0x5ed077(0x146)](_0x5ed077(0x128),(_0xa3bb91,_0x4218bc,_0x42c856)=>{const _0x2d7236=_0x5ed077;let _0x1ae829=netUtils[_0x2d7236(0xd9)](_0xa3bb91);console['log']('refreshHomePage',_0x1ae829);if(_0x1ae829!='localhost')return _0x2d7236(0x1c6);return process[_0x2d7236(0x1cd)]({'type':_0x2d7236(0xed)}),_0x4218bc[_0x2d7236(0x19c)]({'code':0x0});}),router[_0x5ed077(0x146)](_0x5ed077(0x1d0),(_0x351a29,_0x50f78e,_0x3db7b7)=>{const _0x89563d=_0x5ed077;let _0x3563d1=package[_0x89563d(0x12f)],_0x5e5a8c=dbConfigTable['findByTitle'](_0x351a29[_0x89563d(0x1a0)]['dbOther'],_0x89563d(0x1a5)),_0x5eb203=dbConfigTable['findByTitle'](_0x351a29['app'][_0x89563d(0x19b)],_0x89563d(0x142));process[_0x89563d(0x1cd)]({'type':_0x89563d(0x186),'func':_0x89563d(0x118)}),_0x50f78e[_0x89563d(0x19c)]({'code':0x0,'showMenuArr':_0x5eb203?JSON['parse'](_0x5eb203['value']):'','versionInfo':_0x5e5a8c?JSON[_0x89563d(0x110)](_0x5e5a8c[_0x89563d(0x192)]):'','currentVersion':_0x3563d1});}),router['post']('/updateNewVersion',(_0x841d43,_0x4600b7,_0x5e1d3f)=>{const _0x137355=_0x5ed077;if(OS[_0x137355(0x19a)]()!=_0x137355(0x1b4)&&OS[_0x137355(0x19a)]()!=_0x137355(0x145))return _0x841d43['app'][_0x137355(0x104)](_0x4600b7,_0x4600b7['__']('notSupportForAutoUpdate'));if(_0x841d43[_0x137355(0xe2)]['is_admin']!=0x1)return _0x4600b7[_0x137355(0x19c)]({'code':0x66});return process[_0x137355(0x1cd)]({'type':_0x137355(0x114)}),_0x4600b7[_0x137355(0x19c)]({'code':0x0});}),router['post'](_0x5ed077(0x1ca),(_0x28397c,_0x21c72e,_0x506f95)=>{const _0x1cb1ee=_0x5ed077;let _0x287f8c=netUtils['getClientIp'](_0x28397c),_0x52235a=_0x28397c[_0x1cb1ee(0x119)][_0x1cb1ee(0x172)],_0xbeabc5=_0x28397c['body'][_0x1cb1ee(0x187)],_0x2bdf07=_0x28397c[_0x1cb1ee(0x119)]['offset'],_0x53de8e=[];if(_0x28397c[_0x1cb1ee(0xe2)]['is_admin']==0x1){_0x53de8e=_0x28397c[_0x1cb1ee(0x1a0)]['dbOther'][_0x1cb1ee(0x191)](_0x1cb1ee(0xfd))[_0x1cb1ee(0x1bb)](_0x52235a,_0xbeabc5,_0x2bdf07);let _0x380d8e=dbBackupTask[_0x1cb1ee(0x1bd)](_0x28397c[_0x1cb1ee(0x1a0)][_0x1cb1ee(0x19b)],_0x1cb1ee(0x17d),[]);for(let _0x539e79 in _0x380d8e){let _0x37d9e8=_0x380d8e[_0x539e79],_0x1f0420=dbBackupTask[_0x1cb1ee(0x14b)](_0x28397c[_0x1cb1ee(0x1a0)][_0x1cb1ee(0x19b)],_0x37d9e8[_0x1cb1ee(0x125)]);_0x53de8e[_0x1cb1ee(0xee)]({'task_type':_0x1cb1ee(0x106),'task_name':_0x1f0420?_0x1f0420[_0x1cb1ee(0x152)]:'','size_current':_0x37d9e8['copy_size'],'size_all':_0x37d9e8[_0x1cb1ee(0x177)]});}}let _0x232caf={'code':0x0,'data':_0x53de8e,'reqIp':_0x287f8c};return _0x21c72e['json'](_0x232caf);}),router[_0x5ed077(0x146)]('/deleteBgTask',(_0xfd4d2f,_0x36f629,_0x2d20e3)=>{const _0x4d801d=_0x5ed077;let _0x1c0896=_0xfd4d2f[_0x4d801d(0x119)][_0x4d801d(0x1b8)];dbUserTable[_0x4d801d(0x1cb)](_0xfd4d2f,_0x36f629)===!![]&&_0xfd4d2f[_0x4d801d(0x1a0)]['dbOther'][_0x4d801d(0x191)](_0x4d801d(0xf3))[_0x4d801d(0x163)](_0x1c0896);let _0x5ee62d={'code':0x0};return _0x36f629[_0x4d801d(0x19c)](_0x5ee62d);}),router[_0x5ed077(0x146)](_0x5ed077(0xe5),(_0x21c2bb,_0x1f1064,_0x4d0b1e)=>{const _0xe13b29=_0x5ed077;if(_0x21c2bb['currentUser'][_0xe13b29(0xea)]!=0x1)return _0x1f1064[_0xe13b29(0x19c)]({'code':0x66});try{return _0x21c2bb[_0xe13b29(0x1a0)][_0xe13b29(0x19b)]['exec'](_0xe13b29(0x10a)),_0x21c2bb[_0xe13b29(0x1a0)]['dbFileIndex']['exec']('vacuum'),_0x21c2bb['app'][_0xe13b29(0x19b)][_0xe13b29(0x1c1)](_0xe13b29(0x18a)),_0x21c2bb[_0xe13b29(0x1a0)][_0xe13b29(0x156)]['pragma'](_0xe13b29(0x18a)),_0x1f1064[_0xe13b29(0x19c)]({'code':0x0});}catch(_0x2a7553){return _0x21c2bb[_0xe13b29(0x1a0)][_0xe13b29(0x104)](_0x1f1064,_0x1f1064['__'](_0xe13b29(0x126)));}}),router[_0x5ed077(0x146)]('/resetIndex',(_0x24e326,_0x56e1cc,_0x25fc1c)=>{const _0x3e309a=_0x5ed077;if(_0x24e326['currentUser'][_0x3e309a(0xea)]!=0x1)return _0x56e1cc['json']({'code':0x66});let _0x257c47=_0x24e326[_0x3e309a(0x119)][_0x3e309a(0x161)];dbSourceTable[_0x3e309a(0x120)](_0x24e326[_0x3e309a(0x1a0)][_0x3e309a(0x19b)],_0x257c47);if(_0x257c47=='movie')dbFileIndexTable[_0x3e309a(0x120)](_0x24e326[_0x3e309a(0x1a0)]['dbFileIndex'],dbFileIndexTable[_0x3e309a(0xeb)]);else{if(_0x257c47==_0x3e309a(0x198))dbFileIndexTable[_0x3e309a(0x120)](_0x24e326[_0x3e309a(0x1a0)]['dbFileIndex'],dbFileIndexTable['INDEX_TABLE_NAME_PHOTO']);else{if(_0x257c47==_0x3e309a(0x17f))dbFileIndexTable[_0x3e309a(0x120)](_0x24e326[_0x3e309a(0x1a0)][_0x3e309a(0x156)],dbFileIndexTable[_0x3e309a(0x18f)]);else _0x257c47==_0x3e309a(0x133)&&dbFileIndexTable[_0x3e309a(0x120)](_0x24e326[_0x3e309a(0x1a0)][_0x3e309a(0x156)],dbFileIndexTable[_0x3e309a(0x17a)]);}}_0x56e1cc[_0x3e309a(0x19c)]({'code':0x0});}),router[_0x5ed077(0x146)](_0x5ed077(0x193),(_0x4cd3f7,_0x494db1,_0x5455ab)=>{const _0x139e73=_0x5ed077;let _0xf72d25=netUtils[_0x139e73(0x121)](_0x4cd3f7),_0xd1deee=_0x4cd3f7['body'][_0x139e73(0x1c0)],_0x5a84c5;_0xd1deee==_0x139e73(0x1bb)?(process[_0x139e73(0x1cd)]({'type':'getGlobalInfo','func':'getIpList'}),_0x5a84c5=dbConfigTable[_0x139e73(0x1ad)](_0x4cd3f7[_0x139e73(0x1a0)][_0x139e73(0x19b)],_0x139e73(0x158))):_0x5a84c5=dbConfigTable[_0x139e73(0x1c8)](_0x4cd3f7[_0x139e73(0x1a0)][_0x139e73(0x19b)],_0xd1deee);let _0x43df86=dbConfigTable[_0x139e73(0x1c8)](_0x4cd3f7[_0x139e73(0x1a0)]['dbOther'],_0x139e73(0xda)),_0x1a3c8c=dbConfigTable['findByTitle'](_0x4cd3f7[_0x139e73(0x1a0)][_0x139e73(0x19b)],'serverRootPath'),_0x4f8e07={'code':0x0,'data':_0x5a84c5,'serverRootPath':_0x1a3c8c&&_0x1a3c8c[_0x139e73(0x192)]?_0x1a3c8c[_0x139e73(0x192)]:'','hostName':OS[_0x139e73(0x147)](),'reqIp':_0xf72d25};_0x43df86&&_0x43df86[_0x139e73(0x192)]&&(_0x4f8e07[_0x139e73(0xda)]=_0x43df86[_0x139e73(0x192)]);let _0xe95417=dbNoticeCenterTable[_0x139e73(0x127)](_0x4cd3f7[_0x139e73(0x1a0)][_0x139e73(0x19b)]);return _0x4f8e07[_0x139e73(0x150)]=_0xe95417[_0x139e73(0x187)],_0x494db1[_0x139e73(0x19c)](_0x4f8e07);}),router['post'](_0x5ed077(0x168),(_0x18f4a9,_0x3a79d3,_0x27b284)=>{const _0x24b914=_0x5ed077;let _0x4dceb4=netUtils['getClientIp'](_0x18f4a9),_0x1ffcc4=_0x18f4a9[_0x24b914(0x119)][_0x24b914(0x195)],_0x4853bd='globalIndexInfo'+dbFileIndexTable[_0x24b914(0xeb)],_0x23e22c='globalIndexInfo'+dbFileIndexTable[_0x24b914(0xfc)];process['send']({'type':_0x24b914(0x186),'func':_0x24b914(0x1a7)}),process['send']({'type':_0x24b914(0x186),'func':_0x24b914(0x12a),'force':_0x1ffcc4}),fs[_0x24b914(0x1b6)](config[_0x24b914(0x183)],_0xd437e0=>{const _0x34e914=_0x24b914;if(_0xd437e0)return _0x18f4a9['app'][_0x34e914(0x104)](_0x3a79d3,_0x3a79d3['__'](_0x34e914(0xe6)));else{let _0x510392=dbConfigTable['getAllByWhere'](_0x18f4a9[_0x34e914(0x1a0)][_0x34e914(0x19b)],'\x20title\x20in\x20(\x27globalCpuInfo\x27,\x27globalMemInfo\x27,\x27'+_0x4853bd+'\x27,\x27'+_0x23e22c+_0x34e914(0x15c));return _0x3a79d3['json']({'code':0x0,'data':_0x510392,'version':package[_0x34e914(0x12f)],'reqIp':_0x4dceb4,'platform':OS[_0x34e914(0x19a)]()});}});}),router[_0x5ed077(0x146)]('/getAllConfig',(_0x56361c,_0x1e27da,_0x1a26fb)=>{const _0x1feaa9=_0x5ed077;let _0x4535b4=_0x56361c[_0x1feaa9(0x119)][_0x1feaa9(0x173)];if(!_0x4535b4||!_0x4535b4 instanceof Array||_0x4535b4[_0x1feaa9(0xce)]<0x1)return _0x56361c['app'][_0x1feaa9(0x104)](_0x1e27da,'error\x20keys');let _0x52c407;_0x52c407=dbConfigTable[_0x1feaa9(0xc7)](_0x56361c[_0x1feaa9(0x1a0)]['dbOther'],_0x4535b4);for(let _0x9e4b7 in _0x52c407){let _0x4e59be=_0x52c407[_0x9e4b7];if(_0x4e59be[_0x1feaa9(0xd7)]==_0x1feaa9(0x1c7)||_0x4e59be[_0x1feaa9(0xd7)]==_0x1feaa9(0x153)){let _0x3bb137=_0x56361c[_0x1feaa9(0xe2)][_0x1feaa9(0xea)]==0x1;(!_0x3bb137||!_0x4e59be[_0x1feaa9(0x192)][_0x1feaa9(0x122)]('-----'))&&(_0x4e59be[_0x1feaa9(0x192)]='');}}let _0x2258f4={};_0x2258f4[_0x1feaa9(0xde)]=config[_0x1feaa9(0xd6)],_0x2258f4['defaultApiPortHttps']=config[_0x1feaa9(0x1c9)],_0x2258f4[_0x1feaa9(0x102)]=config[_0x1feaa9(0x148)],_0x2258f4[_0x1feaa9(0x108)]=config[_0x1feaa9(0x1c3)],_0x2258f4[_0x1feaa9(0x190)]=config[_0x1feaa9(0x185)],_0x2258f4[_0x1feaa9(0xdd)]=0x2,_0x2258f4[_0x1feaa9(0x16a)]=_0x52c407,_0x1e27da[_0x1feaa9(0x19c)]({'code':0x0,'data':_0x2258f4});}),router['post'](_0x5ed077(0x188),(_0x3cfcb9,_0x3ce93a,_0x37b0b8)=>{const _0x9efe2e=_0x5ed077;let _0x2f8cf8=dbConfigTable[_0x9efe2e(0x1c8)](_0x3cfcb9[_0x9efe2e(0x1a0)][_0x9efe2e(0x19b)],'language'),_0x4b987c='';_0x2f8cf8&&(_0x4b987c=_0x2f8cf8[_0x9efe2e(0x192)]),_0x3ce93a[_0x9efe2e(0x19c)]({'code':0x0,'data':_0x4b987c});}),router['post'](_0x5ed077(0x132),(_0x120929,_0x4f382f,_0x16ebd0)=>{const _0x44baaa=_0x5ed077;let _0x570256=netUtils['getClientIp'](_0x120929);if(_0x570256!=_0x44baaa(0x1a4))return _0x44baaa(0x1c6);if(_0x120929[_0x44baaa(0xe2)]['is_admin']!=0x1)return _0x4f382f['json']({'code':0x66});let _0x286192=_0x120929[_0x44baaa(0x119)][_0x44baaa(0xdf)],_0x30828e=_0x120929['body']['region'];return _0x286192&&dbConfigTable[_0x44baaa(0x13f)](_0x120929[_0x44baaa(0x1a0)][_0x44baaa(0x19b)],{'title':_0x44baaa(0xdf),'value':_0x286192}),_0x30828e&&dbConfigTable[_0x44baaa(0x13f)](_0x120929[_0x44baaa(0x1a0)][_0x44baaa(0x19b)],{'title':_0x44baaa(0xc8),'value':_0x30828e}),_0x4f382f[_0x44baaa(0x19c)]({'code':0x0});});function _0x183a(){const _0x2f0e53=['bluetoothDevices','webDavPortHttps','movieHomeShowMyMedia','system','ip\x20not\x20allow','httpsCert','findByTitle','apiPortHttps','/getBgTask','isAdmin','/saveShareUrl','send','constants','useNasCabCerts','/getVersionInfo','openPath','1114744mWapBj','autoLaunch','findByTitleParamsList','region','filename','baseboard','subtitleSize','excludePathPhoto','aiFaceMinPhotoCount','length',':https','/getSystemInfo','transCodeReadRate','START_PRE_GEN_SUBTITLE','ipDetection','startSimilarPhotoWork','imgFolderUsable','apiPort','title','1409385UtDlyc','getClientIpWithOutXforwarded','ddnsIpv6Address','err','defaultMoviePlay','defaultThreadCount','defaultApiPort','language','join','cpu','currentUser','subtitlePreGen','openType','/vaccumDb','cachePathInvalid','6WcWhlB','battery','custom','is_admin','INDEX_TABLE_NAME_MOVIE','/saveConfigMovie','reloadHomePage','push','isWinDisk','api','wifiNetworks','file','DELETE\x20FROM\x20bg_task\x20WHERE\x20id=?','movieDatabaseType','includes','webDavUseApiCert','port:\x20256-65500','userDataFolder','10SABSbt','shell','../../../package.json','INDEX_TABLE_NAME_PHOTO','SELECT\x20*\x20FROM\x20bg_task\x20WHERE\x20task_state=?\x20order\x20by\x20id\x20desc\x20limit\x20?\x20offset\x20?','1977874iSVjbc','R_OK','autoShowWindow','/saveConfigCustom','defaultWebDavPort','useFolderPictureAsPoster','returnErrMsg','webDavHttpsKey','BACKUP','cacheImageInfo','defaultWebDavPortHttps','../../db/dbNoticeCenterTable','vacuum','maxThreadCountIs','../utils/sqliteUtil','type\x20is\x20invalid','databaseFolder','CRF:\x201-51','parse','autoScanSource','httpsCertError','tmdbProxyEnable','startUpdate','Router','transCodeCoderNameHevc','ipBan','getUpdateInfo','body','webp','excludePathMovie','moviePreferLanguage','onlySupportOnServerApp','11eDaUPX','totalmem','clearTable','getClientIp','startsWith','crf','type','task_id','operationFail','getUnReadCount','/refreshHomePage','subtitle','getDiskInfo','setting.portInvalid','upload','../../db/dbFileIndexTable','slow','version','../utils/fileUtils','returnFileError','/setLanguage','book','power_get','movieTmdbLanguage','excludeFilenamePhoto','../utils/netUtils','../../db/dbUserTable','rotate','log','database','existsSync','tokenKeepHour','createSecureContext','create','cachePath','notSupport','showMenuArr','../../db/dbSourceFolderTable','toFile','darwin','post','hostname','webDavPort','3BNJvcr','usb','getById','customShareUrl','transcodeSpeed','customLoginImage','aiSimilarPhotoEnable','unreadMsgCount','access','task_name','httpsKey','movieTmdbApiUrl','W_OK','dbFileIndex','catch','\x20title\x20in\x20(\x27apiServer\x27,\x27apiServerHttps\x27,\x27webDavServer\x27,\x27FTPServer\x27,\x27globalIpList\x27)','need\x20path','transCodeParams-CoderNameH264','then','\x27,\x27globalDiskInfo\x27)','defaultTranscodeResolution','systeminformation','/saveConfigMusic','Relaunch','serverType','9853500hVBkPU','run','fast','mkdir','note','autoLoginClient','/getSystemState','excludePathFolderBrowser','allConfig','serverRootError','music-TitleType','httpsCertCannotSet','startClassesAiWork','audio','autoHardAccDecode','aiFaceEnable','taskState','keys','setting','startFaceAiWork','trim','total_size','photoPreviewSize','stringify','INDEX_TABLE_NAME_BOOK','-----','fullPath','\x20status=\x27running\x27\x20or\x20status=\x27waiting\x27','ipMode','music','deleteByTitle','webDavHttpsCert','imgFolder','cacheParentPath','mem','FTPPort','getGlobalInfo','count','/getLanguage','path','wal_checkpoint(RESTART)','photoPreviewType','refreshIpList','memTooLess','tmdbProxyUrl','INDEX_TABLE_NAME_MUSIC','defaultFTPPort','prepare','value','/getServerState','moviePlaylongPressRate','force','diskLayout','movieShowMatchName','photo','transCodeCoderNameH264','platform','dbOther','json',':http','cpuTemperature','appRootPath','app','id3tag','movieTmdbApiKey','transcodePath','localhost','versionInfo','5939500SHoEDy','getAllIndexInfo','91484YEYaEH','movieHomeShowHistory','dialog','folderNotExist','/clearCache','getAllByWhere','1vzPSEh','customHomeBgImage','exports','customLoginTitle','cache','265878eZmSxk','win32','download','stat','customLogoImage','taskId','serverRootPath','threadCount','all','cpus','getAllRecordByWhere','twoStepLogin','folder','serverName','pragma'];_0x183a=function(){return _0x2f0e53;};return _0x183a();}function saveConfig(_0x30d28b,_0x3fb01c,_0x1784ec){const _0x318601=_0x5ed077;dbConfigTable[_0x318601(0x13f)](_0x30d28b,{'title':_0x3fb01c,'value':_0x1784ec+''});}router[_0x5ed077(0x146)]('/changeCachePath',(_0x34d5b8,_0x48fd51,_0x35e674)=>{const _0x24ca77=_0x5ed077;let _0x5b1af9=_0x34d5b8[_0x24ca77(0x119)][_0x24ca77(0x140)];if(_0x34d5b8['currentUser']['is_admin']!=0x1)return _0x48fd51[_0x24ca77(0x19c)]({'code':0x66});if(_0x5b1af9)fs['access'](_0x5b1af9,fs[_0x24ca77(0x1ce)]['W_OK']|fs[_0x24ca77(0x1ce)]['R_OK'],_0x2ebff6=>{const _0x376afc=_0x24ca77;return!_0x2ebff6?(saveConfig(_0x34d5b8['app']['dbOther'],_0x376afc(0x183),_0x5b1af9),_0x48fd51[_0x376afc(0x19c)]({'code':0x0})):fileUtil[_0x376afc(0x131)](_0x48fd51,_0x2ebff6);});else return dbConfigTable[_0x24ca77(0x180)](_0x34d5b8['app'][_0x24ca77(0x19b)],'cacheParentPath'),_0x48fd51[_0x24ca77(0x19c)]({'code':0x0});}),router['post']('/saveServerRootPath',(_0x41faa7,_0x27a837,_0xb369ab)=>{const _0x230600=_0x5ed077;if(_0x41faa7[_0x230600(0xe2)][_0x230600(0xea)]!=0x1)return _0x27a837['json']({'code':0x66});let _0x4bf6b4=_0x41faa7[_0x230600(0x119)][_0x230600(0x1b9)];return _0x4bf6b4?saveConfig(_0x41faa7[_0x230600(0x1a0)][_0x230600(0x19b)],_0x230600(0x1b9),_0x4bf6b4):dbConfigTable[_0x230600(0x180)](_0x41faa7['app'][_0x230600(0x19b)],_0x230600(0x1b9)),_0x27a837[_0x230600(0x19c)]({'code':0x0});}),router[_0x5ed077(0x146)](_0x5ed077(0x1cc),(_0x14f228,_0x57aeb9,_0x3b2b31)=>{const _0x4c3397=_0x5ed077;if(_0x14f228['currentUser'][_0x4c3397(0xea)]!=0x1)return _0x57aeb9[_0x4c3397(0x19c)]({'code':0x66});let _0x56b047=_0x14f228[_0x4c3397(0x119)][_0x4c3397(0x14c)];return _0x56b047?saveConfig(_0x14f228[_0x4c3397(0x1a0)]['dbOther'],_0x4c3397(0x14c),_0x56b047):dbConfigTable[_0x4c3397(0x180)](_0x14f228['app'][_0x4c3397(0x19b)],_0x4c3397(0x14c)),_0x57aeb9['json']({'code':0x0});});let forbiddenPorts=[0x1,0x7,0x9,0xb,0xd,0xf,0x11,0x13,0x14,0x15,0x16,0x17,0x19,0x25,0x2a,0x2b,0x35,0x4d,0x4f,0x57,0x5f,0x65,0x66,0x67,0x68,0x6d,0x6e,0x6f,0x71,0x73,0x75,0x77,0x7b,0x87,0x8b,0x8f,0xb3,0x185,0x1d1,0x200,0x201,0x202,0x203,0x20e,0x212,0x213,0x214,0x21c,0x22c,0x233,0x24b,0x259,0x27c,0x3e1,0x3e3,0x801,0xe4b,0xfcd,0x1770,0x1a09,0x1a0a,0x1a0b,0x1a0c,0x1a0d,0xd3d];router[_0x5ed077(0x146)]('/saveConfig',(_0x2741f3,_0xaecf59,_0x39941c)=>{const _0x47ac44=_0x5ed077;let _0x3dce5c=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0xd6)],_0x526811=_0x2741f3['body'][_0x47ac44(0x1c9)],_0x2a1807=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x148)],_0x347475=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x1c3)],_0x18f790=_0x2741f3[_0x47ac44(0x119)]['FTPPort'],_0x23e2e4=_0x2741f3[_0x47ac44(0x119)]['autoLaunch'],_0x3923d8=_0x2741f3[_0x47ac44(0x119)]['autoLoginClient'],_0x5c7244=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x100)],_0x957d77=_0x2741f3['body'][_0x47ac44(0x111)],_0x485dda=_0x2741f3['body']['httpsKey'],_0x418582=_0x2741f3['body'][_0x47ac44(0x1c7)],_0x3fa945=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x105)],_0x3638e6=_0x2741f3[_0x47ac44(0x119)]['webDavHttpsCert'],_0x43972a=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0xdf)],_0x2c6bf4=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0xc8)],_0x15e278=_0x2741f3[_0x47ac44(0x119)]['threadCount'],_0x314c32=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x11b)],_0x5718c7=_0x2741f3['body'][_0x47ac44(0xcc)],_0x4c8cc1=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x169)],_0x373aa2=_0x2741f3['body']['excludeFilenameMovie'],_0x4e9722=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x136)],_0x120cce=_0x2741f3['body'][_0x47ac44(0x142)],_0x20d97c=_0x2741f3['body'][_0x47ac44(0x13d)],_0x316232=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x14c)],_0x3e0500=_0x2741f3['body'][_0x47ac44(0xf6)],_0x1d6e6d=_0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x19b)];if(_0x2741f3['currentUser'][_0x47ac44(0xea)]!=0x1)return _0xaecf59[_0x47ac44(0x19c)]({'code':0x66});let _0xe65e83=_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x1b9)];if(_0xe65e83&&_0xe65e83['trim']()){_0xe65e83=_0xe65e83['toLowerCase']()[_0x47ac44(0x176)]();if(_0xe65e83['length']>0x20||!/^[a-zA-Z0-9]+$/['test'](_0xe65e83))return _0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x104)](_0xaecf59,'Root\x20path\x20must\x20be\x2032\x20characters\x20or\x20less\x20and\x20contain\x20only\x20letters\x20and\x20numbers');if([_0x47ac44(0x17f),'book',_0x47ac44(0x1b5),_0x47ac44(0xf2),_0x47ac44(0x174),_0x47ac44(0x166),_0x47ac44(0xf0)]['includes'](_0xe65e83))return _0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x16b))+(':'+_0xe65e83),_0x47ac44(0x1aa));saveConfig(_0x1d6e6d,_0x47ac44(0x1b9),_0xe65e83);}let _0x21d82b=0xffdc;if(_0x3dce5c>_0x21d82b||_0x2a1807>_0x21d82b||_0x18f790>_0x21d82b||_0x347475>_0x21d82b)return _0xaecf59[_0x47ac44(0x19c)]({'code':0x1,'message':_0x47ac44(0xf7)});_0x120cce&&saveConfig(_0x1d6e6d,_0x47ac44(0x142),JSON[_0x47ac44(0x179)](_0x120cce));_0x316232&&saveConfig(_0x1d6e6d,'customShareUrl',_0x316232);_0x314c32&&saveConfig(_0x1d6e6d,_0x47ac44(0x11b),JSON[_0x47ac44(0x179)](_0x314c32));_0x20d97c&&parseInt(_0x20d97c)!=NaN&&_0x20d97c>0x0&&_0x20d97c<0x5f5e0ff&&saveConfig(_0x1d6e6d,'tokenKeepHour',_0x20d97c);_0x5718c7&&saveConfig(_0x1d6e6d,'excludePathPhoto',JSON[_0x47ac44(0x179)](_0x5718c7));_0x2c6bf4&&saveConfig(_0x1d6e6d,_0x47ac44(0xc8),_0x2c6bf4);if(_0x4c8cc1){let _0x35c9de=netUtils['getClientIp'](_0x2741f3);if(_0x35c9de==_0x47ac44(0x1a4)){for(let _0x4ffabf in _0x4c8cc1){let _0xc2bb18=_0x4c8cc1[_0x4ffabf],_0x417606=fs[_0x47ac44(0x13c)](_0xc2bb18);if(!_0x417606)return _0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x1ab))+':'+_0xc2bb18);fileUtil[_0x47ac44(0xef)](_0xc2bb18)&&(_0x4c8cc1[_0x4ffabf]=_0xc2bb18['toUpperCase']());}saveConfig(_0x1d6e6d,_0x47ac44(0x169),JSON['stringify'](_0x4c8cc1));}else return _0x2741f3['app'][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x11d)));}_0x373aa2&&saveConfig(_0x1d6e6d,'excludeFilenameMovie',JSON[_0x47ac44(0x179)](_0x373aa2));_0x4e9722&&saveConfig(_0x1d6e6d,_0x47ac44(0x136),JSON[_0x47ac44(0x179)](_0x4e9722));if(_0x3dce5c){if(forbiddenPorts[_0x47ac44(0xf5)](parseInt(_0x3dce5c)))return _0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x12b))+_0x47ac44(0x19d));saveConfig(_0x1d6e6d,_0x47ac44(0xd6),parseInt(_0x3dce5c));}if(_0x526811){if(forbiddenPorts[_0x47ac44(0xf5)](parseInt(_0x526811))||_0x526811==_0x3dce5c)return _0x2741f3[_0x47ac44(0x1a0)]['returnErrMsg'](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x12b))+_0x47ac44(0xcf));saveConfig(_0x1d6e6d,_0x47ac44(0x1c9),parseInt(_0x526811));}_0x2741f3[_0x47ac44(0x119)]['ipBan']&&saveConfig(_0x1d6e6d,'ipBan',_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x117)]);_0x2741f3['body']['ipMode']&&(saveConfig(_0x1d6e6d,_0x47ac44(0x17e),_0x2741f3[_0x47ac44(0x119)]['ipMode']),_0x2741f3['app'][_0x47ac44(0x18c)]());_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0xd3)]&&saveConfig(_0x1d6e6d,_0x47ac44(0xd3),_0x2741f3[_0x47ac44(0x119)]['ipDetection']);_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x1be)]&&saveConfig(_0x1d6e6d,_0x47ac44(0x1be),_0x2741f3[_0x47ac44(0x119)][_0x47ac44(0x1be)]);_0x2a1807&&saveConfig(_0x1d6e6d,_0x47ac44(0x148),parseInt(_0x2a1807));_0x347475&&saveConfig(_0x1d6e6d,_0x47ac44(0x1c3),parseInt(_0x347475));_0x18f790&&saveConfig(_0x1d6e6d,_0x47ac44(0x185),parseInt(_0x18f790));_0x23e2e4&&saveConfig(_0x1d6e6d,_0x47ac44(0x1d3),_0x23e2e4);_0x3923d8&&saveConfig(_0x1d6e6d,_0x47ac44(0x167),_0x3923d8);_0x5c7244&&saveConfig(_0x1d6e6d,'autoShowWindow',_0x5c7244);_0x957d77&&saveConfig(_0x1d6e6d,_0x47ac44(0x111),_0x957d77);let _0x3c9e10=dbConfigTable['findByTitle'](_0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x19b)],_0x47ac44(0x1cf));if(!_0x3c9e10||_0x3c9e10['value']==0x0){if(_0x485dda!='*'&&_0x418582!='*'){if(_0x485dda&&_0x418582){if(!_0x485dda[_0x47ac44(0x122)]('-----')||!_0x418582[_0x47ac44(0x122)](_0x47ac44(0x17b)))return _0x2741f3[_0x47ac44(0x1a0)]['returnErrMsg'](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x112)));const _0x2f9be0=testCertAndKeyMatch(_0x418582,_0x485dda);if(!_0x2f9be0)return _0x2741f3['app'][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x112)));saveConfig(_0x1d6e6d,'httpsKey',_0x485dda),saveConfig(_0x1d6e6d,_0x47ac44(0x1c7),_0x418582);}else saveConfig(_0x1d6e6d,_0x47ac44(0x153),''),saveConfig(_0x1d6e6d,_0x47ac44(0x1c7),'');}}if(_0x3c9e10&&_0x3c9e10['value']==0x1){if(_0x485dda&&_0x418582)return _0x2741f3['app']['returnErrMsg'](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x16d)),_0x47ac44(0x1aa));}_0x3e0500&&saveConfig(_0x1d6e6d,_0x47ac44(0xf6),_0x3e0500);_0x3e0500=dbConfigTable[_0x47ac44(0x1c8)](_0x2741f3['app'][_0x47ac44(0x19b)],'webDavUseApiCert');if(!_0x3e0500||_0x3e0500[_0x47ac44(0x192)]==0x0){if(_0x3fa945!='*'&&_0x3638e6!='*'){if(_0x3fa945&&_0x3638e6){if(!_0x3fa945['startsWith'](_0x47ac44(0x17b))||!_0x3638e6[_0x47ac44(0x122)]('-----'))return _0x2741f3['app']['returnErrMsg'](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x112)));const _0x48d0e3=testCertAndKeyMatch(_0x3fa945,_0x3638e6);if(!_0x48d0e3)return _0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x112)));saveConfig(_0x1d6e6d,_0x47ac44(0x105),_0x3fa945),saveConfig(_0x1d6e6d,'webDavHttpsCert',_0x3638e6);}else saveConfig(_0x1d6e6d,_0x47ac44(0x105),''),saveConfig(_0x1d6e6d,_0x47ac44(0x181),'');}}_0x43972a&&saveConfig(_0x1d6e6d,_0x47ac44(0xdf),_0x43972a);if(_0x15e278){if(_0x15e278>OS[_0x47ac44(0x1bc)]()['length'])return _0x2741f3[_0x47ac44(0x1a0)][_0x47ac44(0x104)](_0xaecf59,_0xaecf59['__'](_0x47ac44(0x10b))+OS[_0x47ac44(0x1bc)]()[_0x47ac44(0xce)]);saveConfig(_0x1d6e6d,_0x47ac44(0x1ba),_0x15e278);}return _0xaecf59[_0x47ac44(0x19c)]({'code':0x0});}),router[_0x5ed077(0x146)]('/saveConfigPhoto',(_0x2d4a86,_0x5cb625,_0x19e0a2)=>{const _0x19aa5f=_0x5ed077;if(_0x2d4a86[_0x19aa5f(0xe2)]['is_admin']!=0x1)return _0x5cb625[_0x19aa5f(0x19c)]({'code':0x66});let _0x23d29d=_0x2d4a86[_0x19aa5f(0x1a0)][_0x19aa5f(0x19b)],_0x2d6e35=_0x2d4a86[_0x19aa5f(0x119)]['aiClassesEnable'],_0x87118d=_0x2d4a86[_0x19aa5f(0x119)][_0x19aa5f(0x171)],_0xa1cdbe=_0x2d4a86[_0x19aa5f(0x119)]['aiSimilarPhotoEnable'],_0x538a16=_0x2d4a86[_0x19aa5f(0x119)]['aiFaceMinPhotoCount'],_0x2f61ce=_0x2d4a86[_0x19aa5f(0x119)]['photoPreviewType'],_0x4a4f95=_0x2d4a86[_0x19aa5f(0x119)][_0x19aa5f(0x178)];_0x2f61ce&&saveConfig(_0x23d29d,_0x19aa5f(0x18b),_0x2f61ce);_0x4a4f95&&saveConfig(_0x23d29d,_0x19aa5f(0x178),_0x4a4f95);if(_0x2d6e35){if(_0x2d6e35==0x1){if(OS[_0x19aa5f(0x11f)]()/0x400/0x400/0x400<0x3)return _0x2d4a86[_0x19aa5f(0x1a0)][_0x19aa5f(0x104)](_0x5cb625,_0x5cb625['__'](_0x19aa5f(0x18d)));}saveConfig(_0x23d29d,'aiClassesEnable',_0x2d6e35);if(_0x2d6e35==0x1)process[_0x19aa5f(0x1cd)]({'type':_0x19aa5f(0x16e)});}_0x538a16&&saveConfig(_0x23d29d,_0x19aa5f(0xcd),_0x538a16);if(_0x87118d){if(_0x87118d==0x1){if(OS['totalmem']()/0x400/0x400/0x400<0x3)return _0x2d4a86[_0x19aa5f(0x1a0)][_0x19aa5f(0x104)](_0x5cb625,_0x5cb625['__']('memTooLess'));}saveConfig(_0x23d29d,_0x19aa5f(0x171),_0x87118d);if(_0x87118d==0x1)process[_0x19aa5f(0x1cd)]({'type':_0x19aa5f(0x175)});}if(_0xa1cdbe){saveConfig(_0x23d29d,_0x19aa5f(0x14f),_0xa1cdbe);if(_0xa1cdbe==0x1)process[_0x19aa5f(0x1cd)]({'type':_0x19aa5f(0xd4)});}return _0x5cb625['json']({'code':0x0});}),router[_0x5ed077(0x146)](_0x5ed077(0x101),(_0x5012d4,_0x407539,_0x39e1d9)=>{const _0x2fbc50=_0x5ed077;if(_0x5012d4[_0x2fbc50(0xe2)][_0x2fbc50(0xea)]!=0x1)return _0x407539[_0x2fbc50(0x19c)]({'code':0x66});let _0x1f528f=_0x5012d4['app'][_0x2fbc50(0x19b)],_0x1821c3=_0x5012d4[_0x2fbc50(0x119)][_0x2fbc50(0x1b1)],_0x9e0d91=_0x5012d4[_0x2fbc50(0x119)][_0x2fbc50(0x1b7)],_0x25ddaa=_0x5012d4[_0x2fbc50(0x119)][_0x2fbc50(0x14e)],_0x1c45a1=_0x5012d4['body']['customHomeBgImage'];function _0x15a0f3(_0x281d92,_0x5c7fdd,_0x4c312d){const _0x4d039d=_0x2fbc50;if(_0x5c7fdd=='-')return saveConfig(_0x1f528f,_0x281d92,'-'),_0x407539['json']({'code':0x0});if(fs[_0x4d039d(0x13c)](_0x5c7fdd)){let _0x674c30=path['join'](config[_0x4d039d(0xf8)],_0x4d039d(0xe9));function _0xc90525(){const _0x55930b=_0x4d039d;let _0x438850=path['join'](_0x674c30,_0x281d92+'.webp');sharp(path['join'](_0x5c7fdd))['resize']({'width':_0x4c312d,'withoutEnlargement':!![]})[_0x55930b(0x139)]()[_0x55930b(0x11a)]()[_0x55930b(0x144)](_0x438850)[_0x55930b(0x15b)](()=>{return saveConfig(_0x1f528f,_0x281d92,_0x438850),_0x407539['json']({'code':0x0});})[_0x55930b(0x157)](()=>{const _0x374e91=_0x55930b;return _0x5012d4[_0x374e91(0x1a0)][_0x374e91(0x104)](_0x407539,_0x407539['__'](_0x374e91(0x126)));});}!fs['existsSync'](_0x674c30)?fs[_0x4d039d(0x165)](_0x674c30,{'recursive':!![]},_0xae22a7=>{const _0x19ab48=_0x4d039d;if(_0xae22a7)return _0x5012d4[_0x19ab48(0x1a0)][_0x19ab48(0x104)](_0x407539,_0x407539['__']('operationFail'));_0xc90525();}):_0xc90525();}else return _0x5012d4['app'][_0x4d039d(0x104)](_0x407539,_0x407539['__'](_0x4d039d(0x1ab))+_0x5c7fdd);}if(_0x1821c3)return saveConfig(_0x1f528f,_0x2fbc50(0x1b1),_0x1821c3),_0x407539[_0x2fbc50(0x19c)]({'code':0x0});_0x9e0d91&&_0x15a0f3('customLogoImage',_0x9e0d91,0xc8),_0x25ddaa&&_0x15a0f3(_0x2fbc50(0x14e),_0x25ddaa,0x3e8),_0x1c45a1&&_0x15a0f3(_0x2fbc50(0x1af),_0x1c45a1,0xf14);}),router[_0x5ed077(0x146)](_0x5ed077(0xec),(_0x1d6695,_0x3b1d37,_0x221e31)=>{const _0x56a2f8=_0x5ed077;let _0x347a5e=_0x1d6695['app'][_0x56a2f8(0x19b)],_0x4ebb51=_0x1d6695[_0x56a2f8(0x119)]['subtitleSize'],_0x1262db=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x170)],_0x433179=_0x1d6695['body'][_0x56a2f8(0x116)],_0x55ab9f=_0x1d6695['body'][_0x56a2f8(0x199)],_0x54d6e0=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0xd1)],_0x200fcc=_0x1d6695[_0x56a2f8(0x119)]['transcodePath'],_0xba4554=_0x1d6695['body'][_0x56a2f8(0x197)],_0x208ae4=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x103)],_0x193c49=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0xe3)],_0x26efd0=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x14d)],_0x3ae9f2=_0x1d6695['body'][_0x56a2f8(0x11c)],_0x5035e4=_0x1d6695['body'][_0x56a2f8(0x194)],_0xfdd8b5=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x135)],_0x232827=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x154)],_0x57324b=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x1a2)],_0xbb75c5=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0xf4)],_0x57861a=_0x1d6695['body'][_0x56a2f8(0x15d)],_0x302e79=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x113)],_0x412e1f=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x18e)],_0x1212d4=_0x1d6695['body'][_0x56a2f8(0xdc)];if(_0x1d6695['currentUser'][_0x56a2f8(0xea)]!=0x1)return _0x3b1d37['json']({'code':0x66});_0xfdd8b5&&saveConfig(_0x347a5e,_0x56a2f8(0x135),_0xfdd8b5);(_0x302e79==0x1||_0x302e79==0x0)&&saveConfig(_0x347a5e,'tmdbProxyEnable',_0x302e79);_0x412e1f&&saveConfig(_0x347a5e,_0x56a2f8(0x18e),_0x412e1f?_0x412e1f:'');_0x232827!=null&&saveConfig(_0x347a5e,_0x56a2f8(0x154),_0x232827?_0x232827:'');_0x57324b!=null&&saveConfig(_0x347a5e,_0x56a2f8(0x1a2),_0x57324b?_0x57324b:'');_0xbb75c5&&saveConfig(_0x347a5e,'movieDatabaseType',_0xbb75c5);_0x5035e4&&saveConfig(_0x347a5e,_0x56a2f8(0x194),_0x5035e4);_0x57861a&&saveConfig(_0x347a5e,_0x56a2f8(0x15d),_0x57861a);_0x1212d4&&saveConfig(_0x347a5e,_0x56a2f8(0xdc),_0x1212d4);let _0x1522b7=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x1c4)],_0x4f2433=_0x1d6695['body'][_0x56a2f8(0x1a9)],_0x2572c3=_0x1d6695[_0x56a2f8(0x119)]['movieHomeShowLibrary'];(_0x1522b7==0x1||_0x1522b7==0x0)&&saveConfig(_0x347a5e,_0x56a2f8(0x1c4),_0x1522b7);(_0x4f2433==0x1||_0x4f2433==0x0)&&saveConfig(_0x347a5e,_0x56a2f8(0x1a9),_0x4f2433);(_0x2572c3==0x1||_0x2572c3==0x0)&&saveConfig(_0x347a5e,'movieHomeShowLibrary',_0x2572c3);let _0x406f59=_0x1d6695[_0x56a2f8(0x119)][_0x56a2f8(0x123)];if(_0x406f59&&(_0x406f59<0x1||_0x406f59>0x33))return _0x3b1d37['json']({'code':0x1,'message':_0x56a2f8(0x10f)});let _0x31ad41=['ultrafast',_0x56a2f8(0x164),'medium',_0x56a2f8(0x12e)];_0x26efd0&&_0x31ad41[_0x56a2f8(0xf5)](_0x26efd0)&&saveConfig(_0x347a5e,'transcodeSpeed',_0x26efd0);_0xba4554&&saveConfig(_0x347a5e,'movieShowMatchName',_0xba4554);_0x208ae4&&saveConfig(_0x347a5e,'useFolderPictureAsPoster',_0x208ae4);_0x406f59&&saveConfig(_0x347a5e,'crf',parseInt(_0x406f59));_0x4ebb51&&saveConfig(_0x347a5e,_0x56a2f8(0xcb),_0x4ebb51);_0x3ae9f2&&saveConfig(_0x347a5e,_0x56a2f8(0x11c),_0x3ae9f2);_0x1262db&&saveConfig(_0x347a5e,'autoHardAccDecode',_0x1262db);_0x433179&&saveConfig(_0x347a5e,'transCodeParams-CoderNameHevc',_0x433179);_0x55ab9f&&saveConfig(_0x347a5e,_0x56a2f8(0x15a),_0x55ab9f);if(_0x54d6e0){try{_0x54d6e0=parseInt(_0x54d6e0);if(_0x54d6e0>0x1e)_0x54d6e0=0x1e;if(_0x54d6e0<0x2)_0x54d6e0=0x2;}catch(_0x5d326f){_0x54d6e0=0x5;}saveConfig(_0x347a5e,'transCodeParams-readrate',_0x54d6e0);}return _0x193c49&&(saveConfig(_0x347a5e,_0x56a2f8(0xe3),_0x193c49),_0x193c49=='1'&&process[_0x56a2f8(0x1cd)]({'type':_0x56a2f8(0xd2)})),_0x200fcc?saveConfig(_0x347a5e,_0x56a2f8(0x1a3),_0x200fcc):dbConfigTable['deleteByTitle'](_0x347a5e,'transcodePath'),_0x3b1d37[_0x56a2f8(0x19c)]({'code':0x0});}),router[_0x5ed077(0x146)](_0x5ed077(0x15f),(_0xe69b00,_0x5d8b1b,_0x2fd077)=>{const _0x56ad54=_0x5ed077;let _0x855189=_0xe69b00[_0x56ad54(0x1a0)]['dbOther'];if(_0xe69b00[_0x56ad54(0xe2)]['is_admin']!=0x1)return _0x5d8b1b[_0x56ad54(0x19c)]({'code':0x66});function _0x11dbd7(){const _0x562b48=_0x56ad54;let _0x1206af=_0xe69b00['body']['musicTitleType']||'filename',_0x4edca1=['filename',_0x562b48(0x1a1)];return _0x4edca1[_0x562b48(0xf5)](_0x1206af)&&saveConfig(_0x855189,_0x562b48(0x16c),_0x1206af),_0x5d8b1b[_0x562b48(0x19c)]({'code':0x0});}_0x11dbd7();}),router['post'](_0x5ed077(0xd0),(_0x10ed02,_0x551c2f,_0x860f9b)=>{const _0x1a3290=_0x5ed077;if(_0x10ed02[_0x1a3290(0xe2)]['is_admin']!=0x1)return _0x551c2f[_0x1a3290(0x19c)]({'code':0x66});let _0x3d20c4={};_0x3d20c4[_0x1a3290(0x10e)]=path[_0x1a3290(0xe0)](config[_0x1a3290(0xf8)],_0x1a3290(0x13b)),_0x3d20c4[_0x1a3290(0x182)]=config[_0x1a3290(0x183)],fs[_0x1a3290(0x151)](_0x3d20c4[_0x1a3290(0x182)],fs[_0x1a3290(0x1ce)][_0x1a3290(0xff)]|fs['constants'][_0x1a3290(0x155)],_0x40e5f9=>{const _0x252dd0=_0x1a3290;_0x3d20c4[_0x252dd0(0xd5)]=0x1;_0x40e5f9&&(_0x3d20c4[_0x252dd0(0xd5)]=0x0);let _0x1b5a74=dbConfigTable[_0x252dd0(0x1c8)](_0x10ed02[_0x252dd0(0x1a0)][_0x252dd0(0x19b)],_0x252dd0(0x107));return _0x1b5a74?_0x3d20c4[_0x252dd0(0x107)]=JSON['parse'](_0x1b5a74[_0x252dd0(0x192)]):_0x3d20c4[_0x252dd0(0x107)]=![],_0x3d20c4[_0x252dd0(0x19f)]=config[_0x252dd0(0x19f)],_0x551c2f[_0x252dd0(0x19c)]({'code':0x0,'data':_0x3d20c4});});}),router[_0x5ed077(0x146)]('/relaunch',(_0x355263,_0x2b248b,_0x12b3db)=>{const _0x2e0191=_0x5ed077;if(dbUserTable['isAdmin'](_0x355263,_0x2b248b)!==!![])return;if(OS[_0x2e0191(0x19a)]()!=_0x2e0191(0x1b4)&&OS[_0x2e0191(0x19a)]()!=_0x2e0191(0x145))return _0x355263[_0x2e0191(0x1a0)]['returnErrMsg'](_0x2b248b,_0x2b248b['__'](_0x2e0191(0x141)));return process['send']({'type':_0x2e0191(0x160)}),_0x2b248b['json']({'code':0x0});}),router[_0x5ed077(0x146)](_0x5ed077(0x1ac),(_0x3fcab0,_0x147aa8,_0x4e3f0b)=>{const _0x2c5def=_0x5ed077;if(_0x3fcab0[_0x2c5def(0xe2)][_0x2c5def(0xea)]!=0x1)return _0x147aa8[_0x2c5def(0x19c)]({'code':0x66});let _0xb8bdd3=path[_0x2c5def(0xe0)](config['cacheParentPath'],_0x2c5def(0x1b2));fs[_0x2c5def(0x1b6)](_0xb8bdd3,(_0x33f91f,_0x464d5c)=>{if(_0x33f91f)return;fs['rm'](_0xb8bdd3,{'recursive':!![]},_0x4cfb48=>{const _0x45b412=_0x43f2;fs[_0x45b412(0x165)](_0xb8bdd3,{'recursive':!![]},_0x25366a=>{const _0x2590b7=_0x45b412;console[_0x2590b7(0x13a)](_0x25366a);});if(_0x4cfb48)return fileUtil[_0x45b412(0x131)](_0x147aa8,_0x4cfb48);return dbConfigTable['deleteByTitle'](_0x3fcab0[_0x45b412(0x1a0)][_0x45b412(0x19b)],_0x45b412(0x107)),_0x147aa8[_0x45b412(0x19c)]({'code':0x0});});});let _0x542616=path[_0x2c5def(0xe0)](config[_0x2c5def(0x183)],_0x2c5def(0x129)),_0x1dd043=path[_0x2c5def(0xe0)](config[_0x2c5def(0x183)],_0x2c5def(0x129),_0x2c5def(0x12c));fs[_0x2c5def(0x1b6)](_0x542616,(_0x4d5d3f,_0x4f596c)=>{if(_0x4d5d3f)return;fs['rm'](_0x542616,{'recursive':!![]},_0x6a313f=>{const _0x3fb6a2=_0x43f2;fs[_0x3fb6a2(0x165)](_0x1dd043,{'recursive':!![]},_0x49c4ef=>{const _0x4ff86e=_0x3fb6a2;console[_0x4ff86e(0x13a)](_0x49c4ef);});if(_0x6a313f)return fileUtil['returnFileError'](_0x147aa8,_0x6a313f);});});}),router[_0x5ed077(0x146)]('/getSystemInfomation',(_0x13e19e,_0x5a5ac2,_0x3bbde9)=>{const _0x16dd0a=_0x5ed077;if(dbUserTable[_0x16dd0a(0x1cb)](_0x13e19e,_0x5a5ac2)!==!![])return;let _0x5df424=_0x13e19e[_0x16dd0a(0x119)][_0x16dd0a(0x124)],_0xd04097=[_0x16dd0a(0x1c5),'bios',_0x16dd0a(0xca),'chassis',_0x16dd0a(0xe1),_0x16dd0a(0x19e),_0x16dd0a(0x184),'memLayout',_0x16dd0a(0xe8),'graphics','osInfo',_0x16dd0a(0x196),_0x16dd0a(0x14a),_0x16dd0a(0x16f),'networkInterfaces',_0x16dd0a(0xf1),_0x16dd0a(0x1c2)];if(!_0xd04097[_0x16dd0a(0xf5)](_0x5df424))return _0x13e19e[_0x16dd0a(0x1a0)][_0x16dd0a(0x104)](_0x5a5ac2,_0x16dd0a(0x10d));si[_0x5df424](_0x297311=>{const _0x5bc4fd=_0x16dd0a;try{return _0x5a5ac2[_0x5bc4fd(0x19c)]({'code':0x0,'data':_0x297311});}catch(_0x570a7f){console[_0x5bc4fd(0x13a)](_0x5bc4fd(0xdb),_0x570a7f);}});}),router[_0x5ed077(0x146)]('/openInSystem',(_0x3f9183,_0xc70a68,_0xfce256)=>{const _0x412964=_0x5ed077;let _0x5c4182=netUtils[_0x412964(0x121)](_0x3f9183);if(_0x5c4182!=_0x412964(0x1a4))return _0x3f9183[_0x412964(0x1a0)][_0x412964(0x104)](_0xc70a68,_0xc70a68['__'](_0x412964(0x126)));let _0x565551=_0x3f9183[_0x412964(0x119)][_0x412964(0x1bf)],_0x4fef1d=_0x3f9183[_0x412964(0x119)][_0x412964(0xc9)],_0x34506=_0x3f9183['body'][_0x412964(0x17c)];if(!_0x34506)try{_0x34506=path[_0x412964(0xe0)](_0x565551,_0x4fef1d);}catch(_0x1cb840){console['log'](_0x1cb840);}if(!_0x34506)return _0x3f9183['app'][_0x412964(0x104)](_0xc70a68,_0x412964(0x159));if(dbUserTable['doUserCanGet'](_0x3f9183,_0xc70a68,'folder',_0x412964(0x134),'')==!![]){let _0x483384=_0x3f9183[_0x412964(0x119)][_0x412964(0xe4)]||_0x412964(0x1d1);process[_0x412964(0x1cd)]({'type':_0x412964(0xfa),'shellType':_0x483384,'path':_0x34506});let _0x16dd29={'code':0x0};return _0xc70a68['json'](_0x16dd29);}}),module[_0x5ed077(0x1b0)]=router;