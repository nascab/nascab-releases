const _0x3ab8be=_0x23df;(function(_0x13ed4b,_0x50545e){const _0x5a9565=_0x23df,_0x18e733=_0x13ed4b();while(!![]){try{const _0x25a2fc=-parseInt(_0x5a9565(0x1a0))/0x1*(parseInt(_0x5a9565(0x1c0))/0x2)+-parseInt(_0x5a9565(0x206))/0x3+parseInt(_0x5a9565(0x212))/0x4+-parseInt(_0x5a9565(0x1b4))/0x5+parseInt(_0x5a9565(0x1e5))/0x6+parseInt(_0x5a9565(0x1ef))/0x7*(parseInt(_0x5a9565(0x1e2))/0x8)+parseInt(_0x5a9565(0x1c5))/0x9;if(_0x25a2fc===_0x50545e)break;else _0x18e733['push'](_0x18e733['shift']());}catch(_0x5c6dc9){_0x18e733['push'](_0x18e733['shift']());}}}(_0x5ec2,0x4e8cf));var express=require(_0x3ab8be(0x28d)),router=express['Router']();let config=require('../../myConfig/config'),dbFileIndexTable=require(_0x3ab8be(0x233)),dbConfigTable=require(_0x3ab8be(0x1c3)),dbSourceTable=require(_0x3ab8be(0x264)),dbNoticeCenterTable=require(_0x3ab8be(0x1dd)),netUtils=require('../utils/netUtils');const dbUserTable=require('../../db/dbUserTable'),dbBackupTask=require(_0x3ab8be(0x194)),OS=require('os');let path=require(_0x3ab8be(0x1bb)),fs=require('fs'),fileUtil=require(_0x3ab8be(0x1ec));var package=require(_0x3ab8be(0x205));const sqliteUtil=require(_0x3ab8be(0x1f5)),sharp=require(_0x3ab8be(0x1af)),si=require(_0x3ab8be(0x190));function _0x23df(_0x364215,_0x337719){const _0x5ec2e6=_0x5ec2();return _0x23df=function(_0x23df9e,_0x273eb4){_0x23df9e=_0x23df9e-0x18b;let _0x2f52a8=_0x5ec2e6[_0x23df9e];return _0x2f52a8;},_0x23df(_0x364215,_0x337719);}let tls=require(_0x3ab8be(0x28c));function _0x5ec2(){const _0x1dbf3b=['onlySupportOnServerApp','DELETE\x20FROM\x20bg_task\x20WHERE\x20id=?','toFile','prepare','all','autoHardAccDecode','returnErrMsg','serverRootPath','../../db/dbSourceFolderTable','autoLaunch','cpu','INDEX_TABLE_NAME_MOVIE','value','tokenKeepHour','cacheParentPath','movieTmdbLanguage','totalmem','send','tmdbProxyEnable','START_PRE_GEN_SUBTITLE','FTPPort','databaseFolder','push','apiPortHttps','excludeFilenamePhoto','access','photoPreviewSize','exec','cpus','/saveConfig','getIpList','aiClassesEnable','imgFolderUsable','cacheImageInfo','language','defaultWebDavPortHttps','cpuTemperature','version','/refreshHomePage','\x20status=\x27running\x27\x20or\x20status=\x27waiting\x27','movieShowMatchName','ipMode','trim','movieTmdbApiUrl','bluetoothDevices','aiFaceMinPhotoCount','autoLoginClient','id3tag','tls','express','getDiskInfo','memLayout','isAdmin','subtitle','type','serverRootError','defaultWebDavPort','log','httpsCertError','\x20title\x20in\x20(\x27globalCpuInfo\x27,\x27globalMemInfo\x27,\x27','allConfig','json','systeminformation','setting.portInvalid','transCodeParams-CoderNameH264','create','../../db/dbBackupTask','constants','need\x20path','medium','cache','run','findByTitle','excludePathPhoto','aiSimilarPhotoEnable','autoShowWindow','body','/resetIndex','3608SdEQoh','/getSystemInfo','BACKUP','localhost','excludePathFolderBrowser','win32','fullPath','transcodePath','/saveConfigCustom','versionInfo','getUpdateInfo','exports','then','/setLanguage','ipDetection','sharp','toUpperCase','task_name','/vaccumDb','book','972175hpDZSD','post','startsWith','defaultTranscodeResolution','filename','wal_checkpoint(RESTART)','getUnReadCount','path','transCodeParams-CoderNameHevc','app','subtitlePreGen','folderNotExist','10gjomaN','defaultFTPPort','.webp','../../db/dbConfigTable','INDEX_TABLE_NAME_MUSIC','1433412jfGTez','webDavUseApiCert','keys','region','defaultApiPort','customShareUrl','twoStepLogin','platform','movieTmdbApiKey','excludePathMovie','audio','tmdbProxyUrl','/clearCache','force','webDavPort','serverName','autoScanSource','join','music','webDavHttpsCert','parse','includes','movieHomeShowLibrary','cachePath','../../db/dbNoticeCenterTable','defaultThreadCount','ipBan','notSupport','customHomeBgImage','2728WBdAVQ','notSupportForAutoUpdate','\x27,\x27globalDiskInfo\x27)','553596ZLPepp','mem','catch','mkdir','getGlobalInfo','wifiNetworks','folder','../utils/fileUtils','length','moviePlaylongPressRate','371AUARWM','reloadHomePage','taskState','/saveConfigPhoto','customLoginImage','globalIndexInfo','../utils/sqliteUtil','threadCount','refreshHomePage','/saveConfigMusic','createSecureContext','movieHomeShowMyMedia','vacuum','copy_size','/getBgTask','defaultMoviePlay','appRootPath','ip\x20not\x20allow','/getSystemState','musicTitleType','stringify','title','../../../package.json','851889PAvbTk','imgFolder','customLogoImage','test','ddnsIpv6Address',':http','W_OK','count','transCodeCoderNameH264','subtitleSize','R_OK','/getVersionInfo','2194296WyQYFs','clearTable','darwin','pragma','/changeCachePath','photo','system','osInfo','useFolderPictureAsPoster','is_admin','transcodeSpeed','memTooLess','movieHomeShowHistory','networkInterfaces','error\x20keys','doUserCanGet','httpsCert','/openInSystem','setting','excludeFilenameMovie','isWinDisk','defaultApiPortHttps','existsSync','\x20title\x20in\x20(\x27apiServer\x27,\x27apiServerHttps\x27,\x27webDavServer\x27,\x27FTPServer\x27,\x27globalIpList\x27)','serverType','returnFileError','/getServerState','webp','openType','getAllByWhere','aiFaceEnable','err','toLowerCase','../../db/dbFileIndexTable','Relaunch','useNasCabCerts','offset','getClientIp','music-TitleType','type\x20is\x20invalid','diskLayout','graphics','download','/saveShareUrl','battery','transCodeParams-readrate','httpsKey','movieDatabaseType','startUpdate','dbOther','currentUser','power_get','showMenuArr','crf','-----','deleteByTitle','apiPort','moviePreferLanguage','/saveServerRootPath','usb','dbFileIndex','unreadMsgCount','/getLanguage','getAllRecordByWhere','startClassesAiWork','startFaceAiWork','/deleteBgTask','userDataFolder','cachePathInvalid','resize','findByTitleParamsList','webDavHttpsKey','/relaunch','operationFail'];_0x5ec2=function(){return _0x1dbf3b;};return _0x5ec2();}function testCertAndKeyMatch(_0x245f8c,_0xdc386f){const _0x7fb3c0=_0x3ab8be;try{return tls[_0x7fb3c0(0x1f9)]({'cert':_0x245f8c,'key':_0xdc386f}),!![];}catch(_0x3482f7){return![];}}router[_0x3ab8be(0x1b5)](_0x3ab8be(0x282),(_0xf88da3,_0xedf0b7,_0xdc102c)=>{const _0x97532c=_0x3ab8be;let _0x2dd505=netUtils['getClientIpWithOutXforwarded'](_0xf88da3);console[_0x97532c(0x18b)](_0x97532c(0x1f7),_0x2dd505);if(_0x2dd505!=_0x97532c(0x1a3))return _0x97532c(0x200);return process[_0x97532c(0x26d)]({'type':_0x97532c(0x1f0)}),_0xedf0b7[_0x97532c(0x18f)]({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x211),(_0x1b3964,_0x1bcb1b,_0xe80877)=>{const _0x5edf38=_0x3ab8be;let _0x372f96=package[_0x5edf38(0x281)],_0x3a0da1=dbConfigTable[_0x5edf38(0x19a)](_0x1b3964['app'][_0x5edf38(0x243)],_0x5edf38(0x1a9)),_0x68f85b=dbConfigTable[_0x5edf38(0x19a)](_0x1b3964[_0x5edf38(0x1bd)][_0x5edf38(0x243)],_0x5edf38(0x246));process[_0x5edf38(0x26d)]({'type':'getGlobalInfo','func':_0x5edf38(0x1aa)}),_0x1bcb1b[_0x5edf38(0x18f)]({'code':0x0,'showMenuArr':_0x68f85b?JSON[_0x5edf38(0x1d9)](_0x68f85b[_0x5edf38(0x268)]):'','versionInfo':_0x3a0da1?JSON['parse'](_0x3a0da1['value']):'','currentVersion':_0x372f96});}),router[_0x3ab8be(0x1b5)]('/updateNewVersion',(_0x1b9676,_0x3fc62d,_0x36dcd7)=>{const _0xddbc0f=_0x3ab8be;if(OS['platform']()!=_0xddbc0f(0x1a5)&&OS[_0xddbc0f(0x1cc)]()!=_0xddbc0f(0x214))return _0x1b9676[_0xddbc0f(0x1bd)][_0xddbc0f(0x262)](_0x3fc62d,_0x3fc62d['__'](_0xddbc0f(0x1e3)));if(_0x1b9676['currentUser'][_0xddbc0f(0x21b)]!=0x1)return _0x3fc62d[_0xddbc0f(0x18f)]({'code':0x66});return process[_0xddbc0f(0x26d)]({'type':_0xddbc0f(0x242)}),_0x3fc62d[_0xddbc0f(0x18f)]({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1fd),(_0x1a2d74,_0x1396d4,_0x45a4fb)=>{const _0x447dac=_0x3ab8be;let _0x27d5eb=netUtils[_0x447dac(0x237)](_0x1a2d74),_0xcfbe55=_0x1a2d74['body'][_0x447dac(0x1f1)],_0x3c0576=_0x1a2d74[_0x447dac(0x19e)][_0x447dac(0x20d)],_0x236e21=_0x1a2d74[_0x447dac(0x19e)][_0x447dac(0x236)],_0x5a1bac=[];if(_0x1a2d74[_0x447dac(0x244)][_0x447dac(0x21b)]==0x1){_0x5a1bac=_0x1a2d74['app'][_0x447dac(0x243)][_0x447dac(0x25f)]('SELECT\x20*\x20FROM\x20bg_task\x20WHERE\x20task_state=?\x20order\x20by\x20id\x20desc\x20limit\x20?\x20offset\x20?')[_0x447dac(0x260)](_0xcfbe55,_0x3c0576,_0x236e21);let _0x4c856b=dbBackupTask[_0x447dac(0x251)](_0x1a2d74[_0x447dac(0x1bd)][_0x447dac(0x243)],_0x447dac(0x283),[]);for(let _0x5e0e60 in _0x4c856b){let _0x3119c2=_0x4c856b[_0x5e0e60],_0x40c548=dbBackupTask['getById'](_0x1a2d74[_0x447dac(0x1bd)][_0x447dac(0x243)],_0x3119c2['task_id']);_0x5a1bac[_0x447dac(0x272)]({'task_type':_0x447dac(0x1a2),'task_name':_0x40c548?_0x40c548[_0x447dac(0x1b1)]:'','size_current':_0x3119c2[_0x447dac(0x1fc)],'size_all':_0x3119c2['total_size']});}}let _0x35a4a4={'code':0x0,'data':_0x5a1bac,'reqIp':_0x27d5eb};return _0x1396d4['json'](_0x35a4a4);}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x254),(_0x5e2f91,_0x2f902c,_0x5cd605)=>{const _0x51521c=_0x3ab8be;let _0x1581ef=_0x5e2f91[_0x51521c(0x19e)]['taskId'];dbUserTable[_0x51521c(0x290)](_0x5e2f91,_0x2f902c)===!![]&&_0x5e2f91[_0x51521c(0x1bd)][_0x51521c(0x243)]['prepare'](_0x51521c(0x25d))[_0x51521c(0x199)](_0x1581ef);let _0x36222c={'code':0x0};return _0x2f902c['json'](_0x36222c);}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1b2),(_0x2d0ce0,_0x3e6042,_0x1b7e8d)=>{const _0x3bf01e=_0x3ab8be;if(_0x2d0ce0[_0x3bf01e(0x244)]['is_admin']!=0x1)return _0x3e6042['json']({'code':0x66});try{return _0x2d0ce0[_0x3bf01e(0x1bd)]['dbOther']['exec'](_0x3bf01e(0x1fb)),_0x2d0ce0[_0x3bf01e(0x1bd)][_0x3bf01e(0x24e)][_0x3bf01e(0x277)](_0x3bf01e(0x1fb)),_0x2d0ce0[_0x3bf01e(0x1bd)]['dbOther'][_0x3bf01e(0x215)](_0x3bf01e(0x1b9)),_0x2d0ce0['app']['dbFileIndex'][_0x3bf01e(0x215)](_0x3bf01e(0x1b9)),_0x3e6042[_0x3bf01e(0x18f)]({'code':0x0});}catch(_0x55fdd0){return _0x2d0ce0[_0x3bf01e(0x1bd)][_0x3bf01e(0x262)](_0x3e6042,_0x3e6042['__'](_0x3bf01e(0x25b)));}}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x19f),(_0x473d9f,_0x20fa81,_0x37c8dc)=>{const _0x3ef8b4=_0x3ab8be;if(_0x473d9f['currentUser'][_0x3ef8b4(0x21b)]!=0x1)return _0x20fa81[_0x3ef8b4(0x18f)]({'code':0x66});let _0xe0d4d7=_0x473d9f['body'][_0x3ef8b4(0x22a)];dbSourceTable[_0x3ef8b4(0x213)](_0x473d9f[_0x3ef8b4(0x1bd)][_0x3ef8b4(0x243)],_0xe0d4d7);if(_0xe0d4d7=='movie')dbFileIndexTable[_0x3ef8b4(0x213)](_0x473d9f['app'][_0x3ef8b4(0x24e)],dbFileIndexTable[_0x3ef8b4(0x267)]);else{if(_0xe0d4d7==_0x3ef8b4(0x217))dbFileIndexTable[_0x3ef8b4(0x213)](_0x473d9f['app'][_0x3ef8b4(0x24e)],dbFileIndexTable['INDEX_TABLE_NAME_PHOTO']);else{if(_0xe0d4d7==_0x3ef8b4(0x1d7))dbFileIndexTable[_0x3ef8b4(0x213)](_0x473d9f[_0x3ef8b4(0x1bd)]['dbFileIndex'],dbFileIndexTable[_0x3ef8b4(0x1c4)]);else _0xe0d4d7==_0x3ef8b4(0x1b3)&&dbFileIndexTable[_0x3ef8b4(0x213)](_0x473d9f[_0x3ef8b4(0x1bd)][_0x3ef8b4(0x24e)],dbFileIndexTable['INDEX_TABLE_NAME_BOOK']);}}_0x20fa81[_0x3ef8b4(0x18f)]({'code':0x0});}),router['post'](_0x3ab8be(0x22c),(_0x12fc36,_0x28be1b,_0x4a3dd4)=>{const _0x583276=_0x3ab8be;let _0x35e4de=netUtils[_0x583276(0x237)](_0x12fc36),_0x1d0460=_0x12fc36[_0x583276(0x19e)][_0x583276(0x1d4)],_0x8ff854;_0x1d0460==_0x583276(0x260)?(process['send']({'type':'getGlobalInfo','func':_0x583276(0x27a)}),_0x8ff854=dbConfigTable[_0x583276(0x22f)](_0x12fc36['app'][_0x583276(0x243)],_0x583276(0x229))):_0x8ff854=dbConfigTable[_0x583276(0x19a)](_0x12fc36['app']['dbOther'],_0x1d0460);let _0x40bebf=dbConfigTable[_0x583276(0x19a)](_0x12fc36[_0x583276(0x1bd)][_0x583276(0x243)],_0x583276(0x20a)),_0x5640d4=dbConfigTable['findByTitle'](_0x12fc36[_0x583276(0x1bd)]['dbOther'],_0x583276(0x263)),_0x12a227={'code':0x0,'data':_0x8ff854,'serverRootPath':_0x5640d4&&_0x5640d4[_0x583276(0x268)]?_0x5640d4[_0x583276(0x268)]:'','hostName':OS['hostname'](),'reqIp':_0x35e4de};_0x40bebf&&_0x40bebf[_0x583276(0x268)]&&(_0x12a227[_0x583276(0x20a)]=_0x40bebf[_0x583276(0x268)]);let _0x21844b=dbNoticeCenterTable[_0x583276(0x1ba)](_0x12fc36[_0x583276(0x1bd)][_0x583276(0x243)]);return _0x12a227[_0x583276(0x24f)]=_0x21844b['count'],_0x28be1b[_0x583276(0x18f)](_0x12a227);}),router['post'](_0x3ab8be(0x201),(_0x5b031f,_0x1c95c6,_0x73064f)=>{const _0x2ce837=_0x3ab8be;let _0x2f2034=netUtils['getClientIp'](_0x5b031f),_0x1b14de=_0x5b031f[_0x2ce837(0x19e)][_0x2ce837(0x1d2)],_0xfd5990=_0x2ce837(0x1f4)+dbFileIndexTable[_0x2ce837(0x267)],_0x19c19d='globalIndexInfo'+dbFileIndexTable['INDEX_TABLE_NAME_PHOTO'];process[_0x2ce837(0x26d)]({'type':_0x2ce837(0x1e9),'func':'getAllIndexInfo'}),process[_0x2ce837(0x26d)]({'type':'getGlobalInfo','func':_0x2ce837(0x28e),'force':_0x1b14de}),fs['stat'](config[_0x2ce837(0x26a)],_0x306b17=>{const _0x57a303=_0x2ce837;if(_0x306b17)return _0x5b031f[_0x57a303(0x1bd)][_0x57a303(0x262)](_0x1c95c6,_0x1c95c6['__'](_0x57a303(0x256)));else{let _0x45f658=dbConfigTable[_0x57a303(0x22f)](_0x5b031f[_0x57a303(0x1bd)]['dbOther'],_0x57a303(0x18d)+_0xfd5990+'\x27,\x27'+_0x19c19d+_0x57a303(0x1e4));return _0x1c95c6['json']({'code':0x0,'data':_0x45f658,'version':package[_0x57a303(0x281)],'reqIp':_0x2f2034,'platform':OS['platform']()});}});}),router['post']('/getAllConfig',(_0x1a7c95,_0x354e23,_0x40b6b5)=>{const _0x447fcf=_0x3ab8be;let _0x471067=_0x1a7c95[_0x447fcf(0x19e)][_0x447fcf(0x1c7)];if(!_0x471067||!_0x471067 instanceof Array||_0x471067[_0x447fcf(0x1ed)]<0x1)return _0x1a7c95[_0x447fcf(0x1bd)]['returnErrMsg'](_0x354e23,_0x447fcf(0x220));let _0x3bffdb;_0x3bffdb=dbConfigTable[_0x447fcf(0x258)](_0x1a7c95[_0x447fcf(0x1bd)][_0x447fcf(0x243)],_0x471067);for(let _0x181b5d in _0x3bffdb){let _0x4c3bd9=_0x3bffdb[_0x181b5d];(_0x4c3bd9[_0x447fcf(0x204)]==_0x447fcf(0x222)||_0x4c3bd9[_0x447fcf(0x204)]==_0x447fcf(0x240))&&(!_0x4c3bd9[_0x447fcf(0x268)][_0x447fcf(0x1b6)](_0x447fcf(0x248))&&(_0x4c3bd9[_0x447fcf(0x268)]=''));}let _0x447010={};_0x447010[_0x447fcf(0x1c9)]=config[_0x447fcf(0x24a)],_0x447010[_0x447fcf(0x227)]=config[_0x447fcf(0x273)],_0x447010[_0x447fcf(0x294)]=config['webDavPort'],_0x447010[_0x447fcf(0x27f)]=config['webDavPortHttps'],_0x447010[_0x447fcf(0x1c1)]=config['FTPPort'],_0x447010[_0x447fcf(0x1de)]=0x2,_0x447010[_0x447fcf(0x18e)]=_0x3bffdb,_0x354e23[_0x447fcf(0x18f)]({'code':0x0,'data':_0x447010});}),router['post'](_0x3ab8be(0x250),(_0x6a565c,_0x50d9c0,_0x5e934a)=>{const _0x3703d7=_0x3ab8be;let _0x50be6b=dbConfigTable[_0x3703d7(0x19a)](_0x6a565c['app']['dbOther'],_0x3703d7(0x27e)),_0x4e8c05='';_0x50be6b&&(_0x4e8c05=_0x50be6b[_0x3703d7(0x268)]),_0x50d9c0[_0x3703d7(0x18f)]({'code':0x0,'data':_0x4e8c05});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1ad),(_0x37b697,_0x58d9b3,_0x172b10)=>{const _0x4f536e=_0x3ab8be;let _0x8ad57c=netUtils['getClientIp'](_0x37b697);if(_0x8ad57c!=_0x4f536e(0x1a3))return'ip\x20not\x20allow';if(_0x37b697['currentUser'][_0x4f536e(0x21b)]!=0x1)return _0x58d9b3['json']({'code':0x66});let _0x3dbcdb=_0x37b697[_0x4f536e(0x19e)]['language'],_0x5924ce=_0x37b697['body']['region'];return _0x3dbcdb&&dbConfigTable[_0x4f536e(0x193)](_0x37b697[_0x4f536e(0x1bd)]['dbOther'],{'title':_0x4f536e(0x27e),'value':_0x3dbcdb}),_0x5924ce&&dbConfigTable[_0x4f536e(0x193)](_0x37b697['app'][_0x4f536e(0x243)],{'title':_0x4f536e(0x1c8),'value':_0x5924ce}),_0x58d9b3['json']({'code':0x0});});function saveConfig(_0x194542,_0x479daf,_0x3682c8){const _0xec5400=_0x3ab8be;dbConfigTable[_0xec5400(0x193)](_0x194542,{'title':_0x479daf,'value':_0x3682c8+''});}router[_0x3ab8be(0x1b5)](_0x3ab8be(0x216),(_0x44f966,_0x710f97,_0x581550)=>{const _0xcd91e3=_0x3ab8be;let _0x178bed=_0x44f966[_0xcd91e3(0x19e)][_0xcd91e3(0x1dc)];if(_0x44f966[_0xcd91e3(0x244)]['is_admin']!=0x1)return _0x710f97[_0xcd91e3(0x18f)]({'code':0x66});if(_0x178bed)fs[_0xcd91e3(0x275)](_0x178bed,fs[_0xcd91e3(0x195)][_0xcd91e3(0x20c)]|fs[_0xcd91e3(0x195)][_0xcd91e3(0x210)],_0x39c2c1=>{const _0x4b3c0f=_0xcd91e3;return!_0x39c2c1?(saveConfig(_0x44f966['app'][_0x4b3c0f(0x243)],'cacheParentPath',_0x178bed),_0x710f97[_0x4b3c0f(0x18f)]({'code':0x0})):fileUtil['returnFileError'](_0x710f97,_0x39c2c1);});else return dbConfigTable[_0xcd91e3(0x249)](_0x44f966['app'][_0xcd91e3(0x243)],_0xcd91e3(0x26a)),_0x710f97[_0xcd91e3(0x18f)]({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x24c),(_0x2019e4,_0x48954a,_0x4e8e77)=>{const _0x210e1a=_0x3ab8be;if(_0x2019e4[_0x210e1a(0x244)]['is_admin']!=0x1)return _0x48954a[_0x210e1a(0x18f)]({'code':0x66});let _0x306e42=_0x2019e4[_0x210e1a(0x19e)][_0x210e1a(0x263)];return _0x306e42?saveConfig(_0x2019e4[_0x210e1a(0x1bd)][_0x210e1a(0x243)],_0x210e1a(0x263),_0x306e42):dbConfigTable[_0x210e1a(0x249)](_0x2019e4[_0x210e1a(0x1bd)][_0x210e1a(0x243)],_0x210e1a(0x263)),_0x48954a['json']({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x23d),(_0x4f6234,_0x6729e5,_0x1c82c6)=>{const _0x44fc7=_0x3ab8be;if(_0x4f6234[_0x44fc7(0x244)][_0x44fc7(0x21b)]!=0x1)return _0x6729e5[_0x44fc7(0x18f)]({'code':0x66});let _0x8b64f7=_0x4f6234[_0x44fc7(0x19e)][_0x44fc7(0x1ca)];return _0x8b64f7?saveConfig(_0x4f6234['app'][_0x44fc7(0x243)],_0x44fc7(0x1ca),_0x8b64f7):dbConfigTable['deleteByTitle'](_0x4f6234['app']['dbOther'],_0x44fc7(0x1ca)),_0x6729e5[_0x44fc7(0x18f)]({'code':0x0});});let forbiddenPorts=[0x1,0x7,0x9,0xb,0xd,0xf,0x11,0x13,0x14,0x15,0x16,0x17,0x19,0x25,0x2a,0x2b,0x35,0x4d,0x4f,0x57,0x5f,0x65,0x66,0x67,0x68,0x6d,0x6e,0x6f,0x71,0x73,0x75,0x77,0x7b,0x87,0x8b,0x8f,0xb3,0x185,0x1d1,0x200,0x201,0x202,0x203,0x20e,0x212,0x213,0x214,0x21c,0x22c,0x233,0x24b,0x259,0x27c,0x3e1,0x3e3,0x801,0xe4b,0xfcd,0x1770,0x1a09,0x1a0a,0x1a0b,0x1a0c,0x1a0d,0xd3d];router[_0x3ab8be(0x1b5)](_0x3ab8be(0x279),(_0x9baf8b,_0x4d0c97,_0x3130b8)=>{const _0x2d11d=_0x3ab8be;let _0x3e75c0=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x24a)],_0x5779f2=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x273)],_0x52d829=_0x9baf8b['body'][_0x2d11d(0x1d3)],_0x1083a9=_0x9baf8b[_0x2d11d(0x19e)]['webDavPortHttps'],_0x4f71c3=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x270)],_0x59af9e=_0x9baf8b['body'][_0x2d11d(0x265)],_0x508a1a=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x28a)],_0x3167b1=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x19d)],_0x42f9f8=_0x9baf8b[_0x2d11d(0x19e)]['autoScanSource'],_0x4e9b2b=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x240)],_0x4c6cbc=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x222)],_0x5d3a68=_0x9baf8b[_0x2d11d(0x19e)]['webDavHttpsKey'],_0x314143=_0x9baf8b['body'][_0x2d11d(0x1d8)],_0x41cc4c=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x27e)],_0x3c96f3=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1c8)],_0x1263aa=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1f6)],_0x1bba25=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1ce)],_0x3f8cfe=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x19b)],_0xdff4a8=_0x9baf8b['body'][_0x2d11d(0x1a4)],_0x3e3c70=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x225)],_0x5104c5=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x274)],_0x4c4347=_0x9baf8b[_0x2d11d(0x19e)]['showMenuArr'],_0x199429=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x269)],_0x48e0c5=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1ca)],_0x4713bf=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1c6)],_0x3bfae5=_0x9baf8b['app'][_0x2d11d(0x243)];if(_0x9baf8b[_0x2d11d(0x244)]['is_admin']!=0x1)return _0x4d0c97['json']({'code':0x66});let _0x285b40=_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x263)];if(_0x285b40&&_0x285b40[_0x2d11d(0x286)]()){_0x285b40=_0x285b40[_0x2d11d(0x232)]()[_0x2d11d(0x286)]();if(_0x285b40[_0x2d11d(0x1ed)]>0x20||!/^[a-zA-Z0-9]+$/[_0x2d11d(0x209)](_0x285b40))return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,'Root\x20path\x20must\x20be\x2032\x20characters\x20or\x20less\x20and\x20contain\x20only\x20letters\x20and\x20numbers');if([_0x2d11d(0x1d7),'book',_0x2d11d(0x23c),'file',_0x2d11d(0x224),'note','api']['includes'](_0x285b40))return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x293))+(':'+_0x285b40),'dialog');saveConfig(_0x3bfae5,_0x2d11d(0x263),_0x285b40);}let _0x502e9a=0xffdc;if(_0x3e75c0>_0x502e9a||_0x52d829>_0x502e9a||_0x4f71c3>_0x502e9a||_0x1083a9>_0x502e9a)return _0x4d0c97['json']({'code':0x1,'message':'port:\x20256-65500'});_0x4c4347&&saveConfig(_0x3bfae5,_0x2d11d(0x246),JSON[_0x2d11d(0x203)](_0x4c4347));_0x48e0c5&&saveConfig(_0x3bfae5,_0x2d11d(0x1ca),_0x48e0c5);_0x1bba25&&saveConfig(_0x3bfae5,_0x2d11d(0x1ce),JSON[_0x2d11d(0x203)](_0x1bba25));_0x199429&&parseInt(_0x199429)!=NaN&&_0x199429>0x0&&_0x199429<0x5f5e0ff&&saveConfig(_0x3bfae5,_0x2d11d(0x269),_0x199429);_0x3f8cfe&&saveConfig(_0x3bfae5,'excludePathPhoto',JSON['stringify'](_0x3f8cfe));_0x3c96f3&&saveConfig(_0x3bfae5,_0x2d11d(0x1c8),_0x3c96f3);if(_0xdff4a8){let _0x33d0fa=netUtils[_0x2d11d(0x237)](_0x9baf8b);if(_0x33d0fa==_0x2d11d(0x1a3)){for(let _0x36f453 in _0xdff4a8){let _0x1da752=_0xdff4a8[_0x36f453],_0x12b4ee=fs[_0x2d11d(0x228)](_0x1da752);if(!_0x12b4ee)return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x1bf))+':'+_0x1da752);fileUtil[_0x2d11d(0x226)](_0x1da752)&&(_0xdff4a8[_0x36f453]=_0x1da752[_0x2d11d(0x1b0)]());}saveConfig(_0x3bfae5,'excludePathFolderBrowser',JSON[_0x2d11d(0x203)](_0xdff4a8));}else return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x25c)));}_0x3e3c70&&saveConfig(_0x3bfae5,'excludeFilenameMovie',JSON[_0x2d11d(0x203)](_0x3e3c70));_0x5104c5&&saveConfig(_0x3bfae5,_0x2d11d(0x274),JSON['stringify'](_0x5104c5));if(_0x3e75c0){if(forbiddenPorts[_0x2d11d(0x1da)](parseInt(_0x3e75c0)))return _0x9baf8b['app'][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x191))+_0x2d11d(0x20b));saveConfig(_0x3bfae5,_0x2d11d(0x24a),parseInt(_0x3e75c0));}if(_0x5779f2){if(forbiddenPorts[_0x2d11d(0x1da)](parseInt(_0x5779f2))||_0x5779f2==_0x3e75c0)return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__']('setting.portInvalid')+':https');saveConfig(_0x3bfae5,_0x2d11d(0x273),parseInt(_0x5779f2));}_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1df)]&&saveConfig(_0x3bfae5,_0x2d11d(0x1df),_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1df)]);_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x285)]&&(saveConfig(_0x3bfae5,_0x2d11d(0x285),_0x9baf8b['body'][_0x2d11d(0x285)]),_0x9baf8b[_0x2d11d(0x1bd)]['refreshIpList']());_0x9baf8b['body'][_0x2d11d(0x1ae)]&&saveConfig(_0x3bfae5,_0x2d11d(0x1ae),_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1ae)]);_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1cb)]&&saveConfig(_0x3bfae5,'twoStepLogin',_0x9baf8b[_0x2d11d(0x19e)][_0x2d11d(0x1cb)]);_0x52d829&&saveConfig(_0x3bfae5,_0x2d11d(0x1d3),parseInt(_0x52d829));_0x1083a9&&saveConfig(_0x3bfae5,'webDavPortHttps',parseInt(_0x1083a9));_0x4f71c3&&saveConfig(_0x3bfae5,'FTPPort',parseInt(_0x4f71c3));_0x59af9e&&saveConfig(_0x3bfae5,_0x2d11d(0x265),_0x59af9e);_0x508a1a&&saveConfig(_0x3bfae5,'autoLoginClient',_0x508a1a);_0x3167b1&&saveConfig(_0x3bfae5,_0x2d11d(0x19d),_0x3167b1);_0x42f9f8&&saveConfig(_0x3bfae5,_0x2d11d(0x1d5),_0x42f9f8);let _0x33d13c=dbConfigTable['findByTitle'](_0x9baf8b[_0x2d11d(0x1bd)]['dbOther'],_0x2d11d(0x235));if(!_0x33d13c||_0x33d13c[_0x2d11d(0x268)]==0x0){if(_0x4e9b2b!='*'&&_0x4c6cbc!='*'){if(_0x4e9b2b&&_0x4c6cbc){if(!_0x4e9b2b[_0x2d11d(0x1b6)](_0x2d11d(0x248))||!_0x4c6cbc[_0x2d11d(0x1b6)](_0x2d11d(0x248)))return _0x9baf8b['app'][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x18c)));const _0xfa6b0b=testCertAndKeyMatch(_0x4c6cbc,_0x4e9b2b);if(!_0xfa6b0b)return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x18c)));saveConfig(_0x3bfae5,_0x2d11d(0x240),_0x4e9b2b),saveConfig(_0x3bfae5,_0x2d11d(0x222),_0x4c6cbc);}else saveConfig(_0x3bfae5,_0x2d11d(0x240),''),saveConfig(_0x3bfae5,_0x2d11d(0x222),'');}}_0x4713bf&&saveConfig(_0x3bfae5,'webDavUseApiCert',_0x4713bf);_0x4713bf=dbConfigTable[_0x2d11d(0x19a)](_0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x243)],_0x2d11d(0x1c6));if(!_0x4713bf||_0x4713bf['value']==0x0){if(_0x5d3a68!='*'&&_0x314143!='*'){if(_0x5d3a68&&_0x314143){if(!_0x5d3a68[_0x2d11d(0x1b6)](_0x2d11d(0x248))||!_0x314143[_0x2d11d(0x1b6)](_0x2d11d(0x248)))return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x18c)));const _0x333631=testCertAndKeyMatch(_0x5d3a68,_0x314143);if(!_0x333631)return _0x9baf8b[_0x2d11d(0x1bd)]['returnErrMsg'](_0x4d0c97,_0x4d0c97['__'](_0x2d11d(0x18c)));saveConfig(_0x3bfae5,'webDavHttpsKey',_0x5d3a68),saveConfig(_0x3bfae5,_0x2d11d(0x1d8),_0x314143);}else saveConfig(_0x3bfae5,_0x2d11d(0x259),''),saveConfig(_0x3bfae5,'webDavHttpsCert','');}}_0x41cc4c&&saveConfig(_0x3bfae5,_0x2d11d(0x27e),_0x41cc4c);if(_0x1263aa){if(_0x1263aa>OS[_0x2d11d(0x278)]()[_0x2d11d(0x1ed)])return _0x9baf8b[_0x2d11d(0x1bd)][_0x2d11d(0x262)](_0x4d0c97,_0x4d0c97['__']('maxThreadCountIs')+OS[_0x2d11d(0x278)]()[_0x2d11d(0x1ed)]);saveConfig(_0x3bfae5,_0x2d11d(0x1f6),_0x1263aa);}return _0x4d0c97[_0x2d11d(0x18f)]({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1f2),(_0x39a003,_0x39f334,_0x288007)=>{const _0x3f7885=_0x3ab8be;if(_0x39a003[_0x3f7885(0x244)][_0x3f7885(0x21b)]!=0x1)return _0x39f334[_0x3f7885(0x18f)]({'code':0x66});let _0x15736b=_0x39a003[_0x3f7885(0x1bd)][_0x3f7885(0x243)],_0x5cff4a=_0x39a003['body'][_0x3f7885(0x27b)],_0x2139b0=_0x39a003[_0x3f7885(0x19e)]['aiFaceEnable'],_0x362c84=_0x39a003[_0x3f7885(0x19e)][_0x3f7885(0x19c)],_0x538dfc=_0x39a003[_0x3f7885(0x19e)][_0x3f7885(0x289)],_0x3b4141=_0x39a003['body']['photoPreviewType'],_0x31f933=_0x39a003[_0x3f7885(0x19e)][_0x3f7885(0x276)];_0x3b4141&&saveConfig(_0x15736b,'photoPreviewType',_0x3b4141);_0x31f933&&saveConfig(_0x15736b,_0x3f7885(0x276),_0x31f933);if(_0x5cff4a){if(_0x5cff4a==0x1){if(OS[_0x3f7885(0x26c)]()/0x400/0x400/0x400<0x3)return _0x39a003['app']['returnErrMsg'](_0x39f334,_0x39f334['__'](_0x3f7885(0x21d)));}saveConfig(_0x15736b,_0x3f7885(0x27b),_0x5cff4a);if(_0x5cff4a==0x1)process[_0x3f7885(0x26d)]({'type':_0x3f7885(0x252)});}_0x538dfc&&saveConfig(_0x15736b,'aiFaceMinPhotoCount',_0x538dfc);if(_0x2139b0){if(_0x2139b0==0x1){if(OS[_0x3f7885(0x26c)]()/0x400/0x400/0x400<0x3)return _0x39a003[_0x3f7885(0x1bd)]['returnErrMsg'](_0x39f334,_0x39f334['__'](_0x3f7885(0x21d)));}saveConfig(_0x15736b,_0x3f7885(0x230),_0x2139b0);if(_0x2139b0==0x1)process[_0x3f7885(0x26d)]({'type':_0x3f7885(0x253)});}if(_0x362c84){saveConfig(_0x15736b,_0x3f7885(0x19c),_0x362c84);if(_0x362c84==0x1)process[_0x3f7885(0x26d)]({'type':'startSimilarPhotoWork'});}return _0x39f334['json']({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1a8),(_0x57b91e,_0x4783ba,_0x322406)=>{const _0x59e3f6=_0x3ab8be;if(_0x57b91e['currentUser']['is_admin']!=0x1)return _0x4783ba[_0x59e3f6(0x18f)]({'code':0x66});let _0x26b220=_0x57b91e[_0x59e3f6(0x1bd)][_0x59e3f6(0x243)],_0x22df76=_0x57b91e[_0x59e3f6(0x19e)]['customLoginTitle'],_0x43ab16=_0x57b91e[_0x59e3f6(0x19e)][_0x59e3f6(0x208)],_0x10c674=_0x57b91e[_0x59e3f6(0x19e)]['customLoginImage'],_0xa3fcf1=_0x57b91e['body'][_0x59e3f6(0x1e1)];function _0x286322(_0x204764,_0x2a3080,_0x65400d){const _0x222268=_0x59e3f6;if(_0x2a3080=='-')return saveConfig(_0x26b220,_0x204764,'-'),_0x4783ba[_0x222268(0x18f)]({'code':0x0});if(fs[_0x222268(0x228)](_0x2a3080)){let _0x574a7b=path[_0x222268(0x1d6)](config['userDataFolder'],'custom');function _0x4ae566(){const _0x20262d=_0x222268;let _0x3df7d5=path[_0x20262d(0x1d6)](_0x574a7b,_0x204764+_0x20262d(0x1c2));sharp(path[_0x20262d(0x1d6)](_0x2a3080))[_0x20262d(0x257)]({'width':_0x65400d,'withoutEnlargement':!![]})['rotate']()[_0x20262d(0x22d)]()[_0x20262d(0x25e)](_0x3df7d5)[_0x20262d(0x1ac)](()=>{const _0x5ed2c2=_0x20262d;return saveConfig(_0x26b220,_0x204764,_0x3df7d5),_0x4783ba[_0x5ed2c2(0x18f)]({'code':0x0});})[_0x20262d(0x1e7)](()=>{const _0x305f30=_0x20262d;return _0x57b91e[_0x305f30(0x1bd)][_0x305f30(0x262)](_0x4783ba,_0x4783ba['__']('operationFail'));});}!fs['existsSync'](_0x574a7b)?fs[_0x222268(0x1e8)](_0x574a7b,{'recursive':!![]},_0x39e272=>{const _0x5c7058=_0x222268;if(_0x39e272)return _0x57b91e[_0x5c7058(0x1bd)]['returnErrMsg'](_0x4783ba,_0x4783ba['__'](_0x5c7058(0x25b)));_0x4ae566();}):_0x4ae566();}else return _0x57b91e[_0x222268(0x1bd)]['returnErrMsg'](_0x4783ba,_0x4783ba['__']('folderNotExist')+_0x2a3080);}if(_0x22df76)return saveConfig(_0x26b220,'customLoginTitle',_0x22df76),_0x4783ba[_0x59e3f6(0x18f)]({'code':0x0});_0x43ab16&&_0x286322(_0x59e3f6(0x208),_0x43ab16,0xc8),_0x10c674&&_0x286322(_0x59e3f6(0x1f3),_0x10c674,0x3e8),_0xa3fcf1&&_0x286322(_0x59e3f6(0x1e1),_0xa3fcf1,0xf14);}),router[_0x3ab8be(0x1b5)]('/saveConfigMovie',(_0x5ded76,_0x471864,_0x490d45)=>{const _0x1d1ae0=_0x3ab8be;let _0x17e0be=_0x5ded76['app'][_0x1d1ae0(0x243)],_0x18f62d=_0x5ded76['body'][_0x1d1ae0(0x20f)],_0x5df9c1=_0x5ded76['body'][_0x1d1ae0(0x261)],_0x1547da=_0x5ded76[_0x1d1ae0(0x19e)]['transCodeCoderNameHevc'],_0x342591=_0x5ded76['body'][_0x1d1ae0(0x20e)],_0x5cc79d=_0x5ded76[_0x1d1ae0(0x19e)]['transCodeReadRate'],_0x2c03f2=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1a7)],_0x16d0fa=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x284)],_0x430b93=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x21a)],_0x4ca4c4=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1be)],_0x1947d6=_0x5ded76['body']['transcodeSpeed'],_0x206cbe=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x24b)],_0x479f28=_0x5ded76[_0x1d1ae0(0x19e)]['moviePlaylongPressRate'],_0x2e0c18=_0x5ded76['body'][_0x1d1ae0(0x26b)],_0x3f8ec5=_0x5ded76['body'][_0x1d1ae0(0x287)],_0x5ce6b8=_0x5ded76[_0x1d1ae0(0x19e)]['movieTmdbApiKey'],_0x30c40a=_0x5ded76[_0x1d1ae0(0x19e)]['movieDatabaseType'],_0x2749a9=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1b7)],_0x2f2698=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x26e)],_0x85a442=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1d0)],_0x3944e8=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1fe)];if(_0x5ded76['currentUser'][_0x1d1ae0(0x21b)]!=0x1)return _0x471864[_0x1d1ae0(0x18f)]({'code':0x66});_0x2e0c18&&saveConfig(_0x17e0be,_0x1d1ae0(0x26b),_0x2e0c18);(_0x2f2698==0x1||_0x2f2698==0x0)&&saveConfig(_0x17e0be,'tmdbProxyEnable',_0x2f2698);_0x85a442&&saveConfig(_0x17e0be,'tmdbProxyUrl',_0x85a442?_0x85a442:'');_0x3f8ec5!=null&&saveConfig(_0x17e0be,_0x1d1ae0(0x287),_0x3f8ec5?_0x3f8ec5:'');_0x5ce6b8!=null&&saveConfig(_0x17e0be,_0x1d1ae0(0x1cd),_0x5ce6b8?_0x5ce6b8:'');_0x30c40a&&saveConfig(_0x17e0be,_0x1d1ae0(0x241),_0x30c40a);_0x479f28&&saveConfig(_0x17e0be,_0x1d1ae0(0x1ee),_0x479f28);_0x2749a9&&saveConfig(_0x17e0be,_0x1d1ae0(0x1b7),_0x2749a9);_0x3944e8&&saveConfig(_0x17e0be,_0x1d1ae0(0x1fe),_0x3944e8);let _0x13b911=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1fa)],_0xda349=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x21e)],_0x5b443e=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x1db)];(_0x13b911==0x1||_0x13b911==0x0)&&saveConfig(_0x17e0be,_0x1d1ae0(0x1fa),_0x13b911);(_0xda349==0x1||_0xda349==0x0)&&saveConfig(_0x17e0be,_0x1d1ae0(0x21e),_0xda349);(_0x5b443e==0x1||_0x5b443e==0x0)&&saveConfig(_0x17e0be,_0x1d1ae0(0x1db),_0x5b443e);let _0x7ea0f7=_0x5ded76[_0x1d1ae0(0x19e)][_0x1d1ae0(0x247)];if(_0x7ea0f7&&(_0x7ea0f7<0x1||_0x7ea0f7>0x33))return _0x471864[_0x1d1ae0(0x18f)]({'code':0x1,'message':'CRF:\x201-51'});let _0x1f113c=['ultrafast','fast',_0x1d1ae0(0x197),'slow'];_0x1947d6&&_0x1f113c[_0x1d1ae0(0x1da)](_0x1947d6)&&saveConfig(_0x17e0be,_0x1d1ae0(0x21c),_0x1947d6);_0x16d0fa&&saveConfig(_0x17e0be,_0x1d1ae0(0x284),_0x16d0fa);_0x430b93&&saveConfig(_0x17e0be,_0x1d1ae0(0x21a),_0x430b93);_0x7ea0f7&&saveConfig(_0x17e0be,'crf',parseInt(_0x7ea0f7));_0x18f62d&&saveConfig(_0x17e0be,'subtitleSize',_0x18f62d);_0x206cbe&&saveConfig(_0x17e0be,_0x1d1ae0(0x24b),_0x206cbe);_0x5df9c1&&saveConfig(_0x17e0be,_0x1d1ae0(0x261),_0x5df9c1);_0x1547da&&saveConfig(_0x17e0be,_0x1d1ae0(0x1bc),_0x1547da);_0x342591&&saveConfig(_0x17e0be,_0x1d1ae0(0x192),_0x342591);if(_0x5cc79d){try{_0x5cc79d=parseInt(_0x5cc79d);if(_0x5cc79d>0x1e)_0x5cc79d=0x1e;if(_0x5cc79d<0x2)_0x5cc79d=0x2;}catch(_0x394ccb){_0x5cc79d=0x5;}saveConfig(_0x17e0be,_0x1d1ae0(0x23f),_0x5cc79d);}return _0x4ca4c4&&(saveConfig(_0x17e0be,'subtitlePreGen',_0x4ca4c4),_0x4ca4c4=='1'&&process[_0x1d1ae0(0x26d)]({'type':_0x1d1ae0(0x26f)})),_0x2c03f2?saveConfig(_0x17e0be,_0x1d1ae0(0x1a7),_0x2c03f2):dbConfigTable['deleteByTitle'](_0x17e0be,_0x1d1ae0(0x1a7)),_0x471864[_0x1d1ae0(0x18f)]({'code':0x0});}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1f8),(_0x3535f5,_0x369ef4,_0x3b8e13)=>{const _0x4ca83d=_0x3ab8be;let _0x4b60a2=_0x3535f5[_0x4ca83d(0x1bd)]['dbOther'];if(_0x3535f5['currentUser'][_0x4ca83d(0x21b)]!=0x1)return _0x369ef4[_0x4ca83d(0x18f)]({'code':0x66});function _0x2dc35d(){const _0x550348=_0x4ca83d;let _0x30a2a7=_0x3535f5['body'][_0x550348(0x202)]||_0x550348(0x1b8),_0x1bebe6=[_0x550348(0x1b8),_0x550348(0x28b)];return _0x1bebe6[_0x550348(0x1da)](_0x30a2a7)&&saveConfig(_0x4b60a2,_0x550348(0x238),_0x30a2a7),_0x369ef4['json']({'code':0x0});}_0x2dc35d();}),router[_0x3ab8be(0x1b5)](_0x3ab8be(0x1a1),(_0xc56a2b,_0x3c38ed,_0x48c6b8)=>{const _0x4d85fe=_0x3ab8be;if(_0xc56a2b[_0x4d85fe(0x244)]['is_admin']!=0x1)return _0x3c38ed[_0x4d85fe(0x18f)]({'code':0x66});let _0x462796={};_0x462796[_0x4d85fe(0x271)]=path[_0x4d85fe(0x1d6)](config[_0x4d85fe(0x255)],'database'),_0x462796[_0x4d85fe(0x207)]=config[_0x4d85fe(0x26a)],fs[_0x4d85fe(0x275)](_0x462796[_0x4d85fe(0x207)],fs[_0x4d85fe(0x195)][_0x4d85fe(0x210)]|fs['constants'][_0x4d85fe(0x20c)],_0x5d9d3a=>{const _0x4f8682=_0x4d85fe;_0x462796[_0x4f8682(0x27c)]=0x1;_0x5d9d3a&&(_0x462796['imgFolderUsable']=0x0);let _0x46bfe1=dbConfigTable['findByTitle'](_0xc56a2b['app'][_0x4f8682(0x243)],_0x4f8682(0x27d));return _0x46bfe1?_0x462796[_0x4f8682(0x27d)]=JSON[_0x4f8682(0x1d9)](_0x46bfe1[_0x4f8682(0x268)]):_0x462796[_0x4f8682(0x27d)]=![],_0x462796[_0x4f8682(0x1ff)]=config['appRootPath'],_0x3c38ed['json']({'code':0x0,'data':_0x462796});});}),router['post'](_0x3ab8be(0x25a),(_0x7a9300,_0x12e9de,_0x477367)=>{const _0x56cb05=_0x3ab8be;if(dbUserTable[_0x56cb05(0x290)](_0x7a9300,_0x12e9de)!==!![])return;if(OS[_0x56cb05(0x1cc)]()!=_0x56cb05(0x1a5)&&OS[_0x56cb05(0x1cc)]()!=_0x56cb05(0x214))return _0x7a9300['app'][_0x56cb05(0x262)](_0x12e9de,_0x12e9de['__'](_0x56cb05(0x1e0)));return process[_0x56cb05(0x26d)]({'type':_0x56cb05(0x234)}),_0x12e9de[_0x56cb05(0x18f)]({'code':0x0});}),router['post'](_0x3ab8be(0x1d1),(_0x44908c,_0x5b5da3,_0x28ee4a)=>{const _0x3e6a39=_0x3ab8be;if(_0x44908c[_0x3e6a39(0x244)][_0x3e6a39(0x21b)]!=0x1)return _0x5b5da3[_0x3e6a39(0x18f)]({'code':0x66});let _0x1b17ff=path[_0x3e6a39(0x1d6)](config[_0x3e6a39(0x26a)],_0x3e6a39(0x198));fs['stat'](_0x1b17ff,(_0x4fa615,_0x9557)=>{if(_0x4fa615)return;fs['rm'](_0x1b17ff,{'recursive':!![]},_0x6aca34=>{const _0x389fa5=_0x23df;fs[_0x389fa5(0x1e8)](_0x1b17ff,{'recursive':!![]},_0x1ca50e=>{const _0x36eb70=_0x389fa5;console[_0x36eb70(0x18b)](_0x1ca50e);});if(_0x6aca34)return fileUtil[_0x389fa5(0x22b)](_0x5b5da3,_0x6aca34);return dbConfigTable[_0x389fa5(0x249)](_0x44908c[_0x389fa5(0x1bd)][_0x389fa5(0x243)],_0x389fa5(0x27d)),_0x5b5da3['json']({'code':0x0});});});let _0x184fe9=path[_0x3e6a39(0x1d6)](config['cacheParentPath'],_0x3e6a39(0x291)),_0x6330b1=path['join'](config[_0x3e6a39(0x26a)],_0x3e6a39(0x291),'upload');fs['stat'](_0x184fe9,(_0x38820b,_0x307b42)=>{if(_0x38820b)return;fs['rm'](_0x184fe9,{'recursive':!![]},_0x1910e2=>{const _0x1f9302=_0x23df;fs[_0x1f9302(0x1e8)](_0x6330b1,{'recursive':!![]},_0x41d637=>{const _0x31a20b=_0x1f9302;console[_0x31a20b(0x18b)](_0x41d637);});if(_0x1910e2)return fileUtil[_0x1f9302(0x22b)](_0x5b5da3,_0x1910e2);});});}),router[_0x3ab8be(0x1b5)]('/getSystemInfomation',(_0x28553b,_0x5533e0,_0x3f8376)=>{const _0x3097f3=_0x3ab8be;if(dbUserTable['isAdmin'](_0x28553b,_0x5533e0)!==!![])return;let _0x3e55d0=_0x28553b[_0x3097f3(0x19e)][_0x3097f3(0x292)],_0x41a265=[_0x3097f3(0x218),'bios','baseboard','chassis',_0x3097f3(0x266),_0x3097f3(0x280),_0x3097f3(0x1e6),_0x3097f3(0x28f),_0x3097f3(0x23e),_0x3097f3(0x23b),_0x3097f3(0x219),_0x3097f3(0x23a),_0x3097f3(0x24d),_0x3097f3(0x1cf),_0x3097f3(0x21f),_0x3097f3(0x1ea),_0x3097f3(0x288)];if(!_0x41a265[_0x3097f3(0x1da)](_0x3e55d0))return _0x28553b['app']['returnErrMsg'](_0x5533e0,_0x3097f3(0x239));si[_0x3e55d0](_0x1299c9=>{const _0x59aff8=_0x3097f3;try{return _0x5533e0[_0x59aff8(0x18f)]({'code':0x0,'data':_0x1299c9});}catch(_0x969f47){console[_0x59aff8(0x18b)](_0x59aff8(0x231),_0x969f47);}});}),router['post'](_0x3ab8be(0x223),(_0x42a1ee,_0x3981e6,_0x7895e4)=>{const _0x145836=_0x3ab8be;let _0xdafbcf=netUtils[_0x145836(0x237)](_0x42a1ee);if(_0xdafbcf!=_0x145836(0x1a3))return _0x42a1ee['app'][_0x145836(0x262)](_0x3981e6,_0x3981e6['__'](_0x145836(0x25b)));let _0x115e53=_0x42a1ee[_0x145836(0x19e)][_0x145836(0x1eb)],_0x5c9f3e=_0x42a1ee[_0x145836(0x19e)][_0x145836(0x1b8)],_0x140f1b=_0x42a1ee[_0x145836(0x19e)][_0x145836(0x1a6)];if(!_0x140f1b)try{_0x140f1b=path[_0x145836(0x1d6)](_0x115e53,_0x5c9f3e);}catch(_0x4343fd){console[_0x145836(0x18b)](_0x4343fd);}if(!_0x140f1b)return _0x42a1ee[_0x145836(0x1bd)]['returnErrMsg'](_0x3981e6,_0x145836(0x196));if(dbUserTable[_0x145836(0x221)](_0x42a1ee,_0x3981e6,_0x145836(0x1eb),_0x145836(0x245),'')==!![]){let _0x5c954c=_0x42a1ee[_0x145836(0x19e)][_0x145836(0x22e)]||'openPath';process[_0x145836(0x26d)]({'type':'shell','shellType':_0x5c954c,'path':_0x140f1b});let _0x377d45={'code':0x0};return _0x3981e6[_0x145836(0x18f)](_0x377d45);}}),module[_0x3ab8be(0x1ab)]=router;