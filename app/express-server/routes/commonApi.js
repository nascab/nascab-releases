const _0x21a3b3=_0x5a33;(function(_0x497ae3,_0x451d6d){const _0x46bbb4=_0x5a33,_0x4e9ee2=_0x497ae3();while(!![]){try{const _0x13ff04=parseInt(_0x46bbb4(0x268))/0x1+-parseInt(_0x46bbb4(0x1f0))/0x2*(-parseInt(_0x46bbb4(0x259))/0x3)+parseInt(_0x46bbb4(0x275))/0x4*(parseInt(_0x46bbb4(0x20e))/0x5)+-parseInt(_0x46bbb4(0x20c))/0x6+parseInt(_0x46bbb4(0x222))/0x7+-parseInt(_0x46bbb4(0x265))/0x8+-parseInt(_0x46bbb4(0x242))/0x9;if(_0x13ff04===_0x451d6d)break;else _0x4e9ee2['push'](_0x4e9ee2['shift']());}catch(_0x236dd3){_0x4e9ee2['push'](_0x4e9ee2['shift']());}}}(_0x8008,0x85ebb));var express=require(_0x21a3b3(0x2d1)),router=express[_0x21a3b3(0x2cf)]();let config=require(_0x21a3b3(0x23e)),dbFileIndexTable=require(_0x21a3b3(0x282)),dbConfigTable=require(_0x21a3b3(0x24c)),dbSourceTable=require(_0x21a3b3(0x243)),dbNoticeCenterTable=require('../../db/dbNoticeCenterTable'),netUtils=require('../utils/netUtils');const dbUserTable=require(_0x21a3b3(0x2b2)),dbBackupTask=require('../../db/dbBackupTask'),OS=require('os');let path=require(_0x21a3b3(0x250)),fs=require('fs'),fileUtil=require(_0x21a3b3(0x298));function _0x8008(){const _0x160edd=['httpsCertError','/getLanguage','serverName','type','transcodePath','INDEX_TABLE_NAME_MUSIC','apiPort','upload','moviePlaylongPressRate','globalIndexInfo','transCodeParams-readrate','startsWith','test','-----','2286HafgYu','getGlobalInfo','clearTable','dbOther','need\x20path','DELETE\x20FROM\x20bg_task\x20WHERE\x20id=?','port:\x20256-65500','ultrafast','crf','/deleteBgTask','/refreshHomePage','force','webDavHttpsKey','/saveConfig','chassis','refreshIpList','note','memTooLess','access','movie','excludeFilenamePhoto','ipDetection','START_PRE_GEN_SUBTITLE','unreadMsgCount','total_size','ddnsIpv6Address','err','findByTitle','2296092KSjtag','startClassesAiWork','175UWkHcj','getUnReadCount','createSecureContext','photo','music','W_OK','/setLanguage','../../../package.json','cacheParentPath','customHomeBgImage','api','/saveShareUrl','body','INDEX_TABLE_NAME_PHOTO','httpsCert','database','maxThreadCountIs','excludePathPhoto','threadCount','log','5052621bifPph','/saveConfigMusic','defaultFTPPort','musicTitleType','includes','catch','version','exec','customLoginImage','value','currentUser','serverRootError','customLogoImage',':http','send','ipMode','userDataFolder','fullPath','baseboard','mem','join','doUserCanGet','totalmem','BACKUP','all','/saveConfigMovie','webDavPort','isAdmin','../../myConfig/config','folderNotExist','prepare','graphics','7946424RUnHUM','../../db/dbSourceFolderTable','refreshHomePage','transcodeSpeed','getClientIpWithOutXforwarded','create','startSimilarPhotoWork','tokenKeepHour','excludePathMovie','wal_checkpoint(RESTART)','../../db/dbConfigTable','shell','power_get','vacuum','path','deleteByTitle','sharp','medium','INDEX_TABLE_NAME_BOOK','getIpList','/resetIndex','/updateNewVersion','R_OK','1944dilgnT','operationFail','platform','openType','serverRootPath','battery','cpu','stat','type\x20is\x20invalid','autoShowWindow','onlySupportOnServerApp','apiPortHttps','1132504vHcgqR','trim','memLayout','336838ZrSHZt','\x20status=\x27running\x27\x20or\x20status=\x27waiting\x27','copy_size','ip\x20not\x20allow','excludePathFolderBrowser','/vaccumDb','moviePreferLanguage','defaultTranscodeResolution','json','defaultMoviePlay','cachePath','.webp','../utils/sqliteUtil','17876VBKbKM','defaultApiPort','defaultWebDavPort','cache','/changeCachePath','photoPreviewType','tmdbProxyEnable','getAllByWhere','SELECT\x20*\x20FROM\x20bg_task\x20WHERE\x20task_state=?\x20order\x20by\x20id\x20desc\x20limit\x20?\x20offset\x20?','reloadHomePage','movieDatabaseType','transCodeReadRate','region','../../db/dbFileIndexTable','useNasCabCerts','existsSync','webDavUseApiCert','is_admin','localhost','startFaceAiWork','usb','cacheImageInfo','findByTitleParamsList','bios','movieHomeShowMyMedia','aiFaceMinPhotoCount','movieTmdbApiUrl','webDavPortHttps','id3tag','stringify','\x20title\x20in\x20(\x27globalCpuInfo\x27,\x27globalMemInfo\x27,\x27','CRF:\x201-51','movieHomeShowHistory','win32','title','../utils/fileUtils','twoStepLogin','FTPPort','folder','language','system','run','\x27,\x27','notSupport','subtitleSize','/getVersionInfo','keys','resize','app','cachePathInvalid','webp','aiSimilarPhotoEnable','webDavHttpsCert','getDiskInfo','showMenuArr','startUpdate','networkInterfaces','autoScanSource','constants','download','mkdir','../../db/dbUserTable','hostname','systeminformation','parse','excludeFilenameMovie','dialog','movieTmdbApiKey','versionInfo','Relaunch','appRootPath','aiClassesEnable','autoLaunch','count','audio','defaultThreadCount','dbFileIndex','allConfig','exports','openPath','useFolderPictureAsPoster','INDEX_TABLE_NAME_MOVIE','imgFolderUsable','taskId','\x20title\x20in\x20(\x27apiServer\x27,\x27apiServerHttps\x27,\x27webDavServer\x27,\x27FTPServer\x27,\x27globalIpList\x27)','getUpdateInfo','returnFileError',':https','customShareUrl','transCodeCoderNameHevc','Router','customLoginTitle','express','ipBan','fast','darwin','task_name','returnErrMsg','filename','setting.portInvalid','autoLoginClient','/relaunch','movieTmdbLanguage','/clearCache','length','imgFolder','toLowerCase','/getSystemState','photoPreviewSize','cpuTemperature','tmdbProxyUrl','wifiNetworks','httpsKey','autoHardAccDecode','getClientIp','/saveConfigCustom','pragma','post','subtitlePreGen'];_0x8008=function(){return _0x160edd;};return _0x8008();}var package=require(_0x21a3b3(0x215));function _0x5a33(_0xce0bfd,_0x40fcd8){const _0x8008a5=_0x8008();return _0x5a33=function(_0x5a3304,_0x293677){_0x5a3304=_0x5a3304-0x1cb;let _0x360686=_0x8008a5[_0x5a3304];return _0x360686;},_0x5a33(_0xce0bfd,_0x40fcd8);}const sqliteUtil=require(_0x21a3b3(0x274)),sharp=require(_0x21a3b3(0x252)),si=require(_0x21a3b3(0x2b4));let tls=require('tls');function testCertAndKeyMatch(_0x4b20f5,_0x81a17e){const _0x40da8d=_0x21a3b3;try{return tls[_0x40da8d(0x210)]({'cert':_0x4b20f5,'key':_0x81a17e}),!![];}catch(_0x5ecaec){return![];}}router[_0x21a3b3(0x1e0)](_0x21a3b3(0x1fa),(_0x5a1d46,_0x4ddb6e,_0x467b63)=>{const _0x47c858=_0x21a3b3;let _0x11c0ed=netUtils[_0x47c858(0x246)](_0x5a1d46);console['log'](_0x47c858(0x244),_0x11c0ed);if(_0x11c0ed!=_0x47c858(0x287))return _0x47c858(0x26b);return process[_0x47c858(0x230)]({'type':_0x47c858(0x27e)}),_0x4ddb6e['json']({'code':0x0});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x2a2),(_0x2435e6,_0x41556f,_0x171e42)=>{const _0x5ab460=_0x21a3b3;let _0x22e2d8=package[_0x5ab460(0x228)],_0x3a51ec=dbConfigTable[_0x5ab460(0x20b)](_0x2435e6[_0x5ab460(0x2a5)]['dbOther'],_0x5ab460(0x2b9)),_0x34d410=dbConfigTable[_0x5ab460(0x20b)](_0x2435e6[_0x5ab460(0x2a5)][_0x5ab460(0x1f3)],_0x5ab460(0x2ab));process['send']({'type':'getGlobalInfo','func':_0x5ab460(0x2ca)}),_0x41556f['json']({'code':0x0,'showMenuArr':_0x34d410?JSON[_0x5ab460(0x2b5)](_0x34d410['value']):'','versionInfo':_0x3a51ec?JSON[_0x5ab460(0x2b5)](_0x3a51ec[_0x5ab460(0x22b)]):'','currentVersion':_0x22e2d8});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x257),(_0x30f496,_0xb23cf7,_0x436304)=>{const _0x1606f8=_0x21a3b3;if(OS[_0x1606f8(0x25b)]()!=_0x1606f8(0x296)&&OS['platform']()!=_0x1606f8(0x2d4))return _0x30f496[_0x1606f8(0x2a5)]['returnErrMsg'](_0xb23cf7,_0xb23cf7['__']('notSupportForAutoUpdate'));if(_0x30f496[_0x1606f8(0x22c)]['is_admin']!=0x1)return _0xb23cf7['json']({'code':0x66});return process[_0x1606f8(0x230)]({'type':_0x1606f8(0x2ac)}),_0xb23cf7[_0x1606f8(0x270)]({'code':0x0});}),router[_0x21a3b3(0x1e0)]('/getBgTask',(_0x2d4675,_0x211818,_0x10d33e)=>{const _0x43c509=_0x21a3b3;let _0xad9617=netUtils[_0x43c509(0x1dd)](_0x2d4675),_0x270868=_0x2d4675[_0x43c509(0x21a)]['taskState'],_0x2a1b79=_0x2d4675[_0x43c509(0x21a)][_0x43c509(0x2be)],_0x364913=_0x2d4675[_0x43c509(0x21a)]['offset'],_0x396177=[];if(_0x2d4675[_0x43c509(0x22c)][_0x43c509(0x286)]==0x1){_0x396177=_0x2d4675[_0x43c509(0x2a5)]['dbOther'][_0x43c509(0x240)](_0x43c509(0x27d))['all'](_0x270868,_0x2a1b79,_0x364913);let _0x116540=dbBackupTask['getAllRecordByWhere'](_0x2d4675['app'][_0x43c509(0x1f3)],_0x43c509(0x269),[]);for(let _0x59aa64 in _0x116540){let _0xb581c7=_0x116540[_0x59aa64],_0x34f61a=dbBackupTask['getById'](_0x2d4675[_0x43c509(0x2a5)][_0x43c509(0x1f3)],_0xb581c7['task_id']);_0x396177['push']({'task_type':_0x43c509(0x239),'task_name':_0x34f61a?_0x34f61a[_0x43c509(0x1cb)]:'','size_current':_0xb581c7[_0x43c509(0x26a)],'size_all':_0xb581c7[_0x43c509(0x208)]});}}let _0x26fa2a={'code':0x0,'data':_0x396177,'reqIp':_0xad9617};return _0x211818[_0x43c509(0x270)](_0x26fa2a);}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x1f9),(_0xa2e56b,_0x3d43bf,_0x18b60a)=>{const _0x1af76c=_0x21a3b3;let _0x2b83c1=_0xa2e56b[_0x1af76c(0x21a)][_0x1af76c(0x2c8)];dbUserTable['isAdmin'](_0xa2e56b,_0x3d43bf)===!![]&&_0xa2e56b['app'][_0x1af76c(0x1f3)]['prepare'](_0x1af76c(0x1f5))[_0x1af76c(0x29e)](_0x2b83c1);let _0x155cec={'code':0x0};return _0x3d43bf[_0x1af76c(0x270)](_0x155cec);}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x26d),(_0x111a7a,_0x4ef83c,_0x9f6356)=>{const _0x690907=_0x21a3b3;if(_0x111a7a[_0x690907(0x22c)][_0x690907(0x286)]!=0x1)return _0x4ef83c['json']({'code':0x66});try{return _0x111a7a['app'][_0x690907(0x1f3)][_0x690907(0x229)](_0x690907(0x24f)),_0x111a7a['app']['dbFileIndex'][_0x690907(0x229)](_0x690907(0x24f)),_0x111a7a[_0x690907(0x2a5)][_0x690907(0x1f3)][_0x690907(0x1df)](_0x690907(0x24b)),_0x111a7a[_0x690907(0x2a5)][_0x690907(0x2c1)][_0x690907(0x1df)](_0x690907(0x24b)),_0x4ef83c[_0x690907(0x270)]({'code':0x0});}catch(_0x68b2bb){return _0x111a7a['app'][_0x690907(0x1cc)](_0x4ef83c,_0x4ef83c['__']('operationFail'));}}),router['post'](_0x21a3b3(0x256),(_0x3ea69c,_0x158481,_0x247f0c)=>{const _0x39de71=_0x21a3b3;if(_0x3ea69c['currentUser'][_0x39de71(0x286)]!=0x1)return _0x158481[_0x39de71(0x270)]({'code':0x66});let _0x4d08a1=_0x3ea69c[_0x39de71(0x21a)]['serverType'];dbSourceTable[_0x39de71(0x1f2)](_0x3ea69c[_0x39de71(0x2a5)]['dbOther'],_0x4d08a1);if(_0x4d08a1==_0x39de71(0x203))dbFileIndexTable['clearTable'](_0x3ea69c[_0x39de71(0x2a5)][_0x39de71(0x2c1)],dbFileIndexTable[_0x39de71(0x2c6)]);else{if(_0x4d08a1==_0x39de71(0x211))dbFileIndexTable['clearTable'](_0x3ea69c[_0x39de71(0x2a5)][_0x39de71(0x2c1)],dbFileIndexTable[_0x39de71(0x21b)]);else{if(_0x4d08a1==_0x39de71(0x212))dbFileIndexTable[_0x39de71(0x1f2)](_0x3ea69c[_0x39de71(0x2a5)][_0x39de71(0x2c1)],dbFileIndexTable[_0x39de71(0x1e7)]);else _0x4d08a1=='book'&&dbFileIndexTable['clearTable'](_0x3ea69c[_0x39de71(0x2a5)][_0x39de71(0x2c1)],dbFileIndexTable[_0x39de71(0x254)]);}}_0x158481[_0x39de71(0x270)]({'code':0x0});}),router['post']('/getServerState',(_0x1e9740,_0x2f4ff9,_0x486778)=>{const _0x5a5725=_0x21a3b3;let _0x59b6e6=netUtils[_0x5a5725(0x1dd)](_0x1e9740),_0x5aa79f=_0x1e9740['body'][_0x5a5725(0x1e4)],_0x1f4ab0;_0x5aa79f==_0x5a5725(0x23a)?(process[_0x5a5725(0x230)]({'type':'getGlobalInfo','func':_0x5a5725(0x255)}),_0x1f4ab0=dbConfigTable[_0x5a5725(0x27c)](_0x1e9740[_0x5a5725(0x2a5)][_0x5a5725(0x1f3)],_0x5a5725(0x2c9))):_0x1f4ab0=dbConfigTable['findByTitle'](_0x1e9740[_0x5a5725(0x2a5)][_0x5a5725(0x1f3)],_0x5aa79f);let _0x487f9a=dbConfigTable[_0x5a5725(0x20b)](_0x1e9740[_0x5a5725(0x2a5)][_0x5a5725(0x1f3)],_0x5a5725(0x209)),_0x314cce=dbConfigTable['findByTitle'](_0x1e9740['app'][_0x5a5725(0x1f3)],_0x5a5725(0x25d)),_0x1c2e06={'code':0x0,'data':_0x1f4ab0,'serverRootPath':_0x314cce&&_0x314cce[_0x5a5725(0x22b)]?_0x314cce['value']:'','hostName':OS[_0x5a5725(0x2b3)](),'reqIp':_0x59b6e6};_0x487f9a&&_0x487f9a[_0x5a5725(0x22b)]&&(_0x1c2e06['ddnsIpv6Address']=_0x487f9a[_0x5a5725(0x22b)]);let _0x501c5e=dbNoticeCenterTable[_0x5a5725(0x20f)](_0x1e9740[_0x5a5725(0x2a5)][_0x5a5725(0x1f3)]);return _0x1c2e06[_0x5a5725(0x207)]=_0x501c5e[_0x5a5725(0x2be)],_0x2f4ff9[_0x5a5725(0x270)](_0x1c2e06);}),router['post'](_0x21a3b3(0x1d6),(_0x4f5b8b,_0x684c5e,_0x297b64)=>{const _0x428e39=_0x21a3b3;let _0x42df53=netUtils[_0x428e39(0x1dd)](_0x4f5b8b),_0x5101b5=_0x4f5b8b[_0x428e39(0x21a)][_0x428e39(0x1fb)],_0x2b479c=_0x428e39(0x1eb)+dbFileIndexTable[_0x428e39(0x2c6)],_0x324505='globalIndexInfo'+dbFileIndexTable[_0x428e39(0x21b)];process[_0x428e39(0x230)]({'type':_0x428e39(0x1f1),'func':'getAllIndexInfo'}),process[_0x428e39(0x230)]({'type':_0x428e39(0x1f1),'func':_0x428e39(0x2aa),'force':_0x5101b5}),fs['stat'](config[_0x428e39(0x216)],_0x19058e=>{const _0x1bc0f2=_0x428e39;if(_0x19058e)return _0x4f5b8b['app']['returnErrMsg'](_0x684c5e,_0x684c5e['__'](_0x1bc0f2(0x2a6)));else{let _0x34e5bc=dbConfigTable[_0x1bc0f2(0x27c)](_0x4f5b8b['app'][_0x1bc0f2(0x1f3)],_0x1bc0f2(0x293)+_0x2b479c+_0x1bc0f2(0x29f)+_0x324505+'\x27,\x27globalDiskInfo\x27)');return _0x684c5e['json']({'code':0x0,'data':_0x34e5bc,'version':package['version'],'reqIp':_0x42df53,'platform':OS[_0x1bc0f2(0x25b)]()});}});}),router[_0x21a3b3(0x1e0)]('/getAllConfig',(_0x154fbd,_0x52f358,_0x1f5c2d)=>{const _0x3f820d=_0x21a3b3;let _0xecfb27=_0x154fbd['body'][_0x3f820d(0x2a3)];if(!_0xecfb27||!_0xecfb27 instanceof Array||_0xecfb27[_0x3f820d(0x1d3)]<0x1)return _0x154fbd[_0x3f820d(0x2a5)]['returnErrMsg'](_0x52f358,'error\x20keys');let _0x3f8355;_0x3f8355=dbConfigTable[_0x3f820d(0x28b)](_0x154fbd[_0x3f820d(0x2a5)]['dbOther'],_0xecfb27);for(let _0x27a11d in _0x3f8355){let _0x45c99c=_0x3f8355[_0x27a11d];if(_0x45c99c[_0x3f820d(0x297)]==_0x3f820d(0x21c)||_0x45c99c[_0x3f820d(0x297)]==_0x3f820d(0x1db)){let _0x642950=_0x154fbd['currentUser']['is_admin']==0x1;(!_0x642950||!_0x45c99c['value'][_0x3f820d(0x1ed)](_0x3f820d(0x1ef)))&&(_0x45c99c[_0x3f820d(0x22b)]='');}}let _0x147600={};_0x147600[_0x3f820d(0x276)]=config[_0x3f820d(0x1e8)],_0x147600['defaultApiPortHttps']=config['apiPortHttps'],_0x147600[_0x3f820d(0x277)]=config['webDavPort'],_0x147600['defaultWebDavPortHttps']=config[_0x3f820d(0x290)],_0x147600[_0x3f820d(0x224)]=config[_0x3f820d(0x29a)],_0x147600[_0x3f820d(0x2c0)]=0x2,_0x147600[_0x3f820d(0x2c2)]=_0x3f8355,_0x52f358[_0x3f820d(0x270)]({'code':0x0,'data':_0x147600});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x1e3),(_0x28c61c,_0x340629,_0x592d1a)=>{const _0x24a459=_0x21a3b3;let _0x2b5150=dbConfigTable['findByTitle'](_0x28c61c[_0x24a459(0x2a5)][_0x24a459(0x1f3)],_0x24a459(0x29c)),_0x19d087='';_0x2b5150&&(_0x19d087=_0x2b5150['value']),_0x340629['json']({'code':0x0,'data':_0x19d087});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x214),(_0x3a6866,_0x23a693,_0x9a7a97)=>{const _0x48615a=_0x21a3b3;let _0x19ae25=netUtils[_0x48615a(0x1dd)](_0x3a6866);if(_0x19ae25!=_0x48615a(0x287))return _0x48615a(0x26b);if(_0x3a6866[_0x48615a(0x22c)][_0x48615a(0x286)]!=0x1)return _0x23a693[_0x48615a(0x270)]({'code':0x66});let _0x476ea1=_0x3a6866[_0x48615a(0x21a)][_0x48615a(0x29c)],_0x4359e7=_0x3a6866[_0x48615a(0x21a)][_0x48615a(0x281)];return _0x476ea1&&dbConfigTable[_0x48615a(0x247)](_0x3a6866[_0x48615a(0x2a5)][_0x48615a(0x1f3)],{'title':_0x48615a(0x29c),'value':_0x476ea1}),_0x4359e7&&dbConfigTable[_0x48615a(0x247)](_0x3a6866[_0x48615a(0x2a5)][_0x48615a(0x1f3)],{'title':_0x48615a(0x281),'value':_0x4359e7}),_0x23a693['json']({'code':0x0});});function saveConfig(_0x4870ee,_0x105993,_0x25d4b4){const _0x5816d1=_0x21a3b3;dbConfigTable[_0x5816d1(0x247)](_0x4870ee,{'title':_0x105993,'value':_0x25d4b4+''});}router[_0x21a3b3(0x1e0)](_0x21a3b3(0x279),(_0x5177ec,_0x33c1ef,_0x452060)=>{const _0x40800a=_0x21a3b3;let _0x361fa7=_0x5177ec['body'][_0x40800a(0x272)];if(_0x5177ec[_0x40800a(0x22c)][_0x40800a(0x286)]!=0x1)return _0x33c1ef[_0x40800a(0x270)]({'code':0x66});if(_0x361fa7)fs[_0x40800a(0x202)](_0x361fa7,fs[_0x40800a(0x2af)][_0x40800a(0x213)]|fs[_0x40800a(0x2af)]['R_OK'],_0x849e01=>{const _0x1a57be=_0x40800a;return!_0x849e01?(saveConfig(_0x5177ec[_0x1a57be(0x2a5)][_0x1a57be(0x1f3)],_0x1a57be(0x216),_0x361fa7),_0x33c1ef[_0x1a57be(0x270)]({'code':0x0})):fileUtil[_0x1a57be(0x2cb)](_0x33c1ef,_0x849e01);});else return dbConfigTable[_0x40800a(0x251)](_0x5177ec[_0x40800a(0x2a5)][_0x40800a(0x1f3)],_0x40800a(0x216)),_0x33c1ef[_0x40800a(0x270)]({'code':0x0});}),router[_0x21a3b3(0x1e0)]('/saveServerRootPath',(_0x38d917,_0xa18cc5,_0xdf5bf5)=>{const _0x498747=_0x21a3b3;if(_0x38d917[_0x498747(0x22c)][_0x498747(0x286)]!=0x1)return _0xa18cc5['json']({'code':0x66});let _0x38a003=_0x38d917[_0x498747(0x21a)]['serverRootPath'];return _0x38a003?saveConfig(_0x38d917[_0x498747(0x2a5)][_0x498747(0x1f3)],_0x498747(0x25d),_0x38a003):dbConfigTable[_0x498747(0x251)](_0x38d917[_0x498747(0x2a5)][_0x498747(0x1f3)],_0x498747(0x25d)),_0xa18cc5[_0x498747(0x270)]({'code':0x0});}),router['post'](_0x21a3b3(0x219),(_0x487115,_0x4d4856,_0x1c085d)=>{const _0x203c10=_0x21a3b3;if(_0x487115[_0x203c10(0x22c)][_0x203c10(0x286)]!=0x1)return _0x4d4856[_0x203c10(0x270)]({'code':0x66});let _0x8516fb=_0x487115[_0x203c10(0x21a)][_0x203c10(0x2cd)];return _0x8516fb?saveConfig(_0x487115['app']['dbOther'],_0x203c10(0x2cd),_0x8516fb):dbConfigTable[_0x203c10(0x251)](_0x487115[_0x203c10(0x2a5)]['dbOther'],_0x203c10(0x2cd)),_0x4d4856['json']({'code':0x0});});let forbiddenPorts=[0x1,0x7,0x9,0xb,0xd,0xf,0x11,0x13,0x14,0x15,0x16,0x17,0x19,0x25,0x2a,0x2b,0x35,0x4d,0x4f,0x57,0x5f,0x65,0x66,0x67,0x68,0x6d,0x6e,0x6f,0x71,0x73,0x75,0x77,0x7b,0x87,0x8b,0x8f,0xb3,0x185,0x1d1,0x200,0x201,0x202,0x203,0x20e,0x212,0x213,0x214,0x21c,0x22c,0x233,0x24b,0x259,0x27c,0x3e1,0x3e3,0x801,0xe4b,0xfcd,0x1770,0x1a09,0x1a0a,0x1a0b,0x1a0c,0x1a0d,0xd3d];router[_0x21a3b3(0x1e0)](_0x21a3b3(0x1fd),(_0x31335e,_0x330973,_0x3f0371)=>{const _0x552726=_0x21a3b3;let _0x528e10=_0x31335e[_0x552726(0x21a)][_0x552726(0x1e8)],_0xc4b6a0=_0x31335e[_0x552726(0x21a)]['apiPortHttps'],_0x5964bc=_0x31335e[_0x552726(0x21a)][_0x552726(0x23c)],_0x30470a=_0x31335e['body'][_0x552726(0x290)],_0x87267e=_0x31335e[_0x552726(0x21a)][_0x552726(0x29a)],_0x123a5a=_0x31335e[_0x552726(0x21a)][_0x552726(0x2bd)],_0x255e30=_0x31335e['body'][_0x552726(0x1cf)],_0x15f675=_0x31335e[_0x552726(0x21a)]['autoShowWindow'],_0x383ce4=_0x31335e['body'][_0x552726(0x2ae)],_0x3b7c98=_0x31335e[_0x552726(0x21a)][_0x552726(0x1db)],_0x4ac15c=_0x31335e[_0x552726(0x21a)]['httpsCert'],_0x17be4e=_0x31335e[_0x552726(0x21a)][_0x552726(0x1fc)],_0xe308bd=_0x31335e[_0x552726(0x21a)][_0x552726(0x2a9)],_0x422eef=_0x31335e[_0x552726(0x21a)][_0x552726(0x29c)],_0xaeabf6=_0x31335e['body']['region'],_0x25ba56=_0x31335e[_0x552726(0x21a)][_0x552726(0x220)],_0x4cdf4e=_0x31335e[_0x552726(0x21a)][_0x552726(0x24a)],_0x4fdf1d=_0x31335e['body'][_0x552726(0x21f)],_0x1cb2f6=_0x31335e[_0x552726(0x21a)]['excludePathFolderBrowser'],_0x3bf103=_0x31335e['body'][_0x552726(0x2b6)],_0x5779f1=_0x31335e[_0x552726(0x21a)]['excludeFilenamePhoto'],_0x2969b6=_0x31335e[_0x552726(0x21a)]['showMenuArr'],_0x168824=_0x31335e[_0x552726(0x21a)][_0x552726(0x249)],_0x240453=_0x31335e['body'][_0x552726(0x2cd)],_0x496ac2=_0x31335e[_0x552726(0x21a)][_0x552726(0x285)],_0x5a013b=_0x31335e['app'][_0x552726(0x1f3)];if(_0x31335e['currentUser']['is_admin']!=0x1)return _0x330973[_0x552726(0x270)]({'code':0x66});let _0x2e5a86=_0x31335e[_0x552726(0x21a)]['serverRootPath'];if(_0x2e5a86&&_0x2e5a86['trim']()){_0x2e5a86=_0x2e5a86[_0x552726(0x1d5)]()[_0x552726(0x266)]();if(_0x2e5a86[_0x552726(0x1d3)]>0x20||!/^[a-zA-Z0-9]+$/[_0x552726(0x1ee)](_0x2e5a86))return _0x31335e['app'][_0x552726(0x1cc)](_0x330973,'Root\x20path\x20must\x20be\x2032\x20characters\x20or\x20less\x20and\x20contain\x20only\x20letters\x20and\x20numbers');if([_0x552726(0x212),'book',_0x552726(0x2b0),'file','setting',_0x552726(0x200),_0x552726(0x218)][_0x552726(0x226)](_0x2e5a86))return _0x31335e[_0x552726(0x2a5)][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x22d))+(':'+_0x2e5a86),_0x552726(0x2b7));saveConfig(_0x5a013b,_0x552726(0x25d),_0x2e5a86);}let _0x3c806e=0xffdc;if(_0x528e10>_0x3c806e||_0x5964bc>_0x3c806e||_0x87267e>_0x3c806e||_0x30470a>_0x3c806e)return _0x330973[_0x552726(0x270)]({'code':0x1,'message':_0x552726(0x1f6)});_0x2969b6&&saveConfig(_0x5a013b,_0x552726(0x2ab),JSON['stringify'](_0x2969b6));_0x240453&&saveConfig(_0x5a013b,_0x552726(0x2cd),_0x240453);_0x4cdf4e&&saveConfig(_0x5a013b,_0x552726(0x24a),JSON[_0x552726(0x292)](_0x4cdf4e));_0x168824&&parseInt(_0x168824)!=NaN&&_0x168824>0x0&&_0x168824<0x5f5e0ff&&saveConfig(_0x5a013b,'tokenKeepHour',_0x168824);_0x4fdf1d&&saveConfig(_0x5a013b,_0x552726(0x21f),JSON['stringify'](_0x4fdf1d));_0xaeabf6&&saveConfig(_0x5a013b,'region',_0xaeabf6);if(_0x1cb2f6){let _0x317ff8=netUtils[_0x552726(0x1dd)](_0x31335e);if(_0x317ff8==_0x552726(0x287)){for(let _0x1ea2a3 in _0x1cb2f6){let _0x4f1ead=_0x1cb2f6[_0x1ea2a3],_0x17cb39=fs[_0x552726(0x284)](_0x4f1ead);if(!_0x17cb39)return _0x31335e['app'][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x23f))+':'+_0x4f1ead);fileUtil['isWinDisk'](_0x4f1ead)&&(_0x1cb2f6[_0x1ea2a3]=_0x4f1ead['toUpperCase']());}saveConfig(_0x5a013b,_0x552726(0x26c),JSON[_0x552726(0x292)](_0x1cb2f6));}else return _0x31335e[_0x552726(0x2a5)][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x263)));}_0x3bf103&&saveConfig(_0x5a013b,_0x552726(0x2b6),JSON['stringify'](_0x3bf103));_0x5779f1&&saveConfig(_0x5a013b,_0x552726(0x204),JSON[_0x552726(0x292)](_0x5779f1));if(_0x528e10){if(forbiddenPorts[_0x552726(0x226)](parseInt(_0x528e10)))return _0x31335e[_0x552726(0x2a5)]['returnErrMsg'](_0x330973,_0x330973['__'](_0x552726(0x1ce))+_0x552726(0x22f));saveConfig(_0x5a013b,_0x552726(0x1e8),parseInt(_0x528e10));}if(_0xc4b6a0){if(forbiddenPorts['includes'](parseInt(_0xc4b6a0))||_0xc4b6a0==_0x528e10)return _0x31335e['app'][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x1ce))+_0x552726(0x2cc));saveConfig(_0x5a013b,_0x552726(0x264),parseInt(_0xc4b6a0));}_0x31335e[_0x552726(0x21a)][_0x552726(0x2d2)]&&saveConfig(_0x5a013b,'ipBan',_0x31335e['body']['ipBan']);_0x31335e[_0x552726(0x21a)]['ipMode']&&(saveConfig(_0x5a013b,_0x552726(0x231),_0x31335e[_0x552726(0x21a)]['ipMode']),_0x31335e[_0x552726(0x2a5)][_0x552726(0x1ff)]());_0x31335e[_0x552726(0x21a)][_0x552726(0x205)]&&saveConfig(_0x5a013b,_0x552726(0x205),_0x31335e['body'][_0x552726(0x205)]);_0x31335e['body'][_0x552726(0x299)]&&saveConfig(_0x5a013b,'twoStepLogin',_0x31335e['body'][_0x552726(0x299)]);_0x5964bc&&saveConfig(_0x5a013b,_0x552726(0x23c),parseInt(_0x5964bc));_0x30470a&&saveConfig(_0x5a013b,_0x552726(0x290),parseInt(_0x30470a));_0x87267e&&saveConfig(_0x5a013b,_0x552726(0x29a),parseInt(_0x87267e));_0x123a5a&&saveConfig(_0x5a013b,_0x552726(0x2bd),_0x123a5a);_0x255e30&&saveConfig(_0x5a013b,_0x552726(0x1cf),_0x255e30);_0x15f675&&saveConfig(_0x5a013b,_0x552726(0x262),_0x15f675);_0x383ce4&&saveConfig(_0x5a013b,'autoScanSource',_0x383ce4);let _0x5818c7=dbConfigTable['findByTitle'](_0x31335e[_0x552726(0x2a5)][_0x552726(0x1f3)],_0x552726(0x283));if(!_0x5818c7||_0x5818c7[_0x552726(0x22b)]==0x0){if(_0x3b7c98!='*'&&_0x4ac15c!='*'){if(_0x3b7c98&&_0x4ac15c){if(!_0x3b7c98[_0x552726(0x1ed)](_0x552726(0x1ef))||!_0x4ac15c[_0x552726(0x1ed)]('-----'))return _0x31335e['app'][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x1e2)));const _0x7b62da=testCertAndKeyMatch(_0x4ac15c,_0x3b7c98);if(!_0x7b62da)return _0x31335e[_0x552726(0x2a5)][_0x552726(0x1cc)](_0x330973,_0x330973['__']('httpsCertError'));saveConfig(_0x5a013b,_0x552726(0x1db),_0x3b7c98),saveConfig(_0x5a013b,_0x552726(0x21c),_0x4ac15c);}else saveConfig(_0x5a013b,_0x552726(0x1db),''),saveConfig(_0x5a013b,'httpsCert','');}}if(_0x5818c7&&_0x5818c7[_0x552726(0x22b)]==0x1){if(_0x3b7c98&&_0x4ac15c)return _0x31335e[_0x552726(0x2a5)]['returnErrMsg'](_0x330973,_0x330973['__']('httpsCertCannotSet'),'dialog');}_0x496ac2&&saveConfig(_0x5a013b,'webDavUseApiCert',_0x496ac2);_0x496ac2=dbConfigTable[_0x552726(0x20b)](_0x31335e['app'][_0x552726(0x1f3)],_0x552726(0x285));if(!_0x496ac2||_0x496ac2[_0x552726(0x22b)]==0x0){if(_0x17be4e!='*'&&_0xe308bd!='*'){if(_0x17be4e&&_0xe308bd){if(!_0x17be4e[_0x552726(0x1ed)](_0x552726(0x1ef))||!_0xe308bd[_0x552726(0x1ed)](_0x552726(0x1ef)))return _0x31335e['app'][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x1e2)));const _0x269575=testCertAndKeyMatch(_0x17be4e,_0xe308bd);if(!_0x269575)return _0x31335e[_0x552726(0x2a5)]['returnErrMsg'](_0x330973,_0x330973['__'](_0x552726(0x1e2)));saveConfig(_0x5a013b,_0x552726(0x1fc),_0x17be4e),saveConfig(_0x5a013b,_0x552726(0x2a9),_0xe308bd);}else saveConfig(_0x5a013b,'webDavHttpsKey',''),saveConfig(_0x5a013b,_0x552726(0x2a9),'');}}_0x422eef&&saveConfig(_0x5a013b,'language',_0x422eef);if(_0x25ba56){if(_0x25ba56>OS['cpus']()['length'])return _0x31335e[_0x552726(0x2a5)][_0x552726(0x1cc)](_0x330973,_0x330973['__'](_0x552726(0x21e))+OS['cpus']()['length']);saveConfig(_0x5a013b,'threadCount',_0x25ba56);}return _0x330973[_0x552726(0x270)]({'code':0x0});}),router[_0x21a3b3(0x1e0)]('/saveConfigPhoto',(_0x59c07b,_0x447a20,_0x5e1b67)=>{const _0x4a315a=_0x21a3b3;if(_0x59c07b['currentUser'][_0x4a315a(0x286)]!=0x1)return _0x447a20[_0x4a315a(0x270)]({'code':0x66});let _0x3d86c5=_0x59c07b[_0x4a315a(0x2a5)][_0x4a315a(0x1f3)],_0x290b98=_0x59c07b[_0x4a315a(0x21a)][_0x4a315a(0x2bc)],_0x4b6a31=_0x59c07b[_0x4a315a(0x21a)]['aiFaceEnable'],_0x2247df=_0x59c07b[_0x4a315a(0x21a)][_0x4a315a(0x2a8)],_0x39a960=_0x59c07b[_0x4a315a(0x21a)][_0x4a315a(0x28e)],_0x4414ae=_0x59c07b[_0x4a315a(0x21a)][_0x4a315a(0x27a)],_0x55dbec=_0x59c07b['body'][_0x4a315a(0x1d7)];_0x4414ae&&saveConfig(_0x3d86c5,_0x4a315a(0x27a),_0x4414ae);_0x55dbec&&saveConfig(_0x3d86c5,_0x4a315a(0x1d7),_0x55dbec);if(_0x290b98){if(_0x290b98==0x1){if(OS['totalmem']()/0x400/0x400/0x400<0x3)return _0x59c07b['app'][_0x4a315a(0x1cc)](_0x447a20,_0x447a20['__'](_0x4a315a(0x201)));}saveConfig(_0x3d86c5,_0x4a315a(0x2bc),_0x290b98);if(_0x290b98==0x1)process['send']({'type':_0x4a315a(0x20d)});}_0x39a960&&saveConfig(_0x3d86c5,_0x4a315a(0x28e),_0x39a960);if(_0x4b6a31){if(_0x4b6a31==0x1){if(OS[_0x4a315a(0x238)]()/0x400/0x400/0x400<0x3)return _0x59c07b[_0x4a315a(0x2a5)][_0x4a315a(0x1cc)](_0x447a20,_0x447a20['__'](_0x4a315a(0x201)));}saveConfig(_0x3d86c5,'aiFaceEnable',_0x4b6a31);if(_0x4b6a31==0x1)process[_0x4a315a(0x230)]({'type':_0x4a315a(0x288)});}if(_0x2247df){saveConfig(_0x3d86c5,_0x4a315a(0x2a8),_0x2247df);if(_0x2247df==0x1)process[_0x4a315a(0x230)]({'type':_0x4a315a(0x248)});}return _0x447a20[_0x4a315a(0x270)]({'code':0x0});}),router['post'](_0x21a3b3(0x1de),(_0x2759fc,_0x590b28,_0x4635fc)=>{const _0x124807=_0x21a3b3;if(_0x2759fc['currentUser'][_0x124807(0x286)]!=0x1)return _0x590b28[_0x124807(0x270)]({'code':0x66});let _0x194390=_0x2759fc[_0x124807(0x2a5)]['dbOther'],_0x1fa52d=_0x2759fc[_0x124807(0x21a)][_0x124807(0x2d0)],_0x543021=_0x2759fc['body'][_0x124807(0x22e)],_0x4cbcfe=_0x2759fc[_0x124807(0x21a)][_0x124807(0x22a)],_0x15bd7c=_0x2759fc[_0x124807(0x21a)]['customHomeBgImage'];function _0x21b56d(_0x478fd5,_0x19574b,_0x3a6ccb){const _0x268889=_0x124807;if(_0x19574b=='-')return saveConfig(_0x194390,_0x478fd5,'-'),_0x590b28['json']({'code':0x0});if(fs[_0x268889(0x284)](_0x19574b)){let _0x15ddd8=path[_0x268889(0x236)](config[_0x268889(0x232)],'custom');function _0x57e51d(){const _0x86d268=_0x268889;let _0x5697b5=path[_0x86d268(0x236)](_0x15ddd8,_0x478fd5+_0x86d268(0x273));sharp(path[_0x86d268(0x236)](_0x19574b))[_0x86d268(0x2a4)]({'width':_0x3a6ccb,'withoutEnlargement':!![]})['rotate']()[_0x86d268(0x2a7)]()['toFile'](_0x5697b5)['then'](()=>{const _0x4695f9=_0x86d268;return saveConfig(_0x194390,_0x478fd5,_0x5697b5),_0x590b28[_0x4695f9(0x270)]({'code':0x0});})[_0x86d268(0x227)](()=>{const _0x56f2fb=_0x86d268;return _0x2759fc['app'][_0x56f2fb(0x1cc)](_0x590b28,_0x590b28['__'](_0x56f2fb(0x25a)));});}!fs[_0x268889(0x284)](_0x15ddd8)?fs['mkdir'](_0x15ddd8,{'recursive':!![]},_0x523766=>{const _0x5e3a0d=_0x268889;if(_0x523766)return _0x2759fc[_0x5e3a0d(0x2a5)][_0x5e3a0d(0x1cc)](_0x590b28,_0x590b28['__'](_0x5e3a0d(0x25a)));_0x57e51d();}):_0x57e51d();}else return _0x2759fc['app'][_0x268889(0x1cc)](_0x590b28,_0x590b28['__']('folderNotExist')+_0x19574b);}if(_0x1fa52d)return saveConfig(_0x194390,'customLoginTitle',_0x1fa52d),_0x590b28['json']({'code':0x0});_0x543021&&_0x21b56d(_0x124807(0x22e),_0x543021,0xc8),_0x4cbcfe&&_0x21b56d(_0x124807(0x22a),_0x4cbcfe,0x3e8),_0x15bd7c&&_0x21b56d(_0x124807(0x217),_0x15bd7c,0xf14);}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x23b),(_0xee1cc2,_0x1eaf8d,_0x3e8f89)=>{const _0x25330c=_0x21a3b3;let _0x1b0b2f=_0xee1cc2[_0x25330c(0x2a5)][_0x25330c(0x1f3)],_0xae53e5=_0xee1cc2['body'][_0x25330c(0x2a1)],_0x566f72=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x1dc)],_0x50b2c5=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x2ce)],_0x163f33=_0xee1cc2[_0x25330c(0x21a)]['transCodeCoderNameH264'],_0x29460b=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x280)],_0x298a8b=_0xee1cc2['body'][_0x25330c(0x1e6)],_0x35462c=_0xee1cc2[_0x25330c(0x21a)]['movieShowMatchName'],_0x18f6b4=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x2c5)],_0x25e5de=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x1e1)],_0xb4e391=_0xee1cc2['body']['transcodeSpeed'],_0x8d25d8=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x26e)],_0x2f7504=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x1ea)],_0x3562cd=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x1d1)],_0x1674a3=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x28f)],_0x2e2f44=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x2b8)],_0x18efa7=_0xee1cc2[_0x25330c(0x21a)]['movieDatabaseType'],_0x482add=_0xee1cc2['body'][_0x25330c(0x26f)],_0x547f29=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x27b)],_0xea1808=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x1d9)],_0x191b5e=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x271)];if(_0xee1cc2['currentUser'][_0x25330c(0x286)]!=0x1)return _0x1eaf8d[_0x25330c(0x270)]({'code':0x66});_0x3562cd&&saveConfig(_0x1b0b2f,'movieTmdbLanguage',_0x3562cd);(_0x547f29==0x1||_0x547f29==0x0)&&saveConfig(_0x1b0b2f,_0x25330c(0x27b),_0x547f29);_0xea1808&&saveConfig(_0x1b0b2f,_0x25330c(0x1d9),_0xea1808?_0xea1808:'');_0x1674a3!=null&&saveConfig(_0x1b0b2f,'movieTmdbApiUrl',_0x1674a3?_0x1674a3:'');_0x2e2f44!=null&&saveConfig(_0x1b0b2f,_0x25330c(0x2b8),_0x2e2f44?_0x2e2f44:'');_0x18efa7&&saveConfig(_0x1b0b2f,_0x25330c(0x27f),_0x18efa7);_0x2f7504&&saveConfig(_0x1b0b2f,_0x25330c(0x1ea),_0x2f7504);_0x482add&&saveConfig(_0x1b0b2f,_0x25330c(0x26f),_0x482add);_0x191b5e&&saveConfig(_0x1b0b2f,_0x25330c(0x271),_0x191b5e);let _0x562f3b=_0xee1cc2[_0x25330c(0x21a)][_0x25330c(0x28d)],_0x219c2c=_0xee1cc2['body'][_0x25330c(0x295)],_0x219b41=_0xee1cc2[_0x25330c(0x21a)]['movieHomeShowLibrary'];(_0x562f3b==0x1||_0x562f3b==0x0)&&saveConfig(_0x1b0b2f,_0x25330c(0x28d),_0x562f3b);(_0x219c2c==0x1||_0x219c2c==0x0)&&saveConfig(_0x1b0b2f,_0x25330c(0x295),_0x219c2c);(_0x219b41==0x1||_0x219b41==0x0)&&saveConfig(_0x1b0b2f,'movieHomeShowLibrary',_0x219b41);let _0x3e715e=_0xee1cc2['body'][_0x25330c(0x1f8)];if(_0x3e715e&&(_0x3e715e<0x1||_0x3e715e>0x33))return _0x1eaf8d[_0x25330c(0x270)]({'code':0x1,'message':_0x25330c(0x294)});let _0x2e56b6=[_0x25330c(0x1f7),_0x25330c(0x2d3),_0x25330c(0x253),'slow'];_0xb4e391&&_0x2e56b6[_0x25330c(0x226)](_0xb4e391)&&saveConfig(_0x1b0b2f,_0x25330c(0x245),_0xb4e391);_0x35462c&&saveConfig(_0x1b0b2f,'movieShowMatchName',_0x35462c);_0x18f6b4&&saveConfig(_0x1b0b2f,_0x25330c(0x2c5),_0x18f6b4);_0x3e715e&&saveConfig(_0x1b0b2f,_0x25330c(0x1f8),parseInt(_0x3e715e));_0xae53e5&&saveConfig(_0x1b0b2f,_0x25330c(0x2a1),_0xae53e5);_0x8d25d8&&saveConfig(_0x1b0b2f,_0x25330c(0x26e),_0x8d25d8);_0x566f72&&saveConfig(_0x1b0b2f,'autoHardAccDecode',_0x566f72);_0x50b2c5&&saveConfig(_0x1b0b2f,'transCodeParams-CoderNameHevc',_0x50b2c5);_0x163f33&&saveConfig(_0x1b0b2f,'transCodeParams-CoderNameH264',_0x163f33);if(_0x29460b){try{_0x29460b=parseInt(_0x29460b);if(_0x29460b>0x1e)_0x29460b=0x1e;if(_0x29460b<0x2)_0x29460b=0x2;}catch(_0x14ea40){_0x29460b=0x5;}saveConfig(_0x1b0b2f,_0x25330c(0x1ec),_0x29460b);}return _0x25e5de&&(saveConfig(_0x1b0b2f,_0x25330c(0x1e1),_0x25e5de),_0x25e5de=='1'&&process['send']({'type':_0x25330c(0x206)})),_0x298a8b?saveConfig(_0x1b0b2f,'transcodePath',_0x298a8b):dbConfigTable[_0x25330c(0x251)](_0x1b0b2f,_0x25330c(0x1e6)),_0x1eaf8d[_0x25330c(0x270)]({'code':0x0});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x223),(_0x26fd2b,_0x23f851,_0x1fe2a1)=>{const _0x4c4d73=_0x21a3b3;let _0x5bbf63=_0x26fd2b[_0x4c4d73(0x2a5)][_0x4c4d73(0x1f3)];if(_0x26fd2b[_0x4c4d73(0x22c)][_0x4c4d73(0x286)]!=0x1)return _0x23f851[_0x4c4d73(0x270)]({'code':0x66});function _0x1ed072(){const _0x36ed1b=_0x4c4d73;let _0x122690=_0x26fd2b['body'][_0x36ed1b(0x225)]||_0x36ed1b(0x1cd),_0x29644d=[_0x36ed1b(0x1cd),_0x36ed1b(0x291)];return _0x29644d[_0x36ed1b(0x226)](_0x122690)&&saveConfig(_0x5bbf63,'music-TitleType',_0x122690),_0x23f851[_0x36ed1b(0x270)]({'code':0x0});}_0x1ed072();}),router[_0x21a3b3(0x1e0)]('/getSystemInfo',(_0x1035f3,_0x59cb25,_0x438bdf)=>{const _0x5b93eb=_0x21a3b3;if(_0x1035f3[_0x5b93eb(0x22c)][_0x5b93eb(0x286)]!=0x1)return _0x59cb25[_0x5b93eb(0x270)]({'code':0x66});let _0x28e4b4={};_0x28e4b4['databaseFolder']=path[_0x5b93eb(0x236)](config['userDataFolder'],_0x5b93eb(0x21d)),_0x28e4b4['imgFolder']=config['cacheParentPath'],fs[_0x5b93eb(0x202)](_0x28e4b4[_0x5b93eb(0x1d4)],fs['constants'][_0x5b93eb(0x258)]|fs[_0x5b93eb(0x2af)][_0x5b93eb(0x213)],_0x5e7fdd=>{const _0x14b726=_0x5b93eb;_0x28e4b4[_0x14b726(0x2c7)]=0x1;_0x5e7fdd&&(_0x28e4b4[_0x14b726(0x2c7)]=0x0);let _0x5e3968=dbConfigTable[_0x14b726(0x20b)](_0x1035f3['app'][_0x14b726(0x1f3)],_0x14b726(0x28a));return _0x5e3968?_0x28e4b4[_0x14b726(0x28a)]=JSON[_0x14b726(0x2b5)](_0x5e3968[_0x14b726(0x22b)]):_0x28e4b4[_0x14b726(0x28a)]=![],_0x28e4b4['appRootPath']=config[_0x14b726(0x2bb)],_0x59cb25[_0x14b726(0x270)]({'code':0x0,'data':_0x28e4b4});});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x1d0),(_0x35c68d,_0x2f273d,_0x2752a4)=>{const _0x4639b6=_0x21a3b3;if(dbUserTable['isAdmin'](_0x35c68d,_0x2f273d)!==!![])return;if(OS[_0x4639b6(0x25b)]()!=_0x4639b6(0x296)&&OS[_0x4639b6(0x25b)]()!='darwin')return _0x35c68d['app'][_0x4639b6(0x1cc)](_0x2f273d,_0x2f273d['__'](_0x4639b6(0x2a0)));return process[_0x4639b6(0x230)]({'type':_0x4639b6(0x2ba)}),_0x2f273d[_0x4639b6(0x270)]({'code':0x0});}),router[_0x21a3b3(0x1e0)](_0x21a3b3(0x1d2),(_0x5069ac,_0x600032,_0x4fdd3d)=>{const _0x4f2b20=_0x21a3b3;if(_0x5069ac['currentUser'][_0x4f2b20(0x286)]!=0x1)return _0x600032[_0x4f2b20(0x270)]({'code':0x66});let _0x5233fa=path[_0x4f2b20(0x236)](config[_0x4f2b20(0x216)],_0x4f2b20(0x278));fs[_0x4f2b20(0x260)](_0x5233fa,(_0x5de66a,_0xfd986e)=>{if(_0x5de66a)return;fs['rm'](_0x5233fa,{'recursive':!![]},_0x514f2b=>{const _0xbf6bd0=_0x5a33;fs[_0xbf6bd0(0x2b1)](_0x5233fa,{'recursive':!![]},_0x2d9f45=>{const _0x3e23f4=_0xbf6bd0;console[_0x3e23f4(0x221)](_0x2d9f45);});if(_0x514f2b)return fileUtil[_0xbf6bd0(0x2cb)](_0x600032,_0x514f2b);return dbConfigTable[_0xbf6bd0(0x251)](_0x5069ac[_0xbf6bd0(0x2a5)][_0xbf6bd0(0x1f3)],_0xbf6bd0(0x28a)),_0x600032[_0xbf6bd0(0x270)]({'code':0x0});});});let _0x15744c=path[_0x4f2b20(0x236)](config['cacheParentPath'],'subtitle'),_0x152d95=path['join'](config['cacheParentPath'],'subtitle',_0x4f2b20(0x1e9));fs['stat'](_0x15744c,(_0x227d91,_0x1faa01)=>{if(_0x227d91)return;fs['rm'](_0x15744c,{'recursive':!![]},_0x37603b=>{const _0x219605=_0x5a33;fs[_0x219605(0x2b1)](_0x152d95,{'recursive':!![]},_0xb5e4c0=>{const _0x166e90=_0x219605;console[_0x166e90(0x221)](_0xb5e4c0);});if(_0x37603b)return fileUtil['returnFileError'](_0x600032,_0x37603b);});});}),router[_0x21a3b3(0x1e0)]('/getSystemInfomation',(_0x4f59a9,_0x5b8aeb,_0x4c64b9)=>{const _0x3eda4b=_0x21a3b3;if(dbUserTable[_0x3eda4b(0x23d)](_0x4f59a9,_0x5b8aeb)!==!![])return;let _0x82362b=_0x4f59a9[_0x3eda4b(0x21a)][_0x3eda4b(0x1e5)],_0x165515=[_0x3eda4b(0x29d),_0x3eda4b(0x28c),_0x3eda4b(0x234),_0x3eda4b(0x1fe),_0x3eda4b(0x25f),_0x3eda4b(0x1d8),_0x3eda4b(0x235),_0x3eda4b(0x267),_0x3eda4b(0x25e),_0x3eda4b(0x241),'osInfo','diskLayout',_0x3eda4b(0x289),_0x3eda4b(0x2bf),_0x3eda4b(0x2ad),_0x3eda4b(0x1da),'bluetoothDevices'];if(!_0x165515[_0x3eda4b(0x226)](_0x82362b))return _0x4f59a9['app'][_0x3eda4b(0x1cc)](_0x5b8aeb,_0x3eda4b(0x261));si[_0x82362b](_0x165ab3=>{const _0x308a41=_0x3eda4b;try{return _0x5b8aeb[_0x308a41(0x270)]({'code':0x0,'data':_0x165ab3});}catch(_0x476852){console[_0x308a41(0x221)](_0x308a41(0x20a),_0x476852);}});}),router[_0x21a3b3(0x1e0)]('/openInSystem',(_0x4aa9e3,_0x241f42,_0x2c97b1)=>{const _0xd6e5cd=_0x21a3b3;let _0x4a8874=netUtils[_0xd6e5cd(0x1dd)](_0x4aa9e3);if(_0x4a8874!=_0xd6e5cd(0x287))return _0x4aa9e3['app']['returnErrMsg'](_0x241f42,_0x241f42['__'](_0xd6e5cd(0x25a)));let _0x5ce4e0=_0x4aa9e3[_0xd6e5cd(0x21a)][_0xd6e5cd(0x29b)],_0xc93fb9=_0x4aa9e3[_0xd6e5cd(0x21a)][_0xd6e5cd(0x1cd)],_0xe0cb66=_0x4aa9e3[_0xd6e5cd(0x21a)][_0xd6e5cd(0x233)];if(!_0xe0cb66)try{_0xe0cb66=path['join'](_0x5ce4e0,_0xc93fb9);}catch(_0x7509d2){console[_0xd6e5cd(0x221)](_0x7509d2);}if(!_0xe0cb66)return _0x4aa9e3[_0xd6e5cd(0x2a5)][_0xd6e5cd(0x1cc)](_0x241f42,_0xd6e5cd(0x1f4));if(dbUserTable[_0xd6e5cd(0x237)](_0x4aa9e3,_0x241f42,'folder',_0xd6e5cd(0x24e),'')==!![]){let _0x29e64a=_0x4aa9e3['body'][_0xd6e5cd(0x25c)]||_0xd6e5cd(0x2c4);process['send']({'type':_0xd6e5cd(0x24d),'shellType':_0x29e64a,'path':_0xe0cb66});let _0x3aef37={'code':0x0};return _0x241f42['json'](_0x3aef37);}}),module[_0x21a3b3(0x2c3)]=router;