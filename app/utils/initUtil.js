const _0x551e8b=_0x2f96;(function(_0x116504,_0x2d613e){const _0x1fee8c=_0x2f96,_0xb13959=_0x116504();while(!![]){try{const _0x114c6e=parseInt(_0x1fee8c(0x19d))/0x1*(parseInt(_0x1fee8c(0x1da))/0x2)+parseInt(_0x1fee8c(0x1aa))/0x3*(parseInt(_0x1fee8c(0x1d0))/0x4)+-parseInt(_0x1fee8c(0x188))/0x5*(-parseInt(_0x1fee8c(0x1ef))/0x6)+-parseInt(_0x1fee8c(0x1b2))/0x7+parseInt(_0x1fee8c(0x1dc))/0x8+-parseInt(_0x1fee8c(0x1a9))/0x9*(parseInt(_0x1fee8c(0x18a))/0xa)+-parseInt(_0x1fee8c(0x1ea))/0xb;if(_0x114c6e===_0x2d613e)break;else _0xb13959['push'](_0xb13959['shift']());}catch(_0xc50b82){_0xb13959['push'](_0xb13959['shift']());}}}(_0x3e16,0x2e8da));let app,BrowserWindow,Menu,Tray,protocol,ipcMain;function _0x2f96(_0x1fbdf5,_0x12dbfe){const _0x3e16b6=_0x3e16();return _0x2f96=function(_0x2f96c7,_0x24508d){_0x2f96c7=_0x2f96c7-0x186;let _0x1bce7=_0x3e16b6[_0x2f96c7];return _0x1bce7;},_0x2f96(_0x1fbdf5,_0x12dbfe);}try{let elec=require(_0x551e8b(0x191));app=elec['app'],BrowserWindow=elec['BrowserWindow'],Menu=elec[_0x551e8b(0x19e)],Tray=elec[_0x551e8b(0x1cc)],protocol=elec['protocol'],ipcMain=elec[_0x551e8b(0x1b9)];}catch(_0x544a22){console[_0x551e8b(0x1b6)](_0x551e8b(0x1b4));}const {fork}=require('child_process');let path=require(_0x551e8b(0x1c2)),fs=require('fs'),os=require('os'),initUtil={},privateSpaceUtil=require(_0x551e8b(0x187)),dbConfigTable=require(_0x551e8b(0x1ba)),dbu='',mainWindow='';function _0x3e16(){const _0x5895f3=['createMainWindow','prepare','language','path','en-US','hide','threadCount','setContextMenu','../myWorkers/autoLaunchWorker.js','apiPort','SELECT\x20*\x20FROM\x20process_record','scan_when_start','DELETE\x20FROM\x20play_record','Tray','isPackaged','getLocale','show','32764ZHLzdZ','从配置文件读取端口设置[http\x20port\x20config\x20file]','darwin','init','NasCab','all','../db/dbUserTable','facesPath','REPLACE\x20INTO\x20process_record(process_id)\x20VALUES(?)','appRootPath','2saUpCD','runNewVersionTask','1833720sGJEPb','../db/dbScanTaskTable','setToolTip','win32','expireTokenOnTime','value','kill','libs','dbOther','Using\x20file\x20config\x20port','zh-CN','tokenKeepHour','webContents','mkdirSync','5800421LoplSV','cachePath','Show/Hide','relaunch','exports','118254gCTmtl','loadFile','initTray','join','./globalInfoUtil','existsSync','DELETE\x20FROM\x20process_record\x20WHERE\x201=1','then','../express-server/utils/privateSpaceUtils','50NDYVZQ','getAll','53220wNQTss','processList','getRootPath','\x20WHERE\x20last_login_time\x20<?','httpport.txt','pid','addScanTask','electron','preventDefault','SIGTERM','findByTitle','../db/dbSourceFolderTable','../myConfig/config','tempFilePath','getFreePort','Restart(重启应用)','close','process_id','initWindowEventAndLoadLoading','166693UDVxOa','Menu','logo-tray.png','addScanTaskWhenStart','platform','exe','quit','userDataFolder','addProcessRecord','click','subtitlePath','create','99ZxgiJR','69qyjckO','run','apiPortHttps','setLanguage','length','Exit(退出)','dirname','dbCity','33992TYNRfN','getPath','Clientless\x20service\x20mode','posterPath','log','subtitleUploadPath','../express-server/utils/netUtils','ipcMain','../db/dbConfigTable','isVisible','autoLaunch','exitApp','buildFromTemplate'];_0x3e16=function(){return _0x5895f3;};return _0x3e16();}const config=require(_0x551e8b(0x196));let netUtils=require(_0x551e8b(0x1b8)),appTray;const dbUserTable=require(_0x551e8b(0x1d6)),dbSourceFolderTable=require(_0x551e8b(0x195)),dbScanTaskTable=require(_0x551e8b(0x1dd));initUtil[_0x551e8b(0x1db)]=function(_0x5c28e9){},initUtil[_0x551e8b(0x18c)]=function(){const _0x493995=_0x551e8b;let _0x26cc8c='';return app&&app[_0x493995(0x1cd)]?(_0x26cc8c=path[_0x493995(0x1b0)](app[_0x493995(0x1b3)](_0x493995(0x1a2))),os[_0x493995(0x1a1)]()==_0x493995(0x1d2)&&(_0x26cc8c=path[_0x493995(0x1b0)](_0x26cc8c))):_0x26cc8c=path[_0x493995(0x1f2)](__dirname,'../../'),_0x26cc8c;},initUtil['initDbu']=function(){var _0x47c410=require('../db/dbUtil');return dbu=new _0x47c410(),dbu;},initUtil[_0x551e8b(0x1a0)]=function(_0x305996){const _0x3929c4=_0x551e8b;let _0x428b65=dbSourceFolderTable[_0x3929c4(0x189)](_0x305996);for(let _0x38fe8e of _0x428b65){_0x38fe8e[_0x3929c4(0x1ca)]==0x1&&dbScanTaskTable[_0x3929c4(0x190)](_0x305996,_0x38fe8e['type'],_0x38fe8e[_0x3929c4(0x1c2)]);}},initUtil[_0x551e8b(0x1a5)]=function(_0x53eba6,_0x563f06){const _0x1ba0bb=_0x551e8b;_0x53eba6[_0x1ba0bb(0x1c0)](_0x1ba0bb(0x1d8))[_0x1ba0bb(0x1ab)](_0x563f06+'');},initUtil[_0x551e8b(0x1bf)]=function(){const _0x3a55da=_0x551e8b;if(!app||!BrowserWindow)return;let _0x16c039=![],_0x2bdd20=dbConfigTable[_0x3a55da(0x194)](dbu['dbOther'],'autoShowWindow');return(!_0x2bdd20||_0x2bdd20[_0x3a55da(0x1e1)]=='1')&&(_0x16c039=!![]),mainWindow=new BrowserWindow({'width':0x578,'height':0x3e8,'show':_0x16c039,'webPreferences':{'webSecurity':![],'nodeIntegration':!![],'contextIsolation':![],'nodeIntegrationInWorker':!![]}}),mainWindow;},initUtil['createUserFolder']=function(){const _0x3d23c4=_0x551e8b;function _0x582257(_0x2aae89){const _0x4d641e=_0x2f96;!fs[_0x4d641e(0x1f4)](_0x2aae89)&&fs[_0x4d641e(0x1e9)](_0x2aae89,{'recursive':!![]});}return fs['rm'](config[_0x3d23c4(0x197)],{'recursive':!![]},()=>{const _0x24bdef=_0x3d23c4;_0x582257(config[_0x24bdef(0x197)]);}),_0x582257(config[_0x3d23c4(0x1eb)]),_0x582257(config[_0x3d23c4(0x1b5)]),_0x582257(config['musicCoverPath']),_0x582257(config[_0x3d23c4(0x1d7)]),_0x582257(config[_0x3d23c4(0x1a7)]),_0x582257(config[_0x3d23c4(0x1b7)]),_0x582257(path[_0x3d23c4(0x1f2)](config[_0x3d23c4(0x1a4)],'database')),config['userDataFolder'];},initUtil['startUpdate']=function(){let _0x25fb74=require('../utils/updateUtil');_0x25fb74['startUpdate']();},initUtil[_0x551e8b(0x1d3)]=function(_0x4c9077){const _0x57ba57=_0x551e8b;if(Menu)Menu['setApplicationMenu'](null);privateSpaceUtil['clearSpaceTempFiles'](_0x4c9077[_0x57ba57(0x1e4)]),globalInfoUtil['getUpdateInfo'](_0x4c9077['dbOther']);let _0xb0855c=_0x4c9077[_0x57ba57(0x1e4)][_0x57ba57(0x1c0)](_0x57ba57(0x1c9))[_0x57ba57(0x1d5)]();for(let _0x2a631f in _0xb0855c){try{process[_0x57ba57(0x1e2)](_0xb0855c[_0x2a631f][_0x57ba57(0x19b)],_0x57ba57(0x193));}catch(_0x3980b5){}}_0x4c9077[_0x57ba57(0x1e4)][_0x57ba57(0x1c0)](_0x57ba57(0x1f5))[_0x57ba57(0x1ab)](),clearM3u8File(_0x4c9077);},initUtil[_0x551e8b(0x18b)]=[];function clearM3u8File(_0x34cabe){const _0x8b61a9=_0x551e8b;fs['rm'](config['m3u8TmpPath'],{'recursive':!![],'force':!![],'maxRetries':0xa},_0x1c3dfd=>{const _0x3fcceb=_0x2f96;if(_0x1c3dfd)console[_0x3fcceb(0x1b6)](_0x1c3dfd);}),_0x34cabe&&_0x34cabe['dbOther']&&_0x34cabe[_0x8b61a9(0x1e4)][_0x8b61a9(0x1c0)](_0x8b61a9(0x1cb))['run']();}function exitApp(_0x28241b){const _0xc2a1f1=_0x551e8b;if(app)app[_0xc2a1f1(0x1a3)]();if(mainWindow)mainWindow=null;for(let _0x2c9e1f in initUtil[_0xc2a1f1(0x18b)]){initUtil[_0xc2a1f1(0x18b)][_0x2c9e1f]&&(initUtil[_0xc2a1f1(0x18b)][_0x2c9e1f][_0xc2a1f1(0x1e2)](),initUtil[_0xc2a1f1(0x18b)][_0x2c9e1f]=null);}if(_0x28241b[_0xc2a1f1(0x1e4)]){let _0x28eaaa=_0x28241b[_0xc2a1f1(0x1e4)][_0xc2a1f1(0x1c0)]('DELETE\x20FROM\x20process_record\x20WHERE\x201=1')[_0xc2a1f1(0x1ab)]();}clearM3u8File(_0x28241b),_0x28241b&&(_0x28241b['dbFileIndex']&&(_0x28241b['dbFileIndex'][_0xc2a1f1(0x19a)](),_0x28241b['dbFileIndex']=null),_0x28241b[_0xc2a1f1(0x1e4)]&&(_0x28241b[_0xc2a1f1(0x1e4)][_0xc2a1f1(0x19a)](),_0x28241b[_0xc2a1f1(0x1e4)]=null),_0x28241b[_0xc2a1f1(0x1b1)]&&(_0x28241b['dbCity'][_0xc2a1f1(0x19a)](),_0x28241b[_0xc2a1f1(0x1b1)]=null)),appTray&&appTray['destroy'](),process[_0xc2a1f1(0x1e2)](process[_0xc2a1f1(0x18f)],_0xc2a1f1(0x193));}initUtil[_0x551e8b(0x1bd)]=exitApp,initUtil[_0x551e8b(0x19c)]=function(_0x46c80c,_0x2d0568){const _0x122b44=_0x551e8b;if(!app||!_0x2d0568)return;_0x2d0568['on'](_0x122b44(0x19a),_0xca5214=>{const _0x965a7b=_0x122b44;if(!_0x2d0568)return;!_0x2d0568[_0x965a7b(0x1bb)]()?exitApp(_0x46c80c):(_0xca5214[_0x965a7b(0x192)](),os[_0x965a7b(0x1a1)]()==_0x965a7b(0x1df)?_0x2d0568[_0x965a7b(0x1c4)]():_0x2d0568['minimize']());}),console[_0x122b44(0x1b6)]('Loading...'),_0x2d0568[_0x122b44(0x1f0)]('loading/loading.html');},initUtil[_0x551e8b(0x1f1)]=function(_0x584857,_0x1ab789){const _0x437203=_0x551e8b;if(!app)return;var _0x4771b7=[{'label':_0x437203(0x1ec),'click':function(){_0x1ab789['isVisible']()?_0x1ab789['hide']():_0x1ab789['show']();}},{'label':_0x437203(0x199),'click':function(){const _0x63efac=_0x437203;if(app)app[_0x63efac(0x1ed)]();exitApp(_0x584857);}},{'label':_0x437203(0x1af),'click':function(){const _0x4a3c68=_0x437203;if(app)app[_0x4a3c68(0x1a3)]();exitApp(_0x584857);}}];appTray=new Tray(path[_0x437203(0x1f2)](initUtil[_0x437203(0x18c)](),_0x437203(0x1e3),_0x437203(0x19f)));const _0x4881c8=Menu[_0x437203(0x1be)](_0x4771b7);appTray[_0x437203(0x1de)](_0x437203(0x1d4)),appTray[_0x437203(0x1c6)](_0x4881c8),appTray['on'](_0x437203(0x1a6),function(){const _0xad1c7c=_0x437203;_0x1ab789[_0xad1c7c(0x1cf)]();});},initUtil['openDev']=function(){const _0x4c3e76=_0x551e8b;if(!app)return;!app[_0x4c3e76(0x1cd)]&&mainWindow[_0x4c3e76(0x1e8)]['openDevTools']();};function clearExpiredToken(){const _0x3b57d3=_0x551e8b;let _0x1d42f7=dbConfigTable[_0x3b57d3(0x194)](dbu[_0x3b57d3(0x1e4)],_0x3b57d3(0x1e7));if(!_0x1d42f7||!_0x1d42f7[_0x3b57d3(0x1e1)]||_0x1d42f7[_0x3b57d3(0x1e1)]<0x1)_0x1d42f7=0x18;else _0x1d42f7&&_0x1d42f7['value']&&(_0x1d42f7=_0x1d42f7[_0x3b57d3(0x1e1)]);let _0x4785f3=new Date()['getTime'](),_0x15c23e=_0x4785f3-parseInt(_0x1d42f7)*0xe10*0x3e8;dbUserTable['deleteUserTokenByWhere'](dbu[_0x3b57d3(0x1e4)],_0x3b57d3(0x18d),[_0x15c23e]);}initUtil[_0x551e8b(0x1e0)]=function(){setInterval(()=>{clearExpiredToken();},0xe10*0x3e8),clearExpiredToken();};const globalInfoUtil=require(_0x551e8b(0x1f3));initUtil['launchWithSys']=function(){const _0x66e342=_0x551e8b;if(!app)return;if(!app[_0x66e342(0x1cd)])return;let _0x1d508b=dbConfigTable[_0x66e342(0x194)](dbu[_0x66e342(0x1e4)],_0x66e342(0x1bc)),_0x112dc6=0x0;_0x1d508b&&(_0x1d508b[_0x66e342(0x1e1)]=='1'||_0x1d508b[_0x66e342(0x1e1)]==0x1)&&(_0x112dc6=0x1);try{fork(path['resolve'](__dirname,_0x66e342(0x1c7)),[],{'env':{'enableAutoLaunch':_0x112dc6},'detached':![],'killSignal':'SIGTERM'});}catch(_0x68612d){console[_0x66e342(0x1b6)](_0x68612d);}},initUtil[_0x551e8b(0x1ad)]=function(){const _0x57feb3=_0x551e8b;let _0x2f6851=dbConfigTable[_0x57feb3(0x194)](dbu[_0x57feb3(0x1e4)],_0x57feb3(0x1c1));if(!_0x2f6851){let _0x1c3f91=app?app[_0x57feb3(0x1ce)]():'zh';_0x1c3f91['startsWith']('en')?dbConfigTable[_0x57feb3(0x1a8)](dbu[_0x57feb3(0x1e4)],{'title':_0x57feb3(0x1c1),'value':_0x57feb3(0x1c3)}):dbConfigTable[_0x57feb3(0x1a8)](dbu[_0x57feb3(0x1e4)],{'title':'language','value':_0x57feb3(0x1e6)});}},initUtil[_0x551e8b(0x198)]=function(_0x4e80c0,_0x404c16){const _0x1e5a2b=_0x551e8b;let _0x5290d9=path[_0x1e5a2b(0x1f2)](config[_0x1e5a2b(0x1d9)],_0x1e5a2b(0x18e));try{if(fs[_0x1e5a2b(0x1f4)](_0x5290d9)){console[_0x1e5a2b(0x1b6)](_0x1e5a2b(0x1d1),_0x5290d9);let _0x1074ba=fs['readFileSync'](_0x5290d9,'utf-8');_0x1074ba&&(_0x1074ba=parseInt(_0x1074ba),_0x1074ba>0x0&&_0x1074ba<0xfff6&&(_0x4e80c0=_0x1074ba,dbConfigTable[_0x1e5a2b(0x1a8)](dbu['dbOther'],{'title':_0x1e5a2b(0x1c8),'value':_0x4e80c0+''}),console[_0x1e5a2b(0x1b6)](_0x1e5a2b(0x1e5),_0x4e80c0)));}}catch(_0x4f0190){}_0x4e80c0=parseInt(_0x4e80c0),netUtils['isPortFree'](_0x4e80c0)[_0x1e5a2b(0x186)](_0x92bc99=>{const _0x4d6440=_0x1e5a2b;_0x92bc99?_0x404c16(_0x4e80c0):(_0x4e80c0+=0x1,initUtil[_0x4d6440(0x198)](_0x4e80c0,_0x404c16));});},initUtil['getConfigApiPort']=function(_0x120d25){const _0x55224b=_0x551e8b;let _0x1dbf98=_0x120d25?config[_0x55224b(0x1ac)]:config[_0x55224b(0x1c8)],_0x1b5bb2=dbConfigTable[_0x55224b(0x194)](dbu[_0x55224b(0x1e4)],_0x120d25?_0x55224b(0x1ac):_0x55224b(0x1c8));if(_0x1b5bb2){let _0x3f4bab=parseInt(_0x1b5bb2['value']);if(_0x3f4bab<=0x0||_0x3f4bab>0xffff){}else _0x1dbf98=_0x3f4bab;}return _0x1dbf98;},initUtil['getExpressApiCount']=function(){const _0x498054=_0x551e8b;let _0xd841a3=os['cpus'](),_0x2e1043=0x2,_0xbec3c=dbConfigTable[_0x498054(0x194)](dbu[_0x498054(0x1e4)],_0x498054(0x1c5));return _0xbec3c&&(_0x2e1043=_0xbec3c[_0x498054(0x1e1)],_0x2e1043>_0xd841a3[_0x498054(0x1ae)]&&(_0x2e1043=_0xd841a3[_0x498054(0x1ae)])),(!_0x2e1043||_0x2e1043<0x2)&&(_0x2e1043=0x2),dbConfigTable[_0x498054(0x1a8)](dbu[_0x498054(0x1e4)],{'title':'apiServerCount','value':parseInt(_0x2e1043)+''}),_0x2e1043;},module[_0x551e8b(0x1ee)]=initUtil;