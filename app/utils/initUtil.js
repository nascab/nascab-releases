function _0x5cab(){const _0x571ad1=['Restart(重启应用)','isPackaged','existsSync','getPath','quit','49DYDIEz','tempMediaToolsUpload','getRootPath','expireTokenOnTime','path','threadCount','app','kill','subtitlePath','value','../db/dbConfigTable','autoLaunch','tempFilePath','createMainWindow','all','../express-server/utils/privateSpaceUtils','hide','getFreePort','../myConfig/config','setToolTip','close','length','../express-server/utils/netUtils','351295ovdYgo','m3u8TmpPath','resolve','../utils/updateUtil','clearSpaceTempFiles','Clientless\x20service\x20mode','apiPort','1945592XiDCzF','exports','getLocale','httpport.txt','language','Tray','DELETE\x20FROM\x20play_record','893055EegeAP','REPLACE\x20INTO\x20process_record(process_id)\x20VALUES(?)','getExpressApiCount','../db/dbUserTable','isPortFree','setApplicationMenu','subtitleUploadPath','relaunch','10222jhUrRN','dbFileIndex','27pJSnbv','Exit(退出)','exe','NasCab','tokenKeepHour','then','../db/dbUtil','appRootPath','../myWorkers/autoLaunchWorker.js','zh-CN','isVisible','setContextMenu','libs','readFileSync','initTray','win32','../db/dbScanTaskTable','DELETE\x20FROM\x20process_record\x20WHERE\x201=1','addScanTaskWhenStart','openDev','webContents','ipcMain','autoShowWindow','startUpdate','prepare','getTime','facesPath','process_id','init','pid','runNewVersionTask','6GGJpFg','userDataFolder','exitApp','en-US','dirname','preventDefault','electron','logo-tray.png','apiServerCount','log','launchWithSys','processList','BrowserWindow','darwin','cpus','../db/dbSourceFolderTable','../../','create','apiPortHttps','click','dbCity','cachePath','433384HciYgv','6RehRjk','run','loading/loading.html','minimize','dbOther','join','initWindowEventAndLoadLoading','68924CEqvyo','musicCoverPath','Show/Hide','SIGTERM','\x20WHERE\x20last_login_time\x20<?','addScanTask','findByTitle','show','从配置文件读取端口设置[http\x20port\x20config\x20file]','platform','1505550rBbLgO'];_0x5cab=function(){return _0x571ad1;};return _0x5cab();}const _0x2ccf69=_0x1b9b;(function(_0x575ff8,_0x4911cb){const _0x137ada=_0x1b9b,_0x1dc9b5=_0x575ff8();while(!![]){try{const _0x120086=-parseInt(_0x137ada(0xe8))/0x1*(-parseInt(_0x137ada(0x115))/0x2)+parseInt(_0x137ada(0x136))/0x3*(-parseInt(_0x137ada(0x154))/0x4)+-parseInt(_0x137ada(0x10d))/0x5+parseInt(_0x137ada(0x14d))/0x6*(-parseInt(_0x137ada(0xff))/0x7)+-parseInt(_0x137ada(0x14c))/0x8*(parseInt(_0x137ada(0x117))/0x9)+parseInt(_0x137ada(0x15e))/0xa+parseInt(_0x137ada(0x106))/0xb;if(_0x120086===_0x4911cb)break;else _0x1dc9b5['push'](_0x1dc9b5['shift']());}catch(_0x4c4669){_0x1dc9b5['push'](_0x1dc9b5['shift']());}}}(_0x5cab,0x25219));let app,BrowserWindow,Menu,Tray,protocol,ipcMain;try{let elec=require(_0x2ccf69(0x13c));app=elec[_0x2ccf69(0xee)],BrowserWindow=elec[_0x2ccf69(0x142)],Menu=elec['Menu'],Tray=elec[_0x2ccf69(0x10b)],protocol=elec['protocol'],ipcMain=elec[_0x2ccf69(0x12c)];}catch(_0x164746){console[_0x2ccf69(0x13f)](_0x2ccf69(0x104));}function _0x1b9b(_0x4b6d81,_0x2463d9){const _0x5cabf5=_0x5cab();return _0x1b9b=function(_0x1b9b98,_0x3e5f79){_0x1b9b98=_0x1b9b98-0xe3;let _0x326db6=_0x5cabf5[_0x1b9b98];return _0x326db6;},_0x1b9b(_0x4b6d81,_0x2463d9);}const {fork}=require('child_process');let path=require(_0x2ccf69(0xec)),fs=require('fs'),os=require('os'),initUtil={},privateSpaceUtil=require(_0x2ccf69(0xf7)),dbConfigTable=require(_0x2ccf69(0xf2)),dbu='',mainWindow='';const config=require(_0x2ccf69(0xfa));let netUtils=require(_0x2ccf69(0xfe)),appTray;const dbUserTable=require(_0x2ccf69(0x110)),dbSourceFolderTable=require(_0x2ccf69(0x145)),dbScanTaskTable=require(_0x2ccf69(0x127));initUtil[_0x2ccf69(0x135)]=function(_0x277933){},initUtil[_0x2ccf69(0xea)]=function(){const _0x5a6113=_0x2ccf69;let _0x125b9c='';return app&&app[_0x5a6113(0xe4)]?(_0x125b9c=path[_0x5a6113(0x13a)](app[_0x5a6113(0xe6)](_0x5a6113(0x119))),os[_0x5a6113(0x15d)]()==_0x5a6113(0x143)&&(_0x125b9c=path[_0x5a6113(0x13a)](_0x125b9c))):_0x125b9c=path[_0x5a6113(0x152)](__dirname,_0x5a6113(0x146)),_0x125b9c;},initUtil['initDbu']=function(){const _0x1957bd=_0x2ccf69;var _0x240d64=require(_0x1957bd(0x11d));return dbu=new _0x240d64(),dbu;},initUtil[_0x2ccf69(0x129)]=function(_0x4a6bb8){const _0x1a6d1b=_0x2ccf69;let _0x1f6c2a=dbSourceFolderTable['getAll'](_0x4a6bb8);for(let _0x2bf7ff of _0x1f6c2a){_0x2bf7ff['scan_when_start']==0x1&&dbScanTaskTable[_0x1a6d1b(0x159)](_0x4a6bb8,_0x2bf7ff['type'],_0x2bf7ff[_0x1a6d1b(0xec)]);}},initUtil['addProcessRecord']=function(_0x209aef,_0x3fe9e0){const _0x5c814f=_0x2ccf69;_0x209aef['prepare'](_0x5c814f(0x10e))[_0x5c814f(0x14e)](_0x3fe9e0+'');},initUtil[_0x2ccf69(0xf5)]=function(){const _0x523a47=_0x2ccf69;if(!app||!BrowserWindow)return;let _0x5550b8=![],_0x5c3340=dbConfigTable['findByTitle'](dbu[_0x523a47(0x151)],_0x523a47(0x12d));return(!_0x5c3340||_0x5c3340[_0x523a47(0xf1)]=='1')&&(_0x5550b8=!![]),mainWindow=new BrowserWindow({'width':0x578,'height':0x3e8,'show':_0x5550b8,'webPreferences':{'webSecurity':![],'nodeIntegration':!![],'contextIsolation':![],'nodeIntegrationInWorker':!![]}}),mainWindow;},initUtil['createUserFolder']=function(){const _0x455ccc=_0x2ccf69;function _0x4ff1fe(_0xaefda3){const _0xe78f22=_0x1b9b;!fs[_0xe78f22(0xe5)](_0xaefda3)&&fs['mkdirSync'](_0xaefda3,{'recursive':!![]});}return fs['rm'](config[_0x455ccc(0xf4)],{'recursive':!![]},()=>{const _0x4f2ce8=_0x455ccc;_0x4ff1fe(config[_0x4f2ce8(0xf4)]);}),fs['rm'](config[_0x455ccc(0xe9)],{'recursive':!![]},()=>{_0x4ff1fe(config['tempMediaToolsUpload']);}),_0x4ff1fe(config[_0x455ccc(0x14b)]),_0x4ff1fe(config['posterPath']),_0x4ff1fe(config[_0x455ccc(0x155)]),_0x4ff1fe(config[_0x455ccc(0x131)]),_0x4ff1fe(config[_0x455ccc(0xf0)]),_0x4ff1fe(config[_0x455ccc(0x113)]),_0x4ff1fe(path[_0x455ccc(0x152)](config[_0x455ccc(0x137)],'database')),config[_0x455ccc(0x137)];},initUtil[_0x2ccf69(0x12e)]=function(){const _0x61dc54=_0x2ccf69;let _0x4560f2=require(_0x61dc54(0x102));_0x4560f2['startUpdate']();},initUtil[_0x2ccf69(0x133)]=function(_0x327bcc){const _0x4405cd=_0x2ccf69;if(Menu)Menu[_0x4405cd(0x112)](null);privateSpaceUtil[_0x4405cd(0x103)](_0x327bcc['dbOther']),globalInfoUtil['getUpdateInfo'](_0x327bcc[_0x4405cd(0x151)]);let _0x5c7e44=_0x327bcc[_0x4405cd(0x151)]['prepare']('SELECT\x20*\x20FROM\x20process_record')[_0x4405cd(0xf6)]();for(let _0x38d7e4 in _0x5c7e44){try{process[_0x4405cd(0xef)](_0x5c7e44[_0x38d7e4][_0x4405cd(0x132)],'SIGTERM');}catch(_0x3263cd){}}_0x327bcc[_0x4405cd(0x151)][_0x4405cd(0x12f)](_0x4405cd(0x128))[_0x4405cd(0x14e)](),clearM3u8File(_0x327bcc);},initUtil[_0x2ccf69(0x141)]=[];function clearM3u8File(_0x322b13){const _0x1f857f=_0x2ccf69;fs['rm'](config[_0x1f857f(0x100)],{'recursive':!![],'force':!![],'maxRetries':0xa},_0x50a16f=>{const _0x3f3e96=_0x1f857f;if(_0x50a16f)console[_0x3f3e96(0x13f)](_0x50a16f);}),_0x322b13&&_0x322b13[_0x1f857f(0x151)]&&_0x322b13[_0x1f857f(0x151)][_0x1f857f(0x12f)](_0x1f857f(0x10c))[_0x1f857f(0x14e)]();}function exitApp(_0x34458e){const _0xf823e=_0x2ccf69;if(app)app[_0xf823e(0xe7)]();if(mainWindow)mainWindow=null;for(let _0x3168eb in initUtil[_0xf823e(0x141)]){initUtil[_0xf823e(0x141)][_0x3168eb]&&(initUtil[_0xf823e(0x141)][_0x3168eb][_0xf823e(0xef)](),initUtil[_0xf823e(0x141)][_0x3168eb]=null);}if(_0x34458e['dbOther']){let _0xe86a00=_0x34458e[_0xf823e(0x151)][_0xf823e(0x12f)](_0xf823e(0x128))['run']();}clearM3u8File(_0x34458e),_0x34458e&&(_0x34458e[_0xf823e(0x116)]&&(_0x34458e[_0xf823e(0x116)][_0xf823e(0xfc)](),_0x34458e['dbFileIndex']=null),_0x34458e[_0xf823e(0x151)]&&(_0x34458e['dbOther'][_0xf823e(0xfc)](),_0x34458e[_0xf823e(0x151)]=null),_0x34458e[_0xf823e(0x14a)]&&(_0x34458e[_0xf823e(0x14a)][_0xf823e(0xfc)](),_0x34458e['dbCity']=null)),appTray&&appTray['destroy'](),process['kill'](process[_0xf823e(0x134)],_0xf823e(0x157));}initUtil[_0x2ccf69(0x138)]=exitApp,initUtil[_0x2ccf69(0x153)]=function(_0x3e7606,_0x3a9420){const _0xdc8d2e=_0x2ccf69;if(!app||!_0x3a9420)return;_0x3a9420['on'](_0xdc8d2e(0xfc),_0x5e5786=>{const _0x330c7=_0xdc8d2e;if(!_0x3a9420)return;!_0x3a9420[_0x330c7(0x121)]()?exitApp(_0x3e7606):(_0x5e5786[_0x330c7(0x13b)](),os['platform']()==_0x330c7(0x126)?_0x3a9420[_0x330c7(0xf8)]():_0x3a9420[_0x330c7(0x150)]());}),console[_0xdc8d2e(0x13f)]('Loading...'),_0x3a9420['loadFile'](_0xdc8d2e(0x14f));},initUtil[_0x2ccf69(0x125)]=function(_0x308fe4,_0x532b67){const _0x512e98=_0x2ccf69;if(!app)return;var _0x463c3f=[{'label':_0x512e98(0x156),'click':function(){const _0x4a8e59=_0x512e98;_0x532b67[_0x4a8e59(0x121)]()?_0x532b67['hide']():_0x532b67[_0x4a8e59(0x15b)]();}},{'label':_0x512e98(0xe3),'click':function(){const _0x4050ff=_0x512e98;if(app)app[_0x4050ff(0x114)]();exitApp(_0x308fe4);}},{'label':_0x512e98(0x118),'click':function(){const _0x2d8e3d=_0x512e98;if(app)app[_0x2d8e3d(0xe7)]();exitApp(_0x308fe4);}}];appTray=new Tray(path[_0x512e98(0x152)](initUtil['getRootPath'](),_0x512e98(0x123),_0x512e98(0x13d)));const _0x870d83=Menu['buildFromTemplate'](_0x463c3f);appTray[_0x512e98(0xfb)](_0x512e98(0x11a)),appTray[_0x512e98(0x122)](_0x870d83),appTray['on'](_0x512e98(0x149),function(){const _0x382f9d=_0x512e98;_0x532b67[_0x382f9d(0x15b)]();});},initUtil[_0x2ccf69(0x12a)]=function(){const _0x263135=_0x2ccf69;if(!app)return;!app[_0x263135(0xe4)]&&mainWindow[_0x263135(0x12b)]['openDevTools']();};function clearExpiredToken(){const _0x5c3b39=_0x2ccf69;let _0x49c564=dbConfigTable[_0x5c3b39(0x15a)](dbu[_0x5c3b39(0x151)],_0x5c3b39(0x11b));if(!_0x49c564||!_0x49c564['value']||_0x49c564[_0x5c3b39(0xf1)]<0x1)_0x49c564=0x18;else _0x49c564&&_0x49c564['value']&&(_0x49c564=_0x49c564['value']);let _0x3efbf2=new Date()[_0x5c3b39(0x130)](),_0x4c694b=_0x3efbf2-parseInt(_0x49c564)*0xe10*0x3e8;dbUserTable['deleteUserTokenByWhere'](dbu[_0x5c3b39(0x151)],_0x5c3b39(0x158),[_0x4c694b]);}initUtil[_0x2ccf69(0xeb)]=function(){setInterval(()=>{clearExpiredToken();},0xe10*0x3e8),clearExpiredToken();};const globalInfoUtil=require('./globalInfoUtil');initUtil[_0x2ccf69(0x140)]=function(){const _0x5dd257=_0x2ccf69;if(!app)return;if(!app['isPackaged'])return;let _0x2f85a3=dbConfigTable[_0x5dd257(0x15a)](dbu[_0x5dd257(0x151)],_0x5dd257(0xf3)),_0x239aaa=0x0;_0x2f85a3&&(_0x2f85a3[_0x5dd257(0xf1)]=='1'||_0x2f85a3['value']==0x1)&&(_0x239aaa=0x1);try{fork(path[_0x5dd257(0x101)](__dirname,_0x5dd257(0x11f)),[],{'env':{'enableAutoLaunch':_0x239aaa},'detached':![],'killSignal':_0x5dd257(0x157)});}catch(_0x4cb783){console[_0x5dd257(0x13f)](_0x4cb783);}},initUtil['setLanguage']=function(){const _0x4e67ca=_0x2ccf69;let _0x3f7873=dbConfigTable['findByTitle'](dbu[_0x4e67ca(0x151)],'language');if(!_0x3f7873){let _0x191c0a=app?app[_0x4e67ca(0x108)]():'zh';_0x191c0a['startsWith']('en')?dbConfigTable['create'](dbu['dbOther'],{'title':_0x4e67ca(0x10a),'value':_0x4e67ca(0x139)}):dbConfigTable[_0x4e67ca(0x147)](dbu[_0x4e67ca(0x151)],{'title':'language','value':_0x4e67ca(0x120)});}},initUtil['getFreePort']=function(_0x1cdad8,_0x3186c8){const _0x520cb6=_0x2ccf69;let _0x360cb2=path[_0x520cb6(0x152)](config[_0x520cb6(0x11e)],_0x520cb6(0x109));try{if(fs[_0x520cb6(0xe5)](_0x360cb2)){console['log'](_0x520cb6(0x15c),_0x360cb2);let _0x599e9c=fs[_0x520cb6(0x124)](_0x360cb2,'utf-8');_0x599e9c&&(_0x599e9c=parseInt(_0x599e9c),_0x599e9c>0x0&&_0x599e9c<0xfff6&&(_0x1cdad8=_0x599e9c,dbConfigTable[_0x520cb6(0x147)](dbu['dbOther'],{'title':'apiPort','value':_0x1cdad8+''}),console[_0x520cb6(0x13f)]('Using\x20file\x20config\x20port',_0x1cdad8)));}}catch(_0x2edfdc){}_0x1cdad8=parseInt(_0x1cdad8),netUtils[_0x520cb6(0x111)](_0x1cdad8)[_0x520cb6(0x11c)](_0x36a7f7=>{const _0x3882ab=_0x520cb6;_0x36a7f7?_0x3186c8(_0x1cdad8):(_0x1cdad8+=0x1,initUtil[_0x3882ab(0xf9)](_0x1cdad8,_0x3186c8));});},initUtil['getConfigApiPort']=function(_0x11a9fd){const _0x2df63a=_0x2ccf69;let _0x37d8b5=_0x11a9fd?config[_0x2df63a(0x148)]:config['apiPort'],_0x3d39d5=dbConfigTable[_0x2df63a(0x15a)](dbu['dbOther'],_0x11a9fd?'apiPortHttps':_0x2df63a(0x105));if(_0x3d39d5){let _0x134d0c=parseInt(_0x3d39d5[_0x2df63a(0xf1)]);if(_0x134d0c<=0x0||_0x134d0c>0xffff){}else _0x37d8b5=_0x134d0c;}return _0x37d8b5;},initUtil[_0x2ccf69(0x10f)]=function(){const _0x23d7b2=_0x2ccf69;let _0x342aec=os[_0x23d7b2(0x144)](),_0x4776eb=0x2,_0x5a3ce2=dbConfigTable[_0x23d7b2(0x15a)](dbu['dbOther'],_0x23d7b2(0xed));return _0x5a3ce2&&(_0x4776eb=_0x5a3ce2[_0x23d7b2(0xf1)],_0x4776eb>_0x342aec[_0x23d7b2(0xfd)]&&(_0x4776eb=_0x342aec[_0x23d7b2(0xfd)])),(!_0x4776eb||_0x4776eb<0x2)&&(_0x4776eb=0x2),dbConfigTable[_0x23d7b2(0x147)](dbu[_0x23d7b2(0x151)],{'title':_0x23d7b2(0x13e),'value':parseInt(_0x4776eb)+''}),_0x4776eb;},module[_0x2ccf69(0x107)]=initUtil;