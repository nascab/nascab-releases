const _0x21b8f2=_0x277f;(function(_0xf422a4,_0x4715a1){const _0x3a9db5=_0x277f,_0x32185d=_0xf422a4();while(!![]){try{const _0x41ad15=-parseInt(_0x3a9db5(0xb5))/0x1+parseInt(_0x3a9db5(0xa8))/0x2+-parseInt(_0x3a9db5(0xab))/0x3+parseInt(_0x3a9db5(0xa9))/0x4*(parseInt(_0x3a9db5(0xc7))/0x5)+parseInt(_0x3a9db5(0xbd))/0x6+-parseInt(_0x3a9db5(0xce))/0x7*(parseInt(_0x3a9db5(0xaf))/0x8)+parseInt(_0x3a9db5(0xd1))/0x9*(parseInt(_0x3a9db5(0xaa))/0xa);if(_0x41ad15===_0x4715a1)break;else _0x32185d['push'](_0x32185d['shift']());}catch(_0x28506e){_0x32185d['push'](_0x32185d['shift']());}}}(_0x1592,0xe25f5));const path=require(_0x21b8f2(0xa7));function _0x277f(_0x392221,_0x580c7e){const _0x159240=_0x1592();return _0x277f=function(_0x277f02,_0x1ef751){_0x277f02=_0x277f02-0xa5;let _0x397d0e=_0x159240[_0x277f02];return _0x397d0e;},_0x277f(_0x392221,_0x580c7e);}let exifUtils={};function _0x1592(){const _0x33faae=['indexOf','getFullYear','catch','originalTime','exifrGetExifInfo','sharpGetExifInfo','log','557145UPNaam','height','substring','width','mode','ImageWidth','sharp','14PQsVcj','getTime','longitude','9KXTIbL','exifr异常','exifr','path','2999220dCAYUJ','52mhdqvI','4308290CtYXiZ','2894610CgGMdd','180','CreateDate','270','6029944lxpnwF','Model','then','getRotateFromTags','ImageHeight','ExifImageWidth','79762ATppGO','extractTimestampFromFilename','metadata','filename','test','match','getExifInfo','DateTimeOriginal','601938QTUQyR','CameraOrientation','length'];_0x1592=function(){return _0x33faae;};return _0x1592();}var exifr=require(_0x21b8f2(0xa6));const sharp=require(_0x21b8f2(0xcd));exifUtils[_0x21b8f2(0xb2)]=function(_0x2bd46a){const _0x171971=_0x21b8f2;let _0x49a3e7=0x0;if(!_0x2bd46a)return null;if(_0x2bd46a[_0x171971(0xbe)]){if(_0x2bd46a['CameraOrientation'][_0x171971(0xc0)]('90')!=-0x1)_0x49a3e7=0x5a;else{if(_0x2bd46a['CameraOrientation'][_0x171971(0xc0)](_0x171971(0xac))!=-0x1)_0x49a3e7=0xb4;else _0x2bd46a['CameraOrientation']['indexOf'](_0x171971(0xae))!=-0x1&&(_0x49a3e7=0x10e);}}return _0x49a3e7;},exifUtils[_0x21b8f2(0xc5)]=function(_0x2e1f47,_0x3ee16f,_0x3c59c6,_0x21e2c2){const _0x371e49=_0x21b8f2;sharp(_0x2e1f47,{'failOnError':![]})[_0x371e49(0xb7)]()[_0x371e49(0xb1)](_0x23758f=>{const _0x2463b3=_0x371e49;_0x23758f[_0x2463b3(0xca)]&&_0x23758f['height']&&_0x23758f['width']!=_0x3ee16f[_0x2463b3(0xca)]&&_0x23758f[_0x2463b3(0xca)]>0x0&&(_0x3ee16f['width']=_0x23758f['width'],_0x3ee16f[_0x2463b3(0xc8)]=_0x23758f['height']),_0x3c59c6({'tags':_0x23758f,'dealedIndexObj':_0x3ee16f});})[_0x371e49(0xc2)](_0x24e819=>{_0x3c59c6({'tags':null,'dealedIndexObj':_0x3ee16f});});},exifUtils[_0x21b8f2(0xb6)]=function(_0x325859,_0x1664de){const _0x310ce2=_0x21b8f2;try{const _0x243277=_0x1664de[_0x310ce2(0xba)](_0x325859);if(_0x243277){const _0x3e9b6a=_0x243277[0x0];let _0xfc29b3=null;if(_0x3e9b6a&&_0x3e9b6a[_0x310ce2(0xbf)]==0x8){const _0x4dfc67=_0x3e9b6a[_0x310ce2(0xc9)](0x0,0x4),_0x1c9291=_0x3e9b6a['substring'](0x4,0x6),_0x2cac18=_0x3e9b6a[_0x310ce2(0xc9)](0x6,0x8);_0xfc29b3=new Date(_0x4dfc67,parseInt(_0x1c9291,0xa)-0x1,_0x2cac18);}else{if(_0x3e9b6a&&_0x3e9b6a[_0x310ce2(0xbf)]==0x8)_0xfc29b3=new Date(_0x3e9b6a);else{if(_0x3e9b6a&&_0x3e9b6a[_0x310ce2(0xbf)]==0xd)_0xfc29b3=new Date(parseInt(_0x3e9b6a));else{if(_0x3e9b6a&&_0x3e9b6a[_0x310ce2(0xbf)]==0xa)_0xfc29b3=new Date(parseInt(_0x3e9b6a)*0x3e8);else{if(_0x3e9b6a&&_0x3e9b6a['length']==0xf&&_0x3e9b6a['startsWith']('_')){const [,_0x3c8091,_0x4cc5a0]=_0x243277,_0x2640b1=_0x3c8091[_0x310ce2(0xc9)](0x0,0x4)+'-'+_0x3c8091[_0x310ce2(0xc9)](0x4,0x6)+'-'+_0x3c8091[_0x310ce2(0xc9)](0x6,0x8)+'\x20'+_0x4cc5a0[_0x310ce2(0xc9)](0x0,0x2)+':'+_0x4cc5a0[_0x310ce2(0xc9)](0x2,0x4)+':'+_0x4cc5a0[_0x310ce2(0xc9)](0x4,0x6);console[_0x310ce2(0xc6)](_0x2640b1),_0xfc29b3=new Date(_0x2640b1);}else{if(_0x3e9b6a&&_0x3e9b6a[_0x310ce2(0xbf)]==0xe){const [,_0x517720,_0x3308cd]=_0x243277,_0x55307b=_0x517720[_0x310ce2(0xc9)](0x0,0x4)+'-'+_0x517720['substring'](0x4,0x6)+'-'+_0x517720['substring'](0x6,0x8)+'\x20'+_0x3308cd[_0x310ce2(0xc9)](0x0,0x2)+':'+_0x3308cd[_0x310ce2(0xc9)](0x2,0x4)+':'+_0x3308cd['substring'](0x4,0x6);console[_0x310ce2(0xc6)](_0x55307b),_0xfc29b3=new Date(_0x55307b);}else{if(_0x3e9b6a&&_0x3e9b6a[_0x310ce2(0xbf)]==0x10){console[_0x310ce2(0xc6)](_0x243277);const [,_0x19a53d,_0xe8938d]=_0x243277,_0x53539e=_0x19a53d[_0x310ce2(0xc9)](0x0,0x4)+'-'+_0x19a53d[_0x310ce2(0xc9)](0x4,0x6)+'-'+_0x19a53d[_0x310ce2(0xc9)](0x6,0x8)+'\x20'+_0xe8938d[_0x310ce2(0xc9)](0x0,0x2)+':'+_0xe8938d[_0x310ce2(0xc9)](0x2,0x4)+':'+_0xe8938d['substring'](0x4,0x6);console[_0x310ce2(0xc6)](_0x53539e),_0xfc29b3=new Date(_0x53539e);}}}}}}}if(!_0xfc29b3)return null;const _0xdfd88a=new Date()[_0x310ce2(0xc1)]();let _0x3c46ac=_0xfc29b3[_0x310ce2(0xc1)]();if(!_0x3c46ac||_0x3c46ac<0x7b2||_0x3c46ac>_0xdfd88a)return null;if(!isNaN(_0xfc29b3[_0x310ce2(0xcf)]()))return _0xfc29b3['getTime']();}return null;}catch(_0x1866f3){return console['log'](_0x1866f3),null;}},exifUtils[_0x21b8f2(0xc4)]=function(_0x453a00,_0x275804,_0x5022f6,_0x17580b){const _0x250105=_0x21b8f2;let _0x5c62e4=![];try{exifr['parse'](_0x453a00)['then'](_0x38e63e=>{const _0x41fb74=_0x277f;_0x38e63e&&(_0x275804[_0x41fb74(0xcb)]=_0x38e63e[_0x41fb74(0xb0)],_0x275804['latitude']=_0x38e63e['latitude'],_0x275804[_0x41fb74(0xd0)]=_0x38e63e[_0x41fb74(0xd0)],_0x275804[_0x41fb74(0xca)]=_0x38e63e[_0x41fb74(0xcc)]||_0x38e63e[_0x41fb74(0xb4)],_0x275804[_0x41fb74(0xc8)]=_0x38e63e[_0x41fb74(0xb3)]||_0x38e63e['ExifImageHeight'],_0x5c62e4=_0x38e63e[_0x41fb74(0xbc)],_0x38e63e[_0x41fb74(0xad)]&&!_0x5c62e4&&(_0x5c62e4=_0x38e63e[_0x41fb74(0xad)]));if(!_0x5c62e4){const _0x526a40=/(\d{4}-\d{2}-\d{2})/,_0x327da5=exifUtils[_0x41fb74(0xb6)](_0x526a40,_0x275804[_0x41fb74(0xb8)]);_0x327da5&&(_0x5c62e4=_0x327da5);}if(!_0x5c62e4){const _0xb5196e=/_(\d{8})_(\d{6})/,_0x3bb070=exifUtils[_0x41fb74(0xb6)](_0xb5196e,_0x275804['filename']);_0x3bb070&&(_0x5c62e4=_0x3bb070);}if(!_0x5c62e4){const _0x17db11=/_(\d{8})(\d{6})/,_0x48a780=exifUtils[_0x41fb74(0xb6)](_0x17db11,_0x275804['filename']);_0x48a780&&(_0x5c62e4=_0x48a780);}if(!_0x5c62e4){const _0x75dad0=/(\d{8})(\d{6})/,_0x296894=exifUtils[_0x41fb74(0xb6)](_0x75dad0,_0x275804[_0x41fb74(0xb8)]);_0x296894&&(_0x5c62e4=_0x296894);}if(!_0x5c62e4){const _0x1c8cc1=/(\d{13}|\d{10})/,_0x191233=exifUtils[_0x41fb74(0xb6)](_0x1c8cc1,_0x275804[_0x41fb74(0xb8)]);_0x191233&&(_0x5c62e4=_0x191233);}if(!_0x5c62e4){const _0x443f2b=/(\d{4})(\d{2})(\d{2})/,_0x4c02a9=exifUtils[_0x41fb74(0xb6)](_0x443f2b,_0x275804['filename']);_0x4c02a9&&(_0x5c62e4=_0x4c02a9);}_0x5c62e4&&/\d{15,}/[_0x41fb74(0xb9)](_0x275804[_0x41fb74(0xb8)])&&(_0x5c62e4=null);function _0x4ab997(){const _0x18e9c4=_0x41fb74;if(_0x5c62e4)try{_0x5c62e4=new Date(_0x5c62e4)[_0x18e9c4(0xcf)](),_0x275804[_0x18e9c4(0xc3)]=_0x5c62e4;}catch(_0x128437){console[_0x18e9c4(0xc6)](_0x128437),_0x275804['originalTime']='';}if(!_0x275804[_0x18e9c4(0xca)]||!_0x275804[_0x18e9c4(0xc8)])return exifUtils[_0x18e9c4(0xc5)](_0x453a00,_0x275804,_0x5022f6,_0x17580b);else _0x5022f6({'tags':_0x38e63e,'dealedIndexObj':_0x275804});}sharp(_0x453a00,{'failOnError':![]})[_0x41fb74(0xb7)]()[_0x41fb74(0xb1)](_0x1c0e8f=>{const _0x2ecf48=_0x41fb74;_0x1c0e8f[_0x2ecf48(0xca)]&&_0x1c0e8f[_0x2ecf48(0xc8)]&&_0x1c0e8f[_0x2ecf48(0xca)]!=_0x275804[_0x2ecf48(0xca)]&&_0x1c0e8f[_0x2ecf48(0xca)]>0x0&&(_0x275804['width']=_0x1c0e8f[_0x2ecf48(0xca)],_0x275804[_0x2ecf48(0xc8)]=_0x1c0e8f[_0x2ecf48(0xc8)]),_0x4ab997();})[_0x41fb74(0xc2)](_0x436558=>{const _0xdbe15b=_0x41fb74;console[_0xdbe15b(0xc6)](_0x436558),_0x4ab997();});})['catch'](_0x426fb0=>{const _0xe4132c=_0x277f;return console['log'](_0xe4132c(0xa5),_0x426fb0),exifUtils[_0xe4132c(0xc5)](_0x453a00,_0x275804,_0x5022f6,_0x17580b);});}catch(_0x341bd6){return console[_0x250105(0xc6)]('exifr异常',_0x341bd6),exifUtils[_0x250105(0xc5)](_0x453a00,_0x275804,_0x5022f6,_0x17580b);}},exifUtils[_0x21b8f2(0xbb)]=function(_0x41016c,_0x594c3d){return new Promise((_0x358be5,_0x25d5ae)=>{const _0x474fcb=_0x277f;exifUtils[_0x474fcb(0xc4)](_0x41016c,_0x594c3d,_0x358be5);return;});},module['exports']=exifUtils;