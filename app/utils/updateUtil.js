const _0x2bee5c=_0x274a;(function(_0x3211f6,_0x905718){const _0xeed371=_0x274a,_0x4498e9=_0x3211f6();while(!![]){try{const _0x549d73=parseInt(_0xeed371(0x1be))/0x1*(-parseInt(_0xeed371(0x1c7))/0x2)+-parseInt(_0xeed371(0x19a))/0x3+parseInt(_0xeed371(0x1c3))/0x4+parseInt(_0xeed371(0x1c2))/0x5*(-parseInt(_0xeed371(0x1bf))/0x6)+-parseInt(_0xeed371(0x198))/0x7+-parseInt(_0xeed371(0x1b0))/0x8*(-parseInt(_0xeed371(0x1b7))/0x9)+-parseInt(_0xeed371(0x1a2))/0xa*(-parseInt(_0xeed371(0x196))/0xb);if(_0x549d73===_0x905718)break;else _0x4498e9['push'](_0x4498e9['shift']());}catch(_0x314762){_0x4498e9['push'](_0x4498e9['shift']());}}}(_0x24fa,0xde9c6));let dbConfigTable=require(_0x2bee5c(0x19c)),updateUtil={};const config=require(_0x2bee5c(0x1a8)),Database=require('better-sqlite3'),log=require(_0x2bee5c(0x19f)),os=require('os'),dbOther=new Database(config['dbOther'],{});let versionInfo='',bgTaskId='',app;try{app=require(_0x2bee5c(0x1ae))[_0x2bee5c(0x1af)];}catch(_0x58958c){console[_0x2bee5c(0x1ba)](_0x2bee5c(0x195));}const dbNoticeCenterTable=require(_0x2bee5c(0x1c6));function saveMsg(_0x5636cd,_0x2ea820,_0x1718e4){const _0x514531=_0x2bee5c;dbNoticeCenterTable[_0x514531(0x197)](dbOther,{'title':_0x5636cd,'level':_0x2ea820,'content':_0x1718e4});}let {autoUpdater}=require(_0x2bee5c(0x1c5));function _0x274a(_0x3a05b3,_0x4d2eb1){const _0x24fa6b=_0x24fa();return _0x274a=function(_0x274a8b,_0x46e0bc){_0x274a8b=_0x274a8b-0x191;let _0x128b69=_0x24fa6b[_0x274a8b];return _0x128b69;},_0x274a(_0x3a05b3,_0x4d2eb1);}const globalInfoUtil=require(_0x2bee5c(0x1bb));function saveStatus(_0x586f2c,_0x3466ea){const _0x49bf67=_0x2bee5c;versionInfo[_0x49bf67(0x1b5)]=_0x586f2c,setVersionInfoToDb(),_0x586f2c==_0x49bf67(0x1b2)&&bgTaskId&&dbOther[_0x49bf67(0x1b3)](_0x49bf67(0x191))[_0x49bf67(0x193)](_0x3466ea?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0x5d666c=_0x2bee5c;let _0x5f3eb2=dbConfigTable[_0x5d666c(0x1bd)](dbOther,_0x5d666c(0x1ad));if(_0x5f3eb2)try{return _0x5f3eb2=JSON[_0x5d666c(0x1a9)](_0x5f3eb2[_0x5d666c(0x1b1)]),_0x5f3eb2;}catch(_0x552da2){return console[_0x5d666c(0x1ba)](_0x5d666c(0x19b),_0x552da2),'';}else return'';}updateUtil[_0x2bee5c(0x19e)]=getVersionFromDb;function setVersionInfoToDb(){const _0x1aa358=_0x2bee5c;let _0x2d0791={'title':_0x1aa358(0x1ad),'value':JSON[_0x1aa358(0x199)](versionInfo)};dbConfigTable['create'](dbOther,_0x2d0791);}function _0x24fa(){const _0x554271=['status','darwin','10991151bRFwnf','update-not-available','startUpdate','log','./globalInfoUtil','checking-for-update','findByTitle','3EnoBFG','57498sqjGwK','lastInsertRowid','PACKAGE_UPDATE','940fhlurZ','5504836LyqVVl','checkForUpdates','electron-updater','../db/dbNoticeCenterTable','554174YPqLQS','started','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1','run','exports','Clientless\x20service\x20mode','17622XaqjCw','create','12114914UuPhZv','stringify','3582303mROzQY','error','../db/dbConfigTable','window-all-closed','getVersionFromDb','electron-log','downloading','quitAndInstall','24170lltgrW','exit','UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id=','update-available','catch','percent','../myConfig/config','parse','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','setFeedURL','platform','versionInfo','electron','app','8UswIFh','value','done','prepare','logger'];_0x24fa=function(){return _0x554271;};return _0x24fa();}updateUtil[_0x2bee5c(0x1b9)]=function(){const _0x31b468=_0x2bee5c;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo['status']&&versionInfo[_0x31b468(0x1b5)]!=_0x31b468(0x1b2))return;saveStatus(_0x31b468(0x1c8)),autoUpdater[_0x31b468(0x1b4)]=log,autoUpdater[_0x31b468(0x1ab)](versionInfo['upDateUrl']),autoUpdater[_0x31b468(0x1c4)]()[_0x31b468(0x1a6)](_0x4da28a=>{const _0x198e96=_0x31b468;saveStatus(_0x198e96(0x1b2),![]);}),autoUpdater['on'](_0x31b468(0x19b),_0x5b1cfd=>{saveStatus('done',![]);}),autoUpdater['on'](_0x31b468(0x1bc),()=>{}),autoUpdater['on'](_0x31b468(0x1a5),()=>{const _0xd793c5=_0x31b468;let _0x4c0be5=dbOther['prepare'](_0xd793c5(0x1aa))['run'](_0xd793c5(0x1c1));bgTaskId=_0x4c0be5[_0xd793c5(0x1c0)],dbOther[_0xd793c5(0x1b3)](_0xd793c5(0x1a4)+bgTaskId)[_0xd793c5(0x193)]();}),autoUpdater['on'](_0x31b468(0x1b8),()=>{saveStatus('done',!![]);}),autoUpdater['on']('download-progress',_0x243ad1=>{const _0x1c13d0=_0x31b468;saveStatus(_0x1c13d0(0x1a0)),bgTaskId&&dbOther[_0x1c13d0(0x1b3)](_0x1c13d0(0x192))[_0x1c13d0(0x193)](_0x243ad1[_0x1c13d0(0x1a7)],0x64,bgTaskId);}),autoUpdater['on']('update-downloaded',()=>{const _0xf6fad=_0x31b468;saveStatus(_0xf6fad(0x1b2),!![]),os[_0xf6fad(0x1ac)]()==_0xf6fad(0x1b6)?setTimeout(()=>{const _0xdbcac3=_0xf6fad;if(app)app['removeAllListeners'](_0xdbcac3(0x19d));autoUpdater[_0xdbcac3(0x1a1)]();if(app)app[_0xdbcac3(0x1a3)]();},0x1f40):setTimeout(()=>{const _0x4755d6=_0xf6fad;autoUpdater[_0x4755d6(0x1a1)]();},0xbb8);});}catch(_0x4b6b88){console['log'](_0x4b6b88);}},module[_0x2bee5c(0x194)]=updateUtil;