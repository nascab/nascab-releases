const _0x500d74=_0x5844;(function(_0x4c41de,_0x276ca1){const _0x57aed1=_0x5844,_0x47eafd=_0x4c41de();while(!![]){try{const _0x550eae=parseInt(_0x57aed1(0x8e))/0x1*(parseInt(_0x57aed1(0x8c))/0x2)+-parseInt(_0x57aed1(0x90))/0x3+parseInt(_0x57aed1(0x7e))/0x4+-parseInt(_0x57aed1(0x7a))/0x5*(-parseInt(_0x57aed1(0x91))/0x6)+parseInt(_0x57aed1(0xb0))/0x7+parseInt(_0x57aed1(0xa7))/0x8*(parseInt(_0x57aed1(0xa9))/0x9)+parseInt(_0x57aed1(0x94))/0xa*(-parseInt(_0x57aed1(0x8a))/0xb);if(_0x550eae===_0x276ca1)break;else _0x47eafd['push'](_0x47eafd['shift']());}catch(_0x544bde){_0x47eafd['push'](_0x47eafd['shift']());}}}(_0x5ed1,0x764ad));let dbConfigTable=require(_0x500d74(0x88)),updateUtil={};const config=require(_0x500d74(0x79)),Database=require(_0x500d74(0x84)),log=require('electron-log'),os=require('os'),dbOther=new Database(config[_0x500d74(0x96)],{});function _0x5ed1(){const _0x496a58=['error','dbOther','findByTitle','platform','parse','upDateUrl','quitAndInstall','PACKAGE_UPDATE','stringify','UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1','startUpdate','./globalInfoUtil','create','catch','Clientless\x20service\x20mode','darwin','value','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','553016NbIwXA','logger','72CujDFU','status','exit','run','checkForUpdates','app','UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id=','1656193IrEEOj','exports','percent','../myConfig/config','3620PAzhvI','setFeedURL','prepare','log','2759796FcCvTr','download-progress','getVersionFromDb','update-available','started','downloading','better-sqlite3','electron-updater','removeAllListeners','done','../db/dbConfigTable','electron','9492395qSOopd','update-not-available','806rhXhMb','window-all-closed','906miFJVG','lastInsertRowid','1513356EFXgKK','60gqRpfO','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','versionInfo','10kACQJI'];_0x5ed1=function(){return _0x496a58;};return _0x5ed1();}let versionInfo='',bgTaskId='',app;try{app=require(_0x500d74(0x89))[_0x500d74(0xae)];}catch(_0x525d6f){console[_0x500d74(0x7d)](_0x500d74(0xa3));}const dbNoticeCenterTable=require('../db/dbNoticeCenterTable');function saveMsg(_0x44c1e9,_0x4a33e0,_0x426c1d){const _0xc55a4c=_0x500d74;dbNoticeCenterTable[_0xc55a4c(0xa1)](dbOther,{'title':_0x44c1e9,'level':_0x4a33e0,'content':_0x426c1d});}let {autoUpdater}=require(_0x500d74(0x85));const globalInfoUtil=require(_0x500d74(0xa0));function saveStatus(_0x4858c6,_0x142e9c){const _0xdd3f4e=_0x500d74;versionInfo['status']=_0x4858c6,setVersionInfoToDb(),_0x4858c6=='done'&&bgTaskId&&dbOther[_0xdd3f4e(0x7c)](_0xdd3f4e(0xa6))['run'](_0x142e9c?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0xdd02cb=_0x500d74;let _0x5af2d6=dbConfigTable[_0xdd02cb(0x97)](dbOther,'versionInfo');if(_0x5af2d6)try{return _0x5af2d6=JSON[_0xdd02cb(0x99)](_0x5af2d6[_0xdd02cb(0xa5)]),_0x5af2d6;}catch(_0x2fa1de){return console['log']('error',_0x2fa1de),'';}else return'';}updateUtil[_0x500d74(0x80)]=getVersionFromDb;function setVersionInfoToDb(){const _0x332b85=_0x500d74;let _0xc4baf4={'title':_0x332b85(0x93),'value':JSON[_0x332b85(0x9d)](versionInfo)};dbConfigTable['create'](dbOther,_0xc4baf4);}function _0x5844(_0x1ae62a,_0x181e18){const _0x5ed1dd=_0x5ed1();return _0x5844=function(_0x5844d4,_0x18c682){_0x5844d4=_0x5844d4-0x79;let _0x390edd=_0x5ed1dd[_0x5844d4];return _0x390edd;},_0x5844(_0x1ae62a,_0x181e18);}updateUtil[_0x500d74(0x9f)]=function(){const _0x1b6639=_0x500d74;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo['status']&&versionInfo[_0x1b6639(0xaa)]!=_0x1b6639(0x87))return;saveStatus(_0x1b6639(0x82)),autoUpdater[_0x1b6639(0xa8)]=log,autoUpdater[_0x1b6639(0x7b)](versionInfo[_0x1b6639(0x9a)]),autoUpdater[_0x1b6639(0xad)]()[_0x1b6639(0xa2)](_0x41c71f=>{const _0x28f93f=_0x1b6639;saveStatus(_0x28f93f(0x87),![]);}),autoUpdater['on'](_0x1b6639(0x95),_0x253a63=>{const _0x24c937=_0x1b6639;saveStatus(_0x24c937(0x87),![]);}),autoUpdater['on']('checking-for-update',()=>{}),autoUpdater['on'](_0x1b6639(0x81),()=>{const _0x4bbdec=_0x1b6639;let _0x2e6bad=dbOther[_0x4bbdec(0x7c)](_0x4bbdec(0x92))['run'](_0x4bbdec(0x9c));bgTaskId=_0x2e6bad[_0x4bbdec(0x8f)],dbOther[_0x4bbdec(0x7c)](_0x4bbdec(0xaf)+bgTaskId)[_0x4bbdec(0xac)]();}),autoUpdater['on'](_0x1b6639(0x8b),()=>{const _0x3af78a=_0x1b6639;saveStatus(_0x3af78a(0x87),!![]);}),autoUpdater['on'](_0x1b6639(0x7f),_0xa66217=>{const _0x50473b=_0x1b6639;saveStatus(_0x50473b(0x83)),bgTaskId&&dbOther[_0x50473b(0x7c)](_0x50473b(0x9e))['run'](_0xa66217[_0x50473b(0xb2)],0x64,bgTaskId);}),autoUpdater['on']('update-downloaded',()=>{const _0x23a080=_0x1b6639;saveStatus(_0x23a080(0x87),!![]),os[_0x23a080(0x98)]()==_0x23a080(0xa4)?setTimeout(()=>{const _0x4980e0=_0x23a080;if(app)app[_0x4980e0(0x86)](_0x4980e0(0x8d));autoUpdater['quitAndInstall']();if(app)app[_0x4980e0(0xab)]();},0x1f40):setTimeout(()=>{const _0x11ba9f=_0x23a080;autoUpdater[_0x11ba9f(0x9b)]();},0xbb8);});}catch(_0x3688c5){console[_0x1b6639(0x7d)](_0x3688c5);}},module[_0x500d74(0xb1)]=updateUtil;