function _0x4dc6(_0x317fe5,_0x258d1d){const _0x5af900=_0x5af9();return _0x4dc6=function(_0x4dc644,_0x497e64){_0x4dc644=_0x4dc644-0x138;let _0x1931be=_0x5af900[_0x4dc644];return _0x1931be;},_0x4dc6(_0x317fe5,_0x258d1d);}const _0x1c7d00=_0x4dc6;(function(_0x288764,_0x37d7d5){const _0x4832a5=_0x4dc6,_0x59cf70=_0x288764();while(!![]){try{const _0x26707b=-parseInt(_0x4832a5(0x14d))/0x1+-parseInt(_0x4832a5(0x145))/0x2*(parseInt(_0x4832a5(0x161))/0x3)+parseInt(_0x4832a5(0x13e))/0x4*(parseInt(_0x4832a5(0x138))/0x5)+-parseInt(_0x4832a5(0x155))/0x6+-parseInt(_0x4832a5(0x167))/0x7*(-parseInt(_0x4832a5(0x143))/0x8)+parseInt(_0x4832a5(0x152))/0x9+-parseInt(_0x4832a5(0x147))/0xa*(parseInt(_0x4832a5(0x15b))/0xb);if(_0x26707b===_0x37d7d5)break;else _0x59cf70['push'](_0x59cf70['shift']());}catch(_0x140f95){_0x59cf70['push'](_0x59cf70['shift']());}}}(_0x5af9,0xd760e));let dbConfigTable=require(_0x1c7d00(0x160)),updateUtil={};const config=require(_0x1c7d00(0x13b)),Database=require(_0x1c7d00(0x164)),log=require(_0x1c7d00(0x141)),os=require('os'),dbOther=new Database(config[_0x1c7d00(0x15d)],{});let versionInfo='',bgTaskId='',app;try{app=require(_0x1c7d00(0x149))[_0x1c7d00(0x13c)];}catch(_0x347eb6){console[_0x1c7d00(0x140)](_0x1c7d00(0x165));}const dbNoticeCenterTable=require(_0x1c7d00(0x15c));function saveMsg(_0x284cc9,_0x2bb9c5,_0x57976b){const _0x31d062=_0x1c7d00;dbNoticeCenterTable[_0x31d062(0x169)](dbOther,{'title':_0x284cc9,'level':_0x2bb9c5,'content':_0x57976b});}let {autoUpdater}=require(_0x1c7d00(0x15e));const globalInfoUtil=require('./globalInfoUtil');function saveStatus(_0x25db8e,_0x113883){const _0x4f99ac=_0x1c7d00;versionInfo[_0x4f99ac(0x139)]=_0x25db8e,setVersionInfoToDb(),_0x25db8e==_0x4f99ac(0x15f)&&bgTaskId&&dbOther[_0x4f99ac(0x166)](_0x4f99ac(0x13a))['run'](_0x113883?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0x95fa3f=_0x1c7d00;let _0x46a957=dbConfigTable['findByTitle'](dbOther,_0x95fa3f(0x142));if(_0x46a957)try{return _0x46a957=JSON[_0x95fa3f(0x14a)](_0x46a957[_0x95fa3f(0x16b)]),_0x46a957;}catch(_0x381fb0){return console[_0x95fa3f(0x140)](_0x95fa3f(0x154),_0x381fb0),'';}else return'';}updateUtil[_0x1c7d00(0x13d)]=getVersionFromDb;function _0x5af9(){const _0x148248=['66451PdGJxy','../db/dbNoticeCenterTable','dbOther','electron-updater','done','../db/dbConfigTable','12aZKuLH','update-downloaded','UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id=','better-sqlite3','Clientless\x20service\x20mode','prepare','98rVjvnv','run','create','checkForUpdates','value','158810nfbZPp','status','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','../myConfig/config','app','getVersionFromDb','4bzdQrZ','darwin','log','electron-log','versionInfo','921304EWRFPn','percent','297438BhATTX','lastInsertRowid','1270wRheTH','quitAndInstall','electron','parse','started','update-not-available','38437ynpbah','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','window-all-closed','downloading','upDateUrl','12121992FJHCHy','startUpdate','error','4249332oncEqT','platform','removeAllListeners','logger','checking-for-update','PACKAGE_UPDATE'];_0x5af9=function(){return _0x148248;};return _0x5af9();}function setVersionInfoToDb(){const _0x16525a=_0x1c7d00;let _0x55ed25={'title':_0x16525a(0x142),'value':JSON['stringify'](versionInfo)};dbConfigTable[_0x16525a(0x169)](dbOther,_0x55ed25);}updateUtil[_0x1c7d00(0x153)]=function(){const _0x1d0e50=_0x1c7d00;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo[_0x1d0e50(0x139)]&&versionInfo['status']!=_0x1d0e50(0x15f))return;saveStatus(_0x1d0e50(0x14b)),autoUpdater[_0x1d0e50(0x158)]=log,autoUpdater['setFeedURL'](versionInfo[_0x1d0e50(0x151)]),autoUpdater[_0x1d0e50(0x16a)]()['catch'](_0x68451b=>{const _0x3df1ec=_0x1d0e50;saveStatus(_0x3df1ec(0x15f),![]);}),autoUpdater['on'](_0x1d0e50(0x154),_0x586c57=>{const _0x10e1bd=_0x1d0e50;saveStatus(_0x10e1bd(0x15f),![]);}),autoUpdater['on'](_0x1d0e50(0x159),()=>{}),autoUpdater['on']('update-available',()=>{const _0x404deb=_0x1d0e50;let _0x9ab333=dbOther[_0x404deb(0x166)](_0x404deb(0x14e))[_0x404deb(0x168)](_0x404deb(0x15a));bgTaskId=_0x9ab333[_0x404deb(0x146)],dbOther[_0x404deb(0x166)](_0x404deb(0x163)+bgTaskId)['run']();}),autoUpdater['on'](_0x1d0e50(0x14c),()=>{saveStatus('done',!![]);}),autoUpdater['on']('download-progress',_0x4f1eed=>{const _0x346184=_0x1d0e50;saveStatus(_0x346184(0x150)),bgTaskId&&dbOther['prepare']('UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1')[_0x346184(0x168)](_0x4f1eed[_0x346184(0x144)],0x64,bgTaskId);}),autoUpdater['on'](_0x1d0e50(0x162),()=>{const _0x275da3=_0x1d0e50;saveStatus(_0x275da3(0x15f),!![]),os[_0x275da3(0x156)]()==_0x275da3(0x13f)?setTimeout(()=>{const _0x4d5b7d=_0x275da3;if(app)app[_0x4d5b7d(0x157)](_0x4d5b7d(0x14f));autoUpdater[_0x4d5b7d(0x148)]();if(app)app['exit']();},0x1f40):setTimeout(()=>{const _0x16a254=_0x275da3;autoUpdater[_0x16a254(0x148)]();},0xbb8);});}catch(_0x2ba941){console[_0x1d0e50(0x140)](_0x2ba941);}},module['exports']=updateUtil;