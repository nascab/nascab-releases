const _0x1a7c05=_0x548d;function _0x548d(_0x1524a3,_0x392b3c){const _0x418b87=_0x418b();return _0x548d=function(_0x548dd9,_0x3a6fb6){_0x548dd9=_0x548dd9-0xf6;let _0x6ec184=_0x418b87[_0x548dd9];return _0x6ec184;},_0x548d(_0x1524a3,_0x392b3c);}(function(_0x38556d,_0x4ecff2){const _0x4d5d31=_0x548d,_0x438ed0=_0x38556d();while(!![]){try{const _0x462ae6=-parseInt(_0x4d5d31(0x105))/0x1*(parseInt(_0x4d5d31(0x11d))/0x2)+parseInt(_0x4d5d31(0xf6))/0x3+-parseInt(_0x4d5d31(0x10a))/0x4*(-parseInt(_0x4d5d31(0x106))/0x5)+-parseInt(_0x4d5d31(0x12c))/0x6+-parseInt(_0x4d5d31(0x11e))/0x7*(parseInt(_0x4d5d31(0x101))/0x8)+-parseInt(_0x4d5d31(0x117))/0x9+-parseInt(_0x4d5d31(0xfe))/0xa*(-parseInt(_0x4d5d31(0x120))/0xb);if(_0x462ae6===_0x4ecff2)break;else _0x438ed0['push'](_0x438ed0['shift']());}catch(_0x1014cd){_0x438ed0['push'](_0x438ed0['shift']());}}}(_0x418b,0xe14cb));let dbConfigTable=require('../db/dbConfigTable'),updateUtil={};const config=require(_0x1a7c05(0x125)),Database=require('better-sqlite3'),log=require(_0x1a7c05(0x119)),os=require('os'),dbOther=new Database(config[_0x1a7c05(0x121)],{});let versionInfo='',bgTaskId='',app;try{app=require('electron')[_0x1a7c05(0x116)];}catch(_0x1e5d7a){console[_0x1a7c05(0x104)]('Clientless\x20service\x20mode');}const dbNoticeCenterTable=require(_0x1a7c05(0x12b));function saveMsg(_0x50b04a,_0x3b5977,_0x31eb9a){const _0x2f7421=_0x1a7c05;dbNoticeCenterTable[_0x2f7421(0x126)](dbOther,{'title':_0x50b04a,'level':_0x3b5977,'content':_0x31eb9a});}let {autoUpdater}=require(_0x1a7c05(0x123));const globalInfoUtil=require(_0x1a7c05(0x115));function saveStatus(_0x5e09f6,_0x2e41d6){const _0x111580=_0x1a7c05;versionInfo['status']=_0x5e09f6,setVersionInfoToDb(),_0x5e09f6=='done'&&bgTaskId&&dbOther[_0x111580(0x127)](_0x111580(0xff))[_0x111580(0x109)](_0x2e41d6?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0x5270b3=_0x1a7c05;let _0x2f645e=dbConfigTable[_0x5270b3(0x102)](dbOther,'versionInfo');if(_0x2f645e)try{return _0x2f645e=JSON[_0x5270b3(0x111)](_0x2f645e[_0x5270b3(0x10e)]),_0x2f645e;}catch(_0x4071f9){return console[_0x5270b3(0x104)](_0x5270b3(0x11c),_0x4071f9),'';}else return'';}updateUtil['getVersionFromDb']=getVersionFromDb;function _0x418b(){const _0x30b390=['versionInfo','catch','./globalInfoUtil','app','15337638UGntOj','removeAllListeners','electron-log','update-available','PACKAGE_UPDATE','error','2MxWWaH','8667981OdQncK','stringify','25366AVBWTU','dbOther','quitAndInstall','electron-updater','done','../myConfig/config','create','prepare','logger','update-not-available','checking-for-update','../db/dbNoticeCenterTable','4413210vwFzBJ','2239566cakyNT','upDateUrl','darwin','started','downloading','startUpdate','UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1','update-downloaded','12870rAkvtc','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','8IUfAxD','findByTitle','UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id=','log','768371dclskF','33230RhuhdN','setFeedURL','percent','run','996iQQZjV','lastInsertRowid','download-progress','checkForUpdates','value','exports','exit','parse','status'];_0x418b=function(){return _0x30b390;};return _0x418b();}function setVersionInfoToDb(){const _0x57ddbf=_0x1a7c05;let _0x2b52a6={'title':_0x57ddbf(0x113),'value':JSON[_0x57ddbf(0x11f)](versionInfo)};dbConfigTable[_0x57ddbf(0x126)](dbOther,_0x2b52a6);}updateUtil[_0x1a7c05(0xfb)]=function(){const _0x2e60b4=_0x1a7c05;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo[_0x2e60b4(0x112)]&&versionInfo['status']!=_0x2e60b4(0x124))return;saveStatus(_0x2e60b4(0xf9)),autoUpdater[_0x2e60b4(0x128)]=log,autoUpdater[_0x2e60b4(0x107)](versionInfo[_0x2e60b4(0xf7)]),autoUpdater[_0x2e60b4(0x10d)]()[_0x2e60b4(0x114)](_0x13fa07=>{const _0x39c3d5=_0x2e60b4;saveStatus(_0x39c3d5(0x124),![]);}),autoUpdater['on'](_0x2e60b4(0x11c),_0x57ab68=>{saveStatus('done',![]);}),autoUpdater['on'](_0x2e60b4(0x12a),()=>{}),autoUpdater['on'](_0x2e60b4(0x11a),()=>{const _0x51d21b=_0x2e60b4;let _0x1e11ab=dbOther[_0x51d21b(0x127)](_0x51d21b(0x100))[_0x51d21b(0x109)](_0x51d21b(0x11b));bgTaskId=_0x1e11ab[_0x51d21b(0x10b)],dbOther[_0x51d21b(0x127)](_0x51d21b(0x103)+bgTaskId)[_0x51d21b(0x109)]();}),autoUpdater['on'](_0x2e60b4(0x129),()=>{const _0x28e25b=_0x2e60b4;saveStatus(_0x28e25b(0x124),!![]);}),autoUpdater['on'](_0x2e60b4(0x10c),_0x26af22=>{const _0x3f0086=_0x2e60b4;saveStatus(_0x3f0086(0xfa)),bgTaskId&&dbOther[_0x3f0086(0x127)](_0x3f0086(0xfc))[_0x3f0086(0x109)](_0x26af22[_0x3f0086(0x108)],0x64,bgTaskId);}),autoUpdater['on'](_0x2e60b4(0xfd),()=>{const _0x3b119f=_0x2e60b4;saveStatus('done',!![]),os['platform']()==_0x3b119f(0xf8)?setTimeout(()=>{const _0x3338af=_0x3b119f;if(app)app[_0x3338af(0x118)]('window-all-closed');autoUpdater[_0x3338af(0x122)]();if(app)app[_0x3338af(0x110)]();},0x1f40):setTimeout(()=>{const _0x491e72=_0x3b119f;autoUpdater[_0x491e72(0x122)]();},0xbb8);});}catch(_0x339dbe){console[_0x2e60b4(0x104)](_0x339dbe);}},module[_0x1a7c05(0x10f)]=updateUtil;