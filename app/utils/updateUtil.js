const _0x54fd4a=_0x7302;(function(_0x54299d,_0x55bc32){const _0x42844=_0x7302,_0x5317cd=_0x54299d();while(!![]){try{const _0x2145f7=parseInt(_0x42844(0x1d7))/0x1*(parseInt(_0x42844(0x1a7))/0x2)+parseInt(_0x42844(0x1d5))/0x3+-parseInt(_0x42844(0x1c3))/0x4+parseInt(_0x42844(0x1b8))/0x5*(parseInt(_0x42844(0x1b1))/0x6)+parseInt(_0x42844(0x1ba))/0x7+-parseInt(_0x42844(0x1ab))/0x8*(parseInt(_0x42844(0x1b4))/0x9)+-parseInt(_0x42844(0x1be))/0xa;if(_0x2145f7===_0x55bc32)break;else _0x5317cd['push'](_0x5317cd['shift']());}catch(_0x990823){_0x5317cd['push'](_0x5317cd['shift']());}}}(_0x4e82,0xe1599));function _0x7302(_0x14fd62,_0x5358d5){const _0x4e8207=_0x4e82();return _0x7302=function(_0x73022d,_0x298e78){_0x73022d=_0x73022d-0x1a6;let _0x8e382f=_0x4e8207[_0x73022d];return _0x8e382f;},_0x7302(_0x14fd62,_0x5358d5);}let dbConfigTable=require(_0x54fd4a(0x1a6)),updateUtil={};const config=require(_0x54fd4a(0x1d6)),Database=require(_0x54fd4a(0x1cd)),log=require('electron-log'),os=require('os'),dbOther=new Database(config[_0x54fd4a(0x1cc)],{});function _0x4e82(){const _0x5497fb=['error','checking-for-update','2334645yCrIVw','../myConfig/config','32333pjIkiR','UPDATE\x20bg_task\x20SET\x20task_state=?\x20where\x20id=?','INSERT\x20INTO\x20bg_task(task_type)\x20VALUES(?)','../db/dbConfigTable','86vvWBGM','update-downloaded','catch','run','2071064HuAQPE','started','logger','update-not-available','exports','platform','3502842ZaCILJ','prepare','done','18PCZSds','../db/dbNoticeCenterTable','electron','download-progress','15OJWTNR','status','2336593GHTVeH','parse','startUpdate','versionInfo','19979890KLMQYg','update-available','app','percent','darwin','3259864vzzAGJ','electron-updater','value','UPDATE\x20bg_task\x20SET\x20progress_current=?,progress_all=?\x20where\x20id=?\x20and\x20task_state=1','checkForUpdates','getVersionFromDb','window-all-closed','stringify','quitAndInstall','dbOther','better-sqlite3','exit','upDateUrl','Clientless\x20service\x20mode','create','removeAllListeners'];_0x4e82=function(){return _0x5497fb;};return _0x4e82();}let versionInfo='',bgTaskId='',app;try{app=require(_0x54fd4a(0x1b6))[_0x54fd4a(0x1c0)];}catch(_0x376a14){console['log'](_0x54fd4a(0x1d0));}const dbNoticeCenterTable=require(_0x54fd4a(0x1b5));function saveMsg(_0x2db542,_0x19b007,_0x16dcb2){const _0x184283=_0x54fd4a;dbNoticeCenterTable[_0x184283(0x1d1)](dbOther,{'title':_0x2db542,'level':_0x19b007,'content':_0x16dcb2});}let {autoUpdater}=require(_0x54fd4a(0x1c4));const globalInfoUtil=require('./globalInfoUtil');function saveStatus(_0xff6775,_0x14429f){const _0x30b622=_0x54fd4a;versionInfo[_0x30b622(0x1b9)]=_0xff6775,setVersionInfoToDb(),_0xff6775==_0x30b622(0x1b3)&&bgTaskId&&dbOther[_0x30b622(0x1b2)](_0x30b622(0x1d8))['run'](_0x14429f?0x2:0x3,bgTaskId);}function getVersionFromDb(){const _0x185170=_0x54fd4a;let _0x24e6cc=dbConfigTable['findByTitle'](dbOther,_0x185170(0x1bd));if(_0x24e6cc)try{return _0x24e6cc=JSON[_0x185170(0x1bb)](_0x24e6cc[_0x185170(0x1c5)]),_0x24e6cc;}catch(_0x67ca32){return console['log'](_0x185170(0x1d3),_0x67ca32),'';}else return'';}updateUtil[_0x54fd4a(0x1c8)]=getVersionFromDb;function setVersionInfoToDb(){const _0x4e8826=_0x54fd4a;let _0x12ae35={'title':_0x4e8826(0x1bd),'value':JSON[_0x4e8826(0x1ca)](versionInfo)};dbConfigTable['create'](dbOther,_0x12ae35);}updateUtil[_0x54fd4a(0x1bc)]=function(){const _0x5be50a=_0x54fd4a;try{versionInfo=getVersionFromDb();if(!versionInfo)return;if(versionInfo[_0x5be50a(0x1b9)]&&versionInfo[_0x5be50a(0x1b9)]!=_0x5be50a(0x1b3))return;saveStatus(_0x5be50a(0x1ac)),autoUpdater[_0x5be50a(0x1ad)]=log,autoUpdater['setFeedURL'](versionInfo[_0x5be50a(0x1cf)]),autoUpdater[_0x5be50a(0x1c7)]()[_0x5be50a(0x1a9)](_0x253c0c=>{const _0x2fa06d=_0x5be50a;saveStatus(_0x2fa06d(0x1b3),![]);}),autoUpdater['on'](_0x5be50a(0x1d3),_0x8e73b1=>{saveStatus('done',![]);}),autoUpdater['on'](_0x5be50a(0x1d4),()=>{}),autoUpdater['on'](_0x5be50a(0x1bf),()=>{const _0x3f9a86=_0x5be50a;let _0x150ad6=dbOther[_0x3f9a86(0x1b2)](_0x3f9a86(0x1d9))[_0x3f9a86(0x1aa)]('PACKAGE_UPDATE');bgTaskId=_0x150ad6['lastInsertRowid'],dbOther['prepare']('UPDATE\x20bg_task\x20SET\x20task_state=1\x20where\x20id='+bgTaskId)[_0x3f9a86(0x1aa)]();}),autoUpdater['on'](_0x5be50a(0x1ae),()=>{const _0x29f034=_0x5be50a;saveStatus(_0x29f034(0x1b3),!![]);}),autoUpdater['on'](_0x5be50a(0x1b7),_0x6c5ab2=>{const _0xb59383=_0x5be50a;saveStatus('downloading'),bgTaskId&&dbOther[_0xb59383(0x1b2)](_0xb59383(0x1c6))[_0xb59383(0x1aa)](_0x6c5ab2[_0xb59383(0x1c1)],0x64,bgTaskId);}),autoUpdater['on'](_0x5be50a(0x1a8),()=>{const _0x214e1f=_0x5be50a;saveStatus(_0x214e1f(0x1b3),!![]),os[_0x214e1f(0x1b0)]()==_0x214e1f(0x1c2)?setTimeout(()=>{const _0x4468ab=_0x214e1f;if(app)app[_0x4468ab(0x1d2)](_0x4468ab(0x1c9));autoUpdater[_0x4468ab(0x1cb)]();if(app)app[_0x4468ab(0x1ce)]();},0x1f40):setTimeout(()=>{const _0x4c2da7=_0x214e1f;autoUpdater[_0x4c2da7(0x1cb)]();},0xbb8);});}catch(_0xc39e6f){console['log'](_0xc39e6f);}},module[_0x54fd4a(0x1af)]=updateUtil;