const _0xd906f5=_0x1bea;(function(_0x122c34,_0x37ed7a){const _0x4b627a=_0x1bea,_0x3ca6fa=_0x122c34();while(!![]){try{const _0x467224=parseInt(_0x4b627a(0xd6))/0x1*(-parseInt(_0x4b627a(0xcf))/0x2)+-parseInt(_0x4b627a(0xc8))/0x3*(parseInt(_0x4b627a(0xd5))/0x4)+-parseInt(_0x4b627a(0xc2))/0x5*(parseInt(_0x4b627a(0xb4))/0x6)+parseInt(_0x4b627a(0xc6))/0x7*(-parseInt(_0x4b627a(0xb8))/0x8)+parseInt(_0x4b627a(0xb5))/0x9*(-parseInt(_0x4b627a(0xbd))/0xa)+-parseInt(_0x4b627a(0xdb))/0xb+parseInt(_0x4b627a(0xb6))/0xc;if(_0x467224===_0x37ed7a)break;else _0x3ca6fa['push'](_0x3ca6fa['shift']());}catch(_0x49cc75){_0x3ca6fa['push'](_0x3ca6fa['shift']());}}}(_0x4f3b,0xe1edb));function _0x4f3b(){const _0x4db8d7=['album','SELECT\x20id,filename,artist,album,title\x20FROM\x20file_index_music\x20WHERE\x20filename_fl\x20is\x20null','startsWith','extname','130rcURju','iconv-lite','prepare','title','14qVoaiA','test','159UVmuPA','existsSync','utf','log','run','toUpperCase','../db/dbMusicIndexTable','454502juIVai','.jpg','file_cover_path','includes','toLowerCase','updateByFiled','34348oTprlt','3igUdOs','transStringToUtf8','.png','join','length','1533741QeCkbB','filename','artist','exports','283842THIhzI','5152428TOpHSo','73230552veQhpi','更新file_cover_path','3813560kdJrua','encoding','replace','path','ascii','30VoEPGy'];_0x4f3b=function(){return _0x4db8d7;};return _0x4f3b();}let musicUtil={},fs=require('fs'),path=require(_0xd906f5(0xbb)),dbMusicIndexTable=require(_0xd906f5(0xce)),jschardet=require('jschardet'),iconv=require(_0xd906f5(0xc3)),pinyin=require('node-pinyin'),letterList=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];function _0x1bea(_0x28dcce,_0x1761dd){const _0x4f3b4d=_0x4f3b();return _0x1bea=function(_0x1bea20,_0x9e8de1){_0x1bea20=_0x1bea20-0xb2;let _0x252810=_0x4f3b4d[_0x1bea20];return _0x252810;},_0x1bea(_0x28dcce,_0x1761dd);}musicUtil['getMusicSameNameCover']=function(_0x1a41e2,_0x4aa4be){const _0x17db7d=_0xd906f5;try{let _0x478c5c=_0x4aa4be[_0x17db7d(0xdc)][_0x17db7d(0xba)](path[_0x17db7d(0xc1)](_0x4aa4be[_0x17db7d(0xdc)]),''),_0x1f8654=path['join'](_0x4aa4be['path'],_0x478c5c+'.jpeg'),_0x160c8e=path[_0x17db7d(0xd9)](_0x4aa4be[_0x17db7d(0xbb)],_0x478c5c+_0x17db7d(0xd0)),_0x38d126=path[_0x17db7d(0xd9)](_0x4aa4be[_0x17db7d(0xbb)],_0x478c5c+_0x17db7d(0xd8)),_0x3db66c='';if(fs[_0x17db7d(0xc9)](_0x38d126))_0x3db66c=_0x38d126;else{if(fs[_0x17db7d(0xc9)](_0x1f8654))_0x3db66c=_0x1f8654;else fs[_0x17db7d(0xc9)](_0x160c8e)&&(_0x3db66c=_0x160c8e);}return _0x1a41e2&&_0x3db66c&&_0x4aa4be['id']&&(_0x3db66c!=_0x4aa4be[_0x17db7d(0xd1)]&&(console[_0x17db7d(0xcb)](_0x17db7d(0xb7)),dbMusicIndexTable[_0x17db7d(0xd4)](_0x1a41e2,_0x4aa4be['id'],_0x17db7d(0xd1),_0x3db66c))),_0x3db66c;}catch(_0x33f6a0){return console[_0x17db7d(0xcb)](_0x33f6a0),'';}},musicUtil[_0xd906f5(0xd7)]=function(_0x12da34){const _0x2de0ef=_0xd906f5;if(!_0x12da34)return _0x12da34;try{let _0x462138=jschardet['detect'](_0x12da34);if(_0x462138&&_0x462138['encoding']&&!_0x462138[_0x2de0ef(0xb9)][_0x2de0ef(0xd3)]()[_0x2de0ef(0xc0)](_0x2de0ef(0xca))&&!_0x462138[_0x2de0ef(0xb9)][_0x2de0ef(0xd3)]()['startsWith'](_0x2de0ef(0xbc))){let _0x2cc045=iconv['decode'](_0x12da34,_0x462138['encoding']);return _0x2cc045;}else return _0x12da34;}catch(_0x100dcb){return console[_0x2de0ef(0xcb)](_0x100dcb),_0x12da34;}},musicUtil['dealFirstLetterAll']=function(_0x45d575){const _0x2364d2=_0xd906f5;let _0x4d0b82=_0x2364d2(0xbf),_0x4273c4=_0x45d575[_0x2364d2(0xc4)](_0x4d0b82)['all']();for(let _0x1891eb in _0x4273c4){musicUtil['dealFirstLetterSingle'](_0x45d575,_0x4273c4[_0x1891eb]);}};function isChinese(_0x2368bd){const _0x4a1215=_0xd906f5;var _0x548005=/[^\\u4e00-\\u9fa5]/;return _0x548005[_0x4a1215(0xc7)](_0x2368bd);}musicUtil['dealFirstLetterSingle']=function(_0x52517f,_0x4ff2ee){const _0xad529b=_0xd906f5;function _0x320a73(_0x32516b){const _0x2a3c1d=_0x1bea;if(_0x32516b&&_0x32516b[_0x2a3c1d(0xda)]>0x0){let _0xbdd42a=_0x32516b[0x0];if(letterList[_0x2a3c1d(0xd2)](_0xbdd42a))return _0xbdd42a;else{if(isChinese(_0xbdd42a)){let _0x4003ba=pinyin(_0xbdd42a,{'style':'initials'});return _0x4003ba&&_0x4003ba['length']>0x0&&_0x4003ba[0x0]['length']>0x0&&_0x4003ba[0x0][0x0][_0x2a3c1d(0xda)]>0x0?_0x4003ba[0x0][0x0][0x0]:'#';}else return'#';}}else return'#';}let _0x4cda2d=_0x320a73(_0x4ff2ee['filename']?_0x4ff2ee['filename'][_0xad529b(0xcd)]():'')['toUpperCase'](),_0x44e54f=_0x320a73(_0x4ff2ee['artist']?_0x4ff2ee[_0xad529b(0xb2)][_0xad529b(0xcd)]():'')['toUpperCase'](),_0x4bad98=_0x320a73(_0x4ff2ee[_0xad529b(0xbe)]?_0x4ff2ee['album'][_0xad529b(0xcd)]():'')[_0xad529b(0xcd)](),_0x262bff=_0x320a73(_0x4ff2ee[_0xad529b(0xc5)]?_0x4ff2ee['title'][_0xad529b(0xcd)]():'')[_0xad529b(0xcd)]();_0x52517f[_0xad529b(0xc4)]('UPDATE\x20file_index_music\x20set\x20filename_fl=?,artist_fl=?,album_fl=?,title_fl=?\x20where\x20id=?')[_0xad529b(0xcc)](_0x4cda2d,_0x44e54f,_0x4bad98,_0x262bff,_0x4ff2ee['id']);},module[_0xd906f5(0xb3)]=musicUtil;