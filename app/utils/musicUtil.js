const _0x3a02c8=_0xf662;function _0x4d6e(){const _0x20bb8f=['album','startsWith','includes','node-pinyin','ascii','17180966bZATdq','dealFirstLetterSingle','log','97614sQuJhF','updateByFiled','length','703662omZsYg','prepare','764qIVPpM','.jpeg','filename','4184saPeKT','path','toUpperCase','exports','encoding','existsSync','14oPDmOL','file_cover_path','join','468660WKlQCi','transStringToUtf8','title','run','19430CFJYAj','decode','UPDATE\x20file_index_music\x20set\x20filename_fl=?,artist_fl=?,album_fl=?,title_fl=?\x20where\x20id=?','toLowerCase','detect','363IeAlNZ','72LlTWFq','../db/dbMusicIndexTable','1823418norMUH','更新file_cover_path'];_0x4d6e=function(){return _0x20bb8f;};return _0x4d6e();}(function(_0x75d37,_0x4b6d2b){const _0x5f1a73=_0xf662,_0x5dd4ce=_0x75d37();while(!![]){try{const _0x455288=parseInt(_0x5f1a73(0x1eb))/0x1+-parseInt(_0x5f1a73(0x1f0))/0x2*(parseInt(_0x5f1a73(0x202))/0x3)+-parseInt(_0x5f1a73(0x1ed))/0x4*(parseInt(_0x5f1a73(0x1fd))/0x5)+parseInt(_0x5f1a73(0x205))/0x6*(-parseInt(_0x5f1a73(0x1f6))/0x7)+parseInt(_0x5f1a73(0x203))/0x8*(-parseInt(_0x5f1a73(0x1e8))/0x9)+-parseInt(_0x5f1a73(0x1f9))/0xa+parseInt(_0x5f1a73(0x1e5))/0xb;if(_0x455288===_0x4b6d2b)break;else _0x5dd4ce['push'](_0x5dd4ce['shift']());}catch(_0x29e78f){_0x5dd4ce['push'](_0x5dd4ce['shift']());}}}(_0x4d6e,0x7e724));function _0xf662(_0x53b1e4,_0x239282){const _0x4d6e2a=_0x4d6e();return _0xf662=function(_0xf66201,_0x43101f){_0xf66201=_0xf66201-0x1e1;let _0x259541=_0x4d6e2a[_0xf66201];return _0x259541;},_0xf662(_0x53b1e4,_0x239282);}let musicUtil={},fs=require('fs'),path=require(_0x3a02c8(0x1f1)),dbMusicIndexTable=require(_0x3a02c8(0x204)),jschardet=require('jschardet'),iconv=require('iconv-lite'),pinyin=require(_0x3a02c8(0x1e3)),letterList=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];musicUtil['getMusicSameNameCover']=function(_0x2682a0,_0x5426ca){const _0x301e24=_0x3a02c8;try{let _0x3a939a=_0x5426ca[_0x301e24(0x1ef)]['replace'](path['extname'](_0x5426ca['filename']),''),_0x1d4232=path['join'](_0x5426ca[_0x301e24(0x1f1)],_0x3a939a+_0x301e24(0x1ee)),_0x566367=path[_0x301e24(0x1f8)](_0x5426ca[_0x301e24(0x1f1)],_0x3a939a+'.jpg'),_0x986263=path[_0x301e24(0x1f8)](_0x5426ca['path'],_0x3a939a+'.png'),_0x4447c9='';if(fs[_0x301e24(0x1f5)](_0x986263))_0x4447c9=_0x986263;else{if(fs[_0x301e24(0x1f5)](_0x1d4232))_0x4447c9=_0x1d4232;else fs['existsSync'](_0x566367)&&(_0x4447c9=_0x566367);}return _0x2682a0&&_0x4447c9&&_0x5426ca['id']&&(_0x4447c9!=_0x5426ca['file_cover_path']&&(console['log'](_0x301e24(0x206)),dbMusicIndexTable[_0x301e24(0x1e9)](_0x2682a0,_0x5426ca['id'],_0x301e24(0x1f7),_0x4447c9))),_0x4447c9;}catch(_0x153c1e){return console[_0x301e24(0x1e7)](_0x153c1e),'';}},musicUtil[_0x3a02c8(0x1fa)]=function(_0x24b6c1){const _0x1eabfe=_0x3a02c8;if(!_0x24b6c1)return _0x24b6c1;try{let _0x9b7f0b=jschardet[_0x1eabfe(0x201)](_0x24b6c1);if(_0x9b7f0b&&_0x9b7f0b[_0x1eabfe(0x1f4)]&&!_0x9b7f0b[_0x1eabfe(0x1f4)][_0x1eabfe(0x200)]()[_0x1eabfe(0x1e1)]('utf')&&!_0x9b7f0b[_0x1eabfe(0x1f4)][_0x1eabfe(0x200)]()[_0x1eabfe(0x1e1)](_0x1eabfe(0x1e4))){let _0x3fed64=iconv[_0x1eabfe(0x1fe)](_0x24b6c1,_0x9b7f0b[_0x1eabfe(0x1f4)]);return _0x3fed64;}else return _0x24b6c1;}catch(_0x76b8aa){return console['log'](_0x76b8aa),_0x24b6c1;}},musicUtil['dealFirstLetterAll']=function(_0x92b8d4){const _0x5ba443=_0x3a02c8;let _0x5de3d2='SELECT\x20id,filename,artist,album,title\x20FROM\x20file_index_music\x20WHERE\x20filename_fl\x20is\x20null',_0x125f74=_0x92b8d4[_0x5ba443(0x1ec)](_0x5de3d2)['all']();for(let _0x2e91f8 in _0x125f74){musicUtil[_0x5ba443(0x1e6)](_0x92b8d4,_0x125f74[_0x2e91f8]);}};function isChinese(_0x6060c6){var _0x2bf132=/[^\\u4e00-\\u9fa5]/;return _0x2bf132['test'](_0x6060c6);}musicUtil['dealFirstLetterSingle']=function(_0xa28a19,_0x36bc0c){const _0xcca864=_0x3a02c8;function _0x34c0bb(_0x46159f){const _0x4d7eb1=_0xf662;if(_0x46159f&&_0x46159f[_0x4d7eb1(0x1ea)]>0x0){let _0x41bc1a=_0x46159f[0x0];if(letterList[_0x4d7eb1(0x1e2)](_0x41bc1a))return _0x41bc1a;else{if(isChinese(_0x41bc1a)){let _0x384e7e=pinyin(_0x41bc1a,{'style':'initials'});return _0x384e7e&&_0x384e7e['length']>0x0&&_0x384e7e[0x0][_0x4d7eb1(0x1ea)]>0x0&&_0x384e7e[0x0][0x0][_0x4d7eb1(0x1ea)]>0x0?_0x384e7e[0x0][0x0][0x0]:'#';}else return'#';}}else return'#';}let _0x1bcfdc=_0x34c0bb(_0x36bc0c['filename']?_0x36bc0c[_0xcca864(0x1ef)][_0xcca864(0x1f2)]():'')['toUpperCase'](),_0xa2d872=_0x34c0bb(_0x36bc0c['artist']?_0x36bc0c['artist'][_0xcca864(0x1f2)]():'')[_0xcca864(0x1f2)](),_0x364bbf=_0x34c0bb(_0x36bc0c[_0xcca864(0x207)]?_0x36bc0c['album'][_0xcca864(0x1f2)]():'')['toUpperCase'](),_0xac252=_0x34c0bb(_0x36bc0c[_0xcca864(0x1fb)]?_0x36bc0c[_0xcca864(0x1fb)][_0xcca864(0x1f2)]():'')['toUpperCase']();_0xa28a19[_0xcca864(0x1ec)](_0xcca864(0x1ff))[_0xcca864(0x1fc)](_0x1bcfdc,_0xa2d872,_0x364bbf,_0xac252,_0x36bc0c['id']);},module[_0x3a02c8(0x1f3)]=musicUtil;