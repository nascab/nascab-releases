const _0x38e485=_0x1dcf;function _0x386b(){const _0x16e1f=['path','../db/dbMusicIndexTable','album','length','104655zXMdpV','startsWith','.png','file_cover_path','jschardet','iconv-lite','1007748TYnYsH','title','dealFirstLetterAll','42wpVcoy','detect','dealFirstLetterSingle','existsSync','2234052UWsjHF','join','decode','includes','filename','replace','593766gckMlz','all','201551RGpXUk','10707WCsgjD','ascii','utf','encoding','initials','prepare','log','test','toUpperCase','740200tXNwVJ','4RitvWz','UPDATE\x20file_index_music\x20set\x20filename_fl=?,artist_fl=?,album_fl=?,title_fl=?\x20where\x20id=?','artist'];_0x386b=function(){return _0x16e1f;};return _0x386b();}(function(_0x362dd3,_0x29672d){const _0x510954=_0x1dcf,_0x28d3d7=_0x362dd3();while(!![]){try{const _0x30a67f=-parseInt(_0x510954(0xde))/0x1*(parseInt(_0x510954(0xf8))/0x2)+-parseInt(_0x510954(0xdb))/0x3*(parseInt(_0x510954(0xe8))/0x4)+parseInt(_0x510954(0xef))/0x5+parseInt(_0x510954(0xf5))/0x6+parseInt(_0x510954(0xdd))/0x7+parseInt(_0x510954(0xe7))/0x8+parseInt(_0x510954(0xfc))/0x9;if(_0x30a67f===_0x29672d)break;else _0x28d3d7['push'](_0x28d3d7['shift']());}catch(_0xdf0281){_0x28d3d7['push'](_0x28d3d7['shift']());}}}(_0x386b,0x211f2));let musicUtil={},fs=require('fs'),path=require(_0x38e485(0xeb)),dbMusicIndexTable=require(_0x38e485(0xec)),jschardet=require(_0x38e485(0xf3)),iconv=require(_0x38e485(0xf4)),pinyin=require('node-pinyin'),letterList=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];function _0x1dcf(_0xbf1aee,_0x129fe3){const _0x386b0b=_0x386b();return _0x1dcf=function(_0x1dcf0e,_0x5e56f1){_0x1dcf0e=_0x1dcf0e-0xd6;let _0x561ff9=_0x386b0b[_0x1dcf0e];return _0x561ff9;},_0x1dcf(_0xbf1aee,_0x129fe3);}musicUtil['getMusicSameNameCover']=function(_0x26ce32,_0x431f58){const _0x23bfd6=_0x38e485;try{let _0x47dbf7=_0x431f58['filename'][_0x23bfd6(0xda)](path['extname'](_0x431f58[_0x23bfd6(0xd9)]),''),_0xb2dab1=path[_0x23bfd6(0xd6)](_0x431f58['path'],_0x47dbf7+'.jpeg'),_0x1251ea=path['join'](_0x431f58[_0x23bfd6(0xeb)],_0x47dbf7+'.jpg'),_0x508287=path[_0x23bfd6(0xd6)](_0x431f58['path'],_0x47dbf7+_0x23bfd6(0xf1)),_0xdfe45a='';if(fs['existsSync'](_0x508287))_0xdfe45a=_0x508287;else{if(fs[_0x23bfd6(0xfb)](_0xb2dab1))_0xdfe45a=_0xb2dab1;else fs[_0x23bfd6(0xfb)](_0x1251ea)&&(_0xdfe45a=_0x1251ea);}return _0x26ce32&&_0xdfe45a&&_0x431f58['id']&&(_0xdfe45a!=_0x431f58[_0x23bfd6(0xf2)]&&(console[_0x23bfd6(0xe4)]('更新file_cover_path'),dbMusicIndexTable['updateByFiled'](_0x26ce32,_0x431f58['id'],'file_cover_path',_0xdfe45a))),_0xdfe45a;}catch(_0x98b2b5){return console[_0x23bfd6(0xe4)](_0x98b2b5),'';}},musicUtil['transStringToUtf8']=function(_0x1b5e9c){const _0x26e6ee=_0x38e485;if(!_0x1b5e9c)return _0x1b5e9c;try{let _0x2250ee=jschardet[_0x26e6ee(0xf9)](_0x1b5e9c);if(_0x2250ee&&_0x2250ee[_0x26e6ee(0xe1)]&&!_0x2250ee[_0x26e6ee(0xe1)]['toLowerCase']()[_0x26e6ee(0xf0)](_0x26e6ee(0xe0))&&!_0x2250ee[_0x26e6ee(0xe1)]['toLowerCase']()[_0x26e6ee(0xf0)](_0x26e6ee(0xdf))){let _0x16355a=iconv[_0x26e6ee(0xd7)](_0x1b5e9c,_0x2250ee[_0x26e6ee(0xe1)]);return _0x16355a;}else return _0x1b5e9c;}catch(_0x5566fa){return console[_0x26e6ee(0xe4)](_0x5566fa),_0x1b5e9c;}},musicUtil[_0x38e485(0xf7)]=function(_0x57f2d9){const _0x331b4c=_0x38e485;let _0x183bb2='SELECT\x20id,filename,artist,album,title\x20FROM\x20file_index_music\x20WHERE\x20filename_fl\x20is\x20null',_0x5514b1=_0x57f2d9[_0x331b4c(0xe3)](_0x183bb2)[_0x331b4c(0xdc)]();for(let _0x56282b in _0x5514b1){musicUtil[_0x331b4c(0xfa)](_0x57f2d9,_0x5514b1[_0x56282b]);}};function isChinese(_0x3994d6){const _0x42ed39=_0x38e485;var _0x5e4add=/[^\\u4e00-\\u9fa5]/;return _0x5e4add[_0x42ed39(0xe5)](_0x3994d6);}musicUtil[_0x38e485(0xfa)]=function(_0xd01114,_0x41a767){const _0xd9e7e9=_0x38e485;function _0x2a63e6(_0x2533df){const _0x3f3979=_0x1dcf;if(_0x2533df&&_0x2533df[_0x3f3979(0xee)]>0x0){let _0x4509ea=_0x2533df[0x0];if(letterList[_0x3f3979(0xd8)](_0x4509ea))return _0x4509ea;else{if(isChinese(_0x4509ea)){let _0x2a5fa4=pinyin(_0x4509ea,{'style':_0x3f3979(0xe2)});return _0x2a5fa4&&_0x2a5fa4[_0x3f3979(0xee)]>0x0&&_0x2a5fa4[0x0][_0x3f3979(0xee)]>0x0&&_0x2a5fa4[0x0][0x0][_0x3f3979(0xee)]>0x0?_0x2a5fa4[0x0][0x0][0x0]:'#';}else return'#';}}else return'#';}let _0x1d91a5=_0x2a63e6(_0x41a767[_0xd9e7e9(0xd9)]?_0x41a767[_0xd9e7e9(0xd9)][_0xd9e7e9(0xe6)]():'')['toUpperCase'](),_0x4fadc1=_0x2a63e6(_0x41a767['artist']?_0x41a767[_0xd9e7e9(0xea)][_0xd9e7e9(0xe6)]():'')[_0xd9e7e9(0xe6)](),_0x18a201=_0x2a63e6(_0x41a767[_0xd9e7e9(0xed)]?_0x41a767['album'][_0xd9e7e9(0xe6)]():'')[_0xd9e7e9(0xe6)](),_0x615c67=_0x2a63e6(_0x41a767[_0xd9e7e9(0xf6)]?_0x41a767[_0xd9e7e9(0xf6)][_0xd9e7e9(0xe6)]():'')[_0xd9e7e9(0xe6)]();_0xd01114[_0xd9e7e9(0xe3)](_0xd9e7e9(0xe9))['run'](_0x1d91a5,_0x4fadc1,_0x18a201,_0x615c67,_0x41a767['id']);},module['exports']=musicUtil;