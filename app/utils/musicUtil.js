const _0x18c882=_0x5b91;function _0x552e(){const _0x345869=['file_cover_path','4534530mqjeXW','dealFirstLetterAll','existsSync','1210741OtZkWS','test','jschardet','toLowerCase','1109308gsrpCE','all','.jpg','title','13840CogjIk','path','detect','transStringToUtf8','run','toUpperCase','3558qdPXLo','ascii','log','album','length','artist','15366130uPRgYh','dealFirstLetterSingle','filename','getMusicSameNameCover','../db/dbMusicIndexTable','startsWith','includes','exports','3gVNZLG','iconv-lite','11328872afKAXe','join','SELECT\x20id,filename,artist,album,title\x20FROM\x20file_index_music\x20WHERE\x20filename_fl\x20is\x20null','node-pinyin','encoding','9cVazem','updateByFiled','extname','1282308QbdPQQ'];_0x552e=function(){return _0x345869;};return _0x552e();}(function(_0xcdc1ed,_0x3c89fb){const _0x53e42c=_0x5b91,_0x34b22a=_0xcdc1ed();while(!![]){try{const _0x99d867=parseInt(_0x53e42c(0x10e))/0x1+-parseInt(_0x53e42c(0x109))/0x2*(-parseInt(_0x53e42c(0xff))/0x3)+-parseInt(_0x53e42c(0x112))/0x4+-parseInt(_0x53e42c(0x116))/0x5*(-parseInt(_0x53e42c(0x11c))/0x6)+parseInt(_0x53e42c(0x10b))/0x7+parseInt(_0x53e42c(0x101))/0x8*(-parseInt(_0x53e42c(0x106))/0x9)+-parseInt(_0x53e42c(0xf7))/0xa;if(_0x99d867===_0x3c89fb)break;else _0x34b22a['push'](_0x34b22a['shift']());}catch(_0x3f3893){_0x34b22a['push'](_0x34b22a['shift']());}}}(_0x552e,0xde6d4));function _0x5b91(_0x38e462,_0x320da0){const _0x552e39=_0x552e();return _0x5b91=function(_0x5b9138,_0x5c886c){_0x5b9138=_0x5b9138-0xf4;let _0x40c98f=_0x552e39[_0x5b9138];return _0x40c98f;},_0x5b91(_0x38e462,_0x320da0);}let musicUtil={},fs=require('fs'),path=require('path'),dbMusicIndexTable=require(_0x18c882(0xfb)),jschardet=require(_0x18c882(0x110)),iconv=require(_0x18c882(0x100)),pinyin=require(_0x18c882(0x104)),letterList=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];musicUtil[_0x18c882(0xfa)]=function(_0x31d1ad,_0x968259){const _0xdbc59=_0x18c882;try{let _0x56a4ac=_0x968259[_0xdbc59(0xf9)]['replace'](path[_0xdbc59(0x108)](_0x968259[_0xdbc59(0xf9)]),''),_0x1c34f8=path[_0xdbc59(0x102)](_0x968259[_0xdbc59(0x117)],_0x56a4ac+'.jpeg'),_0x330a43=path['join'](_0x968259[_0xdbc59(0x117)],_0x56a4ac+_0xdbc59(0x114)),_0x2ed171=path[_0xdbc59(0x102)](_0x968259['path'],_0x56a4ac+'.png'),_0x4eb0c0='';if(fs[_0xdbc59(0x10d)](_0x2ed171))_0x4eb0c0=_0x2ed171;else{if(fs[_0xdbc59(0x10d)](_0x1c34f8))_0x4eb0c0=_0x1c34f8;else fs[_0xdbc59(0x10d)](_0x330a43)&&(_0x4eb0c0=_0x330a43);}return _0x31d1ad&&_0x4eb0c0&&_0x968259['id']&&(_0x4eb0c0!=_0x968259['file_cover_path']&&(console[_0xdbc59(0x11e)]('更新file_cover_path'),dbMusicIndexTable[_0xdbc59(0x107)](_0x31d1ad,_0x968259['id'],_0xdbc59(0x10a),_0x4eb0c0))),_0x4eb0c0;}catch(_0x57f57d){return console[_0xdbc59(0x11e)](_0x57f57d),'';}},musicUtil[_0x18c882(0x119)]=function(_0x539d7c){const _0x2c54b2=_0x18c882;if(!_0x539d7c)return _0x539d7c;try{let _0x4b92f0=jschardet[_0x2c54b2(0x118)](_0x539d7c);if(_0x4b92f0&&_0x4b92f0[_0x2c54b2(0x105)]&&!_0x4b92f0[_0x2c54b2(0x105)][_0x2c54b2(0x111)]()[_0x2c54b2(0xfc)]('utf')&&!_0x4b92f0['encoding'][_0x2c54b2(0x111)]()[_0x2c54b2(0xfc)](_0x2c54b2(0x11d))){let _0x5287c6=iconv['decode'](_0x539d7c,_0x4b92f0[_0x2c54b2(0x105)]);return _0x5287c6;}else return _0x539d7c;}catch(_0x10443b){return console[_0x2c54b2(0x11e)](_0x10443b),_0x539d7c;}},musicUtil[_0x18c882(0x10c)]=function(_0x2111a){const _0x2cdd5c=_0x18c882;let _0x175e71=_0x2cdd5c(0x103),_0x195541=_0x2111a['prepare'](_0x175e71)[_0x2cdd5c(0x113)]();for(let _0x14500e in _0x195541){musicUtil[_0x2cdd5c(0xf8)](_0x2111a,_0x195541[_0x14500e]);}};function isChinese(_0x31e60d){const _0x1c7294=_0x18c882;var _0xbee23=/[^\\u4e00-\\u9fa5]/;return _0xbee23[_0x1c7294(0x10f)](_0x31e60d);}musicUtil['dealFirstLetterSingle']=function(_0x156fae,_0x276a74){const _0x57171f=_0x18c882;function _0x2fd040(_0x384b3f){const _0x3575e4=_0x5b91;if(_0x384b3f&&_0x384b3f[_0x3575e4(0xf5)]>0x0){let _0x3f9be2=_0x384b3f[0x0];if(letterList[_0x3575e4(0xfd)](_0x3f9be2))return _0x3f9be2;else{if(isChinese(_0x3f9be2)){let _0x1e5a09=pinyin(_0x3f9be2,{'style':'initials'});return _0x1e5a09&&_0x1e5a09[_0x3575e4(0xf5)]>0x0&&_0x1e5a09[0x0][_0x3575e4(0xf5)]>0x0&&_0x1e5a09[0x0][0x0][_0x3575e4(0xf5)]>0x0?_0x1e5a09[0x0][0x0][0x0]:'#';}else return'#';}}else return'#';}let _0xbdf3f6=_0x2fd040(_0x276a74[_0x57171f(0xf9)]?_0x276a74[_0x57171f(0xf9)][_0x57171f(0x11b)]():'')[_0x57171f(0x11b)](),_0x345516=_0x2fd040(_0x276a74[_0x57171f(0xf6)]?_0x276a74[_0x57171f(0xf6)][_0x57171f(0x11b)]():'')[_0x57171f(0x11b)](),_0x4bd275=_0x2fd040(_0x276a74['album']?_0x276a74[_0x57171f(0xf4)]['toUpperCase']():'')[_0x57171f(0x11b)](),_0x4bcc3b=_0x2fd040(_0x276a74['title']?_0x276a74[_0x57171f(0x115)][_0x57171f(0x11b)]():'')[_0x57171f(0x11b)]();_0x156fae['prepare']('UPDATE\x20file_index_music\x20set\x20filename_fl=?,artist_fl=?,album_fl=?,title_fl=?\x20where\x20id=?')[_0x57171f(0x11a)](_0xbdf3f6,_0x345516,_0x4bd275,_0x4bcc3b,_0x276a74['id']);},module[_0x18c882(0xfe)]=musicUtil;