const _0x2b8c28=_0x37a7;(function(_0x25fb46,_0x3668db){const _0x49946=_0x37a7,_0x18e70e=_0x25fb46();while(!![]){try{const _0x20f1e8=parseInt(_0x49946(0xa5))/0x1+-parseInt(_0x49946(0xb7))/0x2+-parseInt(_0x49946(0xa1))/0x3+-parseInt(_0x49946(0x9e))/0x4+-parseInt(_0x49946(0x8c))/0x5*(parseInt(_0x49946(0x73))/0x6)+-parseInt(_0x49946(0xa7))/0x7+parseInt(_0x49946(0xc0))/0x8*(parseInt(_0x49946(0xb2))/0x9);if(_0x20f1e8===_0x3668db)break;else _0x18e70e['push'](_0x18e70e['shift']());}catch(_0x84cb72){_0x18e70e['push'](_0x18e70e['shift']());}}}(_0x2e8b,0x19191));let fs=require('fs'),path=require(_0x2b8c28(0x6f)),nfoUtil={},movieSeasonUtil=require(_0x2b8c28(0x6d));const {XMLParser,XMLBuilder}=require(_0x2b8c28(0x89));let movieInfoTmdbApi=require(_0x2b8c28(0xc3));function _0x2e8b(){const _0x16ebd0=['../utils/movieInfoTmdbApi','actor','basename','existsSync','stat','release_date','saveBookNfo','storyline','creatorOriginal','cover_url','exports','introduction','regions','tvshow','../utils/movieSeasonUtil','length','path','IMAGE_URL','name','country','60jaHUXT','creator','nfoFullPath','directors','parse','log','original_name','year','actors','movie_director_array','artist','genres','.nfo','isbn','season','readFileSync','readFile','book','dirname','actorsOriginal','writeFile','thumb','fast-xml-parser','substring','getSeasonNumber','38355tHiJWK','\x20/\x20','genre','tvshow.nfo','publisher','language','plot','originalname','tagline','nfo缓存失败','title','guestactors','split','filename','vote_average','push','tag','biography','213444IbNGMn','restoreBookNfo','rating','80391TpvTZa','season.nfo','profile_path','sortname','77359zuThZx','customrating','990325mYVQcz','languages','movie_name','tmdbid','guestActorsOriginal','parseNfo','publish_date','movie_actor_array','releasedate','build','showtitle','63YpGBVD','enddate','director','nfoInfo.vote_average','directorsOriginal','342594ohnAEF','join','episode','originaltitle','movie_imdb_id','movie','nfo读取失败','localtitle','is_tvplay','565808DOcjde','episodedetails','saveNfoFile'];_0x2e8b=function(){return _0x16ebd0;};return _0x2e8b();}function _0x37a7(_0x14b2bf,_0x22e07e){const _0x2e8bad=_0x2e8b();return _0x37a7=function(_0x37a7f4,_0x59110e){_0x37a7f4=_0x37a7f4-0x69;let _0x127d0a=_0x2e8bad[_0x37a7f4];return _0x127d0a;},_0x37a7(_0x14b2bf,_0x22e07e);}function doParse(_0x171a4e,_0x11bedb,_0x5e4344,_0xbf7b4){const _0x52771e=_0x2b8c28,_0x4e6cae=new XMLParser();function _0xbe8826(_0x3d893b,_0x1f6ac3){const _0x17fb82=_0x37a7;function _0x29c473(_0x5a66d9){const _0x766326=_0x37a7;if(_0x5a66d9[_0x766326(0x6e)]>0x0&&_0x5a66d9[0x0]instanceof Object){let _0x442617=[];for(let _0x510490 in _0x5a66d9){let _0x13065c=_0x5a66d9[_0x510490];_0x442617[_0x766326(0x9b)](_0x13065c[_0x766326(0x71)]||_0x13065c[_0x766326(0x96)]);}return _0x442617;}else return _0x5a66d9;}if(!_0x3d893b)return'';if(_0x3d893b instanceof Array){let _0x4872e2=_0x29c473(_0x3d893b);return _0x4872e2?_0x4872e2[_0x17fb82(0xb8)](_0x17fb82(0x8d)):'';}else{if(_0x3d893b instanceof Object){let _0x28cfc2=_0x29c473([_0x3d893b]);return _0x28cfc2?_0x28cfc2[_0x17fb82(0xb8)]('\x20/\x20'):'';}}return _0x3d893b;}try{_0x5e4344[_0x52771e(0x75)]=_0xbf7b4;let _0x4963a8=_0x4e6cae[_0x52771e(0x77)](fs[_0x52771e(0x82)](_0xbf7b4));_0x4963a8[_0x52771e(0xbc)]||_0x4963a8[_0x52771e(0xc1)]||_0x4963a8[_0x52771e(0x6c)]?(_0x4963a8=_0x4963a8[_0x52771e(0xbc)]||_0x4963a8[_0x52771e(0xc1)]||_0x4963a8[_0x52771e(0x6c)],_0x5e4344={..._0x5e4344,'movie_info_name':_0x4963a8['showtitle']||_0x4963a8['name']||_0x4963a8['title']||_0x4963a8[_0x52771e(0xba)]||_0x4963a8[_0x52771e(0xbe)]||'','movie_alias':_0x4963a8[_0x52771e(0xa4)]||'','movie_regions':_0xbe8826(_0x4963a8[_0x52771e(0x72)]),'movie_language':_0xbe8826(_0x4963a8[_0x52771e(0x91)]),'movie_imdb_id':_0x4963a8['imdbid']||'','movie_genres':_0xbe8826(_0x4963a8[_0x52771e(0x8e)]),'movie_release_date':_0x4963a8[_0x52771e(0xaf)]||'','movie_end_date':_0x4963a8[_0x52771e(0xb3)]||'','movie_douban_id':_0x4963a8['doubanid']||'','movie_storyline':_0x4963a8[_0x52771e(0x92)]||_0x4963a8[_0x52771e(0x9d)]||_0x4963a8['review']||'','movie_douban_score':_0x4963a8['douban_score']||_0x4963a8['rating']||_0x4963a8[_0x52771e(0xa6)]||0x0,'movie_year':_0x4963a8['year']||'','tagline':_0x4963a8['tagline']||'','movie_actor':_0xbe8826(_0x4963a8[_0x52771e(0xc4)]),'movie_creator':_0xbe8826(_0x4963a8['creator']),'movie_director':_0xbe8826(_0x4963a8['director']),'movie_tags':_0xbe8826(_0x4963a8[_0x52771e(0x9c)]),'season_number':_0x4963a8['season']||'','episode_number':_0x4963a8['episode']||''},_0x4963a8[_0x52771e(0xc4)]instanceof Array&&_0x4963a8[_0x52771e(0xc4)][_0x52771e(0x6e)]>0x0&&(_0x4963a8['actor'][0x0]instanceof Object&&(_0x5e4344[_0x52771e(0xae)]=_0x4963a8[_0x52771e(0xc4)])),_0x4963a8[_0x52771e(0xb4)]instanceof Array&&_0x4963a8[_0x52771e(0xb4)][_0x52771e(0x6e)]>0x0&&(_0x4963a8[_0x52771e(0xb4)][0x0]instanceof Object&&(_0x5e4344[_0x52771e(0x7c)]=_0x4963a8[_0x52771e(0xb4)])),_0x171a4e(_0x5e4344)):_0x11bedb();}catch(_0x261005){_0x11bedb(_0x261005);}}nfoUtil[_0x2b8c28(0xac)]=function(_0x57d6d2,_0x2279e1,_0x366c51){return new Promise((_0x39c01f,_0x500d26)=>{const _0x25764e=_0x37a7;let _0x36c9d2=_0x57d6d2[_0x25764e(0x99)];if(_0x2279e1){let {name:_0x224dbf}=path['parse'](_0x36c9d2);_0x36c9d2=_0x224dbf;}let _0x320960,_0x3f9d7d;if(_0x57d6d2[_0x25764e(0xbf)]==0x1&&!_0x366c51){_0x320960=path[_0x25764e(0xb8)](_0x57d6d2[_0x25764e(0x6f)],_0x25764e(0x8f)),_0x3f9d7d=fs[_0x25764e(0xc6)](_0x320960);let _0x227012=path[_0x25764e(0xc5)](_0x57d6d2[_0x25764e(0x6f)]),_0x5d132b=movieSeasonUtil[_0x25764e(0x8b)](_0x227012);_0x5d132b>0x0&&(_0x57d6d2['seasonNumber']=_0x5d132b,_0x320960=path[_0x25764e(0xb8)](_0x57d6d2[_0x25764e(0x6f)],_0x25764e(0xa2)),_0x3f9d7d=fs[_0x25764e(0xc6)](_0x320960),!_0x3f9d7d&&(_0x320960=path['join'](path[_0x25764e(0x85)](_0x57d6d2[_0x25764e(0x6f)]),'tvshow.nfo'),_0x3f9d7d=fs[_0x25764e(0xc6)](_0x320960)));}else _0x320960=path[_0x25764e(0xb8)](_0x57d6d2[_0x25764e(0x6f)],_0x36c9d2+_0x25764e(0x7f)),_0x3f9d7d=fs[_0x25764e(0xc6)](_0x320960);if(!_0x3f9d7d)return _0x500d26();doParse(_0x39c01f,_0x500d26,_0x57d6d2,_0x320960);});},nfoUtil['parseNfoTvSeries']=function(_0x1c97cc){return new Promise((_0x2c01af,_0x2d6599)=>{const _0x12432a=_0x37a7;let _0x9ded8b,_0x5915fa;if(_0x1c97cc[_0x12432a(0xbf)]==0x1){let _0x5a2ce3=path['basename'](_0x1c97cc[_0x12432a(0x6f)]),_0xed3daa=movieSeasonUtil['getSeasonNumber'](_0x5a2ce3);_0xed3daa>0x0&&(_0x9ded8b=path[_0x12432a(0xb8)](path[_0x12432a(0x85)](_0x1c97cc[_0x12432a(0x6f)]),_0x12432a(0x8f)),_0x5915fa=fs[_0x12432a(0xc6)](_0x9ded8b)),!_0x5915fa&&(_0x9ded8b=path[_0x12432a(0xb8)](_0x1c97cc['path'],'tvshow.nfo'),_0x5915fa=fs[_0x12432a(0xc6)](_0x9ded8b));}if(!_0x5915fa)return _0x2d6599();doParse(_0x2c01af,_0x2d6599,_0x1c97cc,_0x9ded8b);});},nfoUtil[_0x2b8c28(0xc2)]=function(_0xcbcdce,_0x3a1feb,_0x42ac76=_0x2b8c28(0xbc)){return new Promise((_0x2e38ac,_0x5e8887)=>{const _0x4768c0=_0x37a7;try{let _0x2d14ff={'title':_0xcbcdce[_0x4768c0(0xa9)]||'','name':_0xcbcdce['movie_name']||'','sortname':_0xcbcdce['movie_alias']||'','tmdbid':_0xcbcdce['tmdb_id']||'','imdbid':_0xcbcdce[_0x4768c0(0xbb)]||'','releasedate':_0xcbcdce[_0x4768c0(0xc8)]||'','enddate':_0xcbcdce[_0x4768c0(0xb3)]||'','biography':_0xcbcdce[_0x4768c0(0xca)]||'','year':_0xcbcdce[_0x4768c0(0x7a)]||''};_0x2d14ff[_0x4768c0(0x91)]=_0xcbcdce[_0x4768c0(0xa8)]?_0xcbcdce['languages'][_0x4768c0(0x98)]('/'):[],_0x2d14ff[_0x4768c0(0x72)]=_0xcbcdce['regions']?_0xcbcdce[_0x4768c0(0x6b)][_0x4768c0(0x98)]('/'):[],_0x2d14ff[_0x4768c0(0x8e)]=_0xcbcdce[_0x4768c0(0x7e)]?_0xcbcdce['genres'][_0x4768c0(0x98)]('/'):[];if(_0xcbcdce['actorsOriginal']&&_0xcbcdce[_0x4768c0(0x86)][_0x4768c0(0x6e)]>0x0){_0x2d14ff[_0x4768c0(0xc4)]=[];for(let _0x2a5fb8 of _0xcbcdce[_0x4768c0(0x86)]){let _0x50f5db={};_0x2a5fb8[_0x4768c0(0x71)]&&(_0x50f5db[_0x4768c0(0x71)]=_0x2a5fb8[_0x4768c0(0x71)]),_0x2a5fb8[_0x4768c0(0x79)]&&(_0x50f5db[_0x4768c0(0x93)]=_0x2a5fb8[_0x4768c0(0x79)]),_0x2a5fb8[_0x4768c0(0xa3)]&&(_0x50f5db[_0x4768c0(0x88)]=movieInfoTmdbApi[_0x4768c0(0x70)]+_0x2a5fb8['profile_path']),_0x2a5fb8['id']&&(_0x50f5db['tmdbid']=_0x2a5fb8['id']),_0x2d14ff[_0x4768c0(0xc4)][_0x4768c0(0x9b)](_0x50f5db);}}else _0x2d14ff[_0x4768c0(0xc4)]=_0xcbcdce[_0x4768c0(0x7b)]?_0xcbcdce[_0x4768c0(0x7b)]['split']('/'):[];if(_0xcbcdce['directorsOriginal']&&_0xcbcdce[_0x4768c0(0xb6)][_0x4768c0(0x6e)]>0x0){_0x2d14ff[_0x4768c0(0xb4)]=[];for(let _0x442fab of _0xcbcdce[_0x4768c0(0xb6)]){let _0x2996f9={};_0x442fab[_0x4768c0(0x71)]&&(_0x2996f9[_0x4768c0(0x71)]=_0x442fab[_0x4768c0(0x71)]),_0x442fab[_0x4768c0(0x79)]&&(_0x2996f9[_0x4768c0(0x93)]=_0x442fab[_0x4768c0(0x79)]),_0x442fab[_0x4768c0(0xa3)]&&(_0x2996f9[_0x4768c0(0x88)]=movieInfoTmdbApi['IMAGE_URL']+_0x442fab[_0x4768c0(0xa3)]),_0x442fab['id']&&(_0x2996f9['tmdbid']=_0x442fab['id']),_0x2d14ff[_0x4768c0(0xb4)][_0x4768c0(0x9b)](_0x2996f9);}}else _0x2d14ff['director']=_0xcbcdce[_0x4768c0(0x76)]?_0xcbcdce[_0x4768c0(0x76)][_0x4768c0(0x98)]('/'):[];if(_0xcbcdce[_0x4768c0(0xcb)]&&_0xcbcdce[_0x4768c0(0xcb)][_0x4768c0(0x6e)]>0x0){_0x2d14ff['creator']=[];for(let _0xb1e5c9 of _0xcbcdce[_0x4768c0(0xcb)]){let _0x5dbc8d={};_0xb1e5c9[_0x4768c0(0x71)]&&(_0x5dbc8d[_0x4768c0(0x71)]=_0xb1e5c9[_0x4768c0(0x71)]),_0xb1e5c9[_0x4768c0(0x79)]&&(_0x5dbc8d[_0x4768c0(0x93)]=_0xb1e5c9[_0x4768c0(0x79)]),_0xb1e5c9['profile_path']&&(_0x5dbc8d[_0x4768c0(0x88)]=movieInfoTmdbApi[_0x4768c0(0x70)]+_0xb1e5c9[_0x4768c0(0xa3)]),_0xb1e5c9['id']&&(_0x5dbc8d[_0x4768c0(0xaa)]=_0xb1e5c9['id']),_0x2d14ff[_0x4768c0(0x74)][_0x4768c0(0x9b)](_0x5dbc8d);}}else _0x2d14ff['creator']=_0xcbcdce[_0x4768c0(0x74)]?_0xcbcdce[_0x4768c0(0x74)][_0x4768c0(0x98)]('/'):[];if(_0xcbcdce[_0x4768c0(0xab)]&&_0xcbcdce[_0x4768c0(0xab)]['length']>0x0){_0x2d14ff[_0x4768c0(0x97)]=[];for(let _0x25fa89 of _0xcbcdce['guestActorsOriginal']){let _0x1b9c30={};_0x25fa89['name']&&(_0x1b9c30['name']=_0x25fa89[_0x4768c0(0x71)]),_0x25fa89[_0x4768c0(0x79)]&&(_0x1b9c30[_0x4768c0(0x93)]=_0x25fa89[_0x4768c0(0x79)]),_0x25fa89[_0x4768c0(0xa3)]&&(_0x1b9c30[_0x4768c0(0x88)]=movieInfoTmdbApi[_0x4768c0(0x70)]+_0x25fa89['profile_path']),_0x25fa89['id']&&(_0x1b9c30[_0x4768c0(0xaa)]=_0x25fa89['id']),_0x2d14ff[_0x4768c0(0x97)][_0x4768c0(0x9b)](_0x1b9c30);}}else _0x2d14ff['guestactors']=_0xcbcdce[_0x4768c0(0x97)]?_0xcbcdce['guestactors'][_0x4768c0(0x98)]('/'):[];_0xcbcdce['episode']&&(_0x2d14ff['episode']=_0xcbcdce[_0x4768c0(0xb9)]);_0xcbcdce[_0x4768c0(0x81)]&&(_0x2d14ff['season']=_0xcbcdce[_0x4768c0(0x81)]);_0xcbcdce[_0x4768c0(0xb1)]&&(_0x2d14ff['showtitle']=_0xcbcdce[_0x4768c0(0xb1)]);_0xcbcdce[_0x4768c0(0xcc)]&&(_0x2d14ff[_0x4768c0(0x88)]=_0xcbcdce[_0x4768c0(0xcc)]);console[_0x4768c0(0x78)](_0x4768c0(0xb5),_0xcbcdce[_0x4768c0(0x9a)]);_0xcbcdce[_0x4768c0(0x9a)]&&(_0x2d14ff[_0x4768c0(0xa0)]=_0xcbcdce[_0x4768c0(0x9a)]);_0xcbcdce['tagline']&&(_0x2d14ff[_0x4768c0(0x94)]=_0xcbcdce['tagline']);_0xcbcdce['vote_count']&&(_0x2d14ff['vote_count']=_0xcbcdce['vote_count']);const _0x3e0677=new XMLBuilder();let _0x11aab4={};_0x11aab4[_0x42ac76]=_0x2d14ff;const _0x3afa52=_0x3e0677['build'](_0x11aab4);fs['writeFile'](_0x3a1feb,_0x3afa52,_0x30963e=>{_0x2e38ac();});}catch(_0x18111b){console['log'](_0x4768c0(0x95),_0x3a1feb,_0x18111b),_0x2e38ac();}});},nfoUtil[_0x2b8c28(0xc9)]=function(_0x1f0713,_0x7d2e78){return new Promise((_0x37e552,_0x3afce7)=>{const _0x53a201=_0x37a7;try{let _0x4ff497={'title':_0x1f0713[_0x53a201(0x96)]?_0x1f0713['title']:'','publish_date':_0x1f0713[_0x53a201(0xad)]?_0x1f0713[_0x53a201(0xad)]:'','year':_0x1f0713['year']?_0x1f0713[_0x53a201(0x7a)]:'','isbn':_0x1f0713['isbn']?_0x1f0713[_0x53a201(0x80)]:''};_0x4ff497[_0x53a201(0x91)]=_0x1f0713[_0x53a201(0x91)]?_0x1f0713[_0x53a201(0x91)]:'',_0x4ff497[_0x53a201(0x8e)]=_0x1f0713['genre']?_0x1f0713[_0x53a201(0x8e)]:'',_0x4ff497['tag']=_0x1f0713['tag']?_0x1f0713['tag']:'',_0x4ff497[_0x53a201(0x90)]=_0x1f0713[_0x53a201(0x90)]?_0x1f0713[_0x53a201(0x90)]:'',_0x4ff497['artist']=_0x1f0713['artist']?_0x1f0713['artist']:'',_0x4ff497[_0x53a201(0x6a)]=_0x1f0713['introduction']?_0x1f0713[_0x53a201(0x6a)]:'';const _0x22287c=new XMLBuilder(),_0x13c81d=_0x22287c[_0x53a201(0xb0)]({'book':_0x4ff497});fs[_0x53a201(0x87)](_0x7d2e78,_0x13c81d,_0xe902da=>{_0x37e552();});}catch(_0x1722b0){console[_0x53a201(0x78)](_0x53a201(0x95),_0x7d2e78,_0x1722b0),_0x3afce7();}});},nfoUtil[_0x2b8c28(0x9f)]=function(_0x303c7e){return new Promise((_0x2dc5f1,_0x4efeec)=>{const _0x5df9f0=_0x37a7;try{let _0x36bc44=path[_0x5df9f0(0xb8)](_0x303c7e['path'],_0x303c7e['filename']),_0x2c7619=_0x36bc44[_0x5df9f0(0x8a)](0x0,_0x36bc44['lastIndexOf']('.'))+'.nfo';const _0x42d9a8=require('fs'),_0x45c59b=new XMLParser();_0x42d9a8[_0x5df9f0(0xc7)](_0x2c7619,(_0x3b2c4e,_0x295fba)=>{const _0x56da42=_0x5df9f0;if(_0x3b2c4e)return _0x4efeec();_0x42d9a8[_0x56da42(0x83)](_0x2c7619,(_0x13dab9,_0x3581a0)=>{const _0x370c4e=_0x56da42;if(_0x13dab9)return _0x4efeec();let _0x27bc0c=_0x45c59b['parse'](_0x3581a0);if(_0x27bc0c[_0x370c4e(0x84)]){let _0x1fee57=_0x27bc0c[_0x370c4e(0x84)];_0x1fee57['title']&&(_0x303c7e[_0x370c4e(0x96)]=_0x1fee57[_0x370c4e(0x96)]),_0x1fee57[_0x370c4e(0x7a)]&&(_0x303c7e[_0x370c4e(0x7a)]=_0x1fee57[_0x370c4e(0x7a)]),_0x1fee57['publish_date']&&(_0x303c7e[_0x370c4e(0xad)]=_0x1fee57[_0x370c4e(0xad)]),_0x1fee57[_0x370c4e(0x80)]&&(_0x303c7e[_0x370c4e(0x80)]=_0x1fee57['isbn']),_0x1fee57[_0x370c4e(0x91)]&&(_0x303c7e[_0x370c4e(0x91)]=_0x1fee57[_0x370c4e(0x91)]),_0x1fee57[_0x370c4e(0x9c)]&&(_0x303c7e[_0x370c4e(0x9c)]=_0x1fee57[_0x370c4e(0x9c)]),_0x1fee57['publisher']&&(_0x303c7e[_0x370c4e(0x90)]=_0x1fee57[_0x370c4e(0x90)]),_0x1fee57[_0x370c4e(0x7d)]&&(_0x303c7e[_0x370c4e(0x7d)]=_0x1fee57['artist']),_0x1fee57['introduction']&&(_0x303c7e[_0x370c4e(0x6a)]=_0x1fee57[_0x370c4e(0x6a)]);}_0x2dc5f1(_0x303c7e);});});}catch(_0x4219c2){console[_0x5df9f0(0x78)](_0x5df9f0(0xbd),_0x4219c2),_0x4efeec();}});},module[_0x2b8c28(0x69)]=nfoUtil;