const _0x3a5f1a=_0x1f40;function _0x494f(){const _0x230f1f=['genre','season','nfo读取失败','biography','saveNfoFile','tmdbid','join','cover_url','originalname','guestActorsOriginal','fast-xml-parser','language','actors','isbn','country','rating','9095KflfUG','publish_date','actorsOriginal','episode','parseNfoTvSeries','guestactors','localtitle','restoreBookNfo','36RXRpJy','getSeasonNumber','genres','movie_imdb_id','nfo缓存失败','2157089UjfjFC','release_date','tagline','title','artist','\x20/\x20','publisher','actor','length','tag','creator','push','plot','24fbxsvG','releasedate','split','doubanid','parse','name','imdbid','readFileSync','saveBookNfo','60dMjIxT','IMAGE_URL','vote_average','episodedetails','introduction','regions','existsSync','movie','seasonNumber','enddate','showtitle','70GWtZle','nfoInfo.vote_average','99065tJKsso','parseNfo','tvshow','original_name','dirname','movie_name','11940510LkIxFc','../utils/movieInfoTmdbApi','filename','log','director','4VOvKBX','2854413DPqnGf','660079rkZxeR','path','1042377ctreFi','year','substring','review','.nfo','nfoFullPath','tmdb_id','../utils/movieSeasonUtil','book','lastIndexOf','vote_count','languages','creatorOriginal','tvshow.nfo','exports','basename','thumb','directorsOriginal','directors','is_tvplay','profile_path'];_0x494f=function(){return _0x230f1f;};return _0x494f();}(function(_0x52fe14,_0x5374e9){const _0x2c0f97=_0x1f40,_0x190fc1=_0x52fe14();while(!![]){try{const _0x595777=-parseInt(_0x2c0f97(0xe1))/0x1*(parseInt(_0x2c0f97(0x10f))/0x2)+-parseInt(_0x2c0f97(0x120))/0x3*(parseInt(_0x2c0f97(0x11c))/0x4)+-parseInt(_0x2c0f97(0x111))/0x5*(parseInt(_0x2c0f97(0x104))/0x6)+-parseInt(_0x2c0f97(0x11e))/0x7+parseInt(_0x2c0f97(0xfb))/0x8*(parseInt(_0x2c0f97(0x11d))/0x9)+parseInt(_0x2c0f97(0x117))/0xa+parseInt(_0x2c0f97(0xee))/0xb*(-parseInt(_0x2c0f97(0xe9))/0xc);if(_0x595777===_0x5374e9)break;else _0x190fc1['push'](_0x190fc1['shift']());}catch(_0x2cde69){_0x190fc1['push'](_0x190fc1['shift']());}}}(_0x494f,0x923e6));let fs=require('fs'),path=require(_0x3a5f1a(0x11f)),nfoUtil={},movieSeasonUtil=require(_0x3a5f1a(0xc3));const {XMLParser,XMLBuilder}=require(_0x3a5f1a(0xdb));function _0x1f40(_0x2e6cc3,_0x5e62c6){const _0x494fad=_0x494f();return _0x1f40=function(_0x1f40ab,_0xa74881){_0x1f40ab=_0x1f40ab-0xbd;let _0x59bbb2=_0x494fad[_0x1f40ab];return _0x59bbb2;},_0x1f40(_0x2e6cc3,_0x5e62c6);}let movieInfoTmdbApi=require(_0x3a5f1a(0x118));function doParse(_0x46590b,_0x123765,_0x46243a,_0x35c0dd){const _0x32362f=_0x3a5f1a,_0x3fa582=new XMLParser();function _0x42418b(_0x323306,_0xeb4b1f){const _0x56c9fa=_0x1f40;function _0x4d22f9(_0xdc2144){const _0x5c8ee6=_0x1f40;if(_0xdc2144[_0x5c8ee6(0xf6)]>0x0&&_0xdc2144[0x0]instanceof Object){let _0xffad59=[];for(let _0x583119 in _0xdc2144){let _0x20c833=_0xdc2144[_0x583119];_0xffad59['push'](_0x20c833[_0x5c8ee6(0x100)]||_0x20c833['title']);}return _0xffad59;}else return _0xdc2144;}if(!_0x323306)return'';if(_0x323306 instanceof Array){let _0x14f2ce=_0x4d22f9(_0x323306);return _0x14f2ce?_0x14f2ce[_0x56c9fa(0xd7)](_0x56c9fa(0xf3)):'';}else{if(_0x323306 instanceof Object){let _0x3645f8=_0x4d22f9([_0x323306]);return _0x3645f8?_0x3645f8['join']('\x20/\x20'):'';}}return _0x323306;}try{_0x46243a[_0x32362f(0xc1)]=_0x35c0dd;let _0x2fed92=_0x3fa582['parse'](fs[_0x32362f(0x102)](_0x35c0dd));_0x2fed92[_0x32362f(0x10b)]||_0x2fed92['episodedetails']||_0x2fed92[_0x32362f(0x113)]?(_0x2fed92=_0x2fed92[_0x32362f(0x10b)]||_0x2fed92[_0x32362f(0x107)]||_0x2fed92[_0x32362f(0x113)],_0x46243a={..._0x46243a,'movie_info_name':_0x2fed92[_0x32362f(0x10e)]||_0x2fed92[_0x32362f(0x100)]||_0x2fed92['title']||_0x2fed92['originaltitle']||_0x2fed92[_0x32362f(0xe7)]||'','movie_alias':_0x2fed92['sortname']||'','movie_regions':_0x42418b(_0x2fed92[_0x32362f(0xdf)]),'movie_language':_0x42418b(_0x2fed92['language']),'movie_imdb_id':_0x2fed92[_0x32362f(0x101)]||'','movie_genres':_0x42418b(_0x2fed92[_0x32362f(0xd1)]),'movie_release_date':_0x2fed92[_0x32362f(0xfc)]||'','movie_end_date':_0x2fed92[_0x32362f(0x10d)]||'','movie_douban_id':_0x2fed92[_0x32362f(0xfe)]||'','movie_storyline':_0x2fed92[_0x32362f(0xfa)]||_0x2fed92[_0x32362f(0xd4)]||_0x2fed92[_0x32362f(0xbf)]||'','movie_douban_score':_0x2fed92['douban_score']||_0x2fed92[_0x32362f(0xe0)]||_0x2fed92['customrating']||0x0,'movie_year':_0x2fed92[_0x32362f(0xbd)]||'','tagline':_0x2fed92[_0x32362f(0xf0)]||'','movie_actor':_0x42418b(_0x2fed92['actor']),'movie_creator':_0x42418b(_0x2fed92['creator']),'movie_director':_0x42418b(_0x2fed92[_0x32362f(0x11b)]),'movie_tags':_0x42418b(_0x2fed92[_0x32362f(0xf7)]),'season_number':_0x2fed92[_0x32362f(0xd2)]||'','episode_number':_0x2fed92[_0x32362f(0xe4)]||''},_0x2fed92[_0x32362f(0xf5)]instanceof Array&&_0x2fed92[_0x32362f(0xf5)][_0x32362f(0xf6)]>0x0&&(_0x2fed92[_0x32362f(0xf5)][0x0]instanceof Object&&(_0x46243a['movie_actor_array']=_0x2fed92[_0x32362f(0xf5)])),_0x2fed92[_0x32362f(0x11b)]instanceof Array&&_0x2fed92['director'][_0x32362f(0xf6)]>0x0&&(_0x2fed92[_0x32362f(0x11b)][0x0]instanceof Object&&(_0x46243a['movie_director_array']=_0x2fed92[_0x32362f(0x11b)])),_0x46590b(_0x46243a)):_0x123765();}catch(_0x308d93){_0x123765(_0x308d93);}}nfoUtil[_0x3a5f1a(0x112)]=function(_0x1df845,_0x465139,_0x1807c5){return new Promise((_0x54fa66,_0x4e0827)=>{const _0x124487=_0x1f40;let _0x47a162=_0x1df845[_0x124487(0x119)];if(_0x465139){let {name:_0x503756}=path[_0x124487(0xff)](_0x47a162);_0x47a162=_0x503756;}let _0x5e09f1,_0x19ee3e;if(_0x1df845[_0x124487(0xcf)]==0x1&&!_0x1807c5){_0x5e09f1=path[_0x124487(0xd7)](_0x1df845[_0x124487(0x11f)],_0x124487(0xc9)),_0x19ee3e=fs[_0x124487(0x10a)](_0x5e09f1);let _0x527f10=path[_0x124487(0xcb)](_0x1df845[_0x124487(0x11f)]),_0x1a1cef=movieSeasonUtil[_0x124487(0xea)](_0x527f10);_0x1a1cef>0x0&&(_0x1df845[_0x124487(0x10c)]=_0x1a1cef,_0x5e09f1=path[_0x124487(0xd7)](_0x1df845[_0x124487(0x11f)],'season.nfo'),_0x19ee3e=fs[_0x124487(0x10a)](_0x5e09f1),!_0x19ee3e&&(_0x5e09f1=path[_0x124487(0xd7)](path[_0x124487(0x115)](_0x1df845[_0x124487(0x11f)]),_0x124487(0xc9)),_0x19ee3e=fs['existsSync'](_0x5e09f1)));}else _0x5e09f1=path[_0x124487(0xd7)](_0x1df845['path'],_0x47a162+_0x124487(0xc0)),_0x19ee3e=fs['existsSync'](_0x5e09f1);if(!_0x19ee3e)return _0x4e0827();doParse(_0x54fa66,_0x4e0827,_0x1df845,_0x5e09f1);});},nfoUtil[_0x3a5f1a(0xe5)]=function(_0x1ee5e0){return new Promise((_0xa323aa,_0xf56995)=>{const _0x37425f=_0x1f40;let _0xd48b53,_0x20a8b6;if(_0x1ee5e0[_0x37425f(0xcf)]==0x1){let _0x140c89=path[_0x37425f(0xcb)](_0x1ee5e0[_0x37425f(0x11f)]),_0x3ee689=movieSeasonUtil[_0x37425f(0xea)](_0x140c89);_0x3ee689>0x0&&(_0xd48b53=path['join'](path[_0x37425f(0x115)](_0x1ee5e0[_0x37425f(0x11f)]),'tvshow.nfo'),_0x20a8b6=fs[_0x37425f(0x10a)](_0xd48b53)),!_0x20a8b6&&(_0xd48b53=path['join'](_0x1ee5e0[_0x37425f(0x11f)],'tvshow.nfo'),_0x20a8b6=fs['existsSync'](_0xd48b53));}if(!_0x20a8b6)return _0xf56995();doParse(_0xa323aa,_0xf56995,_0x1ee5e0,_0xd48b53);});},nfoUtil[_0x3a5f1a(0xd5)]=function(_0x4a0651,_0xbafd6d,_0x5de435='movie'){return new Promise((_0xdfffdd,_0xe24a1d)=>{const _0x494003=_0x1f40;try{let _0x5b6a68={'title':_0x4a0651['movie_name']||'','name':_0x4a0651[_0x494003(0x116)]||'','sortname':_0x4a0651['movie_alias']||'','tmdbid':_0x4a0651[_0x494003(0xc2)]||'','imdbid':_0x4a0651[_0x494003(0xec)]||'','releasedate':_0x4a0651[_0x494003(0xef)]||'','enddate':_0x4a0651['enddate']||'','biography':_0x4a0651['storyline']||'','year':_0x4a0651[_0x494003(0xbd)]||''};_0x5b6a68[_0x494003(0xdc)]=_0x4a0651['languages']?_0x4a0651[_0x494003(0xc7)]['split']('/'):[],_0x5b6a68[_0x494003(0xdf)]=_0x4a0651['regions']?_0x4a0651[_0x494003(0x109)][_0x494003(0xfd)]('/'):[],_0x5b6a68[_0x494003(0xd1)]=_0x4a0651[_0x494003(0xeb)]?_0x4a0651[_0x494003(0xeb)][_0x494003(0xfd)]('/'):[];if(_0x4a0651[_0x494003(0xe3)]&&_0x4a0651['actorsOriginal']['length']>0x0){_0x5b6a68[_0x494003(0xf5)]=[];for(let _0x239ca2 of _0x4a0651[_0x494003(0xe3)]){let _0x17c4cc={};_0x239ca2[_0x494003(0x100)]&&(_0x17c4cc[_0x494003(0x100)]=_0x239ca2[_0x494003(0x100)]),_0x239ca2[_0x494003(0x114)]&&(_0x17c4cc[_0x494003(0xd9)]=_0x239ca2[_0x494003(0x114)]),_0x239ca2[_0x494003(0xd0)]&&(_0x17c4cc['thumb']=movieInfoTmdbApi[_0x494003(0x105)]+_0x239ca2[_0x494003(0xd0)]),_0x239ca2['id']&&(_0x17c4cc[_0x494003(0xd6)]=_0x239ca2['id']),_0x5b6a68[_0x494003(0xf5)][_0x494003(0xf9)](_0x17c4cc);}}else _0x5b6a68['actor']=_0x4a0651[_0x494003(0xdd)]?_0x4a0651[_0x494003(0xdd)][_0x494003(0xfd)]('/'):[];if(_0x4a0651['directorsOriginal']&&_0x4a0651[_0x494003(0xcd)]['length']>0x0){_0x5b6a68[_0x494003(0x11b)]=[];for(let _0x2472d4 of _0x4a0651[_0x494003(0xcd)]){let _0x193a01={};_0x2472d4[_0x494003(0x100)]&&(_0x193a01[_0x494003(0x100)]=_0x2472d4[_0x494003(0x100)]),_0x2472d4['original_name']&&(_0x193a01[_0x494003(0xd9)]=_0x2472d4[_0x494003(0x114)]),_0x2472d4[_0x494003(0xd0)]&&(_0x193a01['thumb']=movieInfoTmdbApi[_0x494003(0x105)]+_0x2472d4['profile_path']),_0x2472d4['id']&&(_0x193a01[_0x494003(0xd6)]=_0x2472d4['id']),_0x5b6a68[_0x494003(0x11b)][_0x494003(0xf9)](_0x193a01);}}else _0x5b6a68[_0x494003(0x11b)]=_0x4a0651[_0x494003(0xce)]?_0x4a0651['directors']['split']('/'):[];if(_0x4a0651[_0x494003(0xc8)]&&_0x4a0651[_0x494003(0xc8)][_0x494003(0xf6)]>0x0){_0x5b6a68[_0x494003(0xf8)]=[];for(let _0x291824 of _0x4a0651[_0x494003(0xc8)]){let _0x29db80={};_0x291824['name']&&(_0x29db80['name']=_0x291824['name']),_0x291824[_0x494003(0x114)]&&(_0x29db80[_0x494003(0xd9)]=_0x291824[_0x494003(0x114)]),_0x291824[_0x494003(0xd0)]&&(_0x29db80[_0x494003(0xcc)]=movieInfoTmdbApi[_0x494003(0x105)]+_0x291824[_0x494003(0xd0)]),_0x291824['id']&&(_0x29db80[_0x494003(0xd6)]=_0x291824['id']),_0x5b6a68[_0x494003(0xf8)]['push'](_0x29db80);}}else _0x5b6a68[_0x494003(0xf8)]=_0x4a0651[_0x494003(0xf8)]?_0x4a0651['creator']['split']('/'):[];if(_0x4a0651[_0x494003(0xda)]&&_0x4a0651[_0x494003(0xda)][_0x494003(0xf6)]>0x0){_0x5b6a68[_0x494003(0xe6)]=[];for(let _0x12caa9 of _0x4a0651[_0x494003(0xda)]){let _0x5d1223={};_0x12caa9[_0x494003(0x100)]&&(_0x5d1223[_0x494003(0x100)]=_0x12caa9['name']),_0x12caa9[_0x494003(0x114)]&&(_0x5d1223[_0x494003(0xd9)]=_0x12caa9[_0x494003(0x114)]),_0x12caa9['profile_path']&&(_0x5d1223[_0x494003(0xcc)]=movieInfoTmdbApi[_0x494003(0x105)]+_0x12caa9[_0x494003(0xd0)]),_0x12caa9['id']&&(_0x5d1223[_0x494003(0xd6)]=_0x12caa9['id']),_0x5b6a68['guestactors']['push'](_0x5d1223);}}else _0x5b6a68[_0x494003(0xe6)]=_0x4a0651[_0x494003(0xe6)]?_0x4a0651['guestactors'][_0x494003(0xfd)]('/'):[];_0x4a0651[_0x494003(0xe4)]&&(_0x5b6a68['episode']=_0x4a0651['episode']);_0x4a0651[_0x494003(0xd2)]&&(_0x5b6a68[_0x494003(0xd2)]=_0x4a0651[_0x494003(0xd2)]);_0x4a0651[_0x494003(0x10e)]&&(_0x5b6a68['showtitle']=_0x4a0651[_0x494003(0x10e)]);_0x4a0651[_0x494003(0xd8)]&&(_0x5b6a68['thumb']=_0x4a0651[_0x494003(0xd8)]);console[_0x494003(0x11a)](_0x494003(0x110),_0x4a0651[_0x494003(0x106)]);_0x4a0651[_0x494003(0x106)]&&(_0x5b6a68[_0x494003(0xe0)]=_0x4a0651['vote_average']);_0x4a0651[_0x494003(0xf0)]&&(_0x5b6a68['tagline']=_0x4a0651[_0x494003(0xf0)]);_0x4a0651[_0x494003(0xc6)]&&(_0x5b6a68[_0x494003(0xc6)]=_0x4a0651['vote_count']);const _0x5c3ca6=new XMLBuilder();let _0x5e7325={};_0x5e7325[_0x5de435]=_0x5b6a68;const _0x1db20b=_0x5c3ca6['build'](_0x5e7325);fs['writeFile'](_0xbafd6d,_0x1db20b,_0x28297a=>{_0xdfffdd();});}catch(_0x515dd1){console[_0x494003(0x11a)](_0x494003(0xed),_0xbafd6d,_0x515dd1),_0xdfffdd();}});},nfoUtil[_0x3a5f1a(0x103)]=function(_0x4b3c27,_0x42ce49){return new Promise((_0x2ae047,_0xa8e1c7)=>{const _0x229110=_0x1f40;try{let _0x398077={'title':_0x4b3c27[_0x229110(0xf1)]?_0x4b3c27[_0x229110(0xf1)]:'','publish_date':_0x4b3c27[_0x229110(0xe2)]?_0x4b3c27[_0x229110(0xe2)]:'','year':_0x4b3c27['year']?_0x4b3c27['year']:'','isbn':_0x4b3c27['isbn']?_0x4b3c27[_0x229110(0xde)]:''};_0x398077[_0x229110(0xdc)]=_0x4b3c27[_0x229110(0xdc)]?_0x4b3c27[_0x229110(0xdc)]:'',_0x398077[_0x229110(0xd1)]=_0x4b3c27[_0x229110(0xd1)]?_0x4b3c27['genre']:'',_0x398077['tag']=_0x4b3c27[_0x229110(0xf7)]?_0x4b3c27['tag']:'',_0x398077[_0x229110(0xf4)]=_0x4b3c27[_0x229110(0xf4)]?_0x4b3c27[_0x229110(0xf4)]:'',_0x398077['artist']=_0x4b3c27[_0x229110(0xf2)]?_0x4b3c27[_0x229110(0xf2)]:'',_0x398077['introduction']=_0x4b3c27[_0x229110(0x108)]?_0x4b3c27[_0x229110(0x108)]:'';const _0x9aaf52=new XMLBuilder(),_0x352cac=_0x9aaf52['build']({'book':_0x398077});fs['writeFile'](_0x42ce49,_0x352cac,_0x12fe88=>{_0x2ae047();});}catch(_0x244210){console[_0x229110(0x11a)]('nfo缓存失败',_0x42ce49,_0x244210),_0xa8e1c7();}});},nfoUtil[_0x3a5f1a(0xe8)]=function(_0x30c7b9){return new Promise((_0x2ae056,_0x1a5a15)=>{const _0x2a808e=_0x1f40;try{let _0x315c53=path['join'](_0x30c7b9[_0x2a808e(0x11f)],_0x30c7b9[_0x2a808e(0x119)]),_0x1b3d1c=_0x315c53[_0x2a808e(0xbe)](0x0,_0x315c53[_0x2a808e(0xc5)]('.'))+_0x2a808e(0xc0);const _0x10213d=require('fs'),_0x78eb99=new XMLParser();_0x10213d['stat'](_0x1b3d1c,(_0x2d37e8,_0x5b0ec7)=>{if(_0x2d37e8)return _0x1a5a15();_0x10213d['readFile'](_0x1b3d1c,(_0x56dd83,_0x3eb466)=>{const _0x18f00b=_0x1f40;if(_0x56dd83)return _0x1a5a15();let _0x131ed1=_0x78eb99[_0x18f00b(0xff)](_0x3eb466);if(_0x131ed1['book']){let _0x477998=_0x131ed1[_0x18f00b(0xc4)];_0x477998[_0x18f00b(0xf1)]&&(_0x30c7b9['title']=_0x477998['title']),_0x477998[_0x18f00b(0xbd)]&&(_0x30c7b9[_0x18f00b(0xbd)]=_0x477998['year']),_0x477998[_0x18f00b(0xe2)]&&(_0x30c7b9[_0x18f00b(0xe2)]=_0x477998[_0x18f00b(0xe2)]),_0x477998[_0x18f00b(0xde)]&&(_0x30c7b9[_0x18f00b(0xde)]=_0x477998[_0x18f00b(0xde)]),_0x477998[_0x18f00b(0xdc)]&&(_0x30c7b9[_0x18f00b(0xdc)]=_0x477998[_0x18f00b(0xdc)]),_0x477998[_0x18f00b(0xf7)]&&(_0x30c7b9[_0x18f00b(0xf7)]=_0x477998[_0x18f00b(0xf7)]),_0x477998['publisher']&&(_0x30c7b9[_0x18f00b(0xf4)]=_0x477998[_0x18f00b(0xf4)]),_0x477998[_0x18f00b(0xf2)]&&(_0x30c7b9['artist']=_0x477998['artist']),_0x477998[_0x18f00b(0x108)]&&(_0x30c7b9[_0x18f00b(0x108)]=_0x477998['introduction']);}_0x2ae056(_0x30c7b9);});});}catch(_0x470061){console[_0x2a808e(0x11a)](_0x2a808e(0xd3),_0x470061),_0x1a5a15();}});},module[_0x3a5f1a(0xca)]=nfoUtil;