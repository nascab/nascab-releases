const _0x162fff=_0x3f3f;(function(_0x582f14,_0x58863c){const _0x2ca8ca=_0x3f3f,_0x443938=_0x582f14();while(!![]){try{const _0xee00f3=-parseInt(_0x2ca8ca(0x19a))/0x1*(-parseInt(_0x2ca8ca(0x19f))/0x2)+parseInt(_0x2ca8ca(0x1a9))/0x3*(-parseInt(_0x2ca8ca(0x19c))/0x4)+parseInt(_0x2ca8ca(0x1b0))/0x5*(-parseInt(_0x2ca8ca(0x1a1))/0x6)+parseInt(_0x2ca8ca(0x1a7))/0x7+parseInt(_0x2ca8ca(0x191))/0x8+parseInt(_0x2ca8ca(0x190))/0x9*(-parseInt(_0x2ca8ca(0x1a6))/0xa)+parseInt(_0x2ca8ca(0x198))/0xb;if(_0xee00f3===_0x58863c)break;else _0x443938['push'](_0x443938['shift']());}catch(_0x5e2791){_0x443938['push'](_0x443938['shift']());}}}(_0x3a2c,0x57b16));function _0x3f3f(_0x266fad,_0x29f5a9){const _0x3a2c12=_0x3a2c();return _0x3f3f=function(_0x3f3f02,_0x38e41c){_0x3f3f02=_0x3f3f02-0x18c;let _0x841c13=_0x3a2c12[_0x3f3f02];return _0x841c13;},_0x3f3f(_0x266fad,_0x29f5a9);}const path=require(_0x162fff(0x1ad));function _0x3a2c(){const _0x133e48=['manifest','getAttribute','path','src','log','754945tuRTeT','forEach','replaceAll','../myConfig/config','toLowerCase','383301dCZhbv','1485032SWcupZ','epub','getFile','getEpubImageList','document','end','window','1753180MSCYRk','img','21QZguyY','jsdom','12vvBtZY','.jpg','.html','37108DzwhRf','push','6LpqPji','flow','href','../','parse','10NJgmiR','2527812ZjysmM','hasOwnProperty','542991YTZXVx','endsWith'];_0x3a2c=function(){return _0x133e48;};return _0x3a2c();}let zipEpubUtil={};const sharp=require('sharp'),fs=require('fs'),config=require(_0x162fff(0x18e)),EPub=require(_0x162fff(0x192)),{JSDOM}=require(_0x162fff(0x19b));zipEpubUtil['getEpubFile']=(_0x35af44,_0x5f42cf)=>{return new Promise((_0x8e7ad,_0x4cdb76)=>{const _0x1d8ac9=_0x3f3f;_0x35af44[_0x1d8ac9(0x193)](_0x5f42cf,(_0x126832,_0x27b882,_0x5c8871)=>{if(_0x126832)return _0x8e7ad(null);_0x8e7ad(_0x27b882,_0x5c8871);});});},zipEpubUtil[_0x162fff(0x194)]=_0x234eac=>{return new Promise(async(_0x5282de,_0x142c2b)=>{const _0x27759c=_0x3f3f;let _0x2e709f=[],_0x528b10=new EPub(_0x234eac);_0x528b10['on'](_0x27759c(0x196),async()=>{const _0x814866=_0x27759c;!_0x528b10[_0x814866(0x1a2)]&&console[_0x814866(0x1af)]('未找到epub清单文件');for(let _0x337b4c of _0x528b10[_0x814866(0x1a2)]){if(!_0x337b4c[_0x814866(0x1a3)]||!_0x337b4c['id'])continue;let _0x530ed1=path['extname'](_0x337b4c[_0x814866(0x1a3)]);if(!_0x530ed1)continue;_0x530ed1=_0x530ed1[_0x814866(0x18f)]();if(_0x530ed1==_0x814866(0x19e)){let _0x42b1ef=await zipEpubUtil['getEpubFile'](_0x528b10,_0x337b4c['id']);try{const _0x1a87dd=new JSDOM(_0x42b1ef),_0x2c302b=_0x1a87dd[_0x814866(0x197)][_0x814866(0x195)],_0x40c225=_0x2c302b['querySelectorAll'](_0x814866(0x199));_0x40c225[_0x814866(0x18c)](_0x34dac0=>{const _0x217a43=_0x814866;let _0x448f00=_0x34dac0[_0x217a43(0x1ac)](_0x217a43(0x1ae));_0x448f00&&(_0x448f00=_0x448f00[_0x217a43(0x18d)]('../',''),_0x2e709f[_0x217a43(0x1a0)](_0x448f00));});}catch(_0x5eb253){console[_0x814866(0x1af)](_0x5eb253);}}else{if(_0x530ed1==_0x814866(0x19d)){let _0x55119a=_0x337b4c[_0x814866(0x1a3)][_0x814866(0x18d)](_0x814866(0x1a4),'');_0x2e709f[_0x814866(0x1a0)](_0x55119a);}}}let _0x24c668=[];if(_0x528b10[_0x814866(0x1ab)]&&_0x528b10[_0x814866(0x1ab)]instanceof Object)for(let _0xba26a7 of _0x2e709f){for(const _0x2b0064 in _0x528b10['manifest']){if(_0x528b10[_0x814866(0x1ab)][_0x814866(0x1a8)](_0x2b0064)){let _0x1f734c=_0x528b10[_0x814866(0x1ab)][_0x2b0064];if(_0x1f734c[_0x814866(0x1a3)]&&(_0x1f734c['href']==_0xba26a7||_0x1f734c[_0x814866(0x1a3)][_0x814866(0x1aa)]('/'+_0xba26a7))){_0x24c668[_0x814866(0x1a0)](_0x1f734c[_0x814866(0x1a3)]);break;}}}}else _0x24c668=_0x2e709f;_0x5282de(_0x24c668);}),_0x528b10[_0x27759c(0x1a5)]();});},module['exports']=zipEpubUtil;