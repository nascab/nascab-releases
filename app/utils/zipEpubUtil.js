const _0x292c6a=_0x837a;(function(_0x47c336,_0x1a03f1){const _0x463862=_0x837a,_0x50f1af=_0x47c336();while(!![]){try{const _0x251824=parseInt(_0x463862(0x70))/0x1*(-parseInt(_0x463862(0x72))/0x2)+parseInt(_0x463862(0x80))/0x3*(parseInt(_0x463862(0x87))/0x4)+parseInt(_0x463862(0x8f))/0x5*(parseInt(_0x463862(0x82))/0x6)+parseInt(_0x463862(0x84))/0x7+-parseInt(_0x463862(0x73))/0x8+parseInt(_0x463862(0x7f))/0x9*(-parseInt(_0x463862(0x7d))/0xa)+parseInt(_0x463862(0x71))/0xb;if(_0x251824===_0x1a03f1)break;else _0x50f1af['push'](_0x50f1af['shift']());}catch(_0x30089e){_0x50f1af['push'](_0x50f1af['shift']());}}}(_0x3fd2,0xd15b8));const path=require(_0x292c6a(0x75));let zipEpubUtil={};function _0x837a(_0x42e09f,_0x50922b){const _0x3fd2e6=_0x3fd2();return _0x837a=function(_0x837af6,_0x22b01d){_0x837af6=_0x837af6-0x6f;let _0x389737=_0x3fd2e6[_0x837af6];return _0x389737;},_0x837a(_0x42e09f,_0x50922b);}const sharp=require('sharp'),fs=require('fs'),config=require(_0x292c6a(0x86)),EPub=require(_0x292c6a(0x8b)),{JSDOM}=require(_0x292c6a(0x85));function _0x3fd2(){const _0x1f5be9=['../myConfig/config','4KsaoCZ','querySelectorAll','getFile','endsWith','epub','parse','forEach','push','10490gAdaBI','log','../','.html','src','href','extname','hasOwnProperty','57133foJDjp','8240056fBBCyz','26MyWMQS','8889480GkNSSx','replaceAll','path','img','document','manifest','.jpg','end','getEpubFile','window','30gCvrhO','flow','4680945KrQCec','1538709OuFPXH','toLowerCase','3750ENSTab','getEpubImageList','11889556pEgMrt','jsdom'];_0x3fd2=function(){return _0x1f5be9;};return _0x3fd2();}zipEpubUtil[_0x292c6a(0x7b)]=(_0x4034f9,_0x1bae3b)=>{return new Promise((_0x5c8f63,_0x365ccc)=>{const _0x22d902=_0x837a;_0x4034f9[_0x22d902(0x89)](_0x1bae3b,(_0x540c97,_0x1890eb,_0x1ecd02)=>{if(_0x540c97)return _0x5c8f63(null);_0x5c8f63(_0x1890eb,_0x1ecd02);});});},zipEpubUtil[_0x292c6a(0x83)]=_0x2455c9=>{return new Promise(async(_0x1079d4,_0x37f3ac)=>{const _0x3f6afa=_0x837a;let _0xb8e5bd=[],_0x3340c0=new EPub(_0x2455c9);_0x3340c0['on'](_0x3f6afa(0x7a),async()=>{const _0x3713a1=_0x3f6afa;!_0x3340c0[_0x3713a1(0x7e)]&&console[_0x3713a1(0x90)]('未找到epub清单文件');for(let _0x2eb035 of _0x3340c0[_0x3713a1(0x7e)]){if(!_0x2eb035['href']||!_0x2eb035['id'])continue;let _0x2bcae4=path[_0x3713a1(0x95)](_0x2eb035[_0x3713a1(0x94)]);if(!_0x2bcae4)continue;_0x2bcae4=_0x2bcae4[_0x3713a1(0x81)]();if(_0x2bcae4==_0x3713a1(0x92)){let _0x409db6=await zipEpubUtil[_0x3713a1(0x7b)](_0x3340c0,_0x2eb035['id']);try{const _0x1a2e5c=new JSDOM(_0x409db6),_0x39e607=_0x1a2e5c[_0x3713a1(0x7c)][_0x3713a1(0x77)],_0x14737b=_0x39e607[_0x3713a1(0x88)](_0x3713a1(0x76));_0x14737b[_0x3713a1(0x8d)](_0x319c29=>{const _0x284f7a=_0x3713a1;let _0x47e453=_0x319c29['getAttribute'](_0x284f7a(0x93));_0x47e453&&(_0x47e453=_0x47e453['replaceAll'](_0x284f7a(0x91),''),_0xb8e5bd[_0x284f7a(0x8e)](_0x47e453));});}catch(_0x1fdc44){console[_0x3713a1(0x90)](_0x1fdc44);}}else{if(_0x2bcae4==_0x3713a1(0x79)){let _0x5a00be=_0x2eb035[_0x3713a1(0x94)][_0x3713a1(0x74)]('../','');_0xb8e5bd['push'](_0x5a00be);}}}let _0x9c52cd=[];if(_0x3340c0['manifest']&&_0x3340c0[_0x3713a1(0x78)]instanceof Object)for(let _0x486d54 of _0xb8e5bd){for(const _0x2c99c6 in _0x3340c0['manifest']){if(_0x3340c0[_0x3713a1(0x78)][_0x3713a1(0x6f)](_0x2c99c6)){let _0x432483=_0x3340c0[_0x3713a1(0x78)][_0x2c99c6];if(_0x432483[_0x3713a1(0x94)]&&(_0x432483['href']==_0x486d54||_0x432483[_0x3713a1(0x94)][_0x3713a1(0x8a)]('/'+_0x486d54))){_0x9c52cd['push'](_0x432483[_0x3713a1(0x94)]);break;}}}}else _0x9c52cd=_0xb8e5bd;_0x1079d4(_0x9c52cd);}),_0x3340c0[_0x3f6afa(0x8c)]();});},module['exports']=zipEpubUtil;