const _0x525709=_0x3ee8;function _0x3ee8(_0x2cd51c,_0x475a59){const _0x561b71=_0x561b();return _0x3ee8=function(_0x3ee89d,_0x2ee73a){_0x3ee89d=_0x3ee89d-0x99;let _0x41994c=_0x561b71[_0x3ee89d];return _0x41994c;},_0x3ee8(_0x2cd51c,_0x475a59);}(function(_0x15ce4a,_0x2c0d41){const _0x733b04=_0x3ee8,_0x5be0c1=_0x15ce4a();while(!![]){try{const _0x4b85f5=-parseInt(_0x733b04(0x9e))/0x1+-parseInt(_0x733b04(0xae))/0x2*(-parseInt(_0x733b04(0x9a))/0x3)+parseInt(_0x733b04(0x9f))/0x4*(parseInt(_0x733b04(0xb8))/0x5)+parseInt(_0x733b04(0xb5))/0x6*(-parseInt(_0x733b04(0xb0))/0x7)+-parseInt(_0x733b04(0xa5))/0x8*(parseInt(_0x733b04(0xba))/0x9)+parseInt(_0x733b04(0xbb))/0xa*(-parseInt(_0x733b04(0x9b))/0xb)+parseInt(_0x733b04(0xb1))/0xc;if(_0x4b85f5===_0x2c0d41)break;else _0x5be0c1['push'](_0x5be0c1['shift']());}catch(_0x5e5c4d){_0x5be0c1['push'](_0x5be0c1['shift']());}}}(_0x561b,0x4ed9a));const path=require(_0x525709(0xa9));function _0x561b(){const _0x3e8e05=['epub','../myConfig/config','log','未找到epub清单文件','8rNcAdz','end','replaceAll','push','path','.html','.jpg','src','../','484216LbOEUs','img','431529XLFhco','2428632WwCUrp','document','endsWith','extname','12aMApde','jsdom','querySelectorAll','1608270syKPvz','sharp','3617100KFXbCI','10UbXteE','toLowerCase','flow','href','6yCALyI','4921642dtkEuI','manifest','getEpubFile','34324ORKuUK','8lIMlJh','forEach'];_0x561b=function(){return _0x3e8e05;};return _0x561b();}let zipEpubUtil={};const sharp=require(_0x525709(0xb9)),fs=require('fs'),config=require(_0x525709(0xa2)),EPub=require(_0x525709(0xa1)),{JSDOM}=require(_0x525709(0xb6));zipEpubUtil[_0x525709(0x9d)]=(_0x503488,_0x2ab873)=>{return new Promise((_0x1a65f0,_0x18d3fb)=>{_0x503488['getFile'](_0x2ab873,(_0x19cd2c,_0x57164f,_0x3a92a6)=>{if(_0x19cd2c)return _0x1a65f0(null);_0x1a65f0(_0x57164f,_0x3a92a6);});});},zipEpubUtil['getEpubImageList']=_0x5eee46=>{return new Promise(async(_0xba90af,_0x121f65)=>{const _0x3b8bd2=_0x3ee8;let _0x1ee694=[],_0xb43fa5=new EPub(_0x5eee46);_0xb43fa5['on'](_0x3b8bd2(0xa6),async()=>{const _0x1bb08a=_0x3b8bd2;!_0xb43fa5['flow']&&console[_0x1bb08a(0xa3)](_0x1bb08a(0xa4));for(let _0x41cb89 of _0xb43fa5[_0x1bb08a(0xbd)]){if(!_0x41cb89[_0x1bb08a(0x99)]||!_0x41cb89['id'])continue;let _0x35c7c1=path[_0x1bb08a(0xb4)](_0x41cb89[_0x1bb08a(0x99)]);if(!_0x35c7c1)continue;_0x35c7c1=_0x35c7c1[_0x1bb08a(0xbc)]();if(_0x35c7c1==_0x1bb08a(0xaa)){let _0x48df3d=await zipEpubUtil['getEpubFile'](_0xb43fa5,_0x41cb89['id']);try{const _0x5c1f0a=new JSDOM(_0x48df3d),_0x41059f=_0x5c1f0a['window'][_0x1bb08a(0xb2)],_0x21c38e=_0x41059f[_0x1bb08a(0xb7)](_0x1bb08a(0xaf));_0x21c38e[_0x1bb08a(0xa0)](_0x43894b=>{const _0x2fd807=_0x1bb08a;let _0x1b9db3=_0x43894b['getAttribute'](_0x2fd807(0xac));_0x1b9db3&&(_0x1b9db3=_0x1b9db3[_0x2fd807(0xa7)](_0x2fd807(0xad),''),_0x1ee694[_0x2fd807(0xa8)](_0x1b9db3));});}catch(_0x2f71aa){console['log'](_0x2f71aa);}}else{if(_0x35c7c1==_0x1bb08a(0xab)){let _0x41269d=_0x41cb89[_0x1bb08a(0x99)][_0x1bb08a(0xa7)](_0x1bb08a(0xad),'');_0x1ee694[_0x1bb08a(0xa8)](_0x41269d);}}}let _0x3306ec=[];if(_0xb43fa5[_0x1bb08a(0x9c)]&&_0xb43fa5[_0x1bb08a(0x9c)]instanceof Object)for(let _0x4ac984 of _0x1ee694){for(const _0x5c052e in _0xb43fa5['manifest']){if(_0xb43fa5[_0x1bb08a(0x9c)]['hasOwnProperty'](_0x5c052e)){let _0x15b576=_0xb43fa5['manifest'][_0x5c052e];if(_0x15b576[_0x1bb08a(0x99)]&&(_0x15b576[_0x1bb08a(0x99)]==_0x4ac984||_0x15b576[_0x1bb08a(0x99)][_0x1bb08a(0xb3)]('/'+_0x4ac984))){_0x3306ec[_0x1bb08a(0xa8)](_0x15b576['href']);break;}}}}else _0x3306ec=_0x1ee694;_0xba90af(_0x3306ec);}),_0xb43fa5['parse']();});},module['exports']=zipEpubUtil;