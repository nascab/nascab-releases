function _0x2870(){const _0xa3b7e8=['618870tRJaoy','push','toBuffer','198146qxPYZA','.rar','397560TRvBuh','getZipCover','exports','createExtractorFromData','readFile','566325PtyGQL','getInnerFileContent','../myConfig/config','8499UwsAGA','getZipInnerFileList','.cbz','entryName','extract','then','adm-zip','length','jpeg','toLowerCase','getEpubImageList','name','log','files','epub','1020198EoYrel','catch','sharp','getSharpDealedBuffer','562168hhrNaA','.zip','.epub','getEntries','7EocIQD','154OqrDdr','extname','sortFileNamesByNumber','./arrayUtil','path','isDirectory','imgTypeList','node-unrar-js','includes','getFileList'];_0x2870=function(){return _0xa3b7e8;};return _0x2870();}const _0x4fab42=_0x52e3;(function(_0x217f55,_0x250b2d){const _0x4f256a=_0x52e3,_0x5106fa=_0x217f55();while(!![]){try{const _0x2594a2=parseInt(_0x4f256a(0xb3))/0x1+-parseInt(_0x4f256a(0xa6))/0x2*(parseInt(_0x4f256a(0xbd))/0x3)+-parseInt(_0x4f256a(0xa1))/0x4+parseInt(_0x4f256a(0xb0))/0x5+-parseInt(_0x4f256a(0xcc))/0x6*(-parseInt(_0x4f256a(0xa5))/0x7)+parseInt(_0x4f256a(0xb5))/0x8+-parseInt(_0x4f256a(0xba))/0x9;if(_0x2594a2===_0x250b2d)break;else _0x5106fa['push'](_0x5106fa['shift']());}catch(_0x339292){_0x5106fa['push'](_0x5106fa['shift']());}}}(_0x2870,0x1d4e8));function _0x52e3(_0xd83729,_0x259c0b){const _0x2870f1=_0x2870();return _0x52e3=function(_0x52e374,_0x237675){_0x52e374=_0x52e374-0xa0;let _0x1f90bd=_0x2870f1[_0x52e374];return _0x1f90bd;},_0x52e3(_0xd83729,_0x259c0b);}const path=require(_0x4fab42(0xaa));let zipUtil={};const sharp=require(_0x4fab42(0xce)),AdmZip=require(_0x4fab42(0xc3)),unrar=require(_0x4fab42(0xad)),fs=require('fs'),config=require(_0x4fab42(0xbc)),EPub=require(_0x4fab42(0xcb)),zipEpubUtil=require('./zipEpubUtil'),arrayUtil=require(_0x4fab42(0xa9));zipUtil[_0x4fab42(0xbe)]=(_0x3d96f3,_0x3f64bf)=>{return new Promise((_0x5eeb5c,_0x27d6dd)=>{const _0x614f79=_0x52e3;let _0x3015b4=[];try{let _0x39b313=path[_0x614f79(0xa7)](_0x3d96f3);_0x39b313&&(_0x39b313=_0x39b313['toLowerCase']());if(_0x39b313==_0x614f79(0xa2)||_0x39b313==_0x614f79(0xbf)){const _0x532a03=new AdmZip(_0x3d96f3);_0x532a03[_0x614f79(0xa4)]()['forEach'](_0x2e210d=>{const _0x2f1cbc=_0x614f79;let _0x441a48=!![],_0x5decbc=path['extname'](_0x2e210d[_0x2f1cbc(0xc0)]);_0x3f64bf&&(_0x441a48=![],_0x5decbc&&config[_0x2f1cbc(0xac)]['includes'](_0x5decbc[_0x2f1cbc(0xc6)]())&&(_0x441a48=!![])),_0x441a48&&_0x3015b4['push']({'isDir':_0x2e210d[_0x2f1cbc(0xab)],'name':_0x2e210d[_0x2f1cbc(0xc0)]});}),_0x5eeb5c(arrayUtil[_0x614f79(0xa8)](_0x3015b4,_0x614f79(0xc8)));}else{if(_0x39b313==_0x614f79(0xb4)||_0x39b313=='.cbr')fs[_0x614f79(0xb9)](_0x3d96f3,(_0x1783cb,_0xc76401)=>{const _0x4ad7e8=_0x614f79;unrar[_0x4ad7e8(0xb8)]({'data':_0xc76401})[_0x4ad7e8(0xc2)](_0xef61a5=>{const _0x19761e=_0x4ad7e8,_0x4b4a77=_0xef61a5[_0x19761e(0xaf)](),_0x3d1149=[..._0x4b4a77['fileHeaders']];for(let _0x536432 of _0x3d1149){let _0x317f2b=!![],_0xbca5f4=path['extname'](_0x536432['name']);_0x3f64bf&&(_0x317f2b=![],_0xbca5f4&&config[_0x19761e(0xac)][_0x19761e(0xae)](_0xbca5f4[_0x19761e(0xc6)]())&&(_0x317f2b=!![])),_0x317f2b&&_0x3015b4[_0x19761e(0xb1)]({'isDir':![],'name':_0x536432[_0x19761e(0xc8)]});}_0x5eeb5c(arrayUtil[_0x19761e(0xa8)](_0x3015b4,_0x19761e(0xc8)));});});else _0x39b313==_0x614f79(0xa3)?zipEpubUtil[_0x614f79(0xc7)](_0x3d96f3)[_0x614f79(0xc2)](_0x38c81a=>{const _0x2dc027=_0x614f79;for(let _0x10ed18 of _0x38c81a){_0x3015b4[_0x2dc027(0xb1)]({'isDir':![],'name':_0x10ed18});}_0x5eeb5c(_0x3015b4);}):(console[_0x614f79(0xc9)]('不支持的压缩文件格式',_0x3d96f3),_0x5eeb5c([]));}}catch(_0x3bfe94){console[_0x614f79(0xc9)](_0x3bfe94),_0x5eeb5c([]);}});},zipUtil[_0x4fab42(0xa0)]=(_0x897ac,_0x134cd)=>{return new Promise((_0x1fee9c,_0x70f8c8)=>{const _0x59bcf7=_0x52e3;let _0x3b0a75=path['extname'](_0x134cd);_0x3b0a75&&config[_0x59bcf7(0xac)][_0x59bcf7(0xae)](_0x3b0a75['toLowerCase']())?sharp(_0x897ac,{'failOnError':![]})[_0x59bcf7(0xc5)]({'quality':0x4d})[_0x59bcf7(0xb2)]()[_0x59bcf7(0xc2)](_0x53aab6=>{_0x1fee9c(_0x53aab6);})[_0x59bcf7(0xcd)](_0x2091b2=>{console['log'](_0x2091b2),_0x1fee9c(_0x897ac);}):_0x1fee9c(_0x897ac);});},zipUtil[_0x4fab42(0xbb)]=(_0xc98f16,_0x330f00)=>{return new Promise((_0x2adf35,_0xca2d9)=>{const _0x1e3b6c=_0x52e3;try{let _0x4627de=path[_0x1e3b6c(0xa7)](_0xc98f16);_0x4627de&&(_0x4627de=_0x4627de[_0x1e3b6c(0xc6)]());if(_0x4627de==_0x1e3b6c(0xa2)||_0x4627de==_0x1e3b6c(0xbf)||_0x4627de==_0x1e3b6c(0xa3)){const _0x429e6d=new AdmZip(_0xc98f16);let _0x3cbb10=_0x429e6d[_0x1e3b6c(0xb9)](_0x330f00);zipUtil[_0x1e3b6c(0xa0)](_0x3cbb10,_0x330f00)[_0x1e3b6c(0xc2)](_0x28e29e=>{_0x2adf35(_0x28e29e);});}else _0x4627de==_0x1e3b6c(0xb4)||_0x4627de=='.cbr'?fs[_0x1e3b6c(0xb9)](_0xc98f16,(_0x521e28,_0x322b10)=>{const _0x533f6a=_0x1e3b6c;if(_0x521e28)return console['log'](_0x521e28),_0x2adf35(null);unrar['createExtractorFromData']({'data':_0x322b10})[_0x533f6a(0xc2)](_0x8cb25=>{const _0x20a46c=_0x533f6a;try{const _0x28e209=_0x8cb25[_0x20a46c(0xc1)]({'files':[_0x330f00]}),_0x3eb95a=[..._0x28e209[_0x20a46c(0xca)]];if(_0x3eb95a&&_0x3eb95a[_0x20a46c(0xc4)]>0x0){let _0x3fd580=Buffer['from'](_0x3eb95a[0x0]['extraction']);zipUtil[_0x20a46c(0xa0)](_0x3fd580,_0x330f00)[_0x20a46c(0xc2)](_0x3eca31=>{_0x2adf35(_0x3eca31);});}else _0x2adf35(null);}catch(_0x4a1965){_0x2adf35(null);}});}):(console[_0x1e3b6c(0xc9)]('不支持的压缩文件格式',_0xc98f16),_0x2adf35(null));}catch(_0x3a0609){console[_0x1e3b6c(0xc9)](_0x3a0609),_0x2adf35(null);}});},zipUtil[_0x4fab42(0xb6)]=_0x4862fe=>{return new Promise((_0x4b28e1,_0x1b2d48)=>{const _0x17b3e1=_0x52e3;try{zipUtil[_0x17b3e1(0xbe)](_0x4862fe,!![])[_0x17b3e1(0xc2)](_0x5eeb0c=>{const _0x2e209f=_0x17b3e1;if(_0x5eeb0c['length']>0x0){let _0x50bc52=_0x5eeb0c[0x0];zipUtil[_0x2e209f(0xbb)](_0x4862fe,_0x50bc52[_0x2e209f(0xc8)])[_0x2e209f(0xc2)](_0x3070a2=>{const _0x30629a=_0x2e209f;_0x4b28e1({'dealedBuffer':_0x3070a2,'fileCount':_0x5eeb0c[_0x30629a(0xc4)]});});}else _0x4b28e1(null);});}catch(_0x4444db){_0x4b28e1(null);}});},module[_0x4fab42(0xb7)]=zipUtil;