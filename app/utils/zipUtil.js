const _0x37bb67=_0x8e12;(function(_0x424f8d,_0x397fbf){const _0x5971b0=_0x8e12,_0x3f6197=_0x424f8d();while(!![]){try{const _0x1e2703=-parseInt(_0x5971b0(0x16a))/0x1*(-parseInt(_0x5971b0(0x15c))/0x2)+-parseInt(_0x5971b0(0x14c))/0x3+-parseInt(_0x5971b0(0x158))/0x4*(parseInt(_0x5971b0(0x143))/0x5)+-parseInt(_0x5971b0(0x160))/0x6+parseInt(_0x5971b0(0x16c))/0x7+-parseInt(_0x5971b0(0x16e))/0x8*(parseInt(_0x5971b0(0x159))/0x9)+parseInt(_0x5971b0(0x165))/0xa;if(_0x1e2703===_0x397fbf)break;else _0x3f6197['push'](_0x3f6197['shift']());}catch(_0x58272){_0x3f6197['push'](_0x3f6197['shift']());}}}(_0x4181,0xe76e9));const path=require(_0x37bb67(0x150));let zipUtil={};function _0x8e12(_0x19c9e9,_0x190044){const _0x4181b4=_0x4181();return _0x8e12=function(_0x8e12e8,_0x1c3566){_0x8e12e8=_0x8e12e8-0x141;let _0x23b854=_0x4181b4[_0x8e12e8];return _0x23b854;},_0x8e12(_0x19c9e9,_0x190044);}const sharp=require(_0x37bb67(0x153)),AdmZip=require(_0x37bb67(0x144)),unrar=require(_0x37bb67(0x14f)),fs=require('fs'),config=require(_0x37bb67(0x164)),EPub=require(_0x37bb67(0x147)),zipEpubUtil=require(_0x37bb67(0x149)),arrayUtil=require(_0x37bb67(0x141));zipUtil[_0x37bb67(0x145)]=(_0x5eb6d0,_0x3e6616)=>{return new Promise((_0x5df9c3,_0x261b55)=>{const _0xd48641=_0x8e12;let _0x43322d=[];try{let _0x4cc861=path['extname'](_0x5eb6d0);_0x4cc861&&(_0x4cc861=_0x4cc861[_0xd48641(0x15b)]());if(_0x4cc861==_0xd48641(0x15f)||_0x4cc861==_0xd48641(0x15d)){const _0x2d6a2b=new AdmZip(_0x5eb6d0);_0x2d6a2b['getEntries']()['forEach'](_0x3ca21b=>{const _0x168b48=_0xd48641;let _0x5cf339=!![],_0x4ff71a=path[_0x168b48(0x156)](_0x3ca21b[_0x168b48(0x163)]);_0x3e6616&&(_0x5cf339=![],_0x4ff71a&&config[_0x168b48(0x157)]['includes'](_0x4ff71a[_0x168b48(0x15b)]())&&(_0x5cf339=!![])),_0x5cf339&&_0x43322d['push']({'isDir':_0x3ca21b[_0x168b48(0x14d)],'name':_0x3ca21b[_0x168b48(0x163)]});}),_0x5df9c3(arrayUtil['sortFileNamesByNumber'](_0x43322d,_0xd48641(0x14a)));}else{if(_0x4cc861==_0xd48641(0x154)||_0x4cc861=='.cbr')fs[_0xd48641(0x166)](_0x5eb6d0,(_0x54f3fb,_0x1f0c57)=>{const _0x55f3b2=_0xd48641;unrar['createExtractorFromData']({'data':_0x1f0c57})[_0x55f3b2(0x15a)](_0x2023b7=>{const _0x26b845=_0x55f3b2,_0x5dddaf=_0x2023b7[_0x26b845(0x14b)](),_0x1311de=[..._0x5dddaf[_0x26b845(0x168)]];for(let _0x81c47e of _0x1311de){let _0x4899b6=!![],_0xb0d86c=path[_0x26b845(0x156)](_0x81c47e[_0x26b845(0x14a)]);_0x3e6616&&(_0x4899b6=![],_0xb0d86c&&config['imgTypeList']['includes'](_0xb0d86c[_0x26b845(0x15b)]())&&(_0x4899b6=!![])),_0x4899b6&&_0x43322d[_0x26b845(0x146)]({'isDir':![],'name':_0x81c47e[_0x26b845(0x14a)]});}_0x5df9c3(arrayUtil[_0x26b845(0x148)](_0x43322d,_0x26b845(0x14a)));});});else _0x4cc861==_0xd48641(0x16b)?zipEpubUtil['getEpubImageList'](_0x5eb6d0)[_0xd48641(0x15a)](_0x3bb4d7=>{for(let _0x199a0f of _0x3bb4d7){_0x43322d['push']({'isDir':![],'name':_0x199a0f});}_0x5df9c3(_0x43322d);}):(console[_0xd48641(0x151)](_0xd48641(0x16d),_0x5eb6d0),_0x5df9c3([]));}}catch(_0x11098a){console[_0xd48641(0x151)](_0x11098a),_0x5df9c3([]);}});},zipUtil[_0x37bb67(0x169)]=(_0xa01f71,_0x13b5c3)=>{return new Promise((_0x353f1c,_0x46dbdc)=>{const _0x297b5e=_0x8e12;let _0x1d626d=path[_0x297b5e(0x156)](_0x13b5c3);_0x1d626d&&config['imgTypeList']['includes'](_0x1d626d['toLowerCase']())?sharp(_0xa01f71,{'failOnError':![]})[_0x297b5e(0x162)]({'quality':0x4d})[_0x297b5e(0x161)]()['then'](_0x451d04=>{_0x353f1c(_0x451d04);})[_0x297b5e(0x155)](_0x49c220=>{const _0x3cc103=_0x297b5e;console[_0x3cc103(0x151)](_0x49c220),_0x353f1c(_0xa01f71);}):_0x353f1c(_0xa01f71);});},zipUtil[_0x37bb67(0x142)]=(_0x345514,_0x40af95)=>{return new Promise((_0xbb67ac,_0x539385)=>{const _0x587441=_0x8e12;try{let _0x577f7a=path[_0x587441(0x156)](_0x345514);_0x577f7a&&(_0x577f7a=_0x577f7a[_0x587441(0x15b)]());if(_0x577f7a==_0x587441(0x15f)||_0x577f7a==_0x587441(0x15d)||_0x577f7a=='.epub'){const _0xa04544=new AdmZip(_0x345514);let _0x2dba80=_0xa04544[_0x587441(0x166)](_0x40af95);zipUtil['getSharpDealedBuffer'](_0x2dba80,_0x40af95)[_0x587441(0x15a)](_0xdba911=>{_0xbb67ac(_0xdba911);});}else _0x577f7a==_0x587441(0x154)||_0x577f7a==_0x587441(0x14e)?fs[_0x587441(0x166)](_0x345514,(_0x5ae156,_0x5f1c00)=>{const _0x22d36d=_0x587441;if(_0x5ae156)return console[_0x22d36d(0x151)](_0x5ae156),_0xbb67ac(null);unrar[_0x22d36d(0x15e)]({'data':_0x5f1c00})[_0x22d36d(0x15a)](_0x3918ad=>{const _0x43d5e8=_0x22d36d;try{const _0x20243e=_0x3918ad[_0x43d5e8(0x152)]({'files':[_0x40af95]}),_0x52c2b2=[..._0x20243e['files']];if(_0x52c2b2&&_0x52c2b2['length']>0x0){let _0x2df9d8=Buffer['from'](_0x52c2b2[0x0]['extraction']);zipUtil[_0x43d5e8(0x169)](_0x2df9d8,_0x40af95)[_0x43d5e8(0x15a)](_0x5dd6c0=>{_0xbb67ac(_0x5dd6c0);});}else _0xbb67ac(null);}catch(_0x74268){_0xbb67ac(null);}});}):(console['log'](_0x587441(0x16d),_0x345514),_0xbb67ac(null));}catch(_0x1df468){console[_0x587441(0x151)](_0x1df468),_0xbb67ac(null);}});},zipUtil['getZipCover']=_0x249b67=>{return new Promise((_0x5cd8a6,_0x185cd2)=>{const _0x7ce3e4=_0x8e12;try{zipUtil['getZipInnerFileList'](_0x249b67,!![])[_0x7ce3e4(0x15a)](_0x51b982=>{const _0x529976=_0x7ce3e4;if(_0x51b982[_0x529976(0x167)]>0x0){let _0x27e216=_0x51b982[0x0];zipUtil[_0x529976(0x142)](_0x249b67,_0x27e216[_0x529976(0x14a)])['then'](_0xced92=>{_0x5cd8a6({'dealedBuffer':_0xced92,'fileCount':_0x51b982['length']});});}else _0x5cd8a6(null);});}catch(_0x446ba9){_0x5cd8a6(null);}});},module['exports']=zipUtil;function _0x4181(){const _0x1d83a5=['createExtractorFromData','.zip','1736082NxcdTd','toBuffer','jpeg','entryName','../myConfig/config','31471530DUwKll','readFile','length','fileHeaders','getSharpDealedBuffer','218414WxQkXo','.epub','1768809rdzxNj','不支持的压缩文件格式','136GCwNLE','./arrayUtil','getInnerFileContent','921045ItzgOM','adm-zip','getZipInnerFileList','push','epub','sortFileNamesByNumber','./zipEpubUtil','name','getFileList','3615522smwXMj','isDirectory','.cbr','node-unrar-js','path','log','extract','sharp','.rar','catch','extname','imgTypeList','28Glyxre','171081kzhcGz','then','toLowerCase','6tckNRd','.cbz'];_0x4181=function(){return _0x1d83a5;};return _0x4181();}