function _0x3dd5(){const _0xd04285=['readFile','length','./zipEpubUtil','../myConfig/config','1221299iCChRl','5481848qihRmv','epub','2353149oAsONS','7450985JIFPnN','name','adm-zip','.zip','extract','getZipCover','extname','then','entryName','exports','createExtractorFromData','.cbz','.cbr','node-unrar-js','./arrayUtil','2jtCcOi','sharp','path','.epub','from','getSharpDealedBuffer','.rar','34232730zaMwQZ','forEach','4EoJbqe','log','isDirectory','1973784NrEHXC','fileHeaders','getFileList','sortFileNamesByNumber','getZipInnerFileList','toLowerCase','extraction','includes','2680728dhKfxI','getEntries','push','catch','imgTypeList','不支持的压缩文件格式','jpeg','getInnerFileContent','14UXLQxb'];_0x3dd5=function(){return _0xd04285;};return _0x3dd5();}const _0x191cca=_0x55fc;function _0x55fc(_0x4262f2,_0x5c4c36){const _0x3dd52e=_0x3dd5();return _0x55fc=function(_0x55fcaa,_0x41d6de){_0x55fcaa=_0x55fcaa-0x1ac;let _0x522a1b=_0x3dd52e[_0x55fcaa];return _0x522a1b;},_0x55fc(_0x4262f2,_0x5c4c36);}(function(_0xd15adf,_0x2636b7){const _0x4e5572=_0x55fc,_0x5e2e78=_0xd15adf();while(!![]){try{const _0x32e135=-parseInt(_0x4e5572(0x1ae))/0x1*(-parseInt(_0x4e5572(0x1c1))/0x2)+-parseInt(_0x4e5572(0x1d5))/0x3*(parseInt(_0x4e5572(0x1ca))/0x4)+-parseInt(_0x4e5572(0x1b2))/0x5+-parseInt(_0x4e5572(0x1cd))/0x6+-parseInt(_0x4e5572(0x1dd))/0x7*(parseInt(_0x4e5572(0x1af))/0x8)+parseInt(_0x4e5572(0x1b1))/0x9+parseInt(_0x4e5572(0x1c8))/0xa;if(_0x32e135===_0x2636b7)break;else _0x5e2e78['push'](_0x5e2e78['shift']());}catch(_0x4a9241){_0x5e2e78['push'](_0x5e2e78['shift']());}}}(_0x3dd5,0xc8e32));const path=require(_0x191cca(0x1c3));let zipUtil={};const sharp=require(_0x191cca(0x1c2)),AdmZip=require(_0x191cca(0x1b4)),unrar=require(_0x191cca(0x1bf)),fs=require('fs'),config=require(_0x191cca(0x1ad)),EPub=require(_0x191cca(0x1b0)),zipEpubUtil=require(_0x191cca(0x1ac)),arrayUtil=require(_0x191cca(0x1c0));zipUtil[_0x191cca(0x1d1)]=(_0x1d06fe,_0x489cb3)=>{return new Promise((_0xb3b740,_0x38e1b3)=>{const _0x178012=_0x55fc;let _0xbe644e=[];try{let _0x49a600=path[_0x178012(0x1b8)](_0x1d06fe);_0x49a600&&(_0x49a600=_0x49a600[_0x178012(0x1d2)]());if(_0x49a600=='.zip'||_0x49a600=='.cbz'){const _0xef3bd8=new AdmZip(_0x1d06fe);_0xef3bd8[_0x178012(0x1d6)]()[_0x178012(0x1c9)](_0x1929b3=>{const _0x268a44=_0x178012;let _0x526b00=!![],_0x3f34c2=path[_0x268a44(0x1b8)](_0x1929b3['entryName']);_0x489cb3&&(_0x526b00=![],_0x3f34c2&&config['imgTypeList'][_0x268a44(0x1d4)](_0x3f34c2[_0x268a44(0x1d2)]())&&(_0x526b00=!![])),_0x526b00&&_0xbe644e[_0x268a44(0x1d7)]({'isDir':_0x1929b3[_0x268a44(0x1cc)],'name':_0x1929b3[_0x268a44(0x1ba)]});}),_0xb3b740(arrayUtil['sortFileNamesByNumber'](_0xbe644e,_0x178012(0x1b3)));}else{if(_0x49a600==_0x178012(0x1c7)||_0x49a600==_0x178012(0x1be))fs[_0x178012(0x1de)](_0x1d06fe,(_0x5eeb62,_0x22d97e)=>{const _0x34578a=_0x178012;unrar[_0x34578a(0x1bc)]({'data':_0x22d97e})['then'](_0x117cbe=>{const _0x22ce51=_0x34578a,_0x5cb14b=_0x117cbe[_0x22ce51(0x1cf)](),_0x52c1c5=[..._0x5cb14b[_0x22ce51(0x1ce)]];for(let _0x15dafd of _0x52c1c5){let _0x402a29=!![],_0x51b6b=path[_0x22ce51(0x1b8)](_0x15dafd['name']);_0x489cb3&&(_0x402a29=![],_0x51b6b&&config[_0x22ce51(0x1d9)][_0x22ce51(0x1d4)](_0x51b6b[_0x22ce51(0x1d2)]())&&(_0x402a29=!![])),_0x402a29&&_0xbe644e[_0x22ce51(0x1d7)]({'isDir':![],'name':_0x15dafd[_0x22ce51(0x1b3)]});}_0xb3b740(arrayUtil[_0x22ce51(0x1d0)](_0xbe644e,'name'));});});else _0x49a600==_0x178012(0x1c4)?zipEpubUtil['getEpubImageList'](_0x1d06fe)['then'](_0xb64c50=>{for(let _0x2cb293 of _0xb64c50){_0xbe644e['push']({'isDir':![],'name':_0x2cb293});}_0xb3b740(_0xbe644e);}):(console['log'](_0x178012(0x1da),_0x1d06fe),_0xb3b740([]));}}catch(_0x41b106){console['log'](_0x41b106),_0xb3b740([]);}});},zipUtil[_0x191cca(0x1c6)]=(_0x920409,_0x4ff9a0)=>{return new Promise((_0x25c373,_0x13d94b)=>{const _0x47d1db=_0x55fc;let _0x324294=path[_0x47d1db(0x1b8)](_0x4ff9a0);_0x324294&&config[_0x47d1db(0x1d9)][_0x47d1db(0x1d4)](_0x324294[_0x47d1db(0x1d2)]())?sharp(_0x920409,{'failOnError':![]})[_0x47d1db(0x1db)]({'quality':0x4d})['toBuffer']()[_0x47d1db(0x1b9)](_0x8b0683=>{_0x25c373(_0x8b0683);})[_0x47d1db(0x1d8)](_0x3d3d22=>{const _0x14852c=_0x47d1db;console[_0x14852c(0x1cb)](_0x3d3d22),_0x25c373(_0x920409);}):_0x25c373(_0x920409);});},zipUtil[_0x191cca(0x1dc)]=(_0x4b3634,_0x58b773)=>{return new Promise((_0x40919c,_0x2c3dd3)=>{const _0x1397ad=_0x55fc;try{let _0x5c6dba=path[_0x1397ad(0x1b8)](_0x4b3634);_0x5c6dba&&(_0x5c6dba=_0x5c6dba[_0x1397ad(0x1d2)]());if(_0x5c6dba==_0x1397ad(0x1b5)||_0x5c6dba==_0x1397ad(0x1bd)||_0x5c6dba=='.epub'){const _0x2fe687=new AdmZip(_0x4b3634);let _0x18e923=_0x2fe687['readFile'](_0x58b773);zipUtil[_0x1397ad(0x1c6)](_0x18e923,_0x58b773)[_0x1397ad(0x1b9)](_0x58e869=>{_0x40919c(_0x58e869);});}else _0x5c6dba=='.rar'||_0x5c6dba=='.cbr'?fs[_0x1397ad(0x1de)](_0x4b3634,(_0xc0ad0c,_0x27598c)=>{const _0x636e01=_0x1397ad;if(_0xc0ad0c)return console[_0x636e01(0x1cb)](_0xc0ad0c),_0x40919c(null);unrar[_0x636e01(0x1bc)]({'data':_0x27598c})[_0x636e01(0x1b9)](_0x8a7984=>{const _0x344e43=_0x636e01;try{const _0x3c3e2b=_0x8a7984[_0x344e43(0x1b6)]({'files':[_0x58b773]}),_0x4e65b7=[..._0x3c3e2b['files']];if(_0x4e65b7&&_0x4e65b7[_0x344e43(0x1df)]>0x0){let _0x181b75=Buffer[_0x344e43(0x1c5)](_0x4e65b7[0x0][_0x344e43(0x1d3)]);zipUtil['getSharpDealedBuffer'](_0x181b75,_0x58b773)['then'](_0x117063=>{_0x40919c(_0x117063);});}else _0x40919c(null);}catch(_0x2d8b37){_0x40919c(null);}});}):(console[_0x1397ad(0x1cb)]('不支持的压缩文件格式',_0x4b3634),_0x40919c(null));}catch(_0xf567de){console[_0x1397ad(0x1cb)](_0xf567de),_0x40919c(null);}});},zipUtil[_0x191cca(0x1b7)]=_0x1cfd1f=>{return new Promise((_0x5d962d,_0x4715cd)=>{const _0x80b6ec=_0x55fc;try{zipUtil['getZipInnerFileList'](_0x1cfd1f,!![])[_0x80b6ec(0x1b9)](_0x3e141c=>{const _0x5c2b87=_0x80b6ec;if(_0x3e141c[_0x5c2b87(0x1df)]>0x0){let _0x277cc1=_0x3e141c[0x0];zipUtil[_0x5c2b87(0x1dc)](_0x1cfd1f,_0x277cc1['name'])[_0x5c2b87(0x1b9)](_0x3ec928=>{const _0x595723=_0x5c2b87;_0x5d962d({'dealedBuffer':_0x3ec928,'fileCount':_0x3e141c[_0x595723(0x1df)]});});}else _0x5d962d(null);});}catch(_0x58c26c){_0x5d962d(null);}});},module[_0x191cca(0x1bb)]=zipUtil;