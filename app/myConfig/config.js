const _0x516dc2=_0x3807;(function(_0x355b60,_0x34aa6b){const _0x1491e6=_0x3807,_0x649c48=_0x355b60();while(!![]){try{const _0x351ebf=-parseInt(_0x1491e6(0xd1))/0x1*(parseInt(_0x1491e6(0x110))/0x2)+-parseInt(_0x1491e6(0xeb))/0x3*(-parseInt(_0x1491e6(0xf6))/0x4)+parseInt(_0x1491e6(0xb7))/0x5+parseInt(_0x1491e6(0xcc))/0x6+parseInt(_0x1491e6(0xc5))/0x7+parseInt(_0x1491e6(0xc1))/0x8*(parseInt(_0x1491e6(0xf1))/0x9)+-parseInt(_0x1491e6(0xf9))/0xa;if(_0x351ebf===_0x34aa6b)break;else _0x649c48['push'](_0x649c48['shift']());}catch(_0x2a17ea){_0x649c48['push'](_0x649c48['shift']());}}}(_0x43fc,0xd6a30));let sha256=require(_0x516dc2(0xee)),path=require(_0x516dc2(0xce)),fs=require('fs');function _0x43fc(){const _0x3f11f5=['mtimeMs','nascab','cache','/NasCabTransCodeTempPath','constants','R_OK','join','darwin','subtitle','dbFileIndex.db','dirname','ctime','SELECT\x20*\x20FROM\x20config\x20where\x20title=?','userData','filename','m3u8TmpPath','tempMediaToolsUpload','44151OcRxrs','cacheParentPath','get','sha256','prepare','temp.','96381piXJlV','/.local/share','nascabisthebest','nascabsaccountinfo112u2','getPrivateDbPath','72vqFOOj','procodenascabSD012012093uUh0','nasAccountInfo','18065260YvnqsO','music_cover','NasCabTransCodeTempPath','plugin','/Library/Preferences','zh-CN','getLanguage','frpc','nascloudapikey123aaddbc','value','defaultLanguage','electron','musicTypeList','prisssdSlskjwoaljwejkjq112u2','size','../../package.json','cache_images','W_OK','subtitleUploadPath','videoTypeList','cachePath','nascabconfig','torrents','106jCXDeS','APPDATA','poster','appRootPath','tokenPwdEncryptKey','getMediaCoverCachePath','musicCoverPath','userDataFolder','5456750EqQnMC','mtime','transcodePath','stat','close','heicExt','subtitlePath','isDocker','accessSync','database','776ZEcqMx','exports','upload','env','5258442SzFJas','facesPath','tempFilePath','frpc.exe','linux','win32','findByTitle','5286828QhbFvl','bookTypeList','path','log','HOME','25315liiUXM','nascabPublicUser','language','.jpeg','existsSync','rawImgTypeList','dbOther.db','platform','exe'];_0x43fc=function(){return _0x3f11f5;};return _0x43fc();}const dbConfigTable=require('../db/dbConfigTable'),os=require('os'),packageInfo=require(_0x516dc2(0x108)),mediaType=require('./mediaType');let userDataFolder=process[_0x516dc2(0xc4)][_0x516dc2(0x117)];if(!userDataFolder)try{const {app}=require(_0x516dc2(0x104));if(app)userDataFolder=app['getPath'](_0x516dc2(0xe7));console[_0x516dc2(0xcf)]('NasCab\x20User\x20Data\x20Folder:',userDataFolder);}catch(_0x507ae2){}!userDataFolder&&(userDataFolder=process[_0x516dc2(0xc4)][_0x516dc2(0x111)]||(process[_0x516dc2(0xd8)]==_0x516dc2(0xe1)?process[_0x516dc2(0xc4)][_0x516dc2(0xd0)]+_0x516dc2(0xfd):process[_0x516dc2(0xc4)][_0x516dc2(0xd0)]+_0x516dc2(0xf2)),userDataFolder=path[_0x516dc2(0xe0)](userDataFolder,_0x516dc2(0xdb)));!fs['existsSync'](userDataFolder)&&fs['mkdirSync'](userDataFolder,{'recursive':!![]});let appRootPath=process[_0x516dc2(0xc4)][_0x516dc2(0x113)];if(!appRootPath)try{const {app}=require('electron');app&&app['isPackaged']?(appRootPath=path[_0x516dc2(0xe4)](app['getPath'](_0x516dc2(0xd9))),os[_0x516dc2(0xd8)]()=='darwin'&&(appRootPath=path[_0x516dc2(0xe4)](appRootPath))):appRootPath=path[_0x516dc2(0xe0)](__dirname,'../../');}catch(_0x4ad77c){appRootPath=path[_0x516dc2(0xe0)](__dirname,'../../');}let m3u8Path='',userSetCachePath='';const Database=require('better-sqlite3');let dbPath=path[_0x516dc2(0xe0)](userDataFolder,'database');if(fs[_0x516dc2(0xd5)](dbPath)){let dbOther=new Database(path[_0x516dc2(0xe0)](dbPath,_0x516dc2(0xd7)),{});try{let configM3u8TmpPath=dbOther[_0x516dc2(0xef)]('SELECT\x20*\x20FROM\x20config\x20where\x20title=?')[_0x516dc2(0xed)](_0x516dc2(0xb9));configM3u8TmpPath&&configM3u8TmpPath[_0x516dc2(0x102)]&&(fs[_0x516dc2(0xbf)](configM3u8TmpPath['value'],fs[_0x516dc2(0xde)][_0x516dc2(0x10a)]|fs[_0x516dc2(0xde)][_0x516dc2(0xdf)]),m3u8Path=configM3u8TmpPath[_0x516dc2(0x102)],dbOther['close']());}catch(_0x513df4){dbOther[_0x516dc2(0xbb)]();}dbOther=new Database(path[_0x516dc2(0xe0)](dbPath,'dbOther.db'),{});try{let cacheParentPath=dbOther[_0x516dc2(0xef)](_0x516dc2(0xe6))[_0x516dc2(0xed)](_0x516dc2(0xec));cacheParentPath&&cacheParentPath['value']&&(fs[_0x516dc2(0xbf)](cacheParentPath[_0x516dc2(0x102)],fs[_0x516dc2(0xde)][_0x516dc2(0x10a)]|fs['constants'][_0x516dc2(0xdf)]),userSetCachePath=cacheParentPath[_0x516dc2(0x102)],dbOther[_0x516dc2(0xbb)]());}catch(_0xbbef3f){dbOther[_0x516dc2(0xbb)]();}}let frpcFolder=path[_0x516dc2(0xe0)](userDataFolder,_0x516dc2(0xfc),_0x516dc2(0x100),'0.51.3'),config={'maxPsdSize':0x400*0x400*0x12c,'dbPath':dbPath,'frpcFolder':frpcFolder,'frpcPath':path[_0x516dc2(0xe0)](frpcFolder,os[_0x516dc2(0xd8)]()==_0x516dc2(0xca)?_0x516dc2(0xc8):_0x516dc2(0x100)),'frpcTempPath':path[_0x516dc2(0xe0)](frpcFolder,_0x516dc2(0xf0)+os['platform']()==_0x516dc2(0xca)?_0x516dc2(0xc8):_0x516dc2(0x100)),'publicUserName':_0x516dc2(0xd2),'exifMinTimeStamp':0x259e9d80,'nasAccountInfoPwd':_0x516dc2(0xf4),'nasAccountInfoConfigKey':_0x516dc2(0xf8),'apiTokenKey':_0x516dc2(0x101),'apiPort':os[_0x516dc2(0xd8)]()==_0x516dc2(0xc9)&&!packageInfo[_0x516dc2(0xbe)]?parseInt(0xc08):parseInt(0x50),'apiPortHttps':os['platform']()==_0x516dc2(0xc9)&&!packageInfo['isDocker']?parseInt(0xd73):parseInt(0x1bb),'webDavPort':parseInt(0x5a),'webDavPortHttps':parseInt(0x24e3),'FTPPort':parseInt(0x15),'appRootPath':appRootPath,'userDataFolder':userDataFolder,'dbFileIndex':path['join'](userDataFolder,_0x516dc2(0xc0),_0x516dc2(0xe3)),'dbOther':path[_0x516dc2(0xe0)](userDataFolder,_0x516dc2(0xc0),'dbOther.db'),'uploadTempFilePrefix':'nascab.tmp.','privateSpaceKey':_0x516dc2(0x106),'passwordKey':'nascabslskjwoaljwejkjq112u2','proCodeKey':_0x516dc2(0xf7),'heicExt':mediaType[_0x516dc2(0xbc)],'imgTypeList':mediaType['imgTypeList'],'rawImgTypeList':mediaType[_0x516dc2(0xd6)],'videoTypeList':mediaType[_0x516dc2(0x10c)],'musicTypeList':mediaType[_0x516dc2(0x105)],'bookTypeList':mediaType[_0x516dc2(0xcd)]};function _0x3807(_0x4d9c96,_0x1c1e43){const _0x43fcda=_0x43fc();return _0x3807=function(_0x3807af,_0x5a4436){_0x3807af=_0x3807af-0xb7;let _0x1b90e6=_0x43fcda[_0x3807af];return _0x1b90e6;},_0x3807(_0x4d9c96,_0x1c1e43);}config['getFileHashNameByPathAndStat']=function(_0x396bc6,_0x1057dc,_0x596969){const _0x341ad0=_0x516dc2;fs[_0x341ad0(0xba)](_0x1057dc,(_0x10df6f,_0x5a3d1a)=>{const _0x3360d3=_0x341ad0;if(_0x10df6f)_0x596969(![]);let _0x19b38c=_0x1057dc+_0x5a3d1a['ctimeMs']+_0x5a3d1a[_0x3360d3(0xda)]+_0x5a3d1a[_0x3360d3(0x107)]+'',_0x2a0ae7=sha256(_0x19b38c)+_0x3360d3(0xd4);_0x396bc6&&(_0x2a0ae7=_0x396bc6+_0x2a0ae7),_0x596969(_0x2a0ae7);});},config['getFileHashName']=function(_0x27858b){const _0x438656=_0x516dc2;let _0x5abe0d=path[_0x438656(0xe0)](_0x27858b[_0x438656(0xce)],_0x27858b['filename'])+_0x27858b[_0x438656(0xe5)]+_0x27858b[_0x438656(0xb8)]+_0x27858b['size']+'',_0x519578=sha256(_0x5abe0d)+_0x438656(0xd4);return _0x519578;};let cacheParentPath=userSetCachePath?userSetCachePath:path['join'](userDataFolder,_0x516dc2(0x109));config[_0x516dc2(0xec)]=cacheParentPath,config[_0x516dc2(0x10d)]=path[_0x516dc2(0xe0)](cacheParentPath,_0x516dc2(0xdc)),config['posterPath']=path[_0x516dc2(0xe0)](cacheParentPath,_0x516dc2(0x112)),config[_0x516dc2(0xc6)]=path[_0x516dc2(0xe0)](cacheParentPath,'faces'),config[_0x516dc2(0x116)]=path[_0x516dc2(0xe0)](cacheParentPath,_0x516dc2(0xfa)),config[_0x516dc2(0xbd)]=path[_0x516dc2(0xe0)](cacheParentPath,_0x516dc2(0xe2)),config['torrentPath']=path[_0x516dc2(0xe0)](cacheParentPath,_0x516dc2(0x10f)),config[_0x516dc2(0x10b)]=path[_0x516dc2(0xe0)](cacheParentPath,'subtitle',_0x516dc2(0xc3)),config[_0x516dc2(0xc7)]=path[_0x516dc2(0xe0)](cacheParentPath,'tempFiles'),config[_0x516dc2(0xea)]=path[_0x516dc2(0xe0)](cacheParentPath,_0x516dc2(0xea)),config[_0x516dc2(0x115)]=function(_0x8171fd,_0x1f8f91){const _0x1353cd=_0x516dc2;let _0x555022=path[_0x1353cd(0xe0)](_0x8171fd[_0x1353cd(0xce)],_0x8171fd[_0x1353cd(0xe8)])+_0x8171fd['ctime']+_0x8171fd[_0x1353cd(0xb8)]+_0x8171fd[_0x1353cd(0x107)]+'',_0x1925d7=sha256(_0x555022)+'.jpeg';return _0x1f8f91&&(_0x1925d7=_0x1f8f91+_0x1925d7),path['join'](config[_0x1353cd(0x116)],_0x1925d7);};m3u8Path?config[_0x516dc2(0xe9)]=path[_0x516dc2(0xe0)](m3u8Path,_0x516dc2(0xfb)):packageInfo[_0x516dc2(0xbe)]?config[_0x516dc2(0xe9)]=path['join'](_0x516dc2(0xdd)):config[_0x516dc2(0xe9)]=path[_0x516dc2(0xe0)](userDataFolder,_0x516dc2(0xfb));config['m3u8segmentDuration']=0x3,config[_0x516dc2(0xf5)]=function(_0x3dbd7b){const _0x95c469=_0x516dc2;return path[_0x95c469(0xe0)](_0x3dbd7b,_0x95c469(0x10e),'dbnascab');};let defaultLanguage=_0x516dc2(0xfe);config[_0x516dc2(0xff)]=function(_0x1cf013){const _0x30404f=_0x516dc2;let _0x3c62d8=dbConfigTable[_0x30404f(0xcb)](_0x1cf013,_0x30404f(0xd3)),_0x49eb3e=defaultLanguage;return _0x3c62d8&&(_0x49eb3e=_0x3c62d8['value']),_0x49eb3e;},config[_0x516dc2(0x103)]=defaultLanguage,config[_0x516dc2(0x114)]=_0x516dc2(0xf3),module[_0x516dc2(0xc2)]=config;