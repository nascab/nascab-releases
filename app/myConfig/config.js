const _0x2cd35d=_0x2024;(function(_0x41ba78,_0x538729){const _0x5addc5=_0x2024,_0x1b4c74=_0x41ba78();while(!![]){try{const _0x250ee2=parseInt(_0x5addc5(0x17a))/0x1+parseInt(_0x5addc5(0x185))/0x2+parseInt(_0x5addc5(0x17e))/0x3*(parseInt(_0x5addc5(0x175))/0x4)+-parseInt(_0x5addc5(0x16c))/0x5+-parseInt(_0x5addc5(0x18f))/0x6+-parseInt(_0x5addc5(0x174))/0x7*(-parseInt(_0x5addc5(0x180))/0x8)+-parseInt(_0x5addc5(0x187))/0x9*(parseInt(_0x5addc5(0x159))/0xa);if(_0x250ee2===_0x538729)break;else _0x1b4c74['push'](_0x1b4c74['shift']());}catch(_0x495ff3){_0x1b4c74['push'](_0x1b4c74['shift']());}}}(_0xa94e,0xb20f5));let sha256=require(_0x2cd35d(0x14f)),path=require(_0x2cd35d(0x155)),fs=require('fs');const dbConfigTable=require('../db/dbConfigTable'),os=require('os'),packageInfo=require('../../package.json'),mediaType=require(_0x2cd35d(0x14e));let userDataFolder=process[_0x2cd35d(0x152)][_0x2cd35d(0x15c)];if(!userDataFolder)try{const {app}=require('electron');if(app)userDataFolder=app['getPath'](_0x2cd35d(0x143));console['log'](_0x2cd35d(0x18e),userDataFolder);}catch(_0x1fc20e){}function _0xa94e(){const _0x38b2dc=['tempMediaToolsUpload','heicExt','darwin','nasAccountInfo','join','tokenPwdEncryptKey','dbOther.db','electron','constants','./mediaType','sha256','W_OK','database','env','rawImgTypeList','.jpeg','path','../../','value','ctime','10DoUIMz','nascloudapikey123aaddbc','existsSync','userDataFolder','upload','dirname','dbFileIndex.db','getPath','getPrivateDbPath','torrentPath','win32','platform','isDocker','prisssdSlskjwoaljwejkjq112u2','videoTypeList','HOME','subtitle','getMediaCoverCachePath','exports','6983420VsHpmL','exe','size','cacheParentPath','/.local/share','tempFilePath','cache_images','findByTitle','553iNqish','120pjmpYM','linux','/NasCabTransCodeTempPath','isPackaged','nascabslskjwoaljwejkjq112u2','1068910JxxVFo','temp.','nascabPublicUser','language','135015TLasVs','get','114656kURvdw','m3u8segmentDuration','cache','filename','nascabisthebest','1099500hPfmXv','mtime','12954969fSpeae','torrents','mtimeMs','procodenascabSD012012093uUh0','cachePath','musicCoverPath','mkdirSync','NasCab\x20User\x20Data\x20Folder:','3213480ImtUhs','frpc.exe','NasCabTransCodeTempPath','posterPath','prepare','appRootPath','m3u8TmpPath','facesPath','nascabsaccountinfo112u2','dbnascab','imgTypeList','defaultLanguage','0.51.3','bookTypeList','plugin','musicTypeList','music_cover','getLanguage','accessSync','/Library/Preferences','subtitleUploadPath','ctimeMs','R_OK','close','userData','frpc'];_0xa94e=function(){return _0x38b2dc;};return _0xa94e();}!userDataFolder&&(userDataFolder=process[_0x2cd35d(0x152)]['APPDATA']||(process['platform']==_0x2cd35d(0x147)?process[_0x2cd35d(0x152)][_0x2cd35d(0x168)]+_0x2cd35d(0x1a2):process[_0x2cd35d(0x152)][_0x2cd35d(0x168)]+_0x2cd35d(0x170)),userDataFolder=path['join'](userDataFolder,'nascab'));!fs[_0x2cd35d(0x15b)](userDataFolder)&&fs[_0x2cd35d(0x18d)](userDataFolder,{'recursive':!![]});let appRootPath=process[_0x2cd35d(0x152)][_0x2cd35d(0x194)];if(!appRootPath)try{const {app}=require(_0x2cd35d(0x14c));app&&app[_0x2cd35d(0x178)]?(appRootPath=path['dirname'](app[_0x2cd35d(0x160)](_0x2cd35d(0x16d))),os[_0x2cd35d(0x164)]()==_0x2cd35d(0x147)&&(appRootPath=path[_0x2cd35d(0x15e)](appRootPath))):appRootPath=path[_0x2cd35d(0x149)](__dirname,_0x2cd35d(0x156));}catch(_0x1f7d30){appRootPath=path['join'](__dirname,_0x2cd35d(0x156));}let m3u8Path='',userSetCachePath='';const Database=require('better-sqlite3');let dbPath=path['join'](userDataFolder,_0x2cd35d(0x151));if(fs[_0x2cd35d(0x15b)](dbPath)){let dbOther=new Database(path[_0x2cd35d(0x149)](dbPath,_0x2cd35d(0x14b)),{});try{let configM3u8TmpPath=dbOther['prepare']('SELECT\x20*\x20FROM\x20config\x20where\x20title=?')[_0x2cd35d(0x17f)]('transcodePath');configM3u8TmpPath&&configM3u8TmpPath[_0x2cd35d(0x157)]&&(fs['accessSync'](configM3u8TmpPath[_0x2cd35d(0x157)],fs['constants'][_0x2cd35d(0x150)]|fs[_0x2cd35d(0x14d)][_0x2cd35d(0x141)]),m3u8Path=configM3u8TmpPath['value'],dbOther[_0x2cd35d(0x142)]());}catch(_0x243b77){dbOther[_0x2cd35d(0x142)]();}dbOther=new Database(path[_0x2cd35d(0x149)](dbPath,_0x2cd35d(0x14b)),{});try{let cacheParentPath=dbOther[_0x2cd35d(0x193)]('SELECT\x20*\x20FROM\x20config\x20where\x20title=?')[_0x2cd35d(0x17f)](_0x2cd35d(0x16f));cacheParentPath&&cacheParentPath[_0x2cd35d(0x157)]&&(fs[_0x2cd35d(0x1a1)](cacheParentPath[_0x2cd35d(0x157)],fs[_0x2cd35d(0x14d)]['W_OK']|fs[_0x2cd35d(0x14d)][_0x2cd35d(0x141)]),userSetCachePath=cacheParentPath['value'],dbOther['close']());}catch(_0x590b9e){dbOther[_0x2cd35d(0x142)]();}}let frpcFolder=path[_0x2cd35d(0x149)](userDataFolder,_0x2cd35d(0x19d),_0x2cd35d(0x144),_0x2cd35d(0x19b)),config={'maxPsdSize':0x400*0x400*0x12c,'dbPath':dbPath,'frpcFolder':frpcFolder,'frpcPath':path[_0x2cd35d(0x149)](frpcFolder,os[_0x2cd35d(0x164)]()=='win32'?_0x2cd35d(0x190):_0x2cd35d(0x144)),'frpcTempPath':path['join'](frpcFolder,_0x2cd35d(0x17b)+os[_0x2cd35d(0x164)]()==_0x2cd35d(0x163)?_0x2cd35d(0x190):'frpc'),'publicUserName':_0x2cd35d(0x17c),'exifMinTimeStamp':0x259e9d80,'nasAccountInfoPwd':_0x2cd35d(0x197),'nasAccountInfoConfigKey':_0x2cd35d(0x148),'apiTokenKey':_0x2cd35d(0x15a),'apiPort':os[_0x2cd35d(0x164)]()=='linux'&&!packageInfo[_0x2cd35d(0x165)]?parseInt(0xc08):parseInt(0x50),'apiPortHttps':os[_0x2cd35d(0x164)]()==_0x2cd35d(0x176)&&!packageInfo[_0x2cd35d(0x165)]?parseInt(0xd73):parseInt(0x1bb),'webDavPort':parseInt(0x5a),'webDavPortHttps':parseInt(0x24e3),'FTPPort':parseInt(0x15),'appRootPath':appRootPath,'userDataFolder':userDataFolder,'dbFileIndex':path['join'](userDataFolder,_0x2cd35d(0x151),_0x2cd35d(0x15f)),'dbOther':path[_0x2cd35d(0x149)](userDataFolder,'database',_0x2cd35d(0x14b)),'uploadTempFilePrefix':'nascab.tmp.','privateSpaceKey':_0x2cd35d(0x166),'passwordKey':_0x2cd35d(0x179),'proCodeKey':_0x2cd35d(0x18a),'heicExt':mediaType[_0x2cd35d(0x146)],'imgTypeList':mediaType[_0x2cd35d(0x199)],'rawImgTypeList':mediaType[_0x2cd35d(0x153)],'videoTypeList':mediaType[_0x2cd35d(0x167)],'musicTypeList':mediaType[_0x2cd35d(0x19e)],'bookTypeList':mediaType[_0x2cd35d(0x19c)]};config['getFileHashNameByPathAndStat']=function(_0x4e27e0,_0x55b993,_0x432398){fs['stat'](_0x55b993,(_0x584e45,_0x517ea3)=>{const _0x4cf664=_0x2024;if(_0x584e45)_0x432398(![]);let _0x54f2fe=_0x55b993+_0x517ea3[_0x4cf664(0x140)]+_0x517ea3[_0x4cf664(0x189)]+_0x517ea3['size']+'',_0xff8701=sha256(_0x54f2fe)+_0x4cf664(0x154);_0x4e27e0&&(_0xff8701=_0x4e27e0+_0xff8701),_0x432398(_0xff8701);});},config['getFileHashName']=function(_0x19cc93){const _0x22a7a4=_0x2cd35d;let _0x10d2ad=path[_0x22a7a4(0x149)](_0x19cc93['path'],_0x19cc93[_0x22a7a4(0x183)])+_0x19cc93[_0x22a7a4(0x158)]+_0x19cc93[_0x22a7a4(0x186)]+_0x19cc93[_0x22a7a4(0x16e)]+'',_0x3d710d=sha256(_0x10d2ad)+_0x22a7a4(0x154);return _0x3d710d;};let cacheParentPath=userSetCachePath?userSetCachePath:path[_0x2cd35d(0x149)](userDataFolder,_0x2cd35d(0x172));config[_0x2cd35d(0x16f)]=cacheParentPath,config[_0x2cd35d(0x18b)]=path['join'](cacheParentPath,_0x2cd35d(0x182)),config[_0x2cd35d(0x192)]=path[_0x2cd35d(0x149)](cacheParentPath,'poster'),config[_0x2cd35d(0x196)]=path[_0x2cd35d(0x149)](cacheParentPath,'faces'),config[_0x2cd35d(0x18c)]=path[_0x2cd35d(0x149)](cacheParentPath,_0x2cd35d(0x19f)),config['subtitlePath']=path[_0x2cd35d(0x149)](cacheParentPath,_0x2cd35d(0x169)),config[_0x2cd35d(0x162)]=path[_0x2cd35d(0x149)](cacheParentPath,_0x2cd35d(0x188)),config[_0x2cd35d(0x1a3)]=path[_0x2cd35d(0x149)](cacheParentPath,_0x2cd35d(0x169),_0x2cd35d(0x15d)),config[_0x2cd35d(0x171)]=path[_0x2cd35d(0x149)](cacheParentPath,'tempFiles'),config[_0x2cd35d(0x145)]=path[_0x2cd35d(0x149)](cacheParentPath,_0x2cd35d(0x145)),config[_0x2cd35d(0x16a)]=function(_0x29d667,_0x3533e1){const _0x40134f=_0x2cd35d;let _0x2166d2=path[_0x40134f(0x149)](_0x29d667[_0x40134f(0x155)],_0x29d667['filename'])+_0x29d667[_0x40134f(0x158)]+_0x29d667[_0x40134f(0x186)]+_0x29d667['size']+'',_0x3e1116=sha256(_0x2166d2)+_0x40134f(0x154);return _0x3533e1&&(_0x3e1116=_0x3533e1+_0x3e1116),path[_0x40134f(0x149)](config[_0x40134f(0x18c)],_0x3e1116);};m3u8Path?config[_0x2cd35d(0x195)]=path[_0x2cd35d(0x149)](m3u8Path,_0x2cd35d(0x191)):packageInfo[_0x2cd35d(0x165)]?config[_0x2cd35d(0x195)]=path[_0x2cd35d(0x149)](_0x2cd35d(0x177)):config['m3u8TmpPath']=path[_0x2cd35d(0x149)](userDataFolder,_0x2cd35d(0x191));config[_0x2cd35d(0x181)]=0x3,config[_0x2cd35d(0x161)]=function(_0x9de28b){const _0x69294=_0x2cd35d;return path[_0x69294(0x149)](_0x9de28b,'nascabconfig',_0x69294(0x198));};function _0x2024(_0x4cb12d,_0x525288){const _0xa94e30=_0xa94e();return _0x2024=function(_0x20244b,_0x30e0c0){_0x20244b=_0x20244b-0x140;let _0x42880d=_0xa94e30[_0x20244b];return _0x42880d;},_0x2024(_0x4cb12d,_0x525288);}let defaultLanguage='zh-CN';config[_0x2cd35d(0x1a0)]=function(_0x354190){const _0x23cf79=_0x2cd35d;let _0x24cc68=dbConfigTable[_0x23cf79(0x173)](_0x354190,_0x23cf79(0x17d)),_0x347326=defaultLanguage;return _0x24cc68&&(_0x347326=_0x24cc68[_0x23cf79(0x157)]),_0x347326;},config[_0x2cd35d(0x19a)]=defaultLanguage,config[_0x2cd35d(0x14a)]=_0x2cd35d(0x184),module[_0x2cd35d(0x16b)]=config;