const _0x1dfb3e=_0x23f9;(function(_0x4dc7e2,_0x3cae41){const _0x42503c=_0x23f9,_0x3ebbff=_0x4dc7e2();while(!![]){try{const _0x4b1b2e=parseInt(_0x42503c(0x172))/0x1+-parseInt(_0x42503c(0x10b))/0x2+parseInt(_0x42503c(0x16f))/0x3*(parseInt(_0x42503c(0x114))/0x4)+parseInt(_0x42503c(0x180))/0x5*(parseInt(_0x42503c(0x15e))/0x6)+parseInt(_0x42503c(0x112))/0x7*(parseInt(_0x42503c(0xfd))/0x8)+-parseInt(_0x42503c(0x14b))/0x9+parseInt(_0x42503c(0x117))/0xa*(-parseInt(_0x42503c(0x119))/0xb);if(_0x4b1b2e===_0x3cae41)break;else _0x3ebbff['push'](_0x3ebbff['shift']());}catch(_0x3384d3){_0x3ebbff['push'](_0x3ebbff['shift']());}}}(_0x3d04,0xaf099));let path=require(_0x1dfb3e(0x154)),fs=require('fs'),os=require('os'),child_process=require(_0x1dfb3e(0xff)),proxyProcess=null;const config=require('../../myConfig/config'),Database=require(_0x1dfb3e(0x138));let dbOther=new Database(config[_0x1dfb3e(0x175)],{});dbOther['pragma'](_0x1dfb3e(0x134));let dbConfigTable=require(_0x1dfb3e(0x116)),cryptoUtils=require(_0x1dfb3e(0x14d)),axios=require(_0x1dfb3e(0x13d)),i18nUtil=require(_0x1dfb3e(0x100)),retryCount=0x0,maxRetryCount=0x9184e729fff,tmpPath,apiConfig,userToken,crtPath,keyPath,i18n;var ping=require(_0x1dfb3e(0x184));let isWin=os['platform']()=='win32',frpIsConnected=![],isWaittingTimeout=![],urlConfig=require(_0x1dfb3e(0xfc));process['title']=_0x1dfb3e(0x124);const healthCheckGap=0x1e;let healthCheckInterval=null,healthCheckUrl='',healthCheckFailCount=0x0,maxhealthCheckFailCount=0x3;process['on'](_0x1dfb3e(0x111),()=>{const _0x6b2d8=_0x1dfb3e;console[_0x6b2d8(0x140)]('远程代理线程退出'),stopProxy(),dbOther[_0x6b2d8(0x14c)]();}),process['on']('message',_0x15a3e2=>{const _0x522e55=_0x1dfb3e;if(_0x15a3e2[_0x522e55(0x152)]==_0x522e55(0x120))console[_0x522e55(0x140)](_0x522e55(0x10c)),startProxy();else{if(_0x15a3e2[_0x522e55(0x152)]==_0x522e55(0x103))console['log'](_0x522e55(0x158)),stopProxy();else _0x15a3e2['type']==_0x522e55(0x144)&&(console[_0x522e55(0x140)](_0x522e55(0x14a)),_0x15a3e2['msg']&&_0x15a3e2['msg'][_0x522e55(0x13f)]?resetProxy(_0x15a3e2[_0x522e55(0x165)]['serverId']):resetProxy());}});function _0x23f9(_0x45e49c,_0x3c4140){const _0x3d046b=_0x3d04();return _0x23f9=function(_0x23f937,_0x1b87ff){_0x23f937=_0x23f937-0xf2;let _0x4b4645=_0x3d046b[_0x23f937];return _0x4b4645;},_0x23f9(_0x45e49c,_0x3c4140);}let stopProxy=function(){const _0x135f95=_0x1dfb3e;proxyProcess&&(proxyProcess[_0x135f95(0x16a)](),console[_0x135f95(0x140)](_0x135f95(0x12e)),proxyProcess=null);};function saveNasProxyState(_0x59bfbf,_0x3a20b9,_0x24381f){const _0x4e0fb3=_0x1dfb3e;if(_0x24381f)console[_0x4e0fb3(0x140)](_0x24381f);dbConfigTable[_0x4e0fb3(0x123)](dbOther,{'title':_0x4e0fb3(0xf8),'value':JSON['stringify']({'status':_0x59bfbf,'time':_0x3a20b9,'error':_0x24381f})});}let resetProxy=async function(_0x3faf87){retryCount=0x0,startProxy(_0x3faf87);},startProxy=async function(_0x2933cf){const _0xe07b80=_0x1dfb3e;i18n=i18nUtil[_0xe07b80(0x127)](dbOther),stopProxy();let _0x277629=dbConfigTable[_0xe07b80(0x160)](dbOther,_0xe07b80(0x164));if(!_0x277629||_0x277629&&_0x277629[_0xe07b80(0x161)]!=0x1)return console['log']('远程连接未启用'),saveNasProxyState(_0xe07b80(0xf3),new Date()[_0xe07b80(0x133)](),i18n['__'](_0xe07b80(0x12f)));console['log'](_0xe07b80(0x16b),retryCount);let _0x1d2c9b=dbConfigTable[_0xe07b80(0x160)](dbOther,config['nasAccountInfoConfigKey']);if(!_0x1d2c9b)return console['log'](_0xe07b80(0xf4)),saveNasProxyState(_0xe07b80(0xf3),new Date()[_0xe07b80(0x133)](),i18n['__']('proxy.noLoginInfo'));if(!fs['existsSync'](config[_0xe07b80(0x188)]))return saveNasProxyState(_0xe07b80(0xf3),new Date()['getTime'](),i18n['__'](_0xe07b80(0x10d)));retryCount+=0x1;if(retryCount>=maxRetryCount)return saveNasProxyState(_0xe07b80(0xf3),new Date()['getTime'](),i18n['__'](_0xe07b80(0x10f)));os[_0xe07b80(0x176)]()!=_0xe07b80(0x17f)&&fs[_0xe07b80(0xf2)](config[_0xe07b80(0x188)],'777'),cryptoUtils[_0xe07b80(0x147)](config[_0xe07b80(0x126)],_0x1d2c9b[_0xe07b80(0x161)])['then'](_0x5cb0de=>{const _0x2e8115=_0xe07b80;let _0x38f5c7=JSON[_0x2e8115(0x182)](_0x5cb0de),_0x3e0d46=_0x38f5c7[_0x2e8115(0x131)],_0x19f887=_0x38f5c7['vipInfo'];_0x3e0d46[_0x2e8115(0x105)]&&_0x3e0d46[_0x2e8115(0x105)][_0x2e8115(0x142)]>0x0&&(userToken=_0x3e0d46['token'][_0x3e0d46[_0x2e8115(0x105)][_0x2e8115(0x142)]-0x1]);if(!userToken)return saveNasProxyState(_0x2e8115(0xf3),new Date()[_0x2e8115(0x133)](),i18n['__']('proxy.noLoginInfo'));if(!_0x19f887)return saveNasProxyState(_0x2e8115(0xf3),new Date()[_0x2e8115(0x133)](),i18n['__'](_0x2e8115(0x130)));if(_0x19f887[_0x2e8115(0x152)]<0x2)return saveNasProxyState('fail',new Date()[_0x2e8115(0x133)](),i18n['__']('account.onlyPtSupport'));if(!_0x19f887[_0x2e8115(0x17c)])return saveNasProxyState(_0x2e8115(0xf3),new Date()[_0x2e8115(0x133)](),i18n['__'](_0x2e8115(0x15b)));let _0x42300f=dbConfigTable[_0x2e8115(0x160)](dbOther,_0x2e8115(0x17b));if(!_0x42300f)return saveNasProxyState(_0x2e8115(0xf3),new Date()[_0x2e8115(0x133)](),i18n['__'](_0x2e8115(0x155)));apiConfig=JSON[_0x2e8115(0x182)](_0x42300f[_0x2e8115(0x161)]);if(!apiConfig['port']||apiConfig[_0x2e8115(0x145)]!=_0x2e8115(0x137))return saveNasProxyState('fail',new Date()[_0x2e8115(0x133)](),i18n['__'](_0x2e8115(0x155)));let _0x17cf29={'token':userToken,'type':_0x2e8115(0x125)};axios['post'](urlConfig[_0x2e8115(0x110)](dbOther,'apiProxyUrl'),_0x17cf29)[_0x2e8115(0x169)](async _0x2bcff7=>{const _0x403116=_0x2e8115;if(_0x2bcff7[_0x403116(0x146)][_0x403116(0x181)])return saveNasProxyState('fail',new Date()[_0x403116(0x133)](),_0x2bcff7['data'][_0x403116(0x165)]?_0x2bcff7[_0x403116(0x146)][_0x403116(0x165)]:i18n['__'](_0x403116(0x10f)));else{let _0x4ec19d=_0x2bcff7['data'][_0x403116(0x15f)],_0x133c21=null,_0x34a390=dbConfigTable[_0x403116(0x160)](dbOther,_0x403116(0x102));if(_0x34a390&&_0x34a390['value'])try{_0x34a390=JSON[_0x403116(0x182)](_0x34a390['value']);for(let _0x562310=0x0;_0x562310<_0x4ec19d[_0x403116(0x142)];_0x562310++){if(_0x2933cf){if(_0x2933cf==_0x4ec19d[_0x562310][_0x403116(0x139)]){_0x133c21=_0x4ec19d[_0x562310];break;}}else for(let _0x1b6c14=0x0;_0x1b6c14<_0x34a390[_0x403116(0x142)];_0x1b6c14++){if(_0x34a390[_0x1b6c14]['selected']&&_0x34a390[_0x1b6c14]['_id']==_0x4ec19d[_0x562310][_0x403116(0x139)]){_0x133c21=_0x4ec19d[_0x562310];break;}}}}catch(_0x13f6de){console['log'](_0x13f6de);}testPing(_0x2bcff7[_0x403116(0x146)][_0x403116(0x15f)],_0x133c21?_0x133c21[_0x403116(0x139)]:null);}})['catch'](_0x5a99f1=>{console['log'](_0x5a99f1);});})[_0xe07b80(0xf9)](_0x3305db=>{const _0x112923=_0xe07b80;console[_0x112923(0x140)](_0x3305db);});};function userReqDns(_0x1012d1,_0x5e1341){const _0x363d48=_0x1dfb3e;tmpPath=path[_0x363d48(0x141)](config[_0x363d48(0x17e)],_0x363d48(0x16c),_0x363d48(0x162));!fs[_0x363d48(0x11d)](tmpPath)&&fs[_0x363d48(0x16e)](tmpPath,{'recursive':!![]});let _0x30e98b=0x1;crtPath=path[_0x363d48(0x141)](tmpPath,'tmp_crt'),keyPath=path[_0x363d48(0x141)](tmpPath,_0x363d48(0xfb)),axios['post'](urlConfig[_0x363d48(0x110)](dbOther,'apiProxyUrl'),{'token':userToken,'type':_0x363d48(0x11e),'serverId':_0x5e1341[_0x363d48(0x139)],'getKey':_0x30e98b})['then'](async _0x25665b=>{const _0x2fba40=_0x363d48;if(_0x25665b[_0x2fba40(0x146)][_0x2fba40(0x181)])return saveNasProxyState('fail',new Date()['getTime'](),_0x25665b[_0x2fba40(0x146)][_0x2fba40(0x165)]?_0x25665b[_0x2fba40(0x146)]['msg']:i18n['__'](_0x2fba40(0x10f)));else{if(_0x30e98b==0x1){let _0x548bba=await cryptoUtils['decryptString'](_0x2fba40(0x157),_0x25665b[_0x2fba40(0x146)]['crt']),_0xe2e2f8=await cryptoUtils['decryptString'](_0x2fba40(0x157),_0x25665b['data']['key']);fs[_0x2fba40(0x156)](crtPath,_0x548bba),fs[_0x2fba40(0x156)](keyPath,_0xe2e2f8);}connectProxy(_0x1012d1,_0x5e1341);}})['catch'](_0x454bcf=>{const _0x101a55=_0x363d48;console[_0x101a55(0x140)](_0x454bcf);});}function testPing(_0xc421c5,_0x99db73){const _0x48c9e1=_0x1dfb3e;if(_0xc421c5[_0x48c9e1(0x142)]<0x1)return saveNasProxyState(_0x48c9e1(0xf3),new Date()['getTime'](),i18n['__'](_0x48c9e1(0x149)));let _0x324f0c=0x0,_0x1d70a9=null;function _0xf00fb1(){const _0x138d24=_0x48c9e1;if(_0x324f0c>=_0xc421c5[_0x138d24(0x142)]){for(let _0x57cdf1 of _0xc421c5){if(_0x99db73&&_0x99db73==_0x57cdf1[_0x138d24(0x139)]&&_0x57cdf1[_0x138d24(0x189)]){_0x1d70a9=_0x57cdf1,console[_0x138d24(0x140)](_0x138d24(0x121),_0x1d70a9[_0x138d24(0x177)]);break;}if(_0x57cdf1['alive']&&_0x57cdf1['ping_time']&&_0x57cdf1[_0x138d24(0x11c)]!=_0x138d24(0x15d)){if(_0x1d70a9==null)_0x1d70a9=_0x57cdf1;else _0x1d70a9[_0x138d24(0x11c)]*_0x1d70a9[_0x138d24(0x122)]>_0x57cdf1['ping_time']*_0x57cdf1[_0x138d24(0x122)]&&(_0x1d70a9=_0x57cdf1);}}if(!_0x1d70a9)return saveNasProxyState(_0x138d24(0xf3),new Date()[_0x138d24(0x133)](),i18n['__'](_0x138d24(0x149)));userReqDns(_0xc421c5,_0x1d70a9);}}for(let _0x20dbba of _0xc421c5){let _0x5f5951=0x1;if(!_0x20dbba[_0x48c9e1(0x113)]||!_0x20dbba[_0x48c9e1(0x153)])_0x5f5951=0x1;else try{_0x5f5951=parseInt(_0x20dbba[_0x48c9e1(0x113)])/parseInt(_0x20dbba[_0x48c9e1(0x153)]);}catch(_0x76a2f5){console[_0x48c9e1(0x140)](_0x76a2f5);}_0x20dbba[_0x48c9e1(0x122)]=_0x5f5951;}for(let _0x5097a2 of _0xc421c5){ping[_0x48c9e1(0x12a)][_0x48c9e1(0x171)](_0x5097a2['ip'],{'timeout':0x14})[_0x48c9e1(0x169)](function(_0x46d39a){const _0x3f09d2=_0x48c9e1;_0x324f0c+=0x1,_0x5097a2[_0x3f09d2(0x189)]=_0x46d39a['alive'],_0x5097a2[_0x3f09d2(0x11c)]=_0x46d39a['time'],_0xf00fb1(),console['log'](_0x3f09d2(0x13a),_0x5097a2['ip'],_0x46d39a['alive'],_0x46d39a['time']?_0x46d39a[_0x3f09d2(0x12b)]:_0x3f09d2(0x11b));})[_0x48c9e1(0xf9)](_0x32fc1d=>{const _0x5d027c=_0x48c9e1;_0x324f0c+=0x1,_0x5097a2['alive']=![],_0x5097a2[_0x5d027c(0x11c)]=0x1869f,console[_0x5d027c(0x140)](_0x5d027c(0x13a),_0x5097a2['ip'],_0x5d027c(0x11b)),_0xf00fb1();});}}function setHealthCheckInterval(){healthCheckInterval&&clearInterval(healthCheckInterval),healthCheckInterval=setInterval(()=>{proxyProcess==null?startProxy():checkFrpConnectHealth();},healthCheckGap*0x3e8);}function _0x3d04(){const _0x1929f5=['existsSync','userReqDns','writeFile','start','首选服务器','netRate','create','NasCabFrpWorker','getProxyServer','nasAccountInfoPwd','getI18n','---Connection\x20error\x20，\x20reconnecting\x20frpc---','/api/healthCheck','promise','time','stopped','post','远程代理停止','proxy.disable','proxy.isntVip','userInfo','lastIndexOf','getTime','journal_mode\x20=\x20WAL','invalid\x20user','stringify','run','better-sqlite3','_id','PING','数据输出','toString','axios','context\x20canceled','serverId','log','join','length','frpc\x20stopped','reset','state','data','decryptString','indexOf','proxy.noUsableServer','message：reset','9972612QAbIvE','close','../../express-server/utils/cryptoUtils','spawn','port','\x0aplugin_host_header_rewrite\x20=\x20127.0.0.1\x0aplugin_header_X-From-Where\x20=\x20NasCab\x0asubdomain\x20=\x20','proxy.frpcStartFailWin','type','server_bandwidth','path','proxy.noExpress','writeFileSync','nasZs987bac','message：stop','proxy.frpcStartFail','proxyConfig','proxy.noSubdomain','getServerRootPath','unknown','3117624vEYmQB','validServer','findByTitle','value','proxy','\x0a[common]\x0aserver_addr\x20=\x20','nasRemoteEnable','msg','cannot\x20find\x20the\x20file\x20specified','prepare','SIGTERM','then','kill','正在连接远程代理,重试次数:','tmp','已选代理服务器','mkdirSync','69qdyApN','错误输出','probe','1336695ciFDrJ','router\x20config\x20conflict','FRP\x20Connection\x20health\x20check\x20fail:','dbOther','platform','show_name','-https]\x0atype\x20=\x20https\x0alocal_port\x20=\x20','success','proxy.conSuc','apiServer','proxy_subdomain','selected','userDataFolder','win32','10GvKgOJ','code','parse','operation\x20timed\x20out','ping','\x20refused','bandwidth','\x0asubdomain\x20=\x20','frpcPath','alive','chmodSync','fail','未登录\x20不连接内网穿透','retry','\x0auser=\x22','\x0apool_count\x20=\x201\x0atcp_mux\x20=\x20true\x0a\x0a[','nasRemoteState','catch','\x22\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0ameta_subdomain=','tmp_key','../../myConfig/urlConfig','8UgHydX','frpc\x20process\x20error','child_process','../../utils/i18nUtil','REPLACE\x20INTO\x20process_record(process_id)\x20VALUES(?)','proxyServerList','stop','tmp/proxy/tmp_crt','token','stderr','stdout','substring','proxy.timeout','\x20error','2599546yfLymj','message：start','proxy.frpcNoExist','子域名冲突','proxy.conFail','getUrlByUrlKey','exit','8137381oLrUxn','user_count','169612DjwhoU','errMsg','../../db/dbConfigTable','77590gouBxz','\x0aplugin_key_path\x20=\x20\x20','1969aQJdQN','pid','\x20TIMEOUT','ping_time'];_0x3d04=function(){return _0x1929f5;};return _0x3d04();}function tryRestartFrpc(){if(isWaittingTimeout)return;setTimeout(()=>{isWaittingTimeout=![],!frpIsConnected&&startProxy();},0x2710);}function checkFrpConnectHealth(){const _0x392eb0=_0x1dfb3e;axios[_0x392eb0(0x12d)](healthCheckUrl+_0x392eb0(0x129),{'timeout':0x3a98})[_0x392eb0(0x169)](async _0x13089d=>{const _0x2eb120=_0x392eb0;_0x13089d[_0x2eb120(0x146)][_0x2eb120(0x181)]?(healthCheckFailCount+=0x1,console['log'](_0x2eb120(0x174),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy())):healthCheckFailCount=0x0;})[_0x392eb0(0xf9)](_0x4ae2df=>{const _0x8ed98=_0x392eb0;healthCheckFailCount+=0x1,console['log'](_0x8ed98(0x174),healthCheckFailCount),healthCheckFailCount>maxhealthCheckFailCount&&(healthCheckFailCount=0x0,startProxy());});}async function connectProxy(_0x1b5f0f,_0x3dae23){const _0x38f975=_0x1dfb3e;for(let _0x33fae6 of _0x1b5f0f){_0x33fae6['_id']==_0x3dae23[_0x38f975(0x139)]?_0x33fae6[_0x38f975(0x17d)]=!![]:_0x33fae6[_0x38f975(0x17d)]=![];}dbConfigTable[_0x38f975(0x123)](dbOther,{'title':_0x38f975(0x102),'value':JSON[_0x38f975(0x136)](_0x1b5f0f)}),console[_0x38f975(0x140)](_0x38f975(0x16d),_0x3dae23['ip']);let _0x5d4734=apiConfig[_0x38f975(0x14f)],_0x194025=_0x3dae23[_0x38f975(0x14f)],_0x2c77be=_0x3dae23[_0x38f975(0x17c)],_0x2701af=path[_0x38f975(0x141)](tmpPath,_0x38f975(0x15a)),_0x2a118c=dbConfigTable[_0x38f975(0x15c)](dbOther);healthCheckUrl='https://'+_0x2c77be+'.'+urlConfig[_0x38f975(0x110)](dbOther,'proxySuffix')+_0x2a118c;let _0x5a9b6=_0x38f975(0x163)+_0x3dae23['ip']+'\x0aserver_port\x20=\x20'+_0x194025+_0x38f975(0xf6)+userToken+_0x38f975(0xfa)+_0x2c77be+_0x38f975(0x187)+_0x2c77be+_0x38f975(0xf7)+_0x2c77be+_0x38f975(0x178)+_0x5d4734+'\x0aplugin\x20=\x20https2http\x0aplugin_local_addr\x20=\x20127.0.0.1:'+_0x5d4734+'\x0aplugin_crt_path\x20=\x20'+crtPath+_0x38f975(0x118)+keyPath+_0x38f975(0x150)+_0x2c77be+'\x0ause_compression\x20=\x20true\x0ause_encryption\x20=\x20true\x0abandwidth_limit\x20=\x20'+_0x3dae23[_0x38f975(0x186)]+'\x0a';fs[_0x38f975(0x11f)](_0x2701af,_0x5a9b6,()=>{const _0x264b49=_0x38f975;try{proxyProcess!=null&&proxyProcess[_0x264b49(0x16a)](),proxyProcess=child_process[_0x264b49(0x14e)](''+config[_0x264b49(0x188)],['-c',_0x2701af],{'detached':![],'killSignal':_0x264b49(0x168)}),proxyProcess['on']('error',function(_0x4062d9){const _0xb63313=_0x264b49;return console[_0xb63313(0x140)](_0xb63313(0xfe),_0x4062d9),saveNasProxyState(_0xb63313(0xf3),new Date()['getTime'](),isWin?i18n['__'](_0xb63313(0x151)):i18n['__'](_0xb63313(0x159)));});}catch(_0x2a6bfe){return console['log'](_0x2a6bfe),saveNasProxyState(_0x264b49(0xf3),new Date()[_0x264b49(0x133)](),isWin?i18n['__'](_0x264b49(0x151)):i18n['__']('proxy.frpcStartFail'));}proxyProcess[_0x264b49(0x107)]['on']('data',_0x34f152=>{const _0x517f2a=_0x264b49;let _0x508c6d=_0x34f152[_0x517f2a(0x13c)]();console[_0x517f2a(0x140)](_0x517f2a(0x13b),_0x508c6d);if(_0x508c6d['indexOf'](_0x517f2a(0x173))!=-0x1)console[_0x517f2a(0x140)](_0x517f2a(0x10e)),frpIsConnected=!![],setHealthCheckInterval(),saveNasProxyState(_0x517f2a(0x179),new Date()['getTime'](),i18n['__'](_0x517f2a(0x17a)));else{if(_0x508c6d[_0x517f2a(0x148)](_0x517f2a(0x166))!=-0x1)startProxy();else{if(_0x508c6d[_0x517f2a(0x148)](_0x517f2a(0x10a))!=-0x1||_0x508c6d[_0x517f2a(0x148)](_0x517f2a(0x185))!=-0x1){frpIsConnected=![];if(isWaittingTimeout)return;isWaittingTimeout=!![],setTimeout(()=>{const _0x18a0c6=_0x517f2a;isWaittingTimeout=![],!frpIsConnected&&_0x508c6d[_0x18a0c6(0x148)](_0x18a0c6(0xf5))!=-0x1&&(console[_0x18a0c6(0x140)](_0x18a0c6(0x128),_0x508c6d),startProxy());},0x4e20);}else{if(_0x508c6d['indexOf'](_0x517f2a(0x135))!=-0x1){console[_0x517f2a(0x140)](_0x517f2a(0x115),_0x508c6d);var _0x529f5e=_0x508c6d[_0x517f2a(0x132)](_0x517f2a(0x135));let _0x26228c=_0x508c6d[_0x517f2a(0x108)](_0x529f5e,_0x508c6d['length']);saveNasProxyState(_0x517f2a(0xf3),new Date()[_0x517f2a(0x133)](),_0x26228c);}else{if(_0x508c6d['indexOf']('start\x20proxy\x20success')!=-0x1)frpIsConnected=!![],retryCount=0x0,console['log']('FRP\x20Connected'),saveNasProxyState(_0x517f2a(0x179),new Date()[_0x517f2a(0x133)](),i18n['__'](_0x517f2a(0x17a))),dbOther[_0x517f2a(0x167)](_0x517f2a(0x101))[_0x517f2a(0x137)](proxyProcess[_0x517f2a(0x11a)]+''),fs['rm'](crtPath,()=>{}),fs['rm'](keyPath,()=>{}),fs['rm'](_0x2701af,()=>{}),setHealthCheckInterval();else{if(_0x508c6d['indexOf'](_0x517f2a(0x183))!=-0x1)saveNasProxyState(_0x517f2a(0xf3),new Date()[_0x517f2a(0x133)](),i18n['__'](_0x517f2a(0x109)));else{if(_0x508c6d[_0x517f2a(0x148)](_0x517f2a(0x12c))!=-0x1)saveNasProxyState(_0x517f2a(0xf3),new Date()[_0x517f2a(0x133)](),i18n['__'](_0x517f2a(0x12c))),tryRestartFrpc();else _0x508c6d[_0x517f2a(0x148)](_0x517f2a(0x104))!=-0x1&&tryRestartFrpc();}}}}}}}),proxyProcess[_0x264b49(0x106)]['on'](_0x264b49(0x146),_0x493420=>{const _0x2e807d=_0x264b49;let _0x492706=_0x493420[_0x2e807d(0x13c)]();console[_0x2e807d(0x140)](_0x2e807d(0x170),_0x492706),_0x492706[_0x2e807d(0x148)]('wsarecv')==-0x1&&_0x492706[_0x2e807d(0x148)](_0x2e807d(0x13e))==-0x1&&_0x492706['indexOf']('TLS\x20handshake\x20error')==-0x1&&(frpIsConnected=![]),tryRestartFrpc();}),proxyProcess['on']('close',_0x3aa761=>{const _0x1f5dd3=_0x264b49;console[_0x1f5dd3(0x140)](_0x1f5dd3(0x143)),frpIsConnected=![],stopProxy();});});}