function _0x3512(_0x49969f,_0x15a74c){const _0x209f6e=_0x209f();return _0x3512=function(_0x351241,_0x4cd1e7){_0x351241=_0x351241-0x188;let _0x822550=_0x209f6e[_0x351241];return _0x822550;},_0x3512(_0x49969f,_0x15a74c);}const _0x213b72=_0x3512;(function(_0x4d5eec,_0x3fc091){const _0x20b3ee=_0x3512,_0x2df053=_0x4d5eec();while(!![]){try{const _0x55a524=-parseInt(_0x20b3ee(0x1af))/0x1+parseInt(_0x20b3ee(0x1a9))/0x2+parseInt(_0x20b3ee(0x1ad))/0x3+-parseInt(_0x20b3ee(0x1bb))/0x4*(parseInt(_0x20b3ee(0x191))/0x5)+-parseInt(_0x20b3ee(0x198))/0x6*(-parseInt(_0x20b3ee(0x1a2))/0x7)+-parseInt(_0x20b3ee(0x19a))/0x8+parseInt(_0x20b3ee(0x18d))/0x9;if(_0x55a524===_0x3fc091)break;else _0x2df053['push'](_0x2df053['shift']());}catch(_0x38ef3f){_0x2df053['push'](_0x2df053['shift']());}}}(_0x209f,0x4c3ef));const config=require(_0x213b72(0x18b));let path=require('path');const dbFileIndexTable=require(_0x213b72(0x1bc)),Database=require(_0x213b72(0x18f));let dbFileIndex=new Database(config[_0x213b72(0x19f)],{'timeout':0xea60}),dbOther=new Database(config[_0x213b72(0x1ab)],{});dbOther[_0x213b72(0x1a1)](_0x213b72(0x1a4)),dbFileIndex[_0x213b72(0x1a1)]('journal_mode\x20=\x20WAL');const nfoUtil=require(_0x213b72(0x1ba)),messageUtil=require(_0x213b72(0x1a8)),movieInfoUtil=require(_0x213b72(0x1be));process[_0x213b72(0x1a5)]=_0x213b72(0x1b8);function updateMovieInfoState(_0x36d763,_0x401299,_0x15f105){const _0xe36eb5=_0x213b72;let _0x398c48=new Date()['getTime']();const _0x48ad6=_0xe36eb5(0x1b4)+_0x401299+_0xe36eb5(0x1c2)+_0x398c48+_0xe36eb5(0x190)+_0x15f105+'\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20id='+_0x36d763+_0xe36eb5(0x194);return dbFileIndex[_0xe36eb5(0x1a7)](_0x48ad6)[_0xe36eb5(0x19e)]();}function getInfoStart(){return new Promise((_0x4590cd,_0x184720)=>{const _0x18b5f2=_0x3512;let _0x1e98cc=0x400*0x400*0x64,_0x17212a=dbFileIndexTable['getByWhere'](dbFileIndex,_0x18b5f2(0x19b)+_0x1e98cc+_0x18b5f2(0x1aa),'*',_0x18b5f2(0x1a6));if(_0x17212a){let _0xcb93a5=path['join'](_0x17212a[_0x18b5f2(0x196)],_0x17212a[_0x18b5f2(0x192)]);if(_0x17212a['path']){let _0xc1c94c=_0x17212a[_0x18b5f2(0x196)][_0x18b5f2(0x189)]();if(_0xc1c94c['endsWith'](path[_0x18b5f2(0x19d)]+'specials')||_0xc1c94c[_0x18b5f2(0x18a)](path[_0x18b5f2(0x19d)]+_0x18b5f2(0x1b0))||_0xc1c94c[_0x18b5f2(0x18a)](path[_0x18b5f2(0x19d)]+_0x18b5f2(0x197)))return console[_0x18b5f2(0x1ae)]('跳过\x20sample\x20/\x20extra\x20/\x20specials'),updateMovieInfoState(_0x17212a['id'],0x3,0x1),_0x4590cd();}nfoUtil['parseNfo'](_0x17212a,!![],![])['then'](_0x4eec8c=>{const _0x130fd8=_0x18b5f2;return updateMovieInfoState(_0x17212a['id'],0x1,0x1),movieInfoUtil[_0x130fd8(0x1c0)](dbFileIndex,_0x17212a['id'],_0x4eec8c),_0x4590cd({'usedNfo':!![]});})[_0x18b5f2(0x1b3)](_0x1f58da=>{const _0x7350a1=_0x18b5f2;console[_0x7350a1(0x1ae)](_0x7350a1(0x18e));let _0xc15d96=_0x7350a1(0x1b1)+_0x7350a1(0x1ac)+path[_0x7350a1(0x19d)]+'%\x27',_0x4a94ff=dbOther['prepare'](_0xc15d96)[_0x7350a1(0x199)](path[_0x7350a1(0x1c1)](_0x17212a[_0x7350a1(0x196)],_0x17212a[_0x7350a1(0x192)]));if(_0x4a94ff&&_0x4a94ff[_0x7350a1(0x1bf)]==0x1)return updateMovieInfoState(_0x17212a['id'],0x3,0x1),_0x4590cd();console[_0x7350a1(0x1ae)](_0x7350a1(0x19c),_0x17212a[_0x7350a1(0x192)],_0x17212a['movie_info_state']),movieInfoUtil[_0x7350a1(0x1a3)](dbOther,_0x17212a['path'],_0x17212a[_0x7350a1(0x192)],_0x17212a['is_tvplay'])[_0x7350a1(0x193)](_0x567f3a=>{const _0x5363c5=_0x7350a1;updateMovieInfoState(_0x17212a['id'],0x1,0x1),nfoUtil[_0x5363c5(0x195)](_0x17212a,!![],![])['then'](_0x139df5=>{const _0x4c6e4e=_0x5363c5;return movieInfoUtil[_0x4c6e4e(0x1c0)](dbFileIndex,_0x17212a['id'],_0x139df5),_0x4590cd();})[_0x5363c5(0x1b3)](_0x1246b6=>{return _0x4590cd();});})[_0x7350a1(0x1b3)](_0x36cc4d=>{const _0x47f13b=_0x7350a1;return console[_0x47f13b(0x1ae)](_0x47f13b(0x1b6)),updateMovieInfoState(_0x17212a['id'],0x3,0x1),_0x4590cd();});});}else exitProcess();});}function exitProcess(){const _0x2655bf=_0x213b72;try{dbOther['close'](),dbFileIndex[_0x2655bf(0x1b9)]();}catch(_0x17ab28){}process[_0x2655bf(0x18c)]({'type':_0x2655bf(0x1b9)}),process[_0x2655bf(0x1bd)]();}async function runGetMovieInfo(){const _0x40f7ae=_0x213b72;getInfoStart()[_0x40f7ae(0x193)](_0x11b8a9=>{_0x11b8a9&&_0x11b8a9['usedNfo']?runGetMovieInfo():setTimeout(()=>{runGetMovieInfo();},0x1388);})[_0x40f7ae(0x1b3)](_0x43eced=>{const _0x5cb6e4=_0x40f7ae;console[_0x5cb6e4(0x1ae)](_0x43eced),exitProcess();});}runGetMovieInfo(),process['on']('uncaughtException',(_0x4d6958,_0x2b79fb)=>{const _0x3b31a7=_0x213b72;console[_0x3b31a7(0x1ae)](_0x4d6958),messageUtil[_0x3b31a7(0x1b2)](dbOther,_0x3b31a7(0x1a0),_0x3b31a7(0x188),_0x4d6958[_0x3b31a7(0x1b7)]||_0x4d6958[_0x3b31a7(0x1b5)]);});function _0x209f(){const _0x4b1919=['saveMovieInfoToDb','join',',movie_info_get_time=','error','toLowerCase','endsWith','../myConfig/config','send','12499272SbYPlq','nfo没有\x20从网络读取\x20','better-sqlite3',',movie_info_get_times=','5qWAGSe','filename','then','\x0a\x09\x20\x20\x20\x20','parseNfo','path','sample','1956UYpZXK','get','3870376spdVFT','\x20movie_info_state=0\x20and\x20is_file=1\x20and\x20type=2\x20and\x20show_in_list=1\x20and\x20size>','开始查询','sep','run','dbFileIndex','Error\x20occurred\x20in\x20movie\x20info\x20searching\x20process','pragma','3899cyotTE','runSearchNfoWorker','journal_mode\x20=\x20WAL','title','file_index_movie','prepare','../utils/messageUtil','299638HBcWkw','\x20LIMIT\x201','dbOther','`path`||\x27','648138BRutKA','log','534611gDmSmE','extra','SELECT\x20*\x20FROM\x20source_folder\x20where\x20type=\x27movie\x27\x20AND\x20\x20?\x20like\x20','saveMsg','catch','\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20UPDATE\x20file_index_movie\x0a\x09\x20\x20\x20\x20\x20\x20\x20\x20SET\x20movie_info_state=','message','nfo获取失败了','stack','NasCabMovieNfoWorker','close','../utils/nfoUtil','2422176AYYMAP','../db/dbFileIndexTable','exit','../utils/movieInfoUtil','ignore_match_info'];_0x209f=function(){return _0x4b1919;};return _0x209f();}