const _0x170352=_0x3474;(function(_0x4ab599,_0x5aafe2){const _0x43a979=_0x3474,_0x3e294a=_0x4ab599();while(!![]){try{const _0x51558c=parseInt(_0x43a979(0x189))/0x1*(-parseInt(_0x43a979(0x1b8))/0x2)+parseInt(_0x43a979(0x1c5))/0x3*(-parseInt(_0x43a979(0x1b3))/0x4)+parseInt(_0x43a979(0x1b9))/0x5+-parseInt(_0x43a979(0x1ac))/0x6*(parseInt(_0x43a979(0x1aa))/0x7)+parseInt(_0x43a979(0x197))/0x8+-parseInt(_0x43a979(0x192))/0x9*(parseInt(_0x43a979(0x1bf))/0xa)+parseInt(_0x43a979(0x1a0))/0xb;if(_0x51558c===_0x5aafe2)break;else _0x3e294a['push'](_0x3e294a['shift']());}catch(_0x14de85){_0x3e294a['push'](_0x3e294a['shift']());}}}(_0xb25e,0xc725e));const {parentPort,workerData}=require(_0x170352(0x1a8)),EPub=require('epub'),mobiNode=require(_0x170352(0x199)),mobiJs=require(_0x170352(0x1a4)),fflate=require(_0x170352(0x1af)),fs=require('fs'),path=require(_0x170352(0x1a2));let originalTime=null,coverData=null,zipUtil=require(_0x170352(0x1a3));function returnResult(){const _0x26faf2=_0x170352;parentPort[_0x26faf2(0x1b0)]({'code':0x0,'indexObj':workerData[_0x26faf2(0x19d)],'originalTime':originalTime,'coverData':coverData}),process[_0x26faf2(0x19a)](0x0);}async function genBookInfoMobi(_0x26f88a){const _0x299855=_0x170352;if(!workerData[_0x299855(0x1c6)])try{let _0x2d7905=new mobiJs(_0x26f88a);_0x2d7905[_0x299855(0x18f)]&&(workerData['indexObj'][_0x299855(0x18f)]=_0x2d7905['title']),workerData[_0x299855(0x19d)]['metadata_state']=0x1;}catch(_0x2648d2){}try{if(fs['existsSync'](workerData[_0x299855(0x1a9)]))return console[_0x299855(0x1b7)](_0x299855(0x18d),workerData[_0x299855(0x19d)]['filename']),workerData[_0x299855(0x19d)][_0x299855(0x1bd)]=workerData[_0x299855(0x1a9)],returnResult();let _0x4c8591=fs['readFileSync'](_0x26f88a),_0x24f35a=await new mobiNode[(_0x299855(0x1c0))]({'unzlib':fflate['unzlibSync']})[_0x299855(0x1b5)](new Uint8Array(_0x4c8591)),_0x15265c=await _0x24f35a[_0x299855(0x198)]();if(!_0x15265c)return returnResult();return console[_0x299855(0x1b7)](_0x299855(0x1ca),workerData['indexObj'][_0x299855(0x190)]),coverData=Buffer['from'](_0x15265c),returnResult();}catch(_0x2bdf7a){return console['log'](_0x299855(0x1b4),_0x2bdf7a),returnResult();}}function _0x3474(_0x26b92d,_0x10de47){const _0xb25ed6=_0xb25e();return _0x3474=function(_0x347411,_0x22d63d){_0x347411=_0x347411-0x188;let _0x3665e6=_0xb25ed6[_0x347411];return _0x3665e6;},_0x3474(_0x26b92d,_0x10de47);}async function genBookInfoEpub(_0x3a3120){const _0x5c7fb0=_0x170352;let _0xd1019d=new EPub(_0x3a3120);_0xd1019d['on'](_0x5c7fb0(0x196),function(){const _0x4441b0=_0x5c7fb0;if(_0xd1019d[_0x4441b0(0x1cb)]){let _0x57a4be=_0xd1019d[_0x4441b0(0x1cb)];_0x57a4be['creator']&&(workerData[_0x4441b0(0x19d)][_0x4441b0(0x1a5)]=_0x57a4be[_0x4441b0(0x1ad)]);_0x57a4be[_0x4441b0(0x19f)]&&(workerData['indexObj'][_0x4441b0(0x19f)]=_0x57a4be[_0x4441b0(0x19f)]);_0x57a4be[_0x4441b0(0x1ae)]&&(workerData[_0x4441b0(0x19d)]['language']=_0x57a4be[_0x4441b0(0x1ae)]);_0x57a4be[_0x4441b0(0x18f)]&&(workerData[_0x4441b0(0x19d)][_0x4441b0(0x18f)]=_0x57a4be['title']);_0x57a4be[_0x4441b0(0x18e)]&&(console[_0x4441b0(0x1b7)]('book-type',_0x57a4be['book-type']),_0x57a4be[_0x4441b0(0x18e)]==_0x4441b0(0x1be)&&(workerData[_0x4441b0(0x19d)][_0x4441b0(0x1b2)]=0x2));if(_0x57a4be[_0x4441b0(0x1a6)])try{originalTime=new Date(_0x57a4be[_0x4441b0(0x1a6)])['getTime']();}catch(_0x1da05a){console[_0x4441b0(0x1b7)](_0x1da05a);}workerData[_0x4441b0(0x19d)][_0x4441b0(0x1c7)]=0x1;if(fs[_0x4441b0(0x1a1)](workerData[_0x4441b0(0x1a9)]))return console[_0x4441b0(0x1b7)](_0x4441b0(0x18d),workerData[_0x4441b0(0x19d)][_0x4441b0(0x190)]),workerData[_0x4441b0(0x19d)][_0x4441b0(0x1bd)]=workerData[_0x4441b0(0x1a9)],returnResult();_0xd1019d[_0x4441b0(0x1cb)]['cover']?_0xd1019d[_0x4441b0(0x18a)](_0xd1019d[_0x4441b0(0x1cb)][_0x4441b0(0x1b1)],async(_0x3d3988,_0x2df221,_0x26b20d)=>{const _0x48a232=_0x4441b0;return console[_0x48a232(0x1b7)]('EPUB写入书籍封面缓存：',workerData[_0x48a232(0x1a9)]),coverData=_0x2df221,returnResult();}):returnResult();}else returnResult();}),_0xd1019d['on'](_0x5c7fb0(0x188),()=>{const _0x28d6cd=_0x5c7fb0;console[_0x28d6cd(0x1b7)](_0x28d6cd(0x1ba),_0x3a3120),returnResult();}),_0xd1019d[_0x5c7fb0(0x1c1)]();}async function genBookInfoZip(_0x3a9fec){const _0x180b8e=_0x170352;zipUtil['getZipCover'](_0x3a9fec)[_0x180b8e(0x195)](_0x4bc594=>{const _0x43036c=_0x180b8e;if(!_0x4bc594)return console[_0x43036c(0x1b7)](_0x43036c(0x18c),_0x3a9fec),returnResult();let _0x5a1c0a=_0x4bc594[_0x43036c(0x191)],_0x596bc8=_0x4bc594[_0x43036c(0x1b6)];_0x5a1c0a&&(coverData=_0x5a1c0a),_0x596bc8&&(workerData[_0x43036c(0x19d)][_0x43036c(0x1c4)]=_0x596bc8),returnResult();})[_0x180b8e(0x194)](_0x1f4b12=>{const _0x2455e9=_0x180b8e;console[_0x2455e9(0x1b7)](_0x1f4b12);});}if(workerData&&workerData[_0x170352(0x19d)]&&workerData[_0x170352(0x1a9)]){let bookFullPath=path[_0x170352(0x19b)](workerData['indexObj'][_0x170352(0x1a2)],workerData[_0x170352(0x19d)][_0x170352(0x190)]),lowerExt=workerData[_0x170352(0x19d)][_0x170352(0x1ab)][_0x170352(0x18b)]();if(fs[_0x170352(0x1a1)](bookFullPath)){if(lowerExt==_0x170352(0x193))genBookInfoEpub(bookFullPath);else{if(lowerExt==_0x170352(0x1c9)||lowerExt==_0x170352(0x1c3)||lowerExt==_0x170352(0x1a7))genBookInfoMobi(bookFullPath);else lowerExt==_0x170352(0x1c8)||lowerExt==_0x170352(0x19c)||lowerExt=='.cbr'||lowerExt==_0x170352(0x1bb)?genBookInfoZip(bookFullPath):returnResult();}}else returnResult();}else console[_0x170352(0x1b7)](_0x170352(0x1c2)),returnResult();parentPort['on'](_0x170352(0x188),_0x3e1062=>{const _0x563522=_0x170352;console[_0x563522(0x188)](_0x563522(0x1bc),_0x3e1062),returnResult();}),parentPort['on']('close',()=>{const _0x5299e5=_0x170352;console[_0x5299e5(0x1b7)](_0x5299e5(0x19e));});function _0xb25e(){const _0x4ac036=['date','.azw','worker_threads','bookCoverCachePath','854ejNnAv','ext','8160tFahUz','creator','language','./bookFflate','postMessage','cover','type','724ChYdat','err2','open','fileCount','log','1800530bHgJao','3226225LyNilD','epub解析失败','.rar','Worker\x20error:','coverPath','comic','74180ffqpzW','MOBI','parse','没有找到需要处理的书籍目录','.azw3','total_page','750XGGOop','onlyGenCover','metadata_state','.cbz','.mobi','MOBI写入书籍封面缓存：','metadata','error','1NslXxW','getImage','toLowerCase','未找到封面','封面缓存已经存在','book-type','title','filename','dealedBuffer','846yDSfWd','.epub','catch','then','end','2588168zfQBTV','getCover','./bookMobiNode','exit','join','.zip','indexObj','Worker\x20stopped.','publisher','18212381KCObDu','existsSync','path','../../utils/zipUtil','mobi','artist'];_0xb25e=function(){return _0x4ac036;};return _0xb25e();}