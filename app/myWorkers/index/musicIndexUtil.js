function _0x3711(_0xb40409,_0x233416){const _0x482615=_0x4826();return _0x3711=function(_0x37114c,_0x193d9e){_0x37114c=_0x37114c-0x1f0;let _0x26952b=_0x482615[_0x37114c];return _0x26952b;},_0x3711(_0xb40409,_0x233416);}const _0x12552e=_0x3711;function _0x4826(){const _0x418b19=['original_time','data','3524640rIqQFp','performer','writeFile','length','exports','description','ext','ctimeMs','album','TYER','getMonth','NaN','../../db/dbFileIndexTable','3762480TcEzOX','475682QJkuKj','temp.','./indexUtil','lastInsertRowid','atimeMs','addFileIndexToDb','streams','addOriginalDate','join','title','basename','genre','dirname','artist','year','lyrics','dealMediaInfo','jsmediatags','base64','ceil','../../utils/musicUtil','fileCoverPath','TIT2','genTinyFile','music','birthtime','log','duration','from','APIC','string','dealFileChange','toLowerCase','birthtimeMs','ffprobeSync','ctime','getMusicSameNameCover','transStringToUtf8','getMediaCoverCachePath','image','size','stringify','1smuYjR','doesPathCanAddToDb','is_file','format','stream_info','2584596Anzrxp','19070728sdMCsJ','path','getDurationFromStream','getTime','parseAudioTags','read','indexOf','getDate','6009150PDxsYv','tags','original_date','mtimeMs','4612056GRVlaX','Null','content\x20type','filename','Nan','INDEX_TABLE_NAME_MUSIC','musicTypeList','picture','recursionFilesAddIndex','addFinalIndexToDB'];_0x4826=function(){return _0x418b19;};return _0x4826();}(function(_0x362a9b,_0x4aa152){const _0x57a2c6=_0x3711,_0x5adfdd=_0x362a9b();while(!![]){try{const _0x148587=parseInt(_0x57a2c6(0x1f1))/0x1*(parseInt(_0x57a2c6(0x21d))/0x2)+parseInt(_0x57a2c6(0x1f6))/0x3+parseInt(_0x57a2c6(0x20f))/0x4+-parseInt(_0x57a2c6(0x21c))/0x5+parseInt(_0x57a2c6(0x203))/0x6+parseInt(_0x57a2c6(0x1ff))/0x7+-parseInt(_0x57a2c6(0x1f7))/0x8;if(_0x148587===_0x4aa152)break;else _0x5adfdd['push'](_0x5adfdd['shift']());}catch(_0x386a89){_0x5adfdd['push'](_0x5adfdd['shift']());}}}(_0x4826,0x7311a));const path=require(_0x12552e(0x1f8)),fs=require('fs'),dbFileIndexTable=require(_0x12552e(0x21b)),config=require('../../myConfig/config'),videoStreamUtil=require('../../utils/videoStreamUtil'),indexUtil=require(_0x12552e(0x21f));let musicUtils=require(_0x12552e(0x231));const indexTableName=dbFileIndexTable[_0x12552e(0x208)],musicIndexUtil={},sharpUtil=require('../../express-server/utils/sharpUtils');let jsmediatags=require(_0x12552e(0x22e)),musicTypeList=config[_0x12552e(0x209)];musicIndexUtil[_0x12552e(0x23c)]=async function(_0x5f01ff,_0x490160,_0xbb0330){const _0x4a8829=_0x12552e;await indexUtil[_0x4a8829(0x23c)](_0x5f01ff,_0x490160,_0xbb0330,indexTableName,musicIndexUtil[_0x4a8829(0x222)],musicIndexUtil[_0x4a8829(0x20b)]);return;},musicIndexUtil[_0x12552e(0x20b)]=async function(_0xdffb51,_0x2e4623,_0x23c41d){const _0xd65f32=_0x12552e;return await indexUtil[_0xd65f32(0x20b)](_0xdffb51,_0x2e4623,indexTableName,_0xd65f32(0x235),_0x23c41d,musicIndexUtil[_0xd65f32(0x222)]);},musicIndexUtil[_0x12552e(0x222)]=async function(_0xe190d2,_0x430b3e,_0x182ad2,_0x4a4a09,_0x2c1542,_0x5ffff9){const _0x46aac9=_0x12552e;let _0x22b623=indexUtil[_0x46aac9(0x1f2)](_0xe190d2,'music',config,_0x182ad2,_0x4a4a09);if(!_0x22b623)return;let _0x27c017=_0x5ffff9[_0x46aac9(0x23e)];_0x5ffff9[_0x46aac9(0x202)]<_0x27c017&&(_0x27c017=_0x5ffff9[_0x46aac9(0x202)]);_0x5ffff9[_0x46aac9(0x221)]<_0x27c017&&(_0x27c017=_0x5ffff9[_0x46aac9(0x221)]);_0x5ffff9[_0x46aac9(0x216)]<_0x27c017&&(_0x27c017=_0x5ffff9['ctimeMs']);let _0x3d320c={'path':_0x182ad2,'filename':_0x4a4a09,'is_file':_0x2c1542,'ctime':_0x5ffff9[_0x46aac9(0x216)],'mtime':_0x5ffff9[_0x46aac9(0x202)],'ext':path['extname'](_0x4a4a09),'birthtime':Math[_0x46aac9(0x230)](_0x27c017),'size':_0x5ffff9[_0x46aac9(0x245)],'check_time':new Date()[_0x46aac9(0x1fa)]()};_0x3d320c=await musicIndexUtil[_0x46aac9(0x22d)](_0x430b3e,_0x3d320c);},musicIndexUtil[_0x12552e(0x22d)]=async function(_0x3e73a0,_0x25f894){const _0x5929dc=_0x12552e;let _0x196231=![],_0x4a1dcb=path[_0x5929dc(0x225)](_0x25f894[_0x5929dc(0x1f8)],_0x25f894[_0x5929dc(0x206)]);if(_0x25f894['is_file']==0x1&&_0x25f894[_0x5929dc(0x215)]&&musicTypeList['includes'](_0x25f894['ext']['toLowerCase']())){_0x25f894['type']=0x3;try{let _0x56bfb0=await indexUtil[_0x5929dc(0x23f)](_0x4a1dcb);if(_0x56bfb0&&_0x56bfb0[_0x5929dc(0x223)]&&_0x56bfb0[_0x5929dc(0x223)][_0x5929dc(0x212)]>0x0){_0x25f894[_0x5929dc(0x1f5)]=JSON[_0x5929dc(0x1f0)](_0x56bfb0[_0x5929dc(0x223)]);let _0x5cd445=videoStreamUtil[_0x5929dc(0x1f9)](_0x56bfb0);_0x5cd445&&(_0x25f894['duration']=_0x5cd445);}if(_0x56bfb0&&_0x56bfb0[_0x5929dc(0x1f4)]&&_0x56bfb0[_0x5929dc(0x1f4)][_0x5929dc(0x200)]){let _0xc14d29=_0x56bfb0[_0x5929dc(0x1f4)]['tags'][_0x5929dc(0x217)];_0xc14d29&&(_0x25f894['album']=_0xc14d29),_0x56bfb0[_0x5929dc(0x1f4)]['duration']&&!_0x25f894[_0x5929dc(0x238)]&&(_0x25f894[_0x5929dc(0x238)]=_0x56bfb0[_0x5929dc(0x1f4)][_0x5929dc(0x238)]);}musicIndexUtil[_0x5929dc(0x1fb)](_0x4a1dcb,_0x25f894,_0xff98de=>{const _0x16f665=_0x5929dc;return _0xff98de[_0x16f665(0x217)]&&(_0xff98de['album']=musicUtils[_0x16f665(0x242)](_0xff98de[_0x16f665(0x217)])),_0xff98de[_0x16f665(0x22a)]&&(_0xff98de[_0x16f665(0x22a)]=musicUtils[_0x16f665(0x242)](_0xff98de[_0x16f665(0x22a)])),_0xff98de['title']&&(_0xff98de[_0x16f665(0x226)]=musicUtils[_0x16f665(0x242)](_0xff98de['title'])),_0xff98de[_0x16f665(0x22c)]&&(_0xff98de[_0x16f665(0x22c)]=musicUtils[_0x16f665(0x242)](_0xff98de['lyrics'])),musicIndexUtil[_0x16f665(0x224)](_0x3e73a0,_0x196231,_0xff98de);});}catch(_0x293812){return console['log'](_0x293812),musicIndexUtil[_0x5929dc(0x224)](_0x3e73a0,_0x196231,_0x25f894);}}else{if(_0x25f894[_0x5929dc(0x1f3)]==0x1)return;return musicIndexUtil[_0x5929dc(0x224)](_0x3e73a0,_0x196231,_0x25f894);}},musicIndexUtil[_0x12552e(0x224)]=function(_0x4ba348,_0x1afdaf,_0x4fbfd3){const _0x413753=_0x12552e;_0x1afdaf&&_0x1afdaf<config['exifMinTimeStamp']&&(_0x1afdaf=![]);(!_0x1afdaf||_0x1afdaf==_0x413753(0x21a)||_0x1afdaf==_0x413753(0x207)||_0x1afdaf==_0x413753(0x21a)||_0x1afdaf==_0x413753(0x204))&&(_0x1afdaf=_0x4fbfd3[_0x413753(0x236)]||_0x4fbfd3[_0x413753(0x240)]);let _0x35b384=new Date(_0x1afdaf);_0x4fbfd3[_0x413753(0x20d)]=_0x35b384[_0x413753(0x1fa)]();let _0x26a83c=_0x35b384['getFullYear'](),_0x56dba8=_0x35b384[_0x413753(0x219)]()+0x1;_0x56dba8=_0x56dba8>=0xa?_0x56dba8:'0'+_0x56dba8;let _0x4da80c=_0x35b384[_0x413753(0x1fe)]();_0x4da80c=_0x4da80c>=0xa?_0x4da80c:'0'+_0x4da80c,_0x4fbfd3[_0x413753(0x201)]=_0x26a83c+'-'+_0x56dba8+'-'+_0x4da80c,musicIndexUtil[_0x413753(0x20c)](_0x4ba348,_0x4fbfd3);},musicIndexUtil[_0x12552e(0x20c)]=function(_0x2e9192,_0x43135){const _0x256ce3=_0x12552e;!_0x43135[_0x256ce3(0x217)]&&(_0x43135[_0x256ce3(0x217)]=path['basename'](_0x43135['path']));let _0x7eb2a3=musicUtils[_0x256ce3(0x241)](_0x2e9192,_0x43135);_0x43135[_0x256ce3(0x232)]=_0x7eb2a3?_0x7eb2a3:'';let _0x597f49=dbFileIndexTable['create'](_0x2e9192,_0x43135,indexTableName);if(_0x597f49&&_0x597f49['lastInsertRowid']){let _0x4d9d8e=dbFileIndexTable['getById'](_0x2e9192,_0x597f49[_0x256ce3(0x220)],dbFileIndexTable[_0x256ce3(0x208)]);_0x4d9d8e&&musicUtils['dealFirstLetterSingle'](_0x2e9192,_0x4d9d8e);}},musicIndexUtil[_0x12552e(0x1fb)]=function(_0xbae477,_0x3c50b,_0x4f38e2){const _0x254f8f=_0x12552e;function _0xba815f(_0x1f917b,_0x4decca,_0x4f0bdb,_0x2c5a66,_0x307cc5){const _0x240802=_0x3711;try{!_0x3c50b[_0x4decca]&&(_0x1f917b[_0x4f0bdb]&&typeof _0x1f917b[_0x4f0bdb]==_0x240802(0x23b)&&(_0x3c50b[_0x4f0bdb]=_0x1f917b[_0x4f0bdb]),!_0x3c50b[_0x4decca]&&_0x2c5a66&&_0x1f917b[_0x2c5a66]&&_0x1f917b[_0x2c5a66][_0x240802(0x20e)]&&typeof _0x1f917b[_0x2c5a66][_0x240802(0x20e)]=='string'&&_0x1f917b[_0x2c5a66][_0x240802(0x214)]&&typeof _0x1f917b[_0x2c5a66][_0x240802(0x214)]==_0x240802(0x23b)&&_0x1f917b[_0x2c5a66][_0x240802(0x214)][_0x240802(0x23d)]()[_0x240802(0x1fd)](_0x307cc5)!=-0x1&&(_0x3c50b[_0x4decca]=_0x1f917b[_0x2c5a66][_0x240802(0x20e)]));}catch(_0xac6404){console[_0x240802(0x237)](_0xac6404);}}jsmediatags[_0x254f8f(0x1fc)](_0xbae477,{'onSuccess':function(_0x476b99){const _0x388f2e=_0x254f8f;let _0xb5eee=_0x476b99[_0x388f2e(0x200)];_0xba815f(_0xb5eee,'album','album','TALB',_0x388f2e(0x217)),_0xba815f(_0xb5eee,_0x388f2e(0x226),'title',_0x388f2e(0x233),'title'),_0xba815f(_0xb5eee,_0x388f2e(0x22a),_0x388f2e(0x22a),'TPE1',_0x388f2e(0x210)),_0xba815f(_0xb5eee,_0x388f2e(0x22b),_0x388f2e(0x22b),'TYER',_0x388f2e(0x22b)),_0xba815f(_0xb5eee,_0x388f2e(0x228),_0x388f2e(0x228),_0x388f2e(0x218),_0x388f2e(0x205));try{_0xb5eee['lyrics']&&(_0xb5eee[_0x388f2e(0x22c)]=JSON['stringify'](_0xb5eee[_0x388f2e(0x22c)])),_0xba815f(_0xb5eee,'lyrics','lyrics','','');}catch(_0x4648fe){console[_0x388f2e(0x237)](_0x4648fe);}var _0x5b8f17;_0xb5eee[_0x388f2e(0x20a)]&&_0xb5eee[_0x388f2e(0x20a)][_0x388f2e(0x20e)]&&(_0x5b8f17=_0xb5eee[_0x388f2e(0x20a)][_0x388f2e(0x20e)]);!_0x5b8f17&&_0xb5eee[_0x388f2e(0x23a)]&&_0xb5eee[_0x388f2e(0x23a)][_0x388f2e(0x20e)]&&_0xb5eee[_0x388f2e(0x23a)][_0x388f2e(0x20e)][_0x388f2e(0x20e)]&&(_0x5b8f17=_0xb5eee[_0x388f2e(0x23a)][_0x388f2e(0x20e)]['data']);let _0x4b7687='';if(_0x5b8f17){let _0x35e3d6=0x200;_0x4b7687=config[_0x388f2e(0x243)](_0x3c50b,_0x35e3d6);let _0x4598f3=path['join'](path[_0x388f2e(0x229)](_0x4b7687),_0x388f2e(0x21e)+path[_0x388f2e(0x227)](_0x4b7687));fs[_0x388f2e(0x211)](_0x4598f3,Buffer[_0x388f2e(0x239)](_0x5b8f17),{'encoding':_0x388f2e(0x22f)},function(_0x445ece){const _0x1d3c8b=_0x388f2e;_0x445ece?console[_0x1d3c8b(0x237)](_0x445ece):sharpUtil[_0x1d3c8b(0x234)](_0x4598f3,path[_0x1d3c8b(0x229)](_0x4b7687),path[_0x1d3c8b(0x227)](_0x4b7687),_0x1d3c8b(0x244),null,_0x285a92=>{_0x3c50b['coverPath']=_0x4b7687,fs['rm'](_0x4598f3,_0x5626c9=>{}),_0x4f38e2(_0x3c50b);},_0x570d22=>{_0x4f38e2(_0x3c50b);},_0x35e3d6);});}else _0x4f38e2(_0x3c50b);},'onError':function(_0x58ada8){const _0x1838c7=_0x254f8f;console[_0x1838c7(0x237)](_0x58ada8),_0x4f38e2(_0x3c50b);}});},module[_0x12552e(0x213)]=musicIndexUtil;