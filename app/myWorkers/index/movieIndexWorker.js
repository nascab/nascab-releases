function _0x1a4e(_0x205103,_0x32b7b8){const _0x5ec378=_0x5ec3();return _0x1a4e=function(_0x1a4e80,_0x3bdb93){_0x1a4e80=_0x1a4e80-0x173;let _0x8ab49=_0x5ec378[_0x1a4e80];return _0x8ab49;},_0x1a4e(_0x205103,_0x32b7b8);}const _0x2bede3=_0x1a4e;(function(_0x3f0280,_0x111ea9){const _0x41e0a1=_0x1a4e,_0x218de8=_0x3f0280();while(!![]){try{const _0x547510=parseInt(_0x41e0a1(0x18c))/0x1*(parseInt(_0x41e0a1(0x188))/0x2)+-parseInt(_0x41e0a1(0x18d))/0x3*(parseInt(_0x41e0a1(0x19f))/0x4)+parseInt(_0x41e0a1(0x17f))/0x5*(parseInt(_0x41e0a1(0x19c))/0x6)+parseInt(_0x41e0a1(0x18a))/0x7+parseInt(_0x41e0a1(0x179))/0x8*(-parseInt(_0x41e0a1(0x175))/0x9)+parseInt(_0x41e0a1(0x199))/0xa*(-parseInt(_0x41e0a1(0x194))/0xb)+parseInt(_0x41e0a1(0x1a1))/0xc*(parseInt(_0x41e0a1(0x1a2))/0xd);if(_0x547510===_0x111ea9)break;else _0x218de8['push'](_0x218de8['shift']());}catch(_0x3e632c){_0x218de8['push'](_0x218de8['shift']());}}}(_0x5ec3,0x533ae));const fs=require('fs'),path=require(_0x2bede3(0x19d)),config=require(_0x2bede3(0x186)),Database=require(_0x2bede3(0x17b)),dbOther=new Database(config[_0x2bede3(0x18b)],{});dbOther[_0x2bede3(0x180)](_0x2bede3(0x17a));const dbFileIndex=new Database(config[_0x2bede3(0x192)],{'timeout':0xea60});dbFileIndex[_0x2bede3(0x180)](_0x2bede3(0x17a));const movieUtil=require(_0x2bede3(0x197)),dbScanTaskTable=require('../../db/dbScanTaskTable'),dbFileIndexTable=require(_0x2bede3(0x176)),indexTableName=dbFileIndexTable[_0x2bede3(0x174)],movieIndexUtil=require(_0x2bede3(0x185)),indexUtil=require(_0x2bede3(0x173));process[_0x2bede3(0x177)]=_0x2bede3(0x178);async function startIndexingFolder(_0x480d4e){return new Promise(async(_0x38f28e,_0x159621)=>{const _0x165f37=_0x1a4e;try{let _0x57b052=new Date()[_0x165f37(0x190)](),_0x9d0da3=fs[_0x165f37(0x17d)](_0x480d4e);if(!_0x9d0da3[_0x165f37(0x17e)]())return console[_0x165f37(0x191)]('要扫描的目录不是文件夹',_0x480d4e),_0x38f28e();console['log'](_0x165f37(0x19e),_0x480d4e),await indexUtil[_0x165f37(0x195)](dbFileIndex,indexTableName,_0x480d4e);let {checkFileCount:_0x4b090c,checkPathCount:_0x54ff6d}=await movieIndexUtil[_0x165f37(0x187)](dbOther,dbFileIndex,_0x480d4e);console[_0x165f37(0x191)]('影音管理：扫描完成：'+_0x480d4e,'耗时:',new Date()[_0x165f37(0x190)]()-_0x57b052,'ms',_0x165f37(0x17c),_0x54ff6d,_0x165f37(0x182),_0x4b090c),movieIndexUtil['dealTvDrama'](dbFileIndex),process[_0x165f37(0x184)]({'type':_0x165f37(0x198)}),_0x38f28e();}catch(_0x3ecbc1){console[_0x165f37(0x191)](_0x165f37(0x1a0),_0x3ecbc1,_0x480d4e),_0x38f28e();}});}async function runScanTask(){const _0x3b499d=_0x2bede3;let _0x1f54d1=dbScanTaskTable[_0x3b499d(0x18f)](dbOther,dbScanTaskTable[_0x3b499d(0x19a)]);_0x1f54d1?(dbOther[_0x3b499d(0x189)]('UPDATE\x20source_folder\x20SET\x20last_scan_time=?\x20\x20WHERE\x20path=?\x20and\x20type=\x27movie\x27')['run'](Date[_0x3b499d(0x18e)](),_0x1f54d1[_0x3b499d(0x181)]),startIndexingFolder(_0x1f54d1[_0x3b499d(0x181)])[_0x3b499d(0x19b)](()=>{const _0x29dfc7=_0x3b499d;dbScanTaskTable[_0x29dfc7(0x193)](dbOther,_0x1f54d1['id']),movieUtil['dealFirstLetterAll'](dbFileIndex),runScanTask();})):(console[_0x3b499d(0x191)](_0x3b499d(0x183)),indexUtil['setIndexingState'](dbOther,indexTableName,![]),process['exit']());}function _0x5ec3(){const _0x579dc2=['NasCabMovieIndexingWorker','3439896SZOVbO','journal_mode\x20=\x20WAL','better-sqlite3','文件夹数量','statSync','isDirectory','226035LTObfF','pragma','scan_path','文件数量','影音管理:未找到扫描任务[Movies\x20scanning\x20task\x20not\x20found]','send','./movieIndexUtil','../../myConfig/config','recursionFilesAddIndex','383594ezUYzI','prepare','1181439pXInEX','dbOther','1IbMbNo','32379mAfwRP','now','getOnTask','getTime','log','dbFileIndex','deleteTask','77tXIJRF','recursionDeleteIndex','setIndexingState','../../express-server/utils/movieUtil','NEW_MOVIE_INDEX','922030favaNc','SCAN_TYPE_MOVIE','then','90zjjpBg','path','影音管理:\x20开始扫描','68qGIYco','扫描目录已不存在\x20','480MtUlQy','182364AWfpOV','./indexUtil','INDEX_TABLE_NAME_MOVIE','9wuZgCE','../../db/dbFileIndexTable','title'];_0x5ec3=function(){return _0x579dc2;};return _0x5ec3();}indexUtil[_0x2bede3(0x196)](dbOther,indexTableName,!![]),runScanTask();