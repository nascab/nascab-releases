'use strict';function _0x5e03(){const _0x4ad39a=['OFF','addProcessRecord','catch','图书索引线程已退出[Books\x20indexing\x20worker\x20exited]','create','main\x20error:','run','initBackupWorker','relaunch','startScanPath','launchWithSys','74393dcgfoi','showItemInFolder','shell','getGlobalInfo','stringify','NasCab\x20Api\x20进程数量\x20[NasCab\x20api\x20thread\x20count]:','myWorkers/m3u8Worker.js','DDNS\x20worker\x20is\x20stopped','放入回收站失败','webContents','nasAccountLogin','did-finish-load','http://','focus','nasRemoteState','getTime','autoLoginClient','addScanTaskWhenStart','myWorkers/ddnsWorker.js','send','myWorkers/ai/aiSimilarPhotos.js','myWorkers/ai/aiFaceUtil.js','myWorkers/shareFolder/shareWebDav.js','./utils/initUtil','refresh','getAllByWhere','524TlzPPX','app','./utils/globalInfoUtil','\x20server_type=\x27WebDav\x27','dbOther','已打开路径','reset','myWorkers/index/musicIndexWorker.js','nasProxyRestart','createToken','apiServer','Closing\x20NasCab\x20ddns','页面加载完成','child_process','myWorkers/bg/backupWorker.js','WebDav','getIpv4Address','sha256','NasCab\x20api\x20server\x20starting\x20','NasCab\x20api\x20server\x20restarting\x20','username','2Xlvmst','startSimilarPhotoWork','cluster','43541rbhGFe','myWorkers/shareFolder/shareFtp.js','电影索引线程已退出[Movies\x20indexing\x20worker\x20exited]','loadUrl','nasDdnsState','myWorkers/proxy/proxyWorker.js','send\x20message\x20callback\x20','expireTokenOnTime','Relaunch\x20Restart','myWorkers/index/movieIndexWorker.js','./utils/messageUtil','http://localhost','isVisible','START_PRE_GEN_SUBTITLE','133lZFJlw','关闭\x20proxyWorker','did-fail-load','?token=','log','uncaughtException','openPath','whenReady','nasCabLogout','aiSimilarPhotoEnable','HTTP\x20服务正在运行[HTTP\x20server\x20is\x20running]\x20:','Clientless\x20service\x20mode','length','quit','setupPrimary','close','Ftp\x20worker\x20is\x20stopped','photo','./db/dbFileShare','myWorkers/bg/bgTaskWorker.js','681IjIUvC','kill','message','aiClassesEnable','exressPort','value','8567190Mvhsfj','进程出错了','980enpQbY','myWorkers/movieInfoWorker.js','type','ddnsIpv6Address','FTP','music','HTTPS\x20服务运行端口[HTTPS\x20server\x20running\x20on\x20port]:','myWorkers/expressWorker.js','then','init','prepare','webDavServer','NEW_MOVIE_INDEX','book','worker\x20send\x20msg\x20error','FRP\x20OFF','trash','nasDdnsRestart','findByTitle','createUserFolder','processList','HTTPS\x20服务正在运行[HTTPS\x20server\x20is\x20running]\x20:','source_type','killed','second-instance','nasDdnsEnable','exit','Relaunch','https://','shareType','打开路径失败','localhost','NEW_PHOTO_INDEX','ipcMain','loadURL','initWindowEventAndLoadLoading','2106570wGrzKr','stop','getFreePort','音乐索引线程已退出[Music\x20indexing\x20worker\x20exited]','myWorkers/tinyImgWorker.js','movie','Start\x20checking\x20for\x20updates','fileShareRestart','./db/dbConfigTable','error','fail','SIGTERM','startUpdate','3084168bJNYjt','启用\x20frp','getServerRootPath','initTray','deleteByTitle','isMinimized','resolve','requestSingleInstanceLock','FTPServer','proxyWorker\x20exit','shellType','startClassesAiWork','myWorkers/bg/fileOperationWorker.js','Webdav\x20worker\x20is\x20stopped','316536JHmREJ','trashItem','/#/','expressStarted','exitApp','electron','path','\x20server_type=\x27FTP\x27','NEW_TINY_IMAGE','myWorkers/subtitlesGenWorker.js','stopIndexWorker','start','START_WORKER_BG_TASK','aiFaceEnable','getConfigApiPort'];_0x5e03=function(){return _0x4ad39a;};return _0x5e03();}const _0x39ec18=_0x4317;(function(_0x2d88fd,_0x536cd0){const _0x46a94b=_0x4317,_0x44681d=_0x2d88fd();while(!![]){try{const _0x2e9d02=-parseInt(_0x46a94b(0x130))/0x1*(parseInt(_0x46a94b(0x12d))/0x2)+-parseInt(_0x46a94b(0x152))/0x3*(parseInt(_0x46a94b(0x118))/0x4)+-parseInt(_0x46a94b(0xc9))/0x5+-parseInt(_0x46a94b(0xe4))/0x6*(parseInt(_0x46a94b(0x13e))/0x7)+parseInt(_0x46a94b(0xd6))/0x8+parseInt(_0x46a94b(0x158))/0x9+parseInt(_0x46a94b(0x15a))/0xa*(parseInt(_0x46a94b(0xfe))/0xb);if(_0x2e9d02===_0x536cd0)break;else _0x44681d['push'](_0x44681d['shift']());}catch(_0x35ec0a){_0x44681d['push'](_0x44681d['shift']());}}}(_0x5e03,0x7add1));let app,shell,ipcMain;try{app=require(_0x39ec18(0xe9))[_0x39ec18(0x119)],shell=require('electron')[_0x39ec18(0x100)],ipcMain=require(_0x39ec18(0xe9))[_0x39ec18(0xc6)];}catch(_0x3a1d33){console[_0x39ec18(0x142)](_0x39ec18(0x149));}let mainWindow,sha256=require(_0x39ec18(0x129));const dbFileShare=require(_0x39ec18(0x150)),dbUserTable=require('./db/dbUserTable'),{fork}=require(_0x39ec18(0x125));function _0x4317(_0x24b2a3,_0x29336a){const _0x5e03c6=_0x5e03();return _0x4317=function(_0x4317de,_0x135f94){_0x4317de=_0x4317de-0xa9;let _0x55f5fc=_0x5e03c6[_0x4317de];return _0x55f5fc;},_0x4317(_0x24b2a3,_0x29336a);}let bgTaskWorkerIsRunning=![],tinyImgWorkerIsRunning=![],getMovieInfoWorkerIsRunning=![],aiFacesWorkerIsRunning=![],aiClassesWorkerIsRunning=![],aiSimilarPhotoWorker=![],globalInfoWorkerIsRunning=![],photoIndexWorkerIsRunning=![],movieIndexWorkerIsRunning=![],musicIndexWorkerIsRunning=![],bookIndexWorkerIsRunning=![],watchWorkerIsRunning=![];const messageUtil=require(_0x39ec18(0x13a));let backupWorkerIsRunning=![],m3u8WorkerIsRunning=![],subtitleGenWorkerIsRunning=![],loadUrl='',listenPortHttp='80';function workerSendMsg(_0x316b52,_0x52a13e){const _0x361364=_0x39ec18;try{_0x316b52&&!_0x316b52[_0x361364(0xbc)]&&_0x316b52[_0x361364(0x111)](_0x52a13e,undefined,undefined,_0xb8bea7=>{const _0x23a087=_0x361364;_0xb8bea7&&console[_0x23a087(0x142)](_0x23a087(0x136),_0xb8bea7);});}catch(_0x35cf08){console[_0x361364(0x142)](_0x361364(0xb3),_0x35cf08);}}let dbu;function init(){const _0x9f5d7f=_0x39ec18;var _0x47abf3=require(_0x9f5d7f(0x12f));let _0x5efba5=require(_0x9f5d7f(0xea)),_0x4eda38=require(_0x9f5d7f(0x115)),_0x2cd148=require(_0x9f5d7f(0xd1)),_0x2f16ae=_0x4eda38['createUserFolder']();dbu=_0x4eda38['initDbu']();let _0x30282f='';function _0x15f577(_0x10d5d2,_0x5704a1){const _0x1ac094=_0x9f5d7f;function _0x58da0a(){const _0xf82c1c=_0x4317;_0x10d5d2['init'](),_0x30282f=_0x2cd148[_0xf82c1c(0xd8)](_0x10d5d2[_0xf82c1c(0x11c)]);if(app)_0x4eda38[_0xf82c1c(0xfd)]();_0x4eda38['setLanguage']();if(app)mainWindow=_0x4eda38['createMainWindow']();_0x4eda38[_0xf82c1c(0xae)](_0x10d5d2);if(app)_0x4eda38[_0xf82c1c(0xd9)](_0x10d5d2,mainWindow);if(app)_0x4eda38[_0xf82c1c(0xc8)](_0x10d5d2,mainWindow);_0x4eda38[_0xf82c1c(0x137)](),_0x4eda38['runNewVersionTask'](_0x10d5d2);if(app)_0x4eda38['openDev']();_0x5704a1(mainWindow);}app?app[_0x1ac094(0x145)]()[_0x1ac094(0xad)](()=>{_0x58da0a();}):_0x58da0a();}_0x15f577(dbu,_0x5e67ef=>{const _0x4f3d6d=_0x9f5d7f,_0x243339=_0x4eda38['getRootPath']();let _0x47ac66=_0x4eda38[_0x4f3d6d(0xf2)]();_0x4eda38[_0x4f3d6d(0xcb)](_0x47ac66,_0x28ecf8=>{const _0x6972f9=_0x4f3d6d;function _0x46264e(_0x1dc119){const _0x5e6940=_0x4317,_0x54994c=fork(_0x5efba5[_0x5e6940(0xdc)](__dirname,_0x1dc119),[],{'env':{'userDataFolder':_0x2f16ae,'appRootPath':_0x243339},'detached':![],'killSignal':_0x5e6940(0xd4)});return _0x4eda38[_0x5e6940(0xb9)]['push'](_0x54994c),_0x4eda38[_0x5e6940(0xf4)](dbu[_0x5e6940(0x11c)],_0x54994c['pid']),_0x54994c['on']('exit',function(_0x19e37c,_0x177623){}),_0x54994c['on'](_0x5e6940(0xd2),function(_0x444457){const _0x37a58e=_0x5e6940;console[_0x37a58e(0x142)](_0x37a58e(0x159),_0x444457);}),_0x54994c;}dbu['dbOther'][_0x6972f9(0xaf)]('UPDATE\x20bg_task\x20SET\x20task_state=3\x20where\x20task_state=1')['run'](),setInterval(()=>{_0x1e8ee9();},0x258*0x3e8),setTimeout(()=>{const _0x4520c7=_0x6972f9;_0x4eda38[_0x4520c7(0x10f)](dbu[_0x4520c7(0x11c)]),_0x111c8c(),_0x152906(),_0x1d5662(),_0x5662b6(),_0x7b74a1(),_0x1b7d92(),_0x19be67(),_0x5dd5de(),_0xd2ad8a();},0x1388);let _0x3d52c3;function _0x5662b6(){const _0x1312eb=_0x6972f9;if(bookIndexWorkerIsRunning)return;bookIndexWorkerIsRunning=!![],_0x3d52c3=_0x46264e('myWorkers/index/bookIndexWorker.js'),_0x3d52c3['on'](_0x1312eb(0x154),function(_0x532aa7){const _0x281153=_0x1312eb;_0x532aa7[_0x281153(0x15c)]==_0x281153(0x14d)&&(bookIndexWorkerIsRunning=![]);}),_0x3d52c3['on'](_0x1312eb(0xbf),function(_0x13a3b2,_0x5af436,_0x4449a5){const _0x5b36b7=_0x1312eb;console['log'](_0x5b36b7(0xf6),_0x5af436||'',_0x4449a5||''),bookIndexWorkerIsRunning=![];});}let _0x54af41;function _0x1d5662(){const _0x2eb444=_0x6972f9;if(musicIndexWorkerIsRunning)return;musicIndexWorkerIsRunning=!![],_0x54af41=_0x46264e(_0x2eb444(0x11f)),_0x54af41['on']('message',function(_0x414356){const _0x1eac47=_0x2eb444;_0x414356['type']==_0x1eac47(0x14d)&&(musicIndexWorkerIsRunning=![]);}),_0x54af41['on']('exit',function(_0x393b04,_0xcb74aa,_0x40bb88){const _0x1bee2d=_0x2eb444;console[_0x1bee2d(0x142)](_0x1bee2d(0xcc),_0xcb74aa||'',_0x40bb88||''),musicIndexWorkerIsRunning=![];});}let _0x3aef4a;function _0x17926f(){const _0x18168d=_0x6972f9;if(watchWorkerIsRunning)return;watchWorkerIsRunning=!![],_0x3aef4a=_0x46264e('myWorkers/index/fileWatcherWorker.js'),_0x3aef4a['on'](_0x18168d(0x154),function(_0x4fba32){const _0x2d5e72=_0x18168d;if(_0x4fba32[_0x2d5e72(0x15c)]==_0x2d5e72(0x14d))watchWorkerIsRunning=![];else{if(_0x4fba32[_0x2d5e72(0x15c)]=='NEW_PHOTO_INDEX')_0x7b74a1(),_0x5dd5de();else _0x4fba32['type']==_0x2d5e72(0xb1)&&(_0x7b74a1(),_0xd2ad8a(),_0xb67f78());}}),_0x3aef4a['on'](_0x18168d(0xbf),function(_0x12c13a,_0x4a26c1,_0x2420bd){const _0x3bf310=_0x18168d;console[_0x3bf310(0x142)]('------Watch\x20worker\x20is\x20stopped------',_0x4a26c1,_0x2420bd),watchWorkerIsRunning=![];});}_0x17926f();let _0x44d6d0;function _0x111c8c(){const _0xd66ef5=_0x6972f9;if(photoIndexWorkerIsRunning)return;photoIndexWorkerIsRunning=!![],_0x44d6d0=_0x46264e('myWorkers/index/photoIndexWorker.js'),_0x44d6d0['on']('message',function(_0x42e7c7){const _0x24d599=_0x4317;_0x42e7c7[_0x24d599(0x15c)]==_0x24d599(0x14d)&&(photoIndexWorkerIsRunning=![]),_0x42e7c7[_0x24d599(0x15c)]==_0x24d599(0xc5)&&(_0x7b74a1(),_0x5dd5de());}),_0x44d6d0['on'](_0xd66ef5(0xbf),function(_0x763c24,_0x2b3cc4,_0x5d0449){const _0x276a9f=_0xd66ef5;console[_0x276a9f(0x142)]('照片索引线程已退出[Photos\x20indexing\x20worker\x20exited]',_0x2b3cc4||'',_0x5d0449||''),photoIndexWorkerIsRunning=![];});}let _0x14ac92;function _0x152906(){const _0x2ddfa9=_0x6972f9;if(movieIndexWorkerIsRunning)return;movieIndexWorkerIsRunning=!![],_0x14ac92=_0x46264e(_0x2ddfa9(0x139)),_0x14ac92['on'](_0x2ddfa9(0x154),function(_0x176a72){const _0xbaa752=_0x2ddfa9;if(_0x176a72['type']=='close')movieIndexWorkerIsRunning=![];else _0x176a72[_0xbaa752(0x15c)]==_0xbaa752(0xb1)&&(_0x7b74a1(),_0xd2ad8a(),_0xb67f78());}),_0x14ac92['on'](_0x2ddfa9(0xbf),function(_0x34ca93,_0x66894e,_0x41c586){const _0x2e8b96=_0x2ddfa9;console[_0x2e8b96(0x142)](_0x2e8b96(0x132),_0x66894e||'',_0x41c586||''),movieIndexWorkerIsRunning=![];});}function _0xd2ad8a(){const _0x204c3f=_0x6972f9;if(getMovieInfoWorkerIsRunning)return;getMovieInfoWorkerIsRunning=!![];let _0x106635=_0x46264e(_0x204c3f(0x15b));_0x106635['on'](_0x204c3f(0x154),function(_0x99e484){const _0x52aea7=_0x204c3f;_0x99e484[_0x52aea7(0x15c)]==_0x52aea7(0x14d)&&(getMovieInfoWorkerIsRunning=![]);}),_0x106635['on'](_0x204c3f(0xbf),function(){getMovieInfoWorkerIsRunning=![];});}function _0x7b74a1(){const _0x2a64f3=_0x6972f9;if(tinyImgWorkerIsRunning)return;tinyImgWorkerIsRunning=!![];let _0xb8baba=_0x46264e(_0x2a64f3(0xcd));_0xb8baba['on'](_0x2a64f3(0x154),function(_0x5e2d36){const _0x32b3d7=_0x2a64f3;if(_0x5e2d36['type']==_0x32b3d7(0x14d))tinyImgWorkerIsRunning=![];else _0x5e2d36[_0x32b3d7(0x15c)]==_0x32b3d7(0xec)&&(_0x1b7d92(),_0x19be67());}),_0xb8baba['on']('exit',function(){tinyImgWorkerIsRunning=![];});}let _0x488930,_0x55a175;function _0x5dc4ef(){const _0x30f61d=_0x6972f9;let _0x25c230=dbFileShare[_0x30f61d(0x117)](dbu[_0x30f61d(0x11c)],_0x30f61d(0xeb),[]);if(_0x25c230&&_0x25c230[_0x30f61d(0x14a)]>0x0)!_0x488930&&(_0x488930=_0x46264e(_0x30f61d(0x131)),_0x488930['on'](_0x30f61d(0xbf),function(){const _0x3ced13=_0x30f61d;console[_0x3ced13(0x142)](_0x3ced13(0x14e)),_0x488930=null;}));else{_0x2cd148[_0x30f61d(0xf7)](dbu[_0x30f61d(0x11c)],{'title':_0x30f61d(0xde),'value':JSON[_0x30f61d(0x102)]({'state':_0x30f61d(0xca)})});if(_0x488930){let _0x3e3769=_0x488930[_0x30f61d(0x153)]();_0x3e3769&&(_0x488930=null,console[_0x30f61d(0x142)]('Closing\x20FTP'));}}}function _0x29b64c(){const _0x15700a=_0x6972f9;let _0x119f00=dbFileShare[_0x15700a(0x117)](dbu[_0x15700a(0x11c)],_0x15700a(0x11b),[]);if(_0x119f00&&_0x119f00[_0x15700a(0x14a)]>0x0)!_0x55a175&&(_0x55a175=_0x46264e(_0x15700a(0x114)),_0x55a175['on']('exit',function(){const _0x5cf3e9=_0x15700a;console[_0x5cf3e9(0x142)](_0x5cf3e9(0xe3)),_0x55a175=null;}));else{_0x2cd148[_0x15700a(0xf7)](dbu['dbOther'],{'title':_0x15700a(0xb0),'value':JSON[_0x15700a(0x102)]({'state':_0x15700a(0xca)})});if(_0x55a175){let _0x4fb180=_0x55a175[_0x15700a(0x153)]();_0x4fb180&&(_0x55a175=null);}}}let _0x268979;function _0x587c4e(){const _0x372806=_0x6972f9;let _0x4894ec=![],_0x2d657d=_0x2cd148['findByTitle'](dbu[_0x372806(0x11c)],_0x372806(0xbe));_0x2d657d&&_0x2d657d[_0x372806(0x157)]==0x1&&(_0x4894ec=!![]);if(_0x4894ec)!_0x268979&&(_0x268979=_0x46264e(_0x372806(0x110)),_0x268979['on'](_0x372806(0x154),function(_0x536053){const _0x832356=_0x372806;_0x536053['type']==_0x832356(0x14d)&&(_0x268979=null);}),_0x268979['on'](_0x372806(0xbf),function(){const _0x4ef750=_0x372806;console[_0x4ef750(0x142)](_0x4ef750(0x105)),_0x268979=null;}));else{if(_0x268979){let _0x349274=_0x268979[_0x372806(0x153)]();_0x349274&&(_0x268979=null,console[_0x372806(0x142)](_0x372806(0x123)));}_0x2cd148[_0x372806(0xda)](dbu[_0x372806(0x11c)],_0x372806(0x15d)),_0x2cd148[_0x372806(0xda)](dbu[_0x372806(0x11c)],'ddnsIpv4Address'),_0x2cd148[_0x372806(0xf7)](dbu[_0x372806(0x11c)],{'title':_0x372806(0x134),'value':JSON[_0x372806(0x102)]({'status':'fail','ddnsIp':'','error':_0x372806(0xf3)})});}}_0x587c4e();let _0x146b7e;function _0x42b6cb(){const _0x11a40e=_0x6972f9;if(globalInfoWorkerIsRunning)return;globalInfoWorkerIsRunning=!![],_0x146b7e=_0x46264e('myWorkers/globalInfoWorker.js'),_0x146b7e['on']('message',function(_0x60ee31){const _0x47a9cd=_0x4317;if(_0x60ee31[_0x47a9cd(0x15c)]==_0x47a9cd(0x14d))globalInfoWorkerIsRunning=![];else _0x60ee31[_0x47a9cd(0x15c)]==_0x47a9cd(0xfc)&&_0x3d41ae(_0x60ee31);}),_0x146b7e['on'](_0x11a40e(0xbf),function(){globalInfoWorkerIsRunning=![];});}_0x42b6cb();function _0x19be67(){const _0x551f16=_0x6972f9;let _0x3db02e=_0x2cd148[_0x551f16(0xb7)](dbu[_0x551f16(0x11c)],_0x551f16(0xf1));if(_0x3db02e&&_0x3db02e[_0x551f16(0x157)]=='1'){if(aiFacesWorkerIsRunning)return;aiFacesWorkerIsRunning=!![];let _0x2b7872=_0x46264e(_0x551f16(0x113));_0x2b7872['on'](_0x551f16(0x154),function(_0x2eeb7f){const _0x32ca13=_0x551f16;_0x2eeb7f[_0x32ca13(0x15c)]==_0x32ca13(0x14d)&&(aiFacesWorkerIsRunning=![]);}),_0x2b7872['on'](_0x551f16(0xbf),function(_0x3516ee,_0x245dc2,_0x174b86){aiFacesWorkerIsRunning=![],_0x2b7872=null;});}else{}}function _0x5dd5de(){const _0x264fd9=_0x6972f9;let _0x320fdf=_0x2cd148['findByTitle'](dbu['dbOther'],_0x264fd9(0x147));if(_0x320fdf&&_0x320fdf[_0x264fd9(0x157)]=='1'){if(aiSimilarPhotoWorker)return;aiSimilarPhotoWorker=!![];let _0x57ecae=_0x46264e(_0x264fd9(0x112));_0x57ecae['on']('message',function(_0x3297e4){const _0x5e16cd=_0x264fd9;_0x3297e4[_0x5e16cd(0x15c)]==_0x5e16cd(0x14d)&&(aiSimilarPhotoWorker=![]);}),_0x57ecae['on'](_0x264fd9(0xbf),()=>{_0x57ecae=![];});}else{}}function _0x1b7d92(){const _0x2257af=_0x6972f9;let _0x342bf4=_0x2cd148['findByTitle'](dbu[_0x2257af(0x11c)],_0x2257af(0x155));if(_0x342bf4&&_0x342bf4[_0x2257af(0x157)]=='1'){if(aiClassesWorkerIsRunning)return;aiClassesWorkerIsRunning=!![];let _0x422140=_0x46264e('myWorkers/ai/aiClassify.js');_0x422140['on'](_0x2257af(0x154),function(_0x545eae){const _0x112689=_0x2257af;_0x545eae[_0x112689(0x15c)]=='close'&&(aiClassesWorkerIsRunning=![]);}),_0x422140['on'](_0x2257af(0xbf),()=>{aiClassesWorkerIsRunning=![];});}else{}}let _0x4f99c6;function _0xc60751(){const _0x539433=_0x6972f9;let _0x44032f=dbu[_0x539433(0x11c)][_0x539433(0xaf)]('SELECT\x20count(*)\x20as\x20count\x20FROM\x20backup_task')['get']();if(_0x44032f['count']>0x0){if(backupWorkerIsRunning)return;backupWorkerIsRunning=!![],_0x4f99c6=_0x46264e(_0x539433(0x126)),_0x4f99c6['on'](_0x539433(0x154),function(_0x3240b2){const _0x5407a5=_0x539433;_0x3240b2['type']==_0x5407a5(0x14d)&&(backupWorkerIsRunning=![]);}),_0x4f99c6['on']('exit',()=>{backupWorkerIsRunning=![];});}else{if(_0x4f99c6){let _0x136a01=_0x4f99c6['kill']();_0x136a01&&(_0x4f99c6=null);}}}_0xc60751();let _0x58d1fe;function _0x1cbb88(){const _0x34d6ab=_0x6972f9;if(m3u8WorkerIsRunning)return;m3u8WorkerIsRunning=!![],_0x58d1fe=_0x46264e(_0x34d6ab(0x104)),_0x58d1fe['on'](_0x34d6ab(0x154),function(_0x830c87){const _0x5af5b1=_0x34d6ab;_0x830c87[_0x5af5b1(0x15c)]=='close'&&(m3u8WorkerIsRunning=![]);}),_0x58d1fe['on'](_0x34d6ab(0xbf),function(_0x2b42af){m3u8WorkerIsRunning=![];});}let _0x940cae,_0x309bf1=![];function _0x1e8ee9(){const _0x502ac5=_0x6972f9;_0x309bf1&&(!_0x940cae&&(_0x940cae=_0x46264e(_0x502ac5(0x135)),_0x940cae['on']('exit',_0x4e7ae1=>{const _0x169a8b=_0x502ac5;console[_0x169a8b(0x142)](_0x169a8b(0xdf),_0x4e7ae1),_0x940cae=null;}),console[_0x502ac5(0x142)](_0x502ac5(0xd7))));}function _0x36e664(){const _0x72891c=_0x6972f9;let _0x5585a7=_0x2cd148[_0x72891c(0xb7)](dbu['dbOther'],'nasRemoteEnable');!_0x5585a7||_0x5585a7&&_0x5585a7['value']!=0x1&&_0x5585a7[_0x72891c(0x157)]!='1'?(_0x309bf1=![],_0x940cae&&(_0x940cae[_0x72891c(0x153)](),_0x940cae=null,console[_0x72891c(0x142)](_0x72891c(0x13f))),_0x2cd148[_0x72891c(0xf7)](dbu[_0x72891c(0x11c)],{'title':_0x72891c(0x10c),'value':JSON[_0x72891c(0x102)]({'status':_0x72891c(0xd3),'time':new Date()[_0x72891c(0x10d)]()+'','error':_0x72891c(0xb4)})})):(_0x309bf1=!![],_0x1e8ee9());}_0x36e664();let _0x432fc5;function _0xb67f78(){const _0x2813c7=_0x6972f9;if(subtitleGenWorkerIsRunning)return;subtitleGenWorkerIsRunning=!![],_0x432fc5=_0x46264e(_0x2813c7(0xed)),_0x432fc5['on']('message',function(_0x373925){const _0x2100fd=_0x2813c7;_0x373925[_0x2100fd(0x15c)]==_0x2100fd(0x14d)&&(subtitleGenWorkerIsRunning=![]);}),_0x432fc5['on'](_0x2813c7(0xbf),function(_0x27379a){subtitleGenWorkerIsRunning=![];});}setTimeout(()=>{_0xb67f78();},0x1388);let _0x5a7854=![],_0x2147d4=![],_0x487b95=![];function _0x3e2665(_0x31514c){const _0x5c3846=_0x6972f9;try{!_0x487b95&&(_0x487b95=!![],setTimeout(()=>{const _0x1cd908=_0x4317;let _0x12685e=require(_0x1cd908(0x11a)),_0x42345e=_0x12685e[_0x1cd908(0x128)](dbu[_0x1cd908(0x11c)]);_0x42345e?console[_0x1cd908(0x142)](_0x1cd908(0xba),_0x1cd908(0xc1)+_0x42345e+':'+_0x31514c+_0x30282f):console['log'](_0x1cd908(0xab),''+_0x31514c+_0x30282f);},0x3a98));}catch(_0x2fddf1){console[_0x5c3846(0x142)](_0x2fddf1);}}let _0x5d4e86=![];function _0x1c1b29(){const _0x2bbf2a=_0x6972f9;if(app&&_0x5e67ef){if(_0x5d4e86)return;_0x5d4e86=!![],setTimeout(()=>{_0x5d4e86=![];},0xbb8);function _0x2d4a1a(){const _0x34c88b=_0x4317;loadUrl=listenPortHttp=='80'?_0x34c88b(0x13b)+_0x30282f+_0x34c88b(0xe6):'http://localhost:'+listenPortHttp+_0x30282f+_0x34c88b(0xe6);let _0x37be24=_0x2cd148[_0x34c88b(0xb7)](dbu['dbOther'],_0x34c88b(0x10e));if(!_0x37be24||_0x37be24[_0x34c88b(0x157)]=='1'){let _0x1364b0=dbUserTable['getAdmin'](dbu['dbOther']);if(_0x1364b0){let _0x210a85=sha256(new Date()[_0x34c88b(0x10d)]()+_0x1364b0[_0x34c88b(0x12c)]);dbUserTable[_0x34c88b(0x121)](dbu[_0x34c88b(0x11c)],_0x1364b0['id'],_0x210a85,_0x34c88b(0xc4)),loadUrl+=_0x34c88b(0x141)+_0x210a85;}}}_0x2d4a1a(),console['log'](_0x2bbf2a(0x133),loadUrl),_0x5e67ef[_0x2bbf2a(0xc7)](loadUrl),_0x5e67ef[_0x2bbf2a(0x107)]['on'](_0x2bbf2a(0x140),function(){console['log']('页面加载失败',loadUrl);}),_0x5e67ef[_0x2bbf2a(0x107)]['on'](_0x2bbf2a(0x109),function(){const _0x55b605=_0x2bbf2a;console[_0x55b605(0x142)](_0x55b605(0x124),loadUrl);}),ipcMain['on'](_0x2bbf2a(0x116),(_0x1d4fcc,_0x460950)=>{const _0x4a2cc4=_0x2bbf2a;console['log']('刷新页面',loadUrl),loadUrl&&_0x5e67ef[_0x4a2cc4(0xc7)](loadUrl);});}}function _0x180224(_0x193d08){const _0x3258d0=_0x6972f9;listenPortHttp=_0x193d08,_0x29b64c(),setTimeout(()=>{_0x5dc4ef();},0x1388),!_0x2147d4&&(_0x2147d4=!![],setTimeout(()=>{const _0xc488df=_0x4317;let _0x51570b=require(_0xc488df(0x11a)),_0x15dd44=_0x51570b['getIpv4Address'](dbu[_0xc488df(0x11c)]);_0x15dd44?console[_0xc488df(0x142)](_0xc488df(0x148),_0xc488df(0x10a)+_0x15dd44+':'+listenPortHttp+_0x30282f):console[_0xc488df(0x142)]('HTTP\x20服务运行端口[HTTP\x20server\x20running\x20on\x20port]:',listenPortHttp);},0x3a98)),_0x2cd148[_0x3258d0(0xf7)](dbu[_0x3258d0(0x11c)],{'title':_0x3258d0(0x122),'value':JSON[_0x3258d0(0x102)]({'state':_0x3258d0(0xf9),'port':listenPortHttp})}),!_0x5a7854&&(_0x5a7854=!![],_0x1c1b29(),workerSendMsg(_0x940cae,{'type':'start'}));}let _0x2b4a5a=_0x4eda38['getExpressApiCount']();console[_0x6972f9(0x142)](_0x6972f9(0x103),_0x2b4a5a),_0x47abf3[_0x6972f9(0x14c)]({'exec':_0x5efba5[_0x6972f9(0xdc)](__dirname,_0x6972f9(0xac))}),_0x47abf3['on']('exit',function(_0x494019,_0x13f672,_0x44a8e5){const _0xc17ef5=_0x6972f9;console['log'](_0xc17ef5(0x12b),_0x13f672,_0x44a8e5),setTimeout(()=>{_0x2c335b();},0x1388);});for(let _0x5b687e=0x0;_0x5b687e<_0x2b4a5a;_0x5b687e++){console['log'](_0x6972f9(0x12a),_0x5b687e+0x1),_0x2c335b();}function _0x3d41ae(_0x43cfdc){const _0x418c1a=_0x6972f9;if(_0x43cfdc[_0x418c1a(0xbb)]==_0x418c1a(0xce))_0x152906();else{if(_0x43cfdc[_0x418c1a(0xbb)]==_0x418c1a(0x14f))_0x111c8c();else{if(_0x43cfdc[_0x418c1a(0xbb)]=='music')_0x1d5662();else _0x43cfdc[_0x418c1a(0xbb)]==_0x418c1a(0xb2)&&_0x5662b6();}}_0x43cfdc['restartWatcher']&&(_0x17926f(),workerSendMsg(_0x3aef4a,_0x43cfdc));}function _0x2c335b(){const _0x396611=_0x6972f9,_0x35f353=_0x47abf3['fork']({'usePort':_0x28ecf8,'userDataFolder':_0x2f16ae,'appRootPath':_0x243339});_0x35f353['on'](_0x396611(0x154),function(_0x159f3e){const _0x4b0803=_0x396611;try{switch(_0x159f3e[_0x4b0803(0x15c)]){case'reloadHomePage':_0x1c1b29();break;case'START_WORKER_FILE_OPERATION':let _0x34c30c=_0x46264e(_0x4b0803(0xe2));workerSendMsg(_0x34c30c,_0x159f3e);break;case _0x4b0803(0xf0):if(!bgTaskWorkerIsRunning){bgTaskWorkerIsRunning=!![];let _0xf75b4c=_0x46264e(_0x4b0803(0x151));_0xf75b4c['on'](_0x4b0803(0x154),function(_0x16898a){const _0x2ebe28=_0x4b0803;_0x16898a[_0x2ebe28(0x15c)]==_0x2ebe28(0x14d)&&(bgTaskWorkerIsRunning=![]);});}break;case'SWITCH_MOVIE_INFO':_0xd2ad8a();break;case _0x4b0803(0x13d):_0xb67f78();break;case'M3u8Transcode':_0x1cbb88(),workerSendMsg(_0x58d1fe,_0x159f3e);break;case _0x4b0803(0x120):_0x36e664(),workerSendMsg(_0x940cae,{'type':'reset','msg':_0x159f3e});break;case _0x4b0803(0x146):_0x36e664(),workerSendMsg(_0x940cae,{'type':_0x4b0803(0xca)}),setTimeout(()=>{_0xd2ad8a();},0x3e8);break;case _0x4b0803(0x101):_0x42b6cb(),workerSendMsg(_0x146b7e,_0x159f3e);break;case _0x4b0803(0xd5):console[_0x4b0803(0x142)](_0x4b0803(0xcf)),_0x4eda38[_0x4b0803(0xd5)]();break;case _0x4b0803(0xfa):_0xc60751();break;case _0x4b0803(0xee):if(_0x159f3e['source_type']==_0x4b0803(0x14f))_0x44d6d0&&(_0x44d6d0['kill'](),_0x44d6d0=null,photoIndexWorkerIsRunning=![]);else{if(_0x159f3e[_0x4b0803(0xbb)]==_0x4b0803(0xce))_0x14ac92&&(_0x14ac92[_0x4b0803(0x153)](),_0x14ac92=null,movieIndexWorkerIsRunning=![]);else{if(_0x159f3e[_0x4b0803(0xbb)]==_0x4b0803(0xaa))_0x54af41&&(_0x54af41[_0x4b0803(0x153)](),_0x54af41=null,musicIndexWorkerIsRunning=![]);else _0x159f3e[_0x4b0803(0xbb)]==_0x4b0803(0xb2)&&(_0x3d52c3&&(_0x3d52c3[_0x4b0803(0x153)](),_0x3d52c3=null,bookIndexWorkerIsRunning=![]));}}break;case'startScanPath':_0x3d41ae(_0x159f3e);break;case _0x4b0803(0xd0):if(_0x159f3e['shareType']==_0x4b0803(0x127))_0x29b64c(),workerSendMsg(_0x55a175,_0x159f3e);else _0x159f3e[_0x4b0803(0xc2)]==_0x4b0803(0xa9)&&(_0x5dc4ef(),workerSendMsg(_0x488930,_0x159f3e));break;case _0x4b0803(0xb6):_0x587c4e(),workerSendMsg(_0x268979,{'type':_0x4b0803(0xef),'force':0x1});break;case _0x4b0803(0x146):_0x587c4e(),setTimeout(()=>{_0xd2ad8a();},0x3e8);break;case _0x4b0803(0x108):_0x36e664(),workerSendMsg(_0x940cae,{'type':_0x4b0803(0x11e)}),_0x587c4e(),setTimeout(()=>{_0xd2ad8a();},0x3e8);break;case _0x4b0803(0xb8):_0x4eda38[_0x4b0803(0xb8)]();break;case _0x4b0803(0xe1):_0x1b7d92();break;case'startFaceAiWork':_0x19be67();break;case _0x4b0803(0x12e):_0x5dd5de();break;case _0x4b0803(0xe7):_0x180224(_0x159f3e[_0x4b0803(0x156)]);break;case'expressStartedHttps':_0x3e2665(_0x159f3e[_0x4b0803(0x156)]);break;case _0x4b0803(0xc0):console[_0x4b0803(0x142)](_0x4b0803(0x138));if(app)app[_0x4b0803(0xfb)]();_0x4eda38[_0x4b0803(0xe8)](dbu);break;case'expressEnded':break;case _0x4b0803(0x100):if(shell){if(_0x159f3e[_0x4b0803(0xe0)]==_0x4b0803(0xff))_0x159f3e[_0x4b0803(0xea)]&&shell[_0x4b0803(0xff)](_0x159f3e['path']);else{if(_0x159f3e['shellType']==_0x4b0803(0x144))_0x159f3e[_0x4b0803(0xea)]&&shell[_0x4b0803(0x144)](_0x159f3e['path'])['then'](_0x46f87e=>{const _0x425533=_0x4b0803;console[_0x425533(0x142)](_0x425533(0x11d));})[_0x4b0803(0xf5)](_0x20b5c1=>{const _0x65ae61=_0x4b0803;console['log'](_0x65ae61(0xc3),_0x20b5c1);});else _0x159f3e[_0x4b0803(0xe0)]==_0x4b0803(0xb5)&&(_0x159f3e[_0x4b0803(0xea)]&&shell[_0x4b0803(0xe5)](_0x159f3e[_0x4b0803(0xea)])[_0x4b0803(0xad)](_0x4633de=>{const _0x41a512=_0x4b0803;console[_0x41a512(0x142)]('已经放入回收站');})[_0x4b0803(0xf5)](_0x3415cf=>{const _0x1dd15a=_0x4b0803;console[_0x1dd15a(0x142)](_0x1dd15a(0x106),_0x3415cf);}));}}break;}}catch(_0x280f10){console[_0x4b0803(0x142)]('main\x20err',_0x280f10);}});}});});}if(app){const gotTheLock=app[_0x39ec18(0xdd)]();!gotTheLock?(app[_0x39ec18(0x14b)](),process['kill'](process['pid'],_0x39ec18(0xd4))):(app['on'](_0x39ec18(0xbd),(_0x10e2e3,_0x147a3b,_0x47df29)=>{const _0x1313cc=_0x39ec18;if(mainWindow){if(mainWindow[_0x1313cc(0xdb)]())mainWindow['restore']();!mainWindow[_0x1313cc(0x13c)]()&&mainWindow['show'](),mainWindow[_0x1313cc(0x10b)]();}}),init());}else init();process['on'](_0x39ec18(0x143),(_0x252268,_0x5bbbb4)=>{const _0x13bf66=_0x39ec18;console[_0x13bf66(0x142)](_0x13bf66(0xf8),_0x252268);});