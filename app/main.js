'use strict';const _0x50de8e=_0x416d;(function(_0x112fbd,_0x4f55e1){const _0x254582=_0x416d,_0x1341a4=_0x112fbd();while(!![]){try{const _0x3f7fc6=parseInt(_0x254582(0x17b))/0x1*(-parseInt(_0x254582(0x13d))/0x2)+parseInt(_0x254582(0x174))/0x3*(-parseInt(_0x254582(0x188))/0x4)+-parseInt(_0x254582(0x1ca))/0x5*(parseInt(_0x254582(0x1d5))/0x6)+-parseInt(_0x254582(0x1c2))/0x7*(parseInt(_0x254582(0x133))/0x8)+parseInt(_0x254582(0x14c))/0x9+parseInt(_0x254582(0x1cf))/0xa+parseInt(_0x254582(0x176))/0xb;if(_0x3f7fc6===_0x4f55e1)break;else _0x1341a4['push'](_0x1341a4['shift']());}catch(_0x34d1ab){_0x1341a4['push'](_0x1341a4['shift']());}}}(_0x2ce7,0x3ef52));function _0x416d(_0xb10a08,_0x1b9b18){const _0x2ce739=_0x2ce7();return _0x416d=function(_0x416d5c,_0x40003e){_0x416d5c=_0x416d5c-0x124;let _0x376c8b=_0x2ce739[_0x416d5c];return _0x376c8b;},_0x416d(_0xb10a08,_0x1b9b18);}let app,shell,ipcMain;try{app=require(_0x50de8e(0x1c6))[_0x50de8e(0x17e)],shell=require('electron')[_0x50de8e(0x1d2)],ipcMain=require(_0x50de8e(0x1c6))['ipcMain'];}catch(_0x4a39d6){console[_0x50de8e(0x144)](_0x50de8e(0x13f));}function _0x2ce7(){const _0x4cbcaf=['deleteByTitle','myWorkers/shareFolder/shareWebDav.js','myWorkers/bg/fileOperationWorker.js','./utils/globalInfoUtil','dbOther','START_WORKER_FILE_OPERATION','myWorkers/subtitlesGenWorker.js','expressStarted','cluster','focus','initWindowEventAndLoadLoading','myWorkers/shareFolder/shareFtp.js','isMinimized','book','已经放入回收站','child_process','getServerRootPath','myWorkers/m3u8Worker.js','reset','source_type','照片索引线程已退出[Photos\x20indexing\x20worker\x20exited]','./utils/initUtil','movie','fail','已打开路径','http://localhost:','音乐索引线程已退出[Music\x20indexing\x20worker\x20exited]','myWorkers/tinyImgWorker.js','close','expireTokenOnTime','setLanguage','刷新页面','fork','send\x20message\x20callback\x20','kill','createToken','addScanTaskWhenStart','restartWatcher','myWorkers/mediaArrangeWorker.js','shellType','openPath','NasCab\x20api\x20server\x20starting\x20','HTTP\x20服务正在运行[HTTP\x20server\x20is\x20running]\x20:','119jsghhA','myWorkers/index/movieIndexWorker.js','start','startScanPath','electron','myWorkers/proxy/proxyWorker.js','send','exitApp','5SrVsGH','FTPServer','loadURL','restore','START_WORKER_BG_TASK','2423500dUKMDz','myWorkers/bg/backupWorker.js','http://localhost','shell','./db/dbConfigTable','isVisible','1704432XzlAJD','photo','getTime','username','stringify','START_PRE_GEN_SUBTITLE','ddnsIpv4Address','getExpressApiCount','setupPrimary','关闭\x20proxyWorker','Webdav\x20worker\x20is\x20stopped','startUpdate','HTTP\x20服务运行端口[HTTP\x20server\x20running\x20on\x20port]:','放入回收站失败','myWorkers/index/musicIndexWorker.js','openDev','expressStartedHttps','Relaunch\x20Restart','------Watch\x20worker\x20is\x20stopped------','24032CnCsvx','addProcessRecord','createUserFolder','stop','webDavServer','myWorkers/ai/aiSimilarPhotos.js','aiClassesEnable','prepare','?token=','webContents','3662szBSsU','apiServer','Clientless\x20service\x20mode','findByTitle','启用\x20frp','http://','图书索引线程已退出[Books\x20indexing\x20worker\x20exited]','log','\x20server_type=\x27FTP\x27','reloadHomePage','./db/dbUserTable','create','fileShareRestart','loadUrl','/#/','1377855JlIcZj','nasCabLogout','quit','Relaunch','HTTPS\x20服务正在运行[HTTPS\x20server\x20is\x20running]\x20:','music','get','getAllByWhere','FRP\x20OFF','getConfigApiPort','https://','trashItem','getIpv4Address','init','runNewVersionTask','startClassesAiWork','relaunch','M3u8Transcode','path','进程出错了','initDbu','pid','nasDdnsEnable','catch','WebDav','FTP','resolve','./utils/messageUtil','SIGTERM','shareType','DDNS\x20worker\x20is\x20stopped','myWorkers/index/bookIndexWorker.js','nasRemoteEnable','myWorkers/ddnsWorker.js','nasRemoteState','value','startSimilarPhotoWork','NEW_MOVIE_INDEX','localhost','type','1435809PJONrJ','requestSingleInstanceLock','9431851PiKOIf','sha256','NEW_PHOTO_INDEX','OFF','Closing\x20FTP','99PMjCbR','main\x20error:','电影索引线程已退出[Movies\x20indexing\x20worker\x20exited]','app','Ftp\x20worker\x20is\x20stopped','worker\x20send\x20msg\x20error','second-instance','nasProxyRestart','exit','NasCab\x20api\x20server\x20restarting\x20','startFaceAiWork','showItemInFolder','页面加载完成','4KjzyIJ','expressEnded','push','getRootPath','\x20server_type=\x27WebDav\x27','exressPort','initBackupWorker','did-fail-load','myWorkers/index/photoIndexWorker.js','SWITCH_MOVIE_INFO','length','aiFaceEnable','then','message','nasDdnsRestart'];_0x2ce7=function(){return _0x4cbcaf;};return _0x2ce7();}let mainWindow,sha256=require(_0x50de8e(0x177));const dbFileShare=require('./db/dbFileShare'),dbUserTable=require(_0x50de8e(0x147)),{fork}=require(_0x50de8e(0x1a6));let bgTaskWorkerIsRunning=![],tinyImgWorkerIsRunning=![],getMovieInfoWorkerIsRunning=![],aiFacesWorkerIsRunning=![],aiClassesWorkerIsRunning=![],aiSimilarPhotoWorker=![],globalInfoWorkerIsRunning=![],photoIndexWorkerIsRunning=![],movieIndexWorkerIsRunning=![],musicIndexWorkerIsRunning=![],bookIndexWorkerIsRunning=![],watchWorkerIsRunning=![];const messageUtil=require(_0x50de8e(0x167));let backupWorkerIsRunning=![],m3u8WorkerIsRunning=![],subtitleGenWorkerIsRunning=![],loadUrl='',listenPortHttp='80';function workerSendMsg(_0x54c593,_0x252732){const _0x164340=_0x50de8e;try{_0x54c593&&!_0x54c593['killed']&&_0x54c593[_0x164340(0x1c8)](_0x252732,undefined,undefined,_0x1f0fad=>{const _0x1d7bbc=_0x164340;_0x1f0fad&&console[_0x1d7bbc(0x144)](_0x1d7bbc(0x1b8),_0x1f0fad);});}catch(_0x1dc020){console[_0x164340(0x144)](_0x164340(0x180),_0x1dc020);}}let dbu;function init(){const _0x239d07=_0x50de8e;var _0x42e0d7=require(_0x239d07(0x19f));let _0x5eee7c=require('path'),_0x281029=require(_0x239d07(0x1ac)),_0x34cf23=require(_0x239d07(0x1d3)),_0x28ec4d=_0x281029[_0x239d07(0x135)]();dbu=_0x281029[_0x239d07(0x160)]();let _0x9f6a56='';function _0x22f4b3(_0x50dfde,_0x19c27f){const _0x4322d3=_0x239d07;function _0x3ab854(){const _0x5955f6=_0x416d;_0x50dfde[_0x5955f6(0x159)](),_0x9f6a56=_0x34cf23[_0x5955f6(0x1a7)](_0x50dfde['dbOther']);if(app)_0x281029['launchWithSys']();_0x281029[_0x5955f6(0x1b5)]();if(app)mainWindow=_0x281029['createMainWindow']();_0x281029['init'](_0x50dfde);if(app)_0x281029['initTray'](_0x50dfde,mainWindow);if(app)_0x281029[_0x5955f6(0x1a1)](_0x50dfde,mainWindow);_0x281029[_0x5955f6(0x1b4)](),_0x281029[_0x5955f6(0x15a)](_0x50dfde);if(app)_0x281029[_0x5955f6(0x12f)]();_0x19c27f(mainWindow);}app?app['whenReady']()[_0x4322d3(0x194)](()=>{_0x3ab854();}):_0x3ab854();}_0x22f4b3(dbu,_0x9839c7=>{const _0x1048bc=_0x239d07,_0x753a91=_0x281029[_0x1048bc(0x18b)]();let _0x5ccc0a=_0x281029[_0x1048bc(0x155)]();_0x281029['getFreePort'](_0x5ccc0a,_0x1ed984=>{const _0x2746a9=_0x1048bc;function _0x4d71c4(_0x5f1356){const _0x20472d=_0x416d,_0x191976=fork(_0x5eee7c['resolve'](__dirname,_0x5f1356),[],{'env':{'userDataFolder':_0x28ec4d,'appRootPath':_0x753a91},'detached':![],'killSignal':_0x20472d(0x168)});return _0x281029['processList'][_0x20472d(0x18a)](_0x191976),_0x281029[_0x20472d(0x134)](dbu[_0x20472d(0x19b)],_0x191976[_0x20472d(0x161)]),_0x191976['on'](_0x20472d(0x183),function(_0x345e5e,_0x553eca){}),_0x191976['on']('error',function(_0x1db527){const _0x4f44c9=_0x20472d;console[_0x4f44c9(0x144)](_0x4f44c9(0x15f),_0x1db527);}),_0x191976;}dbu[_0x2746a9(0x19b)][_0x2746a9(0x13a)]('UPDATE\x20bg_task\x20SET\x20task_state=3\x20where\x20task_state=1')['run'](),setInterval(()=>{_0x4861e6();},0x258*0x3e8),setTimeout(()=>{const _0x5ed3bb=_0x2746a9;_0x281029[_0x5ed3bb(0x1bb)](dbu[_0x5ed3bb(0x19b)]),_0xf8b618(),_0x2fa0e0(),_0x217179(),_0x12cbaa(),_0x4b7485(),_0x2faa4e(),_0x370b41(),_0x596ea7(),_0x577c5e();},0x1388);let _0x1a126f;function _0x12cbaa(){const _0x202c26=_0x2746a9;if(bookIndexWorkerIsRunning)return;bookIndexWorkerIsRunning=!![],_0x1a126f=_0x4d71c4(_0x202c26(0x16b)),_0x1a126f['on'](_0x202c26(0x195),function(_0x378382){const _0x55d3d3=_0x202c26;_0x378382[_0x55d3d3(0x173)]==_0x55d3d3(0x1b3)&&(bookIndexWorkerIsRunning=![]);}),_0x1a126f['on'](_0x202c26(0x183),function(_0x3745ab,_0x36f42e,_0x2a5402){const _0x569e24=_0x202c26;console[_0x569e24(0x144)](_0x569e24(0x143),_0x36f42e||'',_0x2a5402||''),bookIndexWorkerIsRunning=![];});}let _0x562978;function _0x217179(){const _0x3a26dc=_0x2746a9;if(musicIndexWorkerIsRunning)return;musicIndexWorkerIsRunning=!![],_0x562978=_0x4d71c4(_0x3a26dc(0x12e)),_0x562978['on'](_0x3a26dc(0x195),function(_0x2ea2b1){_0x2ea2b1['type']=='close'&&(musicIndexWorkerIsRunning=![]);}),_0x562978['on'](_0x3a26dc(0x183),function(_0x4f95a3,_0x1868d3,_0x2dacc0){const _0xb526c8=_0x3a26dc;console['log'](_0xb526c8(0x1b1),_0x1868d3||'',_0x2dacc0||''),musicIndexWorkerIsRunning=![];});}let _0x60b602;function _0x2066ab(){const _0x168d1f=_0x2746a9;if(watchWorkerIsRunning)return;watchWorkerIsRunning=!![],_0x60b602=_0x4d71c4('myWorkers/index/fileWatcherWorker.js'),_0x60b602['on']('message',function(_0x50cdb2){const _0x2de1b1=_0x416d;if(_0x50cdb2[_0x2de1b1(0x173)]==_0x2de1b1(0x1b3))watchWorkerIsRunning=![];else{if(_0x50cdb2[_0x2de1b1(0x173)]==_0x2de1b1(0x178))_0x4b7485(),_0x596ea7();else _0x50cdb2[_0x2de1b1(0x173)]=='NEW_MOVIE_INDEX'&&(_0x4b7485(),_0x577c5e(),_0x33d512());}}),_0x60b602['on'](_0x168d1f(0x183),function(_0x284ea4,_0x507cd5,_0x283bb1){const _0x61d0b5=_0x168d1f;console[_0x61d0b5(0x144)](_0x61d0b5(0x132),_0x507cd5,_0x283bb1),watchWorkerIsRunning=![];});}_0x2066ab();let _0x45f895;function _0xf8b618(){const _0x17ac2f=_0x2746a9;if(photoIndexWorkerIsRunning)return;photoIndexWorkerIsRunning=!![],_0x45f895=_0x4d71c4(_0x17ac2f(0x190)),_0x45f895['on'](_0x17ac2f(0x195),function(_0x45fac6){const _0x4b2810=_0x17ac2f;_0x45fac6[_0x4b2810(0x173)]==_0x4b2810(0x1b3)&&(photoIndexWorkerIsRunning=![]),_0x45fac6[_0x4b2810(0x173)]==_0x4b2810(0x178)&&(_0x4b7485(),_0x596ea7());}),_0x45f895['on'](_0x17ac2f(0x183),function(_0x369ea9,_0x2501d6,_0x177bc6){const _0x427672=_0x17ac2f;console[_0x427672(0x144)](_0x427672(0x1ab),_0x2501d6||'',_0x177bc6||''),photoIndexWorkerIsRunning=![];});}let _0x158a22;function _0x2fa0e0(){const _0x520629=_0x2746a9;if(movieIndexWorkerIsRunning)return;movieIndexWorkerIsRunning=!![],_0x158a22=_0x4d71c4(_0x520629(0x1c3)),_0x158a22['on'](_0x520629(0x195),function(_0x595b89){const _0x457738=_0x520629;if(_0x595b89[_0x457738(0x173)]=='close')movieIndexWorkerIsRunning=![];else _0x595b89[_0x457738(0x173)]==_0x457738(0x171)&&(_0x4b7485(),_0x577c5e(),_0x33d512());}),_0x158a22['on'](_0x520629(0x183),function(_0x140799,_0x3832ce,_0x6271){const _0xd6509c=_0x520629;console[_0xd6509c(0x144)](_0xd6509c(0x17d),_0x3832ce||'',_0x6271||''),movieIndexWorkerIsRunning=![];});}function _0x577c5e(){const _0x4d187e=_0x2746a9;if(getMovieInfoWorkerIsRunning)return;getMovieInfoWorkerIsRunning=!![];let _0x1fa40d=_0x4d71c4('myWorkers/movieInfoWorker.js');_0x1fa40d['on'](_0x4d187e(0x195),function(_0x47b4a8){const _0x411842=_0x4d187e;_0x47b4a8[_0x411842(0x173)]==_0x411842(0x1b3)&&(getMovieInfoWorkerIsRunning=![]);}),_0x1fa40d['on'](_0x4d187e(0x183),function(){getMovieInfoWorkerIsRunning=![];});}function _0x4b7485(){const _0x28659b=_0x2746a9;if(tinyImgWorkerIsRunning)return;tinyImgWorkerIsRunning=!![];let _0x562651=_0x4d71c4(_0x28659b(0x1b2));_0x562651['on'](_0x28659b(0x195),function(_0x211741){const _0x59f46a=_0x28659b;if(_0x211741[_0x59f46a(0x173)]==_0x59f46a(0x1b3))tinyImgWorkerIsRunning=![];else _0x211741[_0x59f46a(0x173)]=='NEW_TINY_IMAGE'&&(_0x2faa4e(),_0x370b41());}),_0x562651['on'](_0x28659b(0x183),function(){tinyImgWorkerIsRunning=![];});}let _0x38f520,_0x23ad09;function _0x568b8f(){const _0x21b188=_0x2746a9;let _0x281356=dbFileShare[_0x21b188(0x153)](dbu[_0x21b188(0x19b)],_0x21b188(0x145),[]);if(_0x281356&&_0x281356[_0x21b188(0x192)]>0x0)!_0x38f520&&(_0x38f520=_0x4d71c4(_0x21b188(0x1a2)),_0x38f520['on']('exit',function(){const _0x198fea=_0x21b188;console[_0x198fea(0x144)](_0x198fea(0x17f)),_0x38f520=null;}));else{_0x34cf23[_0x21b188(0x148)](dbu[_0x21b188(0x19b)],{'title':_0x21b188(0x1cb),'value':JSON[_0x21b188(0x124)]({'state':_0x21b188(0x136)})});if(_0x38f520){let _0x370d16=_0x38f520[_0x21b188(0x1b9)]();_0x370d16&&(_0x38f520=null,console[_0x21b188(0x144)](_0x21b188(0x17a)));}}}function _0x4c82c3(){const _0x47e41f=_0x2746a9;let _0x1f8d94=dbFileShare['getAllByWhere'](dbu[_0x47e41f(0x19b)],_0x47e41f(0x18c),[]);if(_0x1f8d94&&_0x1f8d94[_0x47e41f(0x192)]>0x0)!_0x23ad09&&(_0x23ad09=_0x4d71c4(_0x47e41f(0x198)),_0x23ad09['on'](_0x47e41f(0x183),function(){const _0x26e027=_0x47e41f;console[_0x26e027(0x144)](_0x26e027(0x12a)),_0x23ad09=null;}));else{_0x34cf23['create'](dbu[_0x47e41f(0x19b)],{'title':_0x47e41f(0x137),'value':JSON[_0x47e41f(0x124)]({'state':_0x47e41f(0x136)})});if(_0x23ad09){let _0x5ea574=_0x23ad09[_0x47e41f(0x1b9)]();_0x5ea574&&(_0x23ad09=null);}}}let _0x2c70e6;function _0x5d4510(){const _0x2ac9e5=_0x2746a9;let _0x189af0=![],_0x400d3b=_0x34cf23[_0x2ac9e5(0x140)](dbu[_0x2ac9e5(0x19b)],_0x2ac9e5(0x162));_0x400d3b&&_0x400d3b[_0x2ac9e5(0x16f)]==0x1&&(_0x189af0=!![]);if(_0x189af0)!_0x2c70e6&&(_0x2c70e6=_0x4d71c4(_0x2ac9e5(0x16d)),_0x2c70e6['on'](_0x2ac9e5(0x195),function(_0x539f3e){const _0x43334f=_0x2ac9e5;_0x539f3e[_0x43334f(0x173)]=='close'&&(_0x2c70e6=null);}),_0x2c70e6['on'](_0x2ac9e5(0x183),function(){const _0x5de869=_0x2ac9e5;console['log'](_0x5de869(0x16a)),_0x2c70e6=null;}));else{if(_0x2c70e6){let _0x4cec02=_0x2c70e6[_0x2ac9e5(0x1b9)]();_0x4cec02&&(_0x2c70e6=null,console[_0x2ac9e5(0x144)]('Closing\x20NasCab\x20ddns'));}_0x34cf23[_0x2ac9e5(0x197)](dbu[_0x2ac9e5(0x19b)],'ddnsIpv6Address'),_0x34cf23['deleteByTitle'](dbu[_0x2ac9e5(0x19b)],_0x2ac9e5(0x126)),_0x34cf23['create'](dbu['dbOther'],{'title':'nasDdnsState','value':JSON[_0x2ac9e5(0x124)]({'status':_0x2ac9e5(0x1ae),'ddnsIp':'','error':_0x2ac9e5(0x179)})});}}_0x5d4510();let _0x344aad;function _0x3ecf13(){const _0x565d4f=_0x2746a9;if(globalInfoWorkerIsRunning)return;globalInfoWorkerIsRunning=!![],_0x344aad=_0x4d71c4('myWorkers/globalInfoWorker.js'),_0x344aad['on'](_0x565d4f(0x195),function(_0x457047){const _0x3d842b=_0x565d4f;if(_0x457047['type']==_0x3d842b(0x1b3))globalInfoWorkerIsRunning=![];else _0x457047[_0x3d842b(0x173)]=='startScanPath'&&_0x30a445(_0x457047);}),_0x344aad['on'](_0x565d4f(0x183),function(){globalInfoWorkerIsRunning=![];});}_0x3ecf13();function _0x370b41(){const _0x2a795c=_0x2746a9;let _0xefdc77=_0x34cf23[_0x2a795c(0x140)](dbu[_0x2a795c(0x19b)],_0x2a795c(0x193));if(_0xefdc77&&_0xefdc77[_0x2a795c(0x16f)]=='1'){if(aiFacesWorkerIsRunning)return;aiFacesWorkerIsRunning=!![];let _0x244c61=_0x4d71c4('myWorkers/ai/aiFaceUtil.js');_0x244c61['on'](_0x2a795c(0x195),function(_0x5db9b4){const _0x2c5669=_0x2a795c;_0x5db9b4[_0x2c5669(0x173)]=='close'&&(aiFacesWorkerIsRunning=![]);}),_0x244c61['on'](_0x2a795c(0x183),function(_0x4e30a4,_0x2ab283,_0x5b0452){aiFacesWorkerIsRunning=![],_0x244c61=null;});}else{}}function _0x596ea7(){const _0x3aae4f=_0x2746a9;let _0x481f2f=_0x34cf23[_0x3aae4f(0x140)](dbu[_0x3aae4f(0x19b)],'aiSimilarPhotoEnable');if(_0x481f2f&&_0x481f2f[_0x3aae4f(0x16f)]=='1'){if(aiSimilarPhotoWorker)return;aiSimilarPhotoWorker=!![];let _0x166a30=_0x4d71c4(_0x3aae4f(0x138));_0x166a30['on'](_0x3aae4f(0x195),function(_0x503ee0){const _0x15cf6b=_0x3aae4f;_0x503ee0[_0x15cf6b(0x173)]==_0x15cf6b(0x1b3)&&(aiSimilarPhotoWorker=![]);}),_0x166a30['on']('exit',()=>{_0x166a30=![];});}else{}}function _0x2faa4e(){const _0x1dbc16=_0x2746a9;let _0x1b6fd4=_0x34cf23['findByTitle'](dbu[_0x1dbc16(0x19b)],_0x1dbc16(0x139));if(_0x1b6fd4&&_0x1b6fd4[_0x1dbc16(0x16f)]=='1'){if(aiClassesWorkerIsRunning)return;aiClassesWorkerIsRunning=!![];let _0x35017e=_0x4d71c4('myWorkers/ai/aiClassify.js');_0x35017e['on'](_0x1dbc16(0x195),function(_0x4dc016){const _0x42bb20=_0x1dbc16;_0x4dc016[_0x42bb20(0x173)]=='close'&&(aiClassesWorkerIsRunning=![]);}),_0x35017e['on']('exit',()=>{aiClassesWorkerIsRunning=![];});}else{}}let _0x1e5ef6;function _0x1b3332(){const _0x1a0389=_0x2746a9;let _0x270272=dbu[_0x1a0389(0x19b)]['prepare']('SELECT\x20count(*)\x20as\x20count\x20FROM\x20backup_task')[_0x1a0389(0x152)]();if(_0x270272['count']>0x0){if(backupWorkerIsRunning)return;backupWorkerIsRunning=!![],_0x1e5ef6=_0x4d71c4(_0x1a0389(0x1d0)),_0x1e5ef6['on'](_0x1a0389(0x195),function(_0x4fa0ce){const _0x59201e=_0x1a0389;_0x4fa0ce[_0x59201e(0x173)]==_0x59201e(0x1b3)&&(backupWorkerIsRunning=![]);}),_0x1e5ef6['on'](_0x1a0389(0x183),()=>{backupWorkerIsRunning=![];});}else{if(_0x1e5ef6){let _0x3dc905=_0x1e5ef6[_0x1a0389(0x1b9)]();_0x3dc905&&(_0x1e5ef6=null);}}}_0x1b3332();let _0x18a5a7;function _0x4a2dcc(){const _0x38eb14=_0x2746a9;if(m3u8WorkerIsRunning)return;m3u8WorkerIsRunning=!![],_0x18a5a7=_0x4d71c4(_0x38eb14(0x1a8)),_0x18a5a7['on'](_0x38eb14(0x195),function(_0x30f1da){const _0x3b0358=_0x38eb14;_0x30f1da[_0x3b0358(0x173)]==_0x3b0358(0x1b3)&&(m3u8WorkerIsRunning=![]);}),_0x18a5a7['on'](_0x38eb14(0x183),function(_0x40dcb5){m3u8WorkerIsRunning=![];});}let _0x454ab0,_0x4b24b9=![];function _0x4861e6(){const _0xb1c4fa=_0x2746a9;_0x4b24b9&&(!_0x454ab0&&(_0x454ab0=_0x4d71c4(_0xb1c4fa(0x1c7)),_0x454ab0['on'](_0xb1c4fa(0x183),_0x41eb70=>{const _0x298c85=_0xb1c4fa;console[_0x298c85(0x144)]('proxyWorker\x20exit',_0x41eb70),_0x454ab0=null;}),console[_0xb1c4fa(0x144)](_0xb1c4fa(0x141))));}function _0xb7b308(){const _0x5b7e2f=_0x2746a9;let _0x403ea1=_0x34cf23[_0x5b7e2f(0x140)](dbu[_0x5b7e2f(0x19b)],_0x5b7e2f(0x16c));!_0x403ea1||_0x403ea1&&_0x403ea1[_0x5b7e2f(0x16f)]!=0x1&&_0x403ea1['value']!='1'?(_0x4b24b9=![],_0x454ab0&&(_0x454ab0[_0x5b7e2f(0x1b9)](),_0x454ab0=null,console['log'](_0x5b7e2f(0x129))),_0x34cf23[_0x5b7e2f(0x148)](dbu[_0x5b7e2f(0x19b)],{'title':_0x5b7e2f(0x16e),'value':JSON['stringify']({'status':'fail','time':new Date()[_0x5b7e2f(0x1d7)]()+'','error':_0x5b7e2f(0x154)})})):(_0x4b24b9=!![],_0x4861e6());}_0xb7b308();let _0x279161;function _0x33d512(){const _0x490608=_0x2746a9;if(subtitleGenWorkerIsRunning)return;subtitleGenWorkerIsRunning=!![],_0x279161=_0x4d71c4(_0x490608(0x19d)),_0x279161['on'](_0x490608(0x195),function(_0x493f39){const _0x840962=_0x490608;_0x493f39[_0x840962(0x173)]=='close'&&(subtitleGenWorkerIsRunning=![]);}),_0x279161['on'](_0x490608(0x183),function(_0xb8ca83){subtitleGenWorkerIsRunning=![];});}setTimeout(()=>{_0x33d512();},0x1388);let _0x1355f1=![],_0x148cc8=![],_0x47249d=![];function _0x9f6873(_0x66f033){try{!_0x47249d&&(_0x47249d=!![],setTimeout(()=>{const _0x3b089d=_0x416d;let _0x3c23df=require(_0x3b089d(0x19a)),_0xc1bb3c=_0x3c23df[_0x3b089d(0x158)](dbu[_0x3b089d(0x19b)]);_0xc1bb3c?console['log'](_0x3b089d(0x150),_0x3b089d(0x156)+_0xc1bb3c+':'+_0x66f033+_0x9f6a56):console[_0x3b089d(0x144)]('HTTPS\x20服务运行端口[HTTPS\x20server\x20running\x20on\x20port]:',''+_0x66f033+_0x9f6a56);},0x3a98));}catch(_0x40a64b){console['log'](_0x40a64b);}}let _0x20e719=![];function _0xf06b58(){const _0xe37b43=_0x2746a9;if(app&&_0x9839c7){if(_0x20e719)return;_0x20e719=!![],setTimeout(()=>{_0x20e719=![];},0xbb8);function _0x356b37(){const _0x3beb89=_0x416d;loadUrl=listenPortHttp=='80'?_0x3beb89(0x1d1)+_0x9f6a56+_0x3beb89(0x14b):_0x3beb89(0x1b0)+listenPortHttp+_0x9f6a56+_0x3beb89(0x14b);let _0x602ecc=_0x34cf23[_0x3beb89(0x140)](dbu[_0x3beb89(0x19b)],'autoLoginClient');if(!_0x602ecc||_0x602ecc[_0x3beb89(0x16f)]=='1'){let _0x485613=dbUserTable['getAdmin'](dbu[_0x3beb89(0x19b)]);if(_0x485613){let _0x40b0ed=sha256(new Date()[_0x3beb89(0x1d7)]()+_0x485613[_0x3beb89(0x1d8)]);dbUserTable[_0x3beb89(0x1ba)](dbu[_0x3beb89(0x19b)],_0x485613['id'],_0x40b0ed,_0x3beb89(0x172)),loadUrl+=_0x3beb89(0x13b)+_0x40b0ed;}}}_0x356b37(),console[_0xe37b43(0x144)](_0xe37b43(0x14a),loadUrl),_0x9839c7[_0xe37b43(0x1cc)](loadUrl),_0x9839c7['webContents']['on'](_0xe37b43(0x18f),function(){const _0x50ec75=_0xe37b43;console[_0x50ec75(0x144)]('页面加载失败',loadUrl);}),_0x9839c7[_0xe37b43(0x13c)]['on']('did-finish-load',function(){const _0x18d489=_0xe37b43;console[_0x18d489(0x144)](_0x18d489(0x187),loadUrl);}),ipcMain['on']('refresh',(_0x2ecf92,_0x27fe35)=>{const _0x5f46e0=_0xe37b43;console['log'](_0x5f46e0(0x1b6),loadUrl),loadUrl&&_0x9839c7[_0x5f46e0(0x1cc)](loadUrl);});}}function _0x3f144f(_0x28c142){const _0x2262bc=_0x2746a9;listenPortHttp=_0x28c142,_0x4c82c3(),setTimeout(()=>{_0x568b8f();},0x1388),!_0x148cc8&&(_0x148cc8=!![],setTimeout(()=>{const _0x48e77d=_0x416d;let _0x418100=require(_0x48e77d(0x19a)),_0x4de4eb=_0x418100[_0x48e77d(0x158)](dbu[_0x48e77d(0x19b)]);_0x4de4eb?console[_0x48e77d(0x144)](_0x48e77d(0x1c1),_0x48e77d(0x142)+_0x4de4eb+':'+listenPortHttp+_0x9f6a56):console['log'](_0x48e77d(0x12c),listenPortHttp);},0x3a98)),_0x34cf23[_0x2262bc(0x148)](dbu[_0x2262bc(0x19b)],{'title':_0x2262bc(0x13e),'value':JSON[_0x2262bc(0x124)]({'state':'run','port':listenPortHttp})}),!_0x1355f1&&(_0x1355f1=!![],_0xf06b58(),workerSendMsg(_0x454ab0,{'type':_0x2262bc(0x1c4)}));}let _0x4dbb5e=_0x281029[_0x2746a9(0x127)]();console[_0x2746a9(0x144)]('NasCab\x20Api\x20进程数量\x20[NasCab\x20api\x20thread\x20count]:',_0x4dbb5e),_0x42e0d7[_0x2746a9(0x128)]({'exec':_0x5eee7c[_0x2746a9(0x166)](__dirname,'myWorkers/expressWorker.js')}),_0x42e0d7['on']('exit',function(_0x40ad7f,_0x132385,_0x201855){const _0x39b2ae=_0x2746a9;console[_0x39b2ae(0x144)](_0x39b2ae(0x184),_0x132385,_0x201855),setTimeout(()=>{_0x5d83e6();},0x1388);});for(let _0x581cfa=0x0;_0x581cfa<_0x4dbb5e;_0x581cfa++){console[_0x2746a9(0x144)](_0x2746a9(0x1c0),_0x581cfa+0x1),_0x5d83e6();}function _0x30a445(_0x5314a9){const _0x27a30d=_0x2746a9;if(_0x5314a9['source_type']=='movie')_0x2fa0e0();else{if(_0x5314a9[_0x27a30d(0x1aa)]=='photo')_0xf8b618();else{if(_0x5314a9[_0x27a30d(0x1aa)]==_0x27a30d(0x151))_0x217179();else _0x5314a9[_0x27a30d(0x1aa)]==_0x27a30d(0x1a4)&&_0x12cbaa();}}_0x5314a9[_0x27a30d(0x1bc)]&&(_0x2066ab(),workerSendMsg(_0x60b602,_0x5314a9));}function _0x5d83e6(){const _0x5003da=_0x2746a9,_0x3eaaca=_0x42e0d7[_0x5003da(0x1b7)]({'usePort':_0x1ed984,'userDataFolder':_0x28ec4d,'appRootPath':_0x753a91});_0x3eaaca['on'](_0x5003da(0x195),function(_0x4bb2ea){const _0x2637b1=_0x5003da;try{switch(_0x4bb2ea[_0x2637b1(0x173)]){case'MEDIA_ARRANGE':let _0x467782=_0x4d71c4(_0x2637b1(0x1bd));workerSendMsg(_0x467782,_0x4bb2ea);break;case _0x2637b1(0x146):_0xf06b58();break;case _0x2637b1(0x19c):let _0x524f6f=_0x4d71c4(_0x2637b1(0x199));workerSendMsg(_0x524f6f,_0x4bb2ea);break;case _0x2637b1(0x1ce):if(!bgTaskWorkerIsRunning){bgTaskWorkerIsRunning=!![];let _0x30d681=_0x4d71c4('myWorkers/bg/bgTaskWorker.js');_0x30d681['on']('message',function(_0x919996){const _0x1a996f=_0x2637b1;_0x919996[_0x1a996f(0x173)]==_0x1a996f(0x1b3)&&(bgTaskWorkerIsRunning=![]);});}break;case _0x2637b1(0x191):_0x577c5e();break;case _0x2637b1(0x125):_0x33d512();break;case _0x2637b1(0x15d):_0x4a2dcc(),workerSendMsg(_0x18a5a7,_0x4bb2ea);break;case _0x2637b1(0x182):_0xb7b308(),workerSendMsg(_0x454ab0,{'type':_0x2637b1(0x1a9),'msg':_0x4bb2ea});break;case'nasCabLogout':_0xb7b308(),workerSendMsg(_0x454ab0,{'type':_0x2637b1(0x136)}),setTimeout(()=>{_0x577c5e();},0x3e8);break;case'getGlobalInfo':_0x3ecf13(),workerSendMsg(_0x344aad,_0x4bb2ea);break;case'startUpdate':console[_0x2637b1(0x144)]('Start\x20checking\x20for\x20updates'),_0x281029[_0x2637b1(0x12b)]();break;case _0x2637b1(0x18e):_0x1b3332();break;case'stopIndexWorker':if(_0x4bb2ea[_0x2637b1(0x1aa)]==_0x2637b1(0x1d6))_0x45f895&&(_0x45f895[_0x2637b1(0x1b9)](),_0x45f895=null,photoIndexWorkerIsRunning=![]);else{if(_0x4bb2ea[_0x2637b1(0x1aa)]==_0x2637b1(0x1ad))_0x158a22&&(_0x158a22[_0x2637b1(0x1b9)](),_0x158a22=null,movieIndexWorkerIsRunning=![]);else{if(_0x4bb2ea[_0x2637b1(0x1aa)]==_0x2637b1(0x151))_0x562978&&(_0x562978[_0x2637b1(0x1b9)](),_0x562978=null,musicIndexWorkerIsRunning=![]);else _0x4bb2ea[_0x2637b1(0x1aa)]=='book'&&(_0x1a126f&&(_0x1a126f[_0x2637b1(0x1b9)](),_0x1a126f=null,bookIndexWorkerIsRunning=![]));}}break;case _0x2637b1(0x1c5):_0x30a445(_0x4bb2ea);break;case _0x2637b1(0x149):if(_0x4bb2ea[_0x2637b1(0x169)]==_0x2637b1(0x164))_0x4c82c3(),workerSendMsg(_0x23ad09,_0x4bb2ea);else _0x4bb2ea[_0x2637b1(0x169)]==_0x2637b1(0x165)&&(_0x568b8f(),workerSendMsg(_0x38f520,_0x4bb2ea));break;case _0x2637b1(0x196):_0x5d4510(),workerSendMsg(_0x2c70e6,{'type':_0x2637b1(0x1c4),'force':0x1});break;case _0x2637b1(0x14d):_0x5d4510(),setTimeout(()=>{_0x577c5e();},0x3e8);break;case'nasAccountLogin':_0xb7b308(),workerSendMsg(_0x454ab0,{'type':_0x2637b1(0x1a9)}),_0x5d4510(),setTimeout(()=>{_0x577c5e();},0x3e8);break;case'createUserFolder':_0x281029[_0x2637b1(0x135)]();break;case _0x2637b1(0x15b):_0x2faa4e();break;case _0x2637b1(0x185):_0x370b41();break;case _0x2637b1(0x170):_0x596ea7();break;case _0x2637b1(0x19e):_0x3f144f(_0x4bb2ea[_0x2637b1(0x18d)]);break;case _0x2637b1(0x130):_0x9f6873(_0x4bb2ea[_0x2637b1(0x18d)]);break;case _0x2637b1(0x14f):console[_0x2637b1(0x144)](_0x2637b1(0x131));if(app)app[_0x2637b1(0x15c)]();_0x281029[_0x2637b1(0x1c9)](dbu);break;case _0x2637b1(0x189):break;case'shell':if(shell){if(_0x4bb2ea[_0x2637b1(0x1be)]==_0x2637b1(0x186))_0x4bb2ea[_0x2637b1(0x15e)]&&shell['showItemInFolder'](_0x4bb2ea[_0x2637b1(0x15e)]);else{if(_0x4bb2ea['shellType']==_0x2637b1(0x1bf))_0x4bb2ea[_0x2637b1(0x15e)]&&shell[_0x2637b1(0x1bf)](_0x4bb2ea[_0x2637b1(0x15e)])[_0x2637b1(0x194)](_0x5114fb=>{const _0x5ee528=_0x2637b1;console[_0x5ee528(0x144)](_0x5ee528(0x1af));})['catch'](_0x7498e0=>{const _0x539032=_0x2637b1;console[_0x539032(0x144)]('打开路径失败',_0x7498e0);});else _0x4bb2ea['shellType']=='trash'&&(_0x4bb2ea[_0x2637b1(0x15e)]&&shell[_0x2637b1(0x157)](_0x4bb2ea[_0x2637b1(0x15e)])['then'](_0x246f07=>{const _0x2aa572=_0x2637b1;console[_0x2aa572(0x144)](_0x2aa572(0x1a5));})[_0x2637b1(0x163)](_0x4b907=>{const _0x15dfc9=_0x2637b1;console[_0x15dfc9(0x144)](_0x15dfc9(0x12d),_0x4b907);}));}}break;}}catch(_0x508de4){console[_0x2637b1(0x144)]('main\x20err',_0x508de4);}});}});});}if(app){const gotTheLock=app[_0x50de8e(0x175)]();!gotTheLock?(app[_0x50de8e(0x14e)](),process[_0x50de8e(0x1b9)](process[_0x50de8e(0x161)],'SIGTERM')):(app['on'](_0x50de8e(0x181),(_0x1370f7,_0x31ab90,_0x3d294a)=>{const _0xe9fcd0=_0x50de8e;if(mainWindow){if(mainWindow[_0xe9fcd0(0x1a3)]())mainWindow[_0xe9fcd0(0x1cd)]();!mainWindow[_0xe9fcd0(0x1d4)]()&&mainWindow['show'](),mainWindow[_0xe9fcd0(0x1a0)]();}}),init());}else init();process['on']('uncaughtException',(_0x1aa87a,_0x39123c)=>{const _0x48c43b=_0x50de8e;console[_0x48c43b(0x144)](_0x48c43b(0x17c),_0x1aa87a);});