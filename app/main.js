'use strict';const _0x29fec3=_0x2db8;(function(_0x3dcd69,_0x2cb7b8){const _0x2a39a9=_0x2db8,_0xdae194=_0x3dcd69();while(!![]){try{const _0x1be2d6=parseInt(_0x2a39a9(0x22c))/0x1*(parseInt(_0x2a39a9(0x22d))/0x2)+parseInt(_0x2a39a9(0x217))/0x3+-parseInt(_0x2a39a9(0x22b))/0x4*(-parseInt(_0x2a39a9(0x22a))/0x5)+-parseInt(_0x2a39a9(0x1d5))/0x6+parseInt(_0x2a39a9(0x21d))/0x7*(-parseInt(_0x2a39a9(0x1a5))/0x8)+parseInt(_0x2a39a9(0x21c))/0x9+parseInt(_0x2a39a9(0x19c))/0xa*(-parseInt(_0x2a39a9(0x1c0))/0xb);if(_0x1be2d6===_0x2cb7b8)break;else _0xdae194['push'](_0xdae194['shift']());}catch(_0x4c6a98){_0xdae194['push'](_0xdae194['shift']());}}}(_0x94e8,0x8ec45));let app,shell,ipcMain;try{app=require('electron')['app'],shell=require(_0x29fec3(0x1a8))[_0x29fec3(0x210)],ipcMain=require(_0x29fec3(0x1a8))[_0x29fec3(0x1b4)];}catch(_0x2abeb4){console['log'](_0x29fec3(0x233));}let mainWindow,sha256=require('sha256');const dbFileShare=require('./db/dbFileShare'),dbUserTable=require(_0x29fec3(0x1c7)),{fork}=require(_0x29fec3(0x1a6));let bgTaskWorkerIsRunning=![],tinyImgWorkerIsRunning=![],getMovieInfoWorkerIsRunning=![],aiFacesWorkerIsRunning=![],aiClassesWorkerIsRunning=![],aiSimilarPhotoWorker=![],globalInfoWorkerIsRunning=![],photoIndexWorkerIsRunning=![],movieIndexWorkerIsRunning=![],musicIndexWorkerIsRunning=![],bookIndexWorkerIsRunning=![],watchWorkerIsRunning=![];function _0x2db8(_0x15076e,_0x4b35cd){const _0x94e865=_0x94e8();return _0x2db8=function(_0x2db8e0,_0x14d6cc){_0x2db8e0=_0x2db8e0-0x18b;let _0x21df08=_0x94e865[_0x2db8e0];return _0x21df08;},_0x2db8(_0x15076e,_0x4b35cd);}const messageUtil=require('./utils/messageUtil');let backupWorkerIsRunning=![],m3u8WorkerIsRunning=![],subtitleGenWorkerIsRunning=![],loadUrl='',listenPortHttp='80';function workerSendMsg(_0xb24b69,_0x5837e1){const _0x2adbbb=_0x29fec3;try{_0xb24b69&&!_0xb24b69[_0x2adbbb(0x1a2)]&&_0xb24b69['send'](_0x5837e1,undefined,undefined,_0x29ff6f=>{const _0x5bf6fc=_0x2adbbb;_0x29ff6f&&console[_0x5bf6fc(0x1b2)]('send\x20message\x20callback\x20',_0x29ff6f);});}catch(_0x227362){console[_0x2adbbb(0x1b2)]('worker\x20send\x20msg\x20error',_0x227362);}}let dbu;function _0x94e8(){const _0x1d5422=['SWITCH_MOVIE_INFO','NEW_PHOTO_INDEX','pid','expireTokenOnTime','------Watch\x20worker\x20is\x20stopped------','aiSimilarPhotoEnable','图书索引线程已退出[Books\x20indexing\x20worker\x20exited]','fail','autoLoginClient','focus','进程出错了','NEW_TINY_IMAGE','fileShareRestart','M3u8Transcode','launchWithSys','照片索引线程已退出[Photos\x20indexing\x20worker\x20exited]','START_WORKER_BG_TASK','startSimilarPhotoWork','getAdmin','create','shell','Relaunch','cluster','get','getIpv4Address','myWorkers/m3u8Worker.js','./utils/globalInfoUtil','1407810WbPJfL','runNewVersionTask','WebDav','FRP\x20OFF','reloadHomePage','656820maUDlu','126POrNwz','count','?token=','loadUrl','Ftp\x20worker\x20is\x20stopped','initWindowEventAndLoadLoading','SELECT\x20count(*)\x20as\x20count\x20FROM\x20backup_task','createUserFolder','source_type','已打开路径','\x20server_type=\x27FTP\x27','initBackupWorker','reset','5mRKlPo','2818324IDOtMZ','405VXnOaj','750ZydCNU','NasCab\x20Api\x20进程数量\x20[NasCab\x20api\x20thread\x20count]:','startUpdate','DDNS\x20worker\x20is\x20stopped','Webdav\x20worker\x20is\x20stopped','ddnsIpv4Address','Clientless\x20service\x20mode','main\x20err','processList','http://','relaunch','myWorkers/index/movieIndexWorker.js','stringify','stop','myWorkers/bg/backupWorker.js','webDavServer','getTime','photo','initDbu','myWorkers/proxy/proxyWorker.js','/#/','dbOther','http://localhost:','UPDATE\x20bg_task\x20SET\x20task_state=3\x20where\x20task_state=1','myWorkers/ddnsWorker.js','getAllByWhere','music','http://localhost','放入回收站失败','nasCabLogout','deleteByTitle','OFF','run','5984610TziyXu','addProcessRecord','kill','FTP','value','nasDdnsState','killed','nasDdnsRestart','movie','78440tBrgrP','child_process','NasCab\x20api\x20server\x20starting\x20','electron','FTPServer','shareType','username','loadURL','myWorkers/index/musicIndexWorker.js','expressStarted','关闭\x20proxyWorker','apiServer','页面加载完成','log','\x20server_type=\x27WebDav\x27','ipcMain','webContents','myWorkers/movieInfoWorker.js','createToken','startFaceAiWork','刷新页面','NasCab\x20api\x20server\x20restarting\x20','myWorkers/index/bookIndexWorker.js','exressPort','已经放入回收站','createMainWindow','book','11irjzKd','nasAccountLogin','Closing\x20FTP','second-instance','myWorkers/globalInfoWorker.js','exitApp','myWorkers/ai/aiClassify.js','./db/dbUserTable','start','myWorkers/index/fileWatcherWorker.js','main\x20error:','init','nasRemoteState','HTTP\x20服务运行端口[HTTP\x20server\x20running\x20on\x20port]:','length','getGlobalInfo','SIGTERM','close','myWorkers/ai/aiFaceUtil.js','Closing\x20NasCab\x20ddns','getConfigApiPort','233892wxKYHs','Start\x20checking\x20for\x20updates','HTTPS\x20服务正在运行[HTTPS\x20server\x20is\x20running]\x20:','message','restartWatcher','START_WORKER_FILE_OPERATION','uncaughtException','setLanguage','refresh','getRootPath','getExpressApiCount','resolve','shellType','trash','expressEnded','exit','START_PRE_GEN_SUBTITLE','startScanPath','myWorkers/bg/fileOperationWorker.js','nasDdnsEnable','./db/dbConfigTable','prepare','push','then','NEW_MOVIE_INDEX','isMinimized','findByTitle','openDev','initTray','catch','音乐索引线程已退出[Music\x20indexing\x20worker\x20exited]','localhost','aiFaceEnable','type','myWorkers/shareFolder/shareFtp.js','path','HTTPS\x20服务运行端口[HTTPS\x20server\x20running\x20on\x20port]:','电影索引线程已退出[Movies\x20indexing\x20worker\x20exited]','打开路径失败'];_0x94e8=function(){return _0x1d5422;};return _0x94e8();}function init(){const _0xfd181d=_0x29fec3;var _0x3b4ad0=require(_0xfd181d(0x212));let _0x5cf5c8=require(_0xfd181d(0x1f8)),_0xedff7=require('./utils/initUtil'),_0x5acca7=require(_0xfd181d(0x1e9)),_0xf92cec=_0xedff7[_0xfd181d(0x224)]();dbu=_0xedff7[_0xfd181d(0x18d)]();let _0x5948e4='';function _0x5b2596(_0x2b5f5f,_0x303e27){const _0x222e6d=_0xfd181d;function _0x1c0449(){const _0x592843=_0x2db8;_0x2b5f5f[_0x592843(0x1cb)](),_0x5948e4=_0x5acca7['getServerRootPath'](_0x2b5f5f['dbOther']);if(app)_0xedff7[_0x592843(0x20a)]();_0xedff7[_0x592843(0x1dc)]();if(app)mainWindow=_0xedff7[_0x592843(0x1be)]();_0xedff7[_0x592843(0x1cb)](_0x2b5f5f);if(app)_0xedff7[_0x592843(0x1f1)](_0x2b5f5f,mainWindow);if(app)_0xedff7[_0x592843(0x222)](_0x2b5f5f,mainWindow);_0xedff7[_0x592843(0x1ff)](),_0xedff7[_0x592843(0x218)](_0x2b5f5f);if(app)_0xedff7[_0x592843(0x1f0)]();_0x303e27(mainWindow);}app?app['whenReady']()[_0x222e6d(0x1ec)](()=>{_0x1c0449();}):_0x1c0449();}_0x5b2596(dbu,_0x4f5e93=>{const _0xa15337=_0xfd181d,_0x3c562a=_0xedff7[_0xa15337(0x1de)]();let _0x1159de=_0xedff7[_0xa15337(0x1d4)]();_0xedff7['getFreePort'](_0x1159de,_0x339d8e=>{const _0x56fe37=_0xa15337;function _0x4a8b59(_0x115fcd){const _0x3cfb13=_0x2db8,_0xb05ddb=fork(_0x5cf5c8[_0x3cfb13(0x1e0)](__dirname,_0x115fcd),[],{'env':{'userDataFolder':_0xf92cec,'appRootPath':_0x3c562a},'detached':![],'killSignal':'SIGTERM'});return _0xedff7[_0x3cfb13(0x235)][_0x3cfb13(0x1eb)](_0xb05ddb),_0xedff7[_0x3cfb13(0x19d)](dbu[_0x3cfb13(0x190)],_0xb05ddb[_0x3cfb13(0x1fe)]),_0xb05ddb['on'](_0x3cfb13(0x1e4),function(_0x35141d,_0x167515){}),_0xb05ddb['on']('error',function(_0x550910){const _0x4bcafb=_0x3cfb13;console[_0x4bcafb(0x1b2)](_0x4bcafb(0x206),_0x550910);}),_0xb05ddb;}dbu[_0x56fe37(0x190)][_0x56fe37(0x1ea)](_0x56fe37(0x192))[_0x56fe37(0x19b)](),setInterval(()=>{_0x4eff5e();},0x258*0x3e8),setTimeout(()=>{const _0x64053b=_0x56fe37;_0xedff7['addScanTaskWhenStart'](dbu[_0x64053b(0x190)]),_0x373d7d(),_0x48f1a5(),_0x5eacbe(),_0x1d3986(),_0x1fb338(),_0x20f1cf(),_0x3490cc(),_0x526093(),_0x447da9();},0x1388);let _0x352768;function _0x1d3986(){const _0x44f396=_0x56fe37;if(bookIndexWorkerIsRunning)return;bookIndexWorkerIsRunning=!![],_0x352768=_0x4a8b59(_0x44f396(0x1bb)),_0x352768['on']('message',function(_0x301fe6){const _0x2993ae=_0x44f396;_0x301fe6[_0x2993ae(0x1f6)]=='close'&&(bookIndexWorkerIsRunning=![]);}),_0x352768['on'](_0x44f396(0x1e4),function(_0x5d8b14,_0x386a51,_0x1a8ff0){const _0x227158=_0x44f396;console['log'](_0x227158(0x202),_0x386a51||'',_0x1a8ff0||''),bookIndexWorkerIsRunning=![];});}let _0x161dc1;function _0x5eacbe(){const _0x5daee4=_0x56fe37;if(musicIndexWorkerIsRunning)return;musicIndexWorkerIsRunning=!![],_0x161dc1=_0x4a8b59(_0x5daee4(0x1ad)),_0x161dc1['on'](_0x5daee4(0x1d8),function(_0x16d0c3){_0x16d0c3['type']=='close'&&(musicIndexWorkerIsRunning=![]);}),_0x161dc1['on'](_0x5daee4(0x1e4),function(_0x38c2f5,_0x755297,_0x346bc8){const _0xcf342d=_0x5daee4;console[_0xcf342d(0x1b2)](_0xcf342d(0x1f3),_0x755297||'',_0x346bc8||''),musicIndexWorkerIsRunning=![];});}let _0x453fa3;function _0x10f16d(){const _0x1fa18c=_0x56fe37;if(watchWorkerIsRunning)return;watchWorkerIsRunning=!![],_0x453fa3=_0x4a8b59(_0x1fa18c(0x1c9)),_0x453fa3['on']('message',function(_0x4d507b){const _0x475a8c=_0x1fa18c;if(_0x4d507b[_0x475a8c(0x1f6)]=='close')watchWorkerIsRunning=![];else{if(_0x4d507b['type']==_0x475a8c(0x1fd))_0x1fb338(),_0x526093();else _0x4d507b[_0x475a8c(0x1f6)]==_0x475a8c(0x1ed)&&(_0x1fb338(),_0x447da9(),_0x1bd578());}}),_0x453fa3['on'](_0x1fa18c(0x1e4),function(_0x271b4f,_0x194057,_0x2bb6fb){const _0x2d9833=_0x1fa18c;console[_0x2d9833(0x1b2)](_0x2d9833(0x200),_0x194057,_0x2bb6fb),watchWorkerIsRunning=![];});}_0x10f16d();let _0x2a529b;function _0x373d7d(){const _0x1cd0df=_0x56fe37;if(photoIndexWorkerIsRunning)return;photoIndexWorkerIsRunning=!![],_0x2a529b=_0x4a8b59('myWorkers/index/photoIndexWorker.js'),_0x2a529b['on'](_0x1cd0df(0x1d8),function(_0x26bec3){const _0x4b6786=_0x1cd0df;_0x26bec3['type']==_0x4b6786(0x1d1)&&(photoIndexWorkerIsRunning=![]),_0x26bec3[_0x4b6786(0x1f6)]=='NEW_PHOTO_INDEX'&&(_0x1fb338(),_0x526093());}),_0x2a529b['on']('exit',function(_0x5cfc7a,_0x2e51f6,_0x81583){const _0x3e4f04=_0x1cd0df;console[_0x3e4f04(0x1b2)](_0x3e4f04(0x20b),_0x2e51f6||'',_0x81583||''),photoIndexWorkerIsRunning=![];});}let _0x397f85;function _0x48f1a5(){const _0x184c89=_0x56fe37;if(movieIndexWorkerIsRunning)return;movieIndexWorkerIsRunning=!![],_0x397f85=_0x4a8b59(_0x184c89(0x238)),_0x397f85['on'](_0x184c89(0x1d8),function(_0x24eb4f){const _0x1efbda=_0x184c89;if(_0x24eb4f[_0x1efbda(0x1f6)]==_0x1efbda(0x1d1))movieIndexWorkerIsRunning=![];else _0x24eb4f[_0x1efbda(0x1f6)]==_0x1efbda(0x1ed)&&(_0x1fb338(),_0x447da9(),_0x1bd578());}),_0x397f85['on']('exit',function(_0xc62a34,_0x422faa,_0x4c05b9){const _0x9b6775=_0x184c89;console[_0x9b6775(0x1b2)](_0x9b6775(0x1fa),_0x422faa||'',_0x4c05b9||''),movieIndexWorkerIsRunning=![];});}function _0x447da9(){const _0x802d10=_0x56fe37;if(getMovieInfoWorkerIsRunning)return;getMovieInfoWorkerIsRunning=!![];let _0x553d49=_0x4a8b59(_0x802d10(0x1b6));_0x553d49['on'](_0x802d10(0x1d8),function(_0x55e7ae){const _0x3247d7=_0x802d10;_0x55e7ae[_0x3247d7(0x1f6)]=='close'&&(getMovieInfoWorkerIsRunning=![]);}),_0x553d49['on'](_0x802d10(0x1e4),function(){getMovieInfoWorkerIsRunning=![];});}function _0x1fb338(){const _0x6d88ee=_0x56fe37;if(tinyImgWorkerIsRunning)return;tinyImgWorkerIsRunning=!![];let _0x3b5e55=_0x4a8b59('myWorkers/tinyImgWorker.js');_0x3b5e55['on'](_0x6d88ee(0x1d8),function(_0x3d9605){const _0x20c0f8=_0x6d88ee;if(_0x3d9605[_0x20c0f8(0x1f6)]==_0x20c0f8(0x1d1))tinyImgWorkerIsRunning=![];else _0x3d9605[_0x20c0f8(0x1f6)]==_0x20c0f8(0x207)&&(_0x20f1cf(),_0x3490cc());}),_0x3b5e55['on'](_0x6d88ee(0x1e4),function(){tinyImgWorkerIsRunning=![];});}let _0x4194d9,_0x3f1443;function _0xc08c19(){const _0x5e4d19=_0x56fe37;let _0x4f523f=dbFileShare['getAllByWhere'](dbu['dbOther'],_0x5e4d19(0x227),[]);if(_0x4f523f&&_0x4f523f[_0x5e4d19(0x1ce)]>0x0)!_0x4194d9&&(_0x4194d9=_0x4a8b59(_0x5e4d19(0x1f7)),_0x4194d9['on'](_0x5e4d19(0x1e4),function(){const _0xbfef21=_0x5e4d19;console[_0xbfef21(0x1b2)](_0xbfef21(0x221)),_0x4194d9=null;}));else{_0x5acca7['create'](dbu[_0x5e4d19(0x190)],{'title':_0x5e4d19(0x1a9),'value':JSON['stringify']({'state':_0x5e4d19(0x23a)})});if(_0x4194d9){let _0xf1cb5c=_0x4194d9[_0x5e4d19(0x19e)]();_0xf1cb5c&&(_0x4194d9=null,console[_0x5e4d19(0x1b2)](_0x5e4d19(0x1c2)));}}}function _0x584697(){const _0x2eece6=_0x56fe37;let _0x4a11a4=dbFileShare[_0x2eece6(0x194)](dbu[_0x2eece6(0x190)],_0x2eece6(0x1b3),[]);if(_0x4a11a4&&_0x4a11a4[_0x2eece6(0x1ce)]>0x0)!_0x3f1443&&(_0x3f1443=_0x4a8b59('myWorkers/shareFolder/shareWebDav.js'),_0x3f1443['on']('exit',function(){const _0x4ce69b=_0x2eece6;console[_0x4ce69b(0x1b2)](_0x4ce69b(0x231)),_0x3f1443=null;}));else{_0x5acca7[_0x2eece6(0x20f)](dbu[_0x2eece6(0x190)],{'title':_0x2eece6(0x23c),'value':JSON[_0x2eece6(0x239)]({'state':'stop'})});if(_0x3f1443){let _0x1684a7=_0x3f1443[_0x2eece6(0x19e)]();_0x1684a7&&(_0x3f1443=null);}}}let _0x4e3fa6;function _0x128df1(){const _0x354c50=_0x56fe37;let _0x14464e=![],_0x1937af=_0x5acca7[_0x354c50(0x1ef)](dbu[_0x354c50(0x190)],_0x354c50(0x1e8));_0x1937af&&_0x1937af['value']==0x1&&(_0x14464e=!![]);if(_0x14464e)!_0x4e3fa6&&(_0x4e3fa6=_0x4a8b59(_0x354c50(0x193)),_0x4e3fa6['on']('message',function(_0x2f02bd){_0x2f02bd['type']=='close'&&(_0x4e3fa6=null);}),_0x4e3fa6['on'](_0x354c50(0x1e4),function(){const _0x25c3f5=_0x354c50;console[_0x25c3f5(0x1b2)](_0x25c3f5(0x230)),_0x4e3fa6=null;}));else{if(_0x4e3fa6){let _0x14022b=_0x4e3fa6['kill']();_0x14022b&&(_0x4e3fa6=null,console['log'](_0x354c50(0x1d3)));}_0x5acca7[_0x354c50(0x199)](dbu[_0x354c50(0x190)],'ddnsIpv6Address'),_0x5acca7[_0x354c50(0x199)](dbu[_0x354c50(0x190)],_0x354c50(0x232)),_0x5acca7[_0x354c50(0x20f)](dbu['dbOther'],{'title':_0x354c50(0x1a1),'value':JSON[_0x354c50(0x239)]({'status':_0x354c50(0x203),'ddnsIp':'','error':_0x354c50(0x19a)})});}}_0x128df1();let _0x188031;function _0x55934b(){const _0x527d86=_0x56fe37;if(globalInfoWorkerIsRunning)return;globalInfoWorkerIsRunning=!![],_0x188031=_0x4a8b59(_0x527d86(0x1c4)),_0x188031['on']('message',function(_0x388a01){const _0x1aecda=_0x527d86;if(_0x388a01['type']==_0x1aecda(0x1d1))globalInfoWorkerIsRunning=![];else _0x388a01[_0x1aecda(0x1f6)]==_0x1aecda(0x1e6)&&_0x1fe7f8(_0x388a01);}),_0x188031['on'](_0x527d86(0x1e4),function(){globalInfoWorkerIsRunning=![];});}_0x55934b();function _0x3490cc(){const _0x37668e=_0x56fe37;let _0x33adca=_0x5acca7['findByTitle'](dbu[_0x37668e(0x190)],_0x37668e(0x1f5));if(_0x33adca&&_0x33adca[_0x37668e(0x1a0)]=='1'){if(aiFacesWorkerIsRunning)return;aiFacesWorkerIsRunning=!![];let _0x536403=_0x4a8b59(_0x37668e(0x1d2));_0x536403['on']('message',function(_0x7346bd){const _0x2dc4b7=_0x37668e;_0x7346bd['type']==_0x2dc4b7(0x1d1)&&(aiFacesWorkerIsRunning=![]);}),_0x536403['on'](_0x37668e(0x1e4),function(_0x51668f,_0xc56c3a,_0x310dcb){aiFacesWorkerIsRunning=![],_0x536403=null;});}else{}}function _0x526093(){const _0x3149b9=_0x56fe37;let _0x4a29c6=_0x5acca7['findByTitle'](dbu[_0x3149b9(0x190)],_0x3149b9(0x201));if(_0x4a29c6&&_0x4a29c6[_0x3149b9(0x1a0)]=='1'){if(aiSimilarPhotoWorker)return;aiSimilarPhotoWorker=!![];let _0x184fd1=_0x4a8b59('myWorkers/ai/aiSimilarPhotos.js');_0x184fd1['on'](_0x3149b9(0x1d8),function(_0x30b06f){const _0x91a9d5=_0x3149b9;_0x30b06f[_0x91a9d5(0x1f6)]==_0x91a9d5(0x1d1)&&(aiSimilarPhotoWorker=![]);}),_0x184fd1['on'](_0x3149b9(0x1e4),()=>{_0x184fd1=![];});}else{}}function _0x20f1cf(){const _0x519e5b=_0x56fe37;let _0x3c746c=_0x5acca7[_0x519e5b(0x1ef)](dbu[_0x519e5b(0x190)],'aiClassesEnable');if(_0x3c746c&&_0x3c746c[_0x519e5b(0x1a0)]=='1'){if(aiClassesWorkerIsRunning)return;aiClassesWorkerIsRunning=!![];let _0x23daca=_0x4a8b59(_0x519e5b(0x1c6));_0x23daca['on']('message',function(_0x3e039b){const _0x31d287=_0x519e5b;_0x3e039b[_0x31d287(0x1f6)]==_0x31d287(0x1d1)&&(aiClassesWorkerIsRunning=![]);}),_0x23daca['on'](_0x519e5b(0x1e4),()=>{aiClassesWorkerIsRunning=![];});}else{}}let _0x3f7e7b;function _0x51afbd(){const _0x344db2=_0x56fe37;let _0x43f4bf=dbu['dbOther'][_0x344db2(0x1ea)](_0x344db2(0x223))[_0x344db2(0x213)]();if(_0x43f4bf[_0x344db2(0x21e)]>0x0){if(backupWorkerIsRunning)return;backupWorkerIsRunning=!![],_0x3f7e7b=_0x4a8b59(_0x344db2(0x23b)),_0x3f7e7b['on'](_0x344db2(0x1d8),function(_0x444602){const _0x2bdb08=_0x344db2;_0x444602[_0x2bdb08(0x1f6)]==_0x2bdb08(0x1d1)&&(backupWorkerIsRunning=![]);}),_0x3f7e7b['on'](_0x344db2(0x1e4),()=>{backupWorkerIsRunning=![];});}else{if(_0x3f7e7b){let _0xcff0d2=_0x3f7e7b[_0x344db2(0x19e)]();_0xcff0d2&&(_0x3f7e7b=null);}}}_0x51afbd();let _0x388b06;function _0x39ee50(){const _0xc065a5=_0x56fe37;if(m3u8WorkerIsRunning)return;m3u8WorkerIsRunning=!![],_0x388b06=_0x4a8b59(_0xc065a5(0x215)),_0x388b06['on'](_0xc065a5(0x1d8),function(_0x29feb1){const _0x1f10de=_0xc065a5;_0x29feb1[_0x1f10de(0x1f6)]==_0x1f10de(0x1d1)&&(m3u8WorkerIsRunning=![]);}),_0x388b06['on'](_0xc065a5(0x1e4),function(_0x1a03d0){m3u8WorkerIsRunning=![];});}let _0x38ed44,_0x32fde9=![];function _0x4eff5e(){const _0x3e35de=_0x56fe37;_0x32fde9&&(!_0x38ed44&&(_0x38ed44=_0x4a8b59(_0x3e35de(0x18e)),_0x38ed44['on']('exit',_0x56cbe2=>{const _0xcf7b23=_0x3e35de;console[_0xcf7b23(0x1b2)]('proxyWorker\x20exit',_0x56cbe2),_0x38ed44=null;}),console[_0x3e35de(0x1b2)]('启用\x20frp')));}function _0x34e636(){const _0x524df6=_0x56fe37;let _0x22b506=_0x5acca7['findByTitle'](dbu[_0x524df6(0x190)],'nasRemoteEnable');!_0x22b506||_0x22b506&&_0x22b506[_0x524df6(0x1a0)]!=0x1&&_0x22b506['value']!='1'?(_0x32fde9=![],_0x38ed44&&(_0x38ed44['kill'](),_0x38ed44=null,console[_0x524df6(0x1b2)](_0x524df6(0x1af))),_0x5acca7[_0x524df6(0x20f)](dbu[_0x524df6(0x190)],{'title':_0x524df6(0x1cc),'value':JSON[_0x524df6(0x239)]({'status':_0x524df6(0x203),'time':new Date()[_0x524df6(0x18b)]()+'','error':_0x524df6(0x21a)})})):(_0x32fde9=!![],_0x4eff5e());}_0x34e636();let _0x2f01d1;function _0x1bd578(){const _0x2f6e03=_0x56fe37;if(subtitleGenWorkerIsRunning)return;subtitleGenWorkerIsRunning=!![],_0x2f01d1=_0x4a8b59('myWorkers/subtitlesGenWorker.js'),_0x2f01d1['on'](_0x2f6e03(0x1d8),function(_0x5e8e0d){const _0x3da3b2=_0x2f6e03;_0x5e8e0d[_0x3da3b2(0x1f6)]=='close'&&(subtitleGenWorkerIsRunning=![]);}),_0x2f01d1['on'](_0x2f6e03(0x1e4),function(_0x470091){subtitleGenWorkerIsRunning=![];});}setTimeout(()=>{_0x1bd578();},0x1388);let _0x1faded=![],_0x49d09c=![],_0x199cc2=![];function _0x4e836b(_0x26c3e2){const _0x54f706=_0x56fe37;try{!_0x199cc2&&(_0x199cc2=!![],setTimeout(()=>{const _0x27dfaa=_0x2db8;let _0x553caf=require(_0x27dfaa(0x216)),_0x8687fd=_0x553caf[_0x27dfaa(0x214)](dbu[_0x27dfaa(0x190)]);_0x8687fd?console[_0x27dfaa(0x1b2)](_0x27dfaa(0x1d7),'https://'+_0x8687fd+':'+_0x26c3e2+_0x5948e4):console[_0x27dfaa(0x1b2)](_0x27dfaa(0x1f9),''+_0x26c3e2+_0x5948e4);},0x3a98));}catch(_0x5a6058){console[_0x54f706(0x1b2)](_0x5a6058);}}let _0x2f7f4b=![];function _0x19f865(){const _0x56885d=_0x56fe37;if(app&&_0x4f5e93){if(_0x2f7f4b)return;_0x2f7f4b=!![],setTimeout(()=>{_0x2f7f4b=![];},0xbb8);function _0xaa4055(){const _0x42fff9=_0x2db8;loadUrl=listenPortHttp=='80'?_0x42fff9(0x196)+_0x5948e4+_0x42fff9(0x18f):_0x42fff9(0x191)+listenPortHttp+_0x5948e4+_0x42fff9(0x18f);let _0x50cf0f=_0x5acca7[_0x42fff9(0x1ef)](dbu['dbOther'],_0x42fff9(0x204));if(!_0x50cf0f||_0x50cf0f[_0x42fff9(0x1a0)]=='1'){let _0x246e6c=dbUserTable[_0x42fff9(0x20e)](dbu[_0x42fff9(0x190)]);if(_0x246e6c){let _0xedb218=sha256(new Date()[_0x42fff9(0x18b)]()+_0x246e6c[_0x42fff9(0x1ab)]);dbUserTable[_0x42fff9(0x1b7)](dbu[_0x42fff9(0x190)],_0x246e6c['id'],_0xedb218,_0x42fff9(0x1f4)),loadUrl+=_0x42fff9(0x21f)+_0xedb218;}}}_0xaa4055(),console[_0x56885d(0x1b2)](_0x56885d(0x220),loadUrl),_0x4f5e93[_0x56885d(0x1ac)](loadUrl),_0x4f5e93[_0x56885d(0x1b5)]['on']('did-fail-load',function(){console['log']('页面加载失败',loadUrl);}),_0x4f5e93[_0x56885d(0x1b5)]['on']('did-finish-load',function(){const _0x34d855=_0x56885d;console[_0x34d855(0x1b2)](_0x34d855(0x1b1),loadUrl);}),ipcMain['on'](_0x56885d(0x1dd),(_0x904c06,_0x51c989)=>{const _0x5c6ce7=_0x56885d;console[_0x5c6ce7(0x1b2)](_0x5c6ce7(0x1b9),loadUrl),loadUrl&&_0x4f5e93[_0x5c6ce7(0x1ac)](loadUrl);});}}function _0x28f469(_0x43c858){const _0x178b57=_0x56fe37;listenPortHttp=_0x43c858,_0x584697(),setTimeout(()=>{_0xc08c19();},0x1388),!_0x49d09c&&(_0x49d09c=!![],setTimeout(()=>{const _0xc89b3f=_0x2db8;let _0x5e3564=require(_0xc89b3f(0x216)),_0x1c5b33=_0x5e3564['getIpv4Address'](dbu[_0xc89b3f(0x190)]);_0x1c5b33?console[_0xc89b3f(0x1b2)]('HTTP\x20服务正在运行[HTTP\x20server\x20is\x20running]\x20:',_0xc89b3f(0x236)+_0x1c5b33+':'+listenPortHttp+_0x5948e4):console['log'](_0xc89b3f(0x1cd),listenPortHttp);},0x3a98)),_0x5acca7[_0x178b57(0x20f)](dbu[_0x178b57(0x190)],{'title':_0x178b57(0x1b0),'value':JSON[_0x178b57(0x239)]({'state':_0x178b57(0x19b),'port':listenPortHttp})}),!_0x1faded&&(_0x1faded=!![],_0x19f865(),workerSendMsg(_0x38ed44,{'type':_0x178b57(0x1c8)}));}let _0x50ac63=_0xedff7[_0x56fe37(0x1df)]();console['log'](_0x56fe37(0x22e),_0x50ac63),_0x3b4ad0['setupPrimary']({'exec':_0x5cf5c8[_0x56fe37(0x1e0)](__dirname,'myWorkers/expressWorker.js')}),_0x3b4ad0['on'](_0x56fe37(0x1e4),function(_0x2afc58,_0x500111,_0x27ca75){const _0x48e929=_0x56fe37;console[_0x48e929(0x1b2)](_0x48e929(0x1ba),_0x500111,_0x27ca75),setTimeout(()=>{_0x4a71d2();},0x1388);});for(let _0x19c6e1=0x0;_0x19c6e1<_0x50ac63;_0x19c6e1++){console[_0x56fe37(0x1b2)](_0x56fe37(0x1a7),_0x19c6e1+0x1),_0x4a71d2();}function _0x1fe7f8(_0x3a2d71){const _0x2de100=_0x56fe37;if(_0x3a2d71[_0x2de100(0x225)]=='movie')_0x48f1a5();else{if(_0x3a2d71[_0x2de100(0x225)]==_0x2de100(0x18c))_0x373d7d();else{if(_0x3a2d71[_0x2de100(0x225)]==_0x2de100(0x195))_0x5eacbe();else _0x3a2d71[_0x2de100(0x225)]==_0x2de100(0x1bf)&&_0x1d3986();}}_0x3a2d71[_0x2de100(0x1d9)]&&(_0x10f16d(),workerSendMsg(_0x453fa3,_0x3a2d71));}function _0x4a71d2(){const _0xbf4a3d=_0x56fe37,_0x2abacb=_0x3b4ad0['fork']({'usePort':_0x339d8e,'userDataFolder':_0xf92cec,'appRootPath':_0x3c562a});_0x2abacb['on'](_0xbf4a3d(0x1d8),function(_0x569fff){const _0x3b43c5=_0xbf4a3d;try{switch(_0x569fff[_0x3b43c5(0x1f6)]){case _0x3b43c5(0x21b):_0x19f865();break;case _0x3b43c5(0x1da):let _0x1bcbae=_0x4a8b59(_0x3b43c5(0x1e7));workerSendMsg(_0x1bcbae,_0x569fff);break;case _0x3b43c5(0x20c):if(!bgTaskWorkerIsRunning){bgTaskWorkerIsRunning=!![];let _0x1823e0=_0x4a8b59('myWorkers/bg/bgTaskWorker.js');_0x1823e0['on'](_0x3b43c5(0x1d8),function(_0x12c56d){const _0x3f346f=_0x3b43c5;_0x12c56d[_0x3f346f(0x1f6)]==_0x3f346f(0x1d1)&&(bgTaskWorkerIsRunning=![]);});}break;case _0x3b43c5(0x1fc):_0x447da9();break;case _0x3b43c5(0x1e5):_0x1bd578();break;case _0x3b43c5(0x209):_0x39ee50(),workerSendMsg(_0x388b06,_0x569fff);break;case'nasProxyRestart':_0x34e636(),workerSendMsg(_0x38ed44,{'type':'reset','msg':_0x569fff});break;case _0x3b43c5(0x198):_0x34e636(),workerSendMsg(_0x38ed44,{'type':_0x3b43c5(0x23a)}),setTimeout(()=>{_0x447da9();},0x3e8);break;case _0x3b43c5(0x1cf):_0x55934b(),workerSendMsg(_0x188031,_0x569fff);break;case _0x3b43c5(0x22f):console['log'](_0x3b43c5(0x1d6)),_0xedff7[_0x3b43c5(0x22f)]();break;case _0x3b43c5(0x228):_0x51afbd();break;case'stopIndexWorker':if(_0x569fff['source_type']=='photo')_0x2a529b&&(_0x2a529b['kill'](),_0x2a529b=null,photoIndexWorkerIsRunning=![]);else{if(_0x569fff[_0x3b43c5(0x225)]==_0x3b43c5(0x1a4))_0x397f85&&(_0x397f85[_0x3b43c5(0x19e)](),_0x397f85=null,movieIndexWorkerIsRunning=![]);else{if(_0x569fff[_0x3b43c5(0x225)]==_0x3b43c5(0x195))_0x161dc1&&(_0x161dc1[_0x3b43c5(0x19e)](),_0x161dc1=null,musicIndexWorkerIsRunning=![]);else _0x569fff[_0x3b43c5(0x225)]=='book'&&(_0x352768&&(_0x352768[_0x3b43c5(0x19e)](),_0x352768=null,bookIndexWorkerIsRunning=![]));}}break;case _0x3b43c5(0x1e6):_0x1fe7f8(_0x569fff);break;case _0x3b43c5(0x208):if(_0x569fff[_0x3b43c5(0x1aa)]==_0x3b43c5(0x219))_0x584697(),workerSendMsg(_0x3f1443,_0x569fff);else _0x569fff[_0x3b43c5(0x1aa)]==_0x3b43c5(0x19f)&&(_0xc08c19(),workerSendMsg(_0x4194d9,_0x569fff));break;case _0x3b43c5(0x1a3):_0x128df1(),workerSendMsg(_0x4e3fa6,{'type':_0x3b43c5(0x1c8),'force':0x1});break;case'nasCabLogout':_0x128df1(),setTimeout(()=>{_0x447da9();},0x3e8);break;case _0x3b43c5(0x1c1):_0x34e636(),workerSendMsg(_0x38ed44,{'type':_0x3b43c5(0x229)}),_0x128df1(),setTimeout(()=>{_0x447da9();},0x3e8);break;case'createUserFolder':_0xedff7[_0x3b43c5(0x224)]();break;case'startClassesAiWork':_0x20f1cf();break;case _0x3b43c5(0x1b8):_0x3490cc();break;case _0x3b43c5(0x20d):_0x526093();break;case _0x3b43c5(0x1ae):_0x28f469(_0x569fff['exressPort']);break;case'expressStartedHttps':_0x4e836b(_0x569fff[_0x3b43c5(0x1bc)]);break;case _0x3b43c5(0x211):console[_0x3b43c5(0x1b2)]('Relaunch\x20Restart');if(app)app[_0x3b43c5(0x237)]();_0xedff7[_0x3b43c5(0x1c5)](dbu);break;case _0x3b43c5(0x1e3):break;case'shell':if(shell){if(_0x569fff[_0x3b43c5(0x1e1)]=='showItemInFolder')_0x569fff[_0x3b43c5(0x1f8)]&&shell['showItemInFolder'](_0x569fff[_0x3b43c5(0x1f8)]);else{if(_0x569fff[_0x3b43c5(0x1e1)]=='openPath')_0x569fff[_0x3b43c5(0x1f8)]&&shell['openPath'](_0x569fff[_0x3b43c5(0x1f8)])['then'](_0x51d838=>{const _0x2d8023=_0x3b43c5;console[_0x2d8023(0x1b2)](_0x2d8023(0x226));})[_0x3b43c5(0x1f2)](_0x1abad5=>{const _0x1ce6e9=_0x3b43c5;console[_0x1ce6e9(0x1b2)](_0x1ce6e9(0x1fb),_0x1abad5);});else _0x569fff[_0x3b43c5(0x1e1)]==_0x3b43c5(0x1e2)&&(_0x569fff['path']&&shell['trashItem'](_0x569fff[_0x3b43c5(0x1f8)])[_0x3b43c5(0x1ec)](_0xa5a849=>{const _0x1fce08=_0x3b43c5;console[_0x1fce08(0x1b2)](_0x1fce08(0x1bd));})['catch'](_0x257d15=>{const _0x51b1f5=_0x3b43c5;console[_0x51b1f5(0x1b2)](_0x51b1f5(0x197),_0x257d15);}));}}break;}}catch(_0xe7f089){console[_0x3b43c5(0x1b2)](_0x3b43c5(0x234),_0xe7f089);}});}});});}if(app){const gotTheLock=app['requestSingleInstanceLock']();!gotTheLock?(app['quit'](),process[_0x29fec3(0x19e)](process[_0x29fec3(0x1fe)],_0x29fec3(0x1d0))):(app['on'](_0x29fec3(0x1c3),(_0x51b72d,_0x384bb4,_0x1840d1)=>{const _0x281f14=_0x29fec3;if(mainWindow){if(mainWindow[_0x281f14(0x1ee)]())mainWindow['restore']();!mainWindow['isVisible']()&&mainWindow['show'](),mainWindow[_0x281f14(0x205)]();}}),init());}else init();process['on'](_0x29fec3(0x1db),(_0x320836,_0x5cfa7b)=>{const _0x3d6ad3=_0x29fec3;console[_0x3d6ad3(0x1b2)](_0x3d6ad3(0x1ca),_0x320836);});