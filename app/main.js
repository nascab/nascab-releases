'use strict';const _0x2add9d=_0x4071;(function(_0x47fb9b,_0x48a5bb){const _0x32b01a=_0x4071,_0x3cd91c=_0x47fb9b();while(!![]){try{const _0x417b9d=-parseInt(_0x32b01a(0x191))/0x1+parseInt(_0x32b01a(0x152))/0x2*(parseInt(_0x32b01a(0x1d8))/0x3)+parseInt(_0x32b01a(0x157))/0x4+parseInt(_0x32b01a(0x15c))/0x5*(parseInt(_0x32b01a(0x1a3))/0x6)+-parseInt(_0x32b01a(0x15e))/0x7*(-parseInt(_0x32b01a(0x1c4))/0x8)+-parseInt(_0x32b01a(0x184))/0x9*(parseInt(_0x32b01a(0x1e7))/0xa)+-parseInt(_0x32b01a(0x19b))/0xb;if(_0x417b9d===_0x48a5bb)break;else _0x3cd91c['push'](_0x3cd91c['shift']());}catch(_0xf4c6db){_0x3cd91c['push'](_0x3cd91c['shift']());}}}(_0x2fe7,0x23f03));let app,shell,ipcMain;try{app=require(_0x2add9d(0x205))[_0x2add9d(0x1d5)],shell=require(_0x2add9d(0x205))[_0x2add9d(0x17e)],ipcMain=require(_0x2add9d(0x205))['ipcMain'];}catch(_0x45b515){console[_0x2add9d(0x1a9)](_0x2add9d(0x16f));}let mainWindow,sha256=require('sha256');const dbFileShare=require(_0x2add9d(0x1a5)),dbUserTable=require(_0x2add9d(0x1cf)),{fork}=require(_0x2add9d(0x178));let bgTaskWorkerIsRunning=![],tinyImgWorkerIsRunning=![],getMovieInfoWorkerIsRunning=![],aiFacesWorkerIsRunning=![],aiClassesWorkerIsRunning=![],aiSimilarPhotoWorker=![],globalInfoWorkerIsRunning=![],photoIndexWorkerIsRunning=![],movieIndexWorkerIsRunning=![],musicIndexWorkerIsRunning=![],bookIndexWorkerIsRunning=![],watchWorkerIsRunning=![];function _0x4071(_0x3c86d3,_0x5e830e){const _0x2fe7d5=_0x2fe7();return _0x4071=function(_0x4071ca,_0x18cb8f){_0x4071ca=_0x4071ca-0x150;let _0x15ccbb=_0x2fe7d5[_0x4071ca];return _0x15ccbb;},_0x4071(_0x3c86d3,_0x5e830e);}const messageUtil=require('./utils/messageUtil');let backupWorkerIsRunning=![],m3u8WorkerIsRunning=![],subtitleGenWorkerIsRunning=![],loadUrl='',listenPortHttp='80';function workerSendMsg(_0x22d952,_0xac811b){const _0x198039=_0x2add9d;try{_0x22d952&&!_0x22d952[_0x198039(0x182)]&&_0x22d952[_0x198039(0x1c9)](_0xac811b,undefined,undefined,_0x10aa46=>{const _0x440fd2=_0x198039;_0x10aa46&&console[_0x440fd2(0x1a9)](_0x440fd2(0x1ec),_0x10aa46);});}catch(_0x534ef7){console[_0x198039(0x1a9)]('worker\x20send\x20msg\x20error',_0x534ef7);}}let dbu;function init(){const _0x4e5153=_0x2add9d;var _0x53d969=require('cluster');let _0x5a956f=require(_0x4e5153(0x1ee)),_0x331afa=require(_0x4e5153(0x1eb)),_0x15fce5=require(_0x4e5153(0x1c1)),_0x222765=_0x331afa[_0x4e5153(0x1b4)]();dbu=_0x331afa[_0x4e5153(0x1c5)]();let _0x350095='';function _0x502f31(_0x14dafb,_0x5b89e3){const _0x2de40e=_0x4e5153;function _0x41476a(){const _0x15e04a=_0x4071;_0x14dafb[_0x15e04a(0x15b)](),_0x350095=_0x15fce5[_0x15e04a(0x192)](_0x14dafb[_0x15e04a(0x1db)]);if(app)_0x331afa['launchWithSys']();_0x331afa[_0x15e04a(0x1ff)]();if(app)mainWindow=_0x331afa[_0x15e04a(0x186)]();_0x331afa[_0x15e04a(0x15b)](_0x14dafb);if(app)_0x331afa[_0x15e04a(0x1df)](_0x14dafb,mainWindow);if(app)_0x331afa[_0x15e04a(0x153)](_0x14dafb,mainWindow);_0x331afa[_0x15e04a(0x1e5)](),_0x331afa[_0x15e04a(0x180)](_0x14dafb);if(app)_0x331afa[_0x15e04a(0x1d3)]();_0x5b89e3(mainWindow);}app?app[_0x2de40e(0x17c)]()[_0x2de40e(0x1bd)](()=>{_0x41476a();}):_0x41476a();}_0x502f31(dbu,_0x4271ba=>{const _0x41c1e7=_0x4e5153,_0x2ffbda=_0x331afa[_0x41c1e7(0x1b7)]();let _0x3c586c=_0x331afa[_0x41c1e7(0x17a)]();_0x331afa[_0x41c1e7(0x150)](_0x3c586c,_0x3ae25f=>{const _0x50ceb2=_0x41c1e7;function _0x14963e(_0x1f2df8){const _0x269adc=_0x4071,_0x2f0014=fork(_0x5a956f['resolve'](__dirname,_0x1f2df8),[],{'env':{'userDataFolder':_0x222765,'appRootPath':_0x2ffbda},'detached':![],'killSignal':_0x269adc(0x1f5)});return _0x331afa[_0x269adc(0x1dc)][_0x269adc(0x1c0)](_0x2f0014),_0x331afa[_0x269adc(0x1de)](dbu['dbOther'],_0x2f0014['pid']),_0x2f0014['on'](_0x269adc(0x194),function(_0x2035a2,_0x5f34f2){}),_0x2f0014['on'](_0x269adc(0x1bf),function(_0x479c50){const _0x87a292=_0x269adc;console[_0x87a292(0x1a9)]('进程出错了',_0x479c50);}),_0x2f0014;}dbu[_0x50ceb2(0x1db)]['prepare'](_0x50ceb2(0x175))['run'](),setInterval(()=>{_0x5a20cd();},0x258*0x3e8),setTimeout(()=>{const _0x1b8ac7=_0x50ceb2;_0x331afa[_0x1b8ac7(0x15a)](dbu[_0x1b8ac7(0x1db)]),_0xf6e052(),_0x18e4c3(),_0x4e6ee4(),_0x263895(),_0xc70365(),_0x1ce658(),_0x38e182(),_0x246e7e(),_0x2eed4a();},0x1388);let _0x38594c;function _0x263895(){const _0x3f65e8=_0x50ceb2;if(bookIndexWorkerIsRunning)return;bookIndexWorkerIsRunning=!![],_0x38594c=_0x14963e(_0x3f65e8(0x1d6)),_0x38594c['on'](_0x3f65e8(0x1a0),function(_0x561548){const _0x470825=_0x3f65e8;_0x561548[_0x470825(0x162)]=='close'&&(bookIndexWorkerIsRunning=![]);}),_0x38594c['on'](_0x3f65e8(0x194),function(_0x3785f2,_0x1b5093,_0x3e84d7){const _0x5b1446=_0x3f65e8;console['log'](_0x5b1446(0x196),_0x1b5093||'',_0x3e84d7||''),bookIndexWorkerIsRunning=![];});}let _0x9095a9;function _0x4e6ee4(){const _0x363006=_0x50ceb2;if(musicIndexWorkerIsRunning)return;musicIndexWorkerIsRunning=!![],_0x9095a9=_0x14963e(_0x363006(0x197)),_0x9095a9['on'](_0x363006(0x1a0),function(_0x5c4c7d){const _0xa388f3=_0x363006;_0x5c4c7d[_0xa388f3(0x162)]==_0xa388f3(0x1ac)&&(musicIndexWorkerIsRunning=![]);}),_0x9095a9['on']('exit',function(_0x14e217,_0x3cd55c,_0x5af5fc){const _0x40497c=_0x363006;console['log'](_0x40497c(0x1dd),_0x3cd55c||'',_0x5af5fc||''),musicIndexWorkerIsRunning=![];});}let _0xee2445;function _0x5c8505(){const _0x37212d=_0x50ceb2;if(watchWorkerIsRunning)return;watchWorkerIsRunning=!![],_0xee2445=_0x14963e(_0x37212d(0x18f)),_0xee2445['on'](_0x37212d(0x1a0),function(_0x50827a){const _0x40efe6=_0x37212d;if(_0x50827a[_0x40efe6(0x162)]==_0x40efe6(0x1ac))watchWorkerIsRunning=![];else{if(_0x50827a[_0x40efe6(0x162)]==_0x40efe6(0x1c3))_0xc70365(),_0x246e7e();else _0x50827a[_0x40efe6(0x162)]==_0x40efe6(0x1b0)&&(_0xc70365(),_0x2eed4a(),_0x5e8124());}}),_0xee2445['on'](_0x37212d(0x194),function(_0x4567f9,_0x3522c6,_0x5f1afb){const _0x1d7318=_0x37212d;console[_0x1d7318(0x1a9)](_0x1d7318(0x1fa),_0x3522c6,_0x5f1afb),watchWorkerIsRunning=![];});}_0x5c8505();let _0x110204;function _0xf6e052(){const _0x83f955=_0x50ceb2;if(photoIndexWorkerIsRunning)return;photoIndexWorkerIsRunning=!![],_0x110204=_0x14963e(_0x83f955(0x1f1)),_0x110204['on'](_0x83f955(0x1a0),function(_0x88c92){const _0x193dcf=_0x83f955;_0x88c92[_0x193dcf(0x162)]==_0x193dcf(0x1ac)&&(photoIndexWorkerIsRunning=![]),_0x88c92[_0x193dcf(0x162)]==_0x193dcf(0x1c3)&&(_0xc70365(),_0x246e7e());}),_0x110204['on'](_0x83f955(0x194),function(_0x3ef804,_0x3b1f17,_0x201039){const _0x58a535=_0x83f955;console[_0x58a535(0x1a9)](_0x58a535(0x1f7),_0x3b1f17||'',_0x201039||''),photoIndexWorkerIsRunning=![];});}let _0x205b67;function _0x18e4c3(){const _0x4001ad=_0x50ceb2;if(movieIndexWorkerIsRunning)return;movieIndexWorkerIsRunning=!![],_0x205b67=_0x14963e(_0x4001ad(0x1c7)),_0x205b67['on'](_0x4001ad(0x1a0),function(_0x52d726){const _0x3935de=_0x4001ad;if(_0x52d726[_0x3935de(0x162)]==_0x3935de(0x1ac))movieIndexWorkerIsRunning=![];else _0x52d726[_0x3935de(0x162)]=='NEW_MOVIE_INDEX'&&(_0xc70365(),_0x2eed4a(),_0x5e8124());}),_0x205b67['on'](_0x4001ad(0x194),function(_0x1f5d28,_0x6e79f5,_0x4fbd4f){const _0x4d33a=_0x4001ad;console[_0x4d33a(0x1a9)](_0x4d33a(0x158),_0x6e79f5||'',_0x4fbd4f||''),movieIndexWorkerIsRunning=![];});}function _0x2eed4a(){const _0x3e0800=_0x50ceb2;if(getMovieInfoWorkerIsRunning)return;getMovieInfoWorkerIsRunning=!![];let _0x43dd3a=_0x14963e(_0x3e0800(0x195));_0x43dd3a['on'](_0x3e0800(0x1a0),function(_0x207417){const _0x4dc3cc=_0x3e0800;_0x207417[_0x4dc3cc(0x162)]==_0x4dc3cc(0x1ac)&&(getMovieInfoWorkerIsRunning=![]);}),_0x43dd3a['on'](_0x3e0800(0x194),function(){getMovieInfoWorkerIsRunning=![];});}function _0xc70365(){const _0x4adc2e=_0x50ceb2;if(tinyImgWorkerIsRunning)return;tinyImgWorkerIsRunning=!![];let _0x48aa4a=_0x14963e('myWorkers/tinyImgWorker.js');_0x48aa4a['on'](_0x4adc2e(0x1a0),function(_0x5f2963){const _0x1534e3=_0x4adc2e;if(_0x5f2963[_0x1534e3(0x162)]==_0x1534e3(0x1ac))tinyImgWorkerIsRunning=![];else _0x5f2963[_0x1534e3(0x162)]==_0x1534e3(0x1b6)&&(_0x1ce658(),_0x38e182());}),_0x48aa4a['on'](_0x4adc2e(0x194),function(){tinyImgWorkerIsRunning=![];});}let _0x5d8f0f,_0x1f9502;function _0x59b71f(){const _0x436c6d=_0x50ceb2;let _0x478602=dbFileShare[_0x436c6d(0x156)](dbu[_0x436c6d(0x1db)],'\x20server_type=\x27FTP\x27',[]);if(_0x478602&&_0x478602[_0x436c6d(0x188)]>0x0)!_0x5d8f0f&&(_0x5d8f0f=_0x14963e(_0x436c6d(0x176)),_0x5d8f0f['on']('exit',function(){const _0x154daa=_0x436c6d;console[_0x154daa(0x1a9)](_0x154daa(0x1f8)),_0x5d8f0f=null;}));else{_0x15fce5[_0x436c6d(0x200)](dbu[_0x436c6d(0x1db)],{'title':_0x436c6d(0x17b),'value':JSON[_0x436c6d(0x189)]({'state':_0x436c6d(0x168)})});if(_0x5d8f0f){let _0x32894c=_0x5d8f0f['kill']();_0x32894c&&(_0x5d8f0f=null,console['log']('Closing\x20FTP'));}}}function _0x24dd03(){const _0x59a234=_0x50ceb2;let _0x23eb9e=dbFileShare[_0x59a234(0x156)](dbu[_0x59a234(0x1db)],_0x59a234(0x1aa),[]);if(_0x23eb9e&&_0x23eb9e[_0x59a234(0x188)]>0x0)!_0x1f9502&&(_0x1f9502=_0x14963e('myWorkers/shareFolder/shareWebDav.js'),_0x1f9502['on']('exit',function(){const _0x3da49f=_0x59a234;console['log'](_0x3da49f(0x1fe)),_0x1f9502=null;}));else{_0x15fce5[_0x59a234(0x200)](dbu[_0x59a234(0x1db)],{'title':_0x59a234(0x1e2),'value':JSON[_0x59a234(0x189)]({'state':_0x59a234(0x168)})});if(_0x1f9502){let _0x53d8d3=_0x1f9502['kill']();_0x53d8d3&&(_0x1f9502=null);}}}let _0x585641;function _0x236a6c(){const _0x12f1d4=_0x50ceb2;let _0x12bf0d=![],_0x3c7de9=_0x15fce5[_0x12f1d4(0x19a)](dbu[_0x12f1d4(0x1db)],'nasDdnsEnable');_0x3c7de9&&_0x3c7de9[_0x12f1d4(0x1d4)]==0x1&&(_0x12bf0d=!![]);if(_0x12bf0d)!_0x585641&&(_0x585641=_0x14963e(_0x12f1d4(0x173)),_0x585641['on'](_0x12f1d4(0x1a0),function(_0xde4055){const _0x5e3558=_0x12f1d4;_0xde4055[_0x5e3558(0x162)]==_0x5e3558(0x1ac)&&(_0x585641=null);}),_0x585641['on'](_0x12f1d4(0x194),function(){const _0x221188=_0x12f1d4;console['log'](_0x221188(0x1d1)),_0x585641=null;}));else{if(_0x585641){let _0x3910fc=_0x585641[_0x12f1d4(0x1b2)]();_0x3910fc&&(_0x585641=null,console[_0x12f1d4(0x1a9)](_0x12f1d4(0x1a4)));}_0x15fce5[_0x12f1d4(0x151)](dbu[_0x12f1d4(0x1db)],'ddnsIpv6Address'),_0x15fce5[_0x12f1d4(0x151)](dbu[_0x12f1d4(0x1db)],_0x12f1d4(0x19e)),_0x15fce5[_0x12f1d4(0x200)](dbu[_0x12f1d4(0x1db)],{'title':_0x12f1d4(0x1e8),'value':JSON[_0x12f1d4(0x189)]({'status':_0x12f1d4(0x15d),'ddnsIp':'','error':'OFF'})});}}_0x236a6c();let _0x40e1e3;function _0x5486d7(){const _0x6543a7=_0x50ceb2;if(globalInfoWorkerIsRunning)return;globalInfoWorkerIsRunning=!![],_0x40e1e3=_0x14963e('myWorkers/globalInfoWorker.js'),_0x40e1e3['on']('message',function(_0x34f943){const _0x468a97=_0x4071;if(_0x34f943['type']==_0x468a97(0x1ac))globalInfoWorkerIsRunning=![];else _0x34f943[_0x468a97(0x162)]=='startScanPath'&&_0x88f994(_0x34f943);}),_0x40e1e3['on'](_0x6543a7(0x194),function(){globalInfoWorkerIsRunning=![];});}_0x5486d7();function _0x38e182(){const _0x6f899e=_0x50ceb2;let _0x11ecf5=_0x15fce5[_0x6f899e(0x19a)](dbu['dbOther'],'aiFaceEnable');if(_0x11ecf5&&_0x11ecf5[_0x6f899e(0x1d4)]=='1'){if(aiFacesWorkerIsRunning)return;aiFacesWorkerIsRunning=!![];let _0x2222e3=_0x14963e(_0x6f899e(0x198));_0x2222e3['on']('message',function(_0x5a2c0c){_0x5a2c0c['type']=='close'&&(aiFacesWorkerIsRunning=![]);}),_0x2222e3['on'](_0x6f899e(0x194),function(_0x54df6f,_0x37c330,_0x326dd5){aiFacesWorkerIsRunning=![],_0x2222e3=null;});}else{}}function _0x246e7e(){const _0x2a59fd=_0x50ceb2;let _0x5917f1=_0x15fce5[_0x2a59fd(0x19a)](dbu[_0x2a59fd(0x1db)],_0x2a59fd(0x1cd));if(_0x5917f1&&_0x5917f1[_0x2a59fd(0x1d4)]=='1'){if(aiSimilarPhotoWorker)return;aiSimilarPhotoWorker=!![];let _0x28e5e6=_0x14963e(_0x2a59fd(0x1bc));_0x28e5e6['on'](_0x2a59fd(0x1a0),function(_0x56f9e4){const _0x3e9b22=_0x2a59fd;_0x56f9e4[_0x3e9b22(0x162)]==_0x3e9b22(0x1ac)&&(aiSimilarPhotoWorker=![]);}),_0x28e5e6['on'](_0x2a59fd(0x194),()=>{_0x28e5e6=![];});}else{}}function _0x1ce658(){const _0x51329b=_0x50ceb2;let _0x3df84a=_0x15fce5['findByTitle'](dbu[_0x51329b(0x1db)],_0x51329b(0x16c));if(_0x3df84a&&_0x3df84a[_0x51329b(0x1d4)]=='1'){if(aiClassesWorkerIsRunning)return;aiClassesWorkerIsRunning=!![];let _0x2c18d9=_0x14963e('myWorkers/ai/aiClassify.js');_0x2c18d9['on'](_0x51329b(0x1a0),function(_0x52f8de){const _0x365923=_0x51329b;_0x52f8de[_0x365923(0x162)]==_0x365923(0x1ac)&&(aiClassesWorkerIsRunning=![]);}),_0x2c18d9['on'](_0x51329b(0x194),()=>{aiClassesWorkerIsRunning=![];});}else{}}let _0x116e1f;function _0x4c00b7(){const _0x591029=_0x50ceb2;let _0x42f0e5=dbu[_0x591029(0x1db)][_0x591029(0x181)]('SELECT\x20count(*)\x20as\x20count\x20FROM\x20backup_task')['get']();if(_0x42f0e5[_0x591029(0x19c)]>0x0){if(backupWorkerIsRunning)return;backupWorkerIsRunning=!![],_0x116e1f=_0x14963e(_0x591029(0x1e1)),_0x116e1f['on'](_0x591029(0x1a0),function(_0x5ecfa8){const _0x460469=_0x591029;_0x5ecfa8[_0x460469(0x162)]==_0x460469(0x1ac)&&(backupWorkerIsRunning=![]);}),_0x116e1f['on'](_0x591029(0x194),()=>{backupWorkerIsRunning=![];});}else{if(_0x116e1f){let _0x3a5648=_0x116e1f[_0x591029(0x1b2)]();_0x3a5648&&(_0x116e1f=null);}}}_0x4c00b7();let _0x460803;function _0x5cf9be(){const _0x357b2a=_0x50ceb2;if(m3u8WorkerIsRunning)return;m3u8WorkerIsRunning=!![],_0x460803=_0x14963e(_0x357b2a(0x1f0)),_0x460803['on'](_0x357b2a(0x1a0),function(_0x42d285){const _0x4d1904=_0x357b2a;_0x42d285[_0x4d1904(0x162)]==_0x4d1904(0x1ac)&&(m3u8WorkerIsRunning=![]);}),_0x460803['on']('exit',function(_0x5b077e){m3u8WorkerIsRunning=![];});}let _0x116975,_0x21db60=![];function _0x5a20cd(){const _0x28d135=_0x50ceb2;_0x21db60&&(!_0x116975&&(_0x116975=_0x14963e(_0x28d135(0x199)),_0x116975['on'](_0x28d135(0x194),_0x1aca64=>{const _0x149274=_0x28d135;console['log'](_0x149274(0x185),_0x1aca64),_0x116975=null;}),console['log'](_0x28d135(0x18c))));}function _0x23fb52(){const _0x51e6ca=_0x50ceb2;let _0x54122e=_0x15fce5[_0x51e6ca(0x19a)](dbu[_0x51e6ca(0x1db)],_0x51e6ca(0x1ce));!_0x54122e||_0x54122e&&_0x54122e['value']!=0x1&&_0x54122e['value']!='1'?(_0x21db60=![],_0x116975&&(_0x116975[_0x51e6ca(0x1b2)](),_0x116975=null,console[_0x51e6ca(0x1a9)](_0x51e6ca(0x18b))),_0x15fce5['create'](dbu[_0x51e6ca(0x1db)],{'title':_0x51e6ca(0x19f),'value':JSON[_0x51e6ca(0x189)]({'status':'fail','time':new Date()[_0x51e6ca(0x1b1)]()+'','error':_0x51e6ca(0x1a7)})})):(_0x21db60=!![],_0x5a20cd());}_0x23fb52();let _0x3eaad5;function _0x5e8124(){const _0xaa066c=_0x50ceb2;if(subtitleGenWorkerIsRunning)return;subtitleGenWorkerIsRunning=!![],_0x3eaad5=_0x14963e('myWorkers/subtitlesGenWorker.js'),_0x3eaad5['on']('message',function(_0x2e2468){const _0x567aa8=_0x4071;_0x2e2468[_0x567aa8(0x162)]==_0x567aa8(0x1ac)&&(subtitleGenWorkerIsRunning=![]);}),_0x3eaad5['on'](_0xaa066c(0x194),function(_0x1189ef){subtitleGenWorkerIsRunning=![];});}setTimeout(()=>{_0x5e8124();},0x1388);let _0x2f4ef8=![],_0x4e5941=![],_0x43573d=![];function _0x2038b7(_0x13bf9d){const _0x2f3a87=_0x50ceb2;try{!_0x43573d&&(_0x43573d=!![],setTimeout(()=>{const _0x573369=_0x4071;let _0x1bf822=require(_0x573369(0x1a2)),_0x114792=_0x1bf822[_0x573369(0x1ca)](dbu['dbOther']);_0x114792?console[_0x573369(0x1a9)](_0x573369(0x161),'https://'+_0x114792+':'+_0x13bf9d+_0x350095):console[_0x573369(0x1a9)](_0x573369(0x190),''+_0x13bf9d+_0x350095);},0x3a98));}catch(_0xce8c2b){console[_0x2f3a87(0x1a9)](_0xce8c2b);}}let _0x56d648=![];function _0x32b095(){const _0x56033e=_0x50ceb2;if(app&&_0x4271ba){if(_0x56d648)return;_0x56d648=!![],setTimeout(()=>{_0x56d648=![];},0xbb8);function _0x399a11(){const _0x20d769=_0x4071;loadUrl=listenPortHttp=='80'?_0x20d769(0x1b5)+_0x350095+_0x20d769(0x179):_0x20d769(0x1d0)+listenPortHttp+_0x350095+_0x20d769(0x179);let _0x159582=_0x15fce5[_0x20d769(0x19a)](dbu[_0x20d769(0x1db)],'autoLoginClient');if(!_0x159582||_0x159582[_0x20d769(0x1d4)]=='1'){let _0x4061d6=dbUserTable['getAdmin'](dbu[_0x20d769(0x1db)]);if(_0x4061d6){let _0x16e20a=sha256(new Date()[_0x20d769(0x1b1)]()+_0x4061d6[_0x20d769(0x1fb)]);dbUserTable['createToken'](dbu[_0x20d769(0x1db)],_0x4061d6['id'],_0x16e20a,_0x20d769(0x1e3)),loadUrl+=_0x20d769(0x1ed)+_0x16e20a;}}}_0x399a11(),console[_0x56033e(0x1a9)](_0x56033e(0x159),loadUrl),_0x4271ba[_0x56033e(0x1f2)](loadUrl),_0x4271ba['webContents']['on'](_0x56033e(0x193),function(){const _0xfee37=_0x56033e;console['log'](_0xfee37(0x1e0),loadUrl);}),_0x4271ba[_0x56033e(0x167)]['on'](_0x56033e(0x1c2),function(){const _0x3ab7c9=_0x56033e;console[_0x3ab7c9(0x1a9)](_0x3ab7c9(0x202),loadUrl);}),ipcMain['on'](_0x56033e(0x1b9),(_0x5bb985,_0x302881)=>{const _0x3ca97a=_0x56033e;console['log'](_0x3ca97a(0x174),loadUrl),loadUrl&&_0x4271ba[_0x3ca97a(0x1f2)](loadUrl);});}}function _0x22c083(_0x42e96b){const _0x1e80ac=_0x50ceb2;listenPortHttp=_0x42e96b,_0x24dd03(),setTimeout(()=>{_0x59b71f();},0x1388),!_0x4e5941&&(_0x4e5941=!![],setTimeout(()=>{const _0x500117=_0x4071;let _0x922d28=require('./utils/globalInfoUtil'),_0x895761=_0x922d28[_0x500117(0x1ca)](dbu[_0x500117(0x1db)]);_0x895761?console[_0x500117(0x1a9)](_0x500117(0x1bb),_0x500117(0x204)+_0x895761+':'+listenPortHttp+_0x350095):console[_0x500117(0x1a9)](_0x500117(0x1d7),listenPortHttp);},0x3a98)),_0x15fce5['create'](dbu[_0x1e80ac(0x1db)],{'title':'apiServer','value':JSON[_0x1e80ac(0x189)]({'state':_0x1e80ac(0x1ea),'port':listenPortHttp})}),!_0x2f4ef8&&(_0x2f4ef8=!![],_0x32b095(),workerSendMsg(_0x116975,{'type':_0x1e80ac(0x164)}));}let _0x3d094c=_0x331afa['getExpressApiCount']();console[_0x50ceb2(0x1a9)](_0x50ceb2(0x16b),_0x3d094c),_0x53d969[_0x50ceb2(0x1be)]({'exec':_0x5a956f[_0x50ceb2(0x1f4)](__dirname,_0x50ceb2(0x1c8))}),_0x53d969['on']('exit',function(_0x535c8b,_0x1eadec,_0x196c00){const _0x3e2e54=_0x50ceb2;console[_0x3e2e54(0x1a9)](_0x3e2e54(0x16e),_0x1eadec,_0x196c00),setTimeout(()=>{_0x135bfd();},0x1388);});for(let _0xcaf55b=0x0;_0xcaf55b<_0x3d094c;_0xcaf55b++){console['log']('NasCab\x20api\x20server\x20starting\x20',_0xcaf55b+0x1),_0x135bfd();}function _0x88f994(_0x25c7e6){const _0x438451=_0x50ceb2;if(_0x25c7e6[_0x438451(0x1b3)]=='movie')_0x18e4c3();else{if(_0x25c7e6[_0x438451(0x1b3)]==_0x438451(0x1fc))_0xf6e052();else{if(_0x25c7e6[_0x438451(0x1b3)]=='music')_0x4e6ee4();else _0x25c7e6[_0x438451(0x1b3)]==_0x438451(0x203)&&_0x263895();}}_0x25c7e6[_0x438451(0x165)]&&(_0x5c8505(),workerSendMsg(_0xee2445,_0x25c7e6));}function _0x135bfd(){const _0x44a5eb=_0x50ceb2,_0x44d1f7=_0x53d969['fork']({'usePort':_0x3ae25f,'userDataFolder':_0x222765,'appRootPath':_0x2ffbda});_0x44d1f7['on'](_0x44a5eb(0x1a0),function(_0x3bfb72){const _0x51d2f2=_0x44a5eb;try{switch(_0x3bfb72[_0x51d2f2(0x162)]){case _0x51d2f2(0x187):_0x32b095();break;case _0x51d2f2(0x1c6):let _0x3ea4f0=_0x14963e(_0x51d2f2(0x183));workerSendMsg(_0x3ea4f0,_0x3bfb72);break;case _0x51d2f2(0x1d9):if(!bgTaskWorkerIsRunning){bgTaskWorkerIsRunning=!![];let _0x30ea36=_0x14963e(_0x51d2f2(0x17d));_0x30ea36['on'](_0x51d2f2(0x1a0),function(_0x2cf5fb){_0x2cf5fb['type']=='close'&&(bgTaskWorkerIsRunning=![]);});}break;case _0x51d2f2(0x1e9):_0x2eed4a();break;case _0x51d2f2(0x15f):_0x5e8124();break;case _0x51d2f2(0x1a6):_0x5cf9be(),workerSendMsg(_0x460803,_0x3bfb72);break;case _0x51d2f2(0x1ef):_0x23fb52(),workerSendMsg(_0x116975,{'type':'reset','msg':_0x3bfb72});break;case _0x51d2f2(0x1ab):_0x23fb52(),workerSendMsg(_0x116975,{'type':_0x51d2f2(0x168)}),setTimeout(()=>{_0x2eed4a();},0x3e8);break;case'getGlobalInfo':_0x5486d7(),workerSendMsg(_0x40e1e3,_0x3bfb72);break;case _0x51d2f2(0x1af):console[_0x51d2f2(0x1a9)](_0x51d2f2(0x16d)),_0x331afa['startUpdate']();break;case'initBackupWorker':_0x4c00b7();break;case'stopIndexWorker':if(_0x3bfb72[_0x51d2f2(0x1b3)]==_0x51d2f2(0x1fc))_0x110204&&(_0x110204[_0x51d2f2(0x1b2)](),_0x110204=null,photoIndexWorkerIsRunning=![]);else{if(_0x3bfb72[_0x51d2f2(0x1b3)]==_0x51d2f2(0x18d))_0x205b67&&(_0x205b67[_0x51d2f2(0x1b2)](),_0x205b67=null,movieIndexWorkerIsRunning=![]);else{if(_0x3bfb72[_0x51d2f2(0x1b3)]=='music')_0x9095a9&&(_0x9095a9[_0x51d2f2(0x1b2)](),_0x9095a9=null,musicIndexWorkerIsRunning=![]);else _0x3bfb72[_0x51d2f2(0x1b3)]==_0x51d2f2(0x203)&&(_0x38594c&&(_0x38594c[_0x51d2f2(0x1b2)](),_0x38594c=null,bookIndexWorkerIsRunning=![]));}}break;case _0x51d2f2(0x1cc):_0x88f994(_0x3bfb72);break;case'fileShareRestart':if(_0x3bfb72[_0x51d2f2(0x18e)]==_0x51d2f2(0x1e4))_0x24dd03(),workerSendMsg(_0x1f9502,_0x3bfb72);else _0x3bfb72['shareType']=='FTP'&&(_0x59b71f(),workerSendMsg(_0x5d8f0f,_0x3bfb72));break;case _0x51d2f2(0x16a):_0x236a6c(),workerSendMsg(_0x585641,{'type':_0x51d2f2(0x164),'force':0x1});break;case _0x51d2f2(0x1ab):_0x236a6c(),setTimeout(()=>{_0x2eed4a();},0x3e8);break;case'nasAccountLogin':_0x23fb52(),workerSendMsg(_0x116975,{'type':_0x51d2f2(0x1d2)}),_0x236a6c(),setTimeout(()=>{_0x2eed4a();},0x3e8);break;case _0x51d2f2(0x1b4):_0x331afa[_0x51d2f2(0x1b4)]();break;case _0x51d2f2(0x17f):_0x1ce658();break;case _0x51d2f2(0x1a1):_0x38e182();break;case _0x51d2f2(0x171):_0x246e7e();break;case _0x51d2f2(0x201):_0x22c083(_0x3bfb72[_0x51d2f2(0x1fd)]);break;case _0x51d2f2(0x1ad):_0x2038b7(_0x3bfb72[_0x51d2f2(0x1fd)]);break;case'Relaunch':console[_0x51d2f2(0x1a9)](_0x51d2f2(0x1ae));if(app)app[_0x51d2f2(0x172)]();_0x331afa[_0x51d2f2(0x177)](dbu);break;case _0x51d2f2(0x18a):break;case'shell':if(shell){if(_0x3bfb72[_0x51d2f2(0x19d)]==_0x51d2f2(0x1f6))_0x3bfb72[_0x51d2f2(0x1ee)]&&shell[_0x51d2f2(0x1f6)](_0x3bfb72[_0x51d2f2(0x1ee)]);else{if(_0x3bfb72['shellType']=='openPath')_0x3bfb72['path']&&shell[_0x51d2f2(0x1ba)](_0x3bfb72[_0x51d2f2(0x1ee)])[_0x51d2f2(0x1bd)](_0x45436d=>{const _0x301182=_0x51d2f2;console[_0x301182(0x1a9)](_0x301182(0x1b8));})[_0x51d2f2(0x1cb)](_0x523985=>{const _0x45d6b3=_0x51d2f2;console[_0x45d6b3(0x1a9)](_0x45d6b3(0x1f3),_0x523985);});else _0x3bfb72['shellType']==_0x51d2f2(0x169)&&(_0x3bfb72[_0x51d2f2(0x1ee)]&&shell['trashItem'](_0x3bfb72[_0x51d2f2(0x1ee)])[_0x51d2f2(0x1bd)](_0x45e91f=>{const _0x4791d0=_0x51d2f2;console[_0x4791d0(0x1a9)](_0x4791d0(0x1f9));})[_0x51d2f2(0x1cb)](_0x52c9f8=>{const _0x1ac99c=_0x51d2f2;console[_0x1ac99c(0x1a9)](_0x1ac99c(0x160),_0x52c9f8);}));}}break;}}catch(_0x1dd358){console['log'](_0x51d2f2(0x170),_0x1dd358);}});}});});}if(app){const gotTheLock=app[_0x2add9d(0x166)]();!gotTheLock?(app['quit'](),process['kill'](process['pid'],'SIGTERM')):(app['on'](_0x2add9d(0x1a8),(_0x15dc43,_0x26e44b,_0x141038)=>{const _0x44077c=_0x2add9d;if(mainWindow){if(mainWindow[_0x44077c(0x1da)]())mainWindow[_0x44077c(0x155)]();!mainWindow[_0x44077c(0x163)]()&&mainWindow['show'](),mainWindow[_0x44077c(0x154)]();}}),init());}else init();process['on']('uncaughtException',(_0x1ec98b,_0x3f3aa4)=>{const _0x123d54=_0x2add9d;console[_0x123d54(0x1a9)](_0x123d54(0x1e6),_0x1ec98b);});function _0x2fe7(){const _0x5b7bc1=['myWorkers/ai/aiFaceUtil.js','myWorkers/proxy/proxyWorker.js','findByTitle','3335838LHgFMy','count','shellType','ddnsIpv4Address','nasRemoteState','message','startFaceAiWork','./utils/globalInfoUtil','426774EiHnoQ','Closing\x20NasCab\x20ddns','./db/dbFileShare','M3u8Transcode','FRP\x20OFF','second-instance','log','\x20server_type=\x27WebDav\x27','nasCabLogout','close','expressStartedHttps','Relaunch\x20Restart','startUpdate','NEW_MOVIE_INDEX','getTime','kill','source_type','createUserFolder','http://localhost','NEW_TINY_IMAGE','getRootPath','已打开路径','refresh','openPath','HTTP\x20服务正在运行[HTTP\x20server\x20is\x20running]\x20:','myWorkers/ai/aiSimilarPhotos.js','then','setupPrimary','error','push','./db/dbConfigTable','did-finish-load','NEW_PHOTO_INDEX','397856WveTDR','initDbu','START_WORKER_FILE_OPERATION','myWorkers/index/movieIndexWorker.js','myWorkers/expressWorker.js','send','getIpv4Address','catch','startScanPath','aiSimilarPhotoEnable','nasRemoteEnable','./db/dbUserTable','http://localhost:','DDNS\x20worker\x20is\x20stopped','reset','openDev','value','app','myWorkers/index/bookIndexWorker.js','HTTP\x20服务运行端口[HTTP\x20server\x20running\x20on\x20port]:','3aCTOYH','START_WORKER_BG_TASK','isMinimized','dbOther','processList','音乐索引线程已退出[Music\x20indexing\x20worker\x20exited]','addProcessRecord','initTray','页面加载失败','myWorkers/bg/backupWorker.js','webDavServer','localhost','WebDav','expireTokenOnTime','main\x20error:','108930Ppspzi','nasDdnsState','SWITCH_MOVIE_INFO','run','./utils/initUtil','send\x20message\x20callback\x20','?token=','path','nasProxyRestart','myWorkers/m3u8Worker.js','myWorkers/index/photoIndexWorker.js','loadURL','打开路径失败','resolve','SIGTERM','showItemInFolder','照片索引线程已退出[Photos\x20indexing\x20worker\x20exited]','Ftp\x20worker\x20is\x20stopped','已经放入回收站','------Watch\x20worker\x20is\x20stopped------','username','photo','exressPort','Webdav\x20worker\x20is\x20stopped','setLanguage','create','expressStarted','页面加载完成','book','http://','electron','getFreePort','deleteByTitle','579126yTnmUM','initWindowEventAndLoadLoading','focus','restore','getAllByWhere','433416xReaDP','电影索引线程已退出[Movies\x20indexing\x20worker\x20exited]','loadUrl','addScanTaskWhenStart','init','5DVVTGq','fail','14WFNvkJ','START_PRE_GEN_SUBTITLE','放入回收站失败','HTTPS\x20服务正在运行[HTTPS\x20server\x20is\x20running]\x20:','type','isVisible','start','restartWatcher','requestSingleInstanceLock','webContents','stop','trash','nasDdnsRestart','NasCab\x20Api\x20进程数量\x20[NasCab\x20api\x20thread\x20count]:','aiClassesEnable','Start\x20checking\x20for\x20updates','NasCab\x20api\x20server\x20restarting\x20','Clientless\x20service\x20mode','main\x20err','startSimilarPhotoWork','relaunch','myWorkers/ddnsWorker.js','刷新页面','UPDATE\x20bg_task\x20SET\x20task_state=3\x20where\x20task_state=1','myWorkers/shareFolder/shareFtp.js','exitApp','child_process','/#/','getConfigApiPort','FTPServer','whenReady','myWorkers/bg/bgTaskWorker.js','shell','startClassesAiWork','runNewVersionTask','prepare','killed','myWorkers/bg/fileOperationWorker.js','9cAgczK','proxyWorker\x20exit','createMainWindow','reloadHomePage','length','stringify','expressEnded','关闭\x20proxyWorker','启用\x20frp','movie','shareType','myWorkers/index/fileWatcherWorker.js','HTTPS\x20服务运行端口[HTTPS\x20server\x20running\x20on\x20port]:','107156NZIFRQ','getServerRootPath','did-fail-load','exit','myWorkers/movieInfoWorker.js','图书索引线程已退出[Books\x20indexing\x20worker\x20exited]','myWorkers/index/musicIndexWorker.js'];_0x2fe7=function(){return _0x5b7bc1;};return _0x2fe7();}